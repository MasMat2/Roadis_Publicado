"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[2096],{12846:(O,_,t)=>{t.d(_,{Y:()=>h});var v=t(50986),f=t(94650),p=t(2060);class h{constructor(a){this.modalMensajeService=a}validarCamposRequeridos(a){Object.keys(a.controls).forEach(l=>{const d=a.controls[l];d.markAsTouched({onlySelf:!0}),d.markAsDirty({onlySelf:!0})})}validarCamposRequeridosConMensaje(a){Object.keys(a.controls).forEach(l=>{const d=a.controls[l];d.markAsTouched({onlySelf:!0}),d.markAsDirty({onlySelf:!0})}),Object.keys(a.controls).some(l=>{const d=a.controls[l];return!!(d.errors&&d.errors.required&&d.invalid)&&(this.modalMensajeService.modalError(v.g.MENSAJE_REQUERIDOS),!0)})}markAsUntouched(a){Object.keys(a.controls).forEach(l=>{a.controls[l].markAsUntouched({onlySelf:!0})})}static#o=this.\u0275fac=function(l){return new(l||h)(f.LFG(p.V))};static#i=this.\u0275prov=f.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}},82096:(O,_,t)=>{t.r(_),t.d(_,{CodigoPostalModule:()=>E});var v=t(33369),f=t(51757),p=t(20388),h=t(41283),b=t(63405),a=t(9116),l=t(85087),d=t(13050),g=t(50986);class I{constructor(){}}var o=t(94650),P=t(2060),S=t(12846),m=t(24006),T=t(36895),R=t(88796);function Z(u,i){1&u&&(o.TgZ(0,"div",25),o._uU(1," El c\xf3digo postal es requerido "),o.qZA())}function N(u,i){1&u&&(o.TgZ(0,"div",25),o._uU(1," El c\xf3digo postal es requerido (5 d\xedgitos) "),o.qZA())}function D(u,i){1&u&&(o.TgZ(0,"div",25),o._uU(1," El c\xf3digo postal tiene un formato inv\xe1lido "),o.qZA())}function L(u,i){1&u&&(o.TgZ(0,"div",25),o._uU(1," La colonia es requerida "),o.qZA())}function F(u,i){1&u&&(o.TgZ(0,"div",25),o._uU(1," El municipio es requerido "),o.qZA())}class C{constructor(i,n,e,s,r){this.bsModalRef=i,this.municipioService=n,this.mensajeService=e,this.formularioService=s,this.codigoPostalService=r,this.placeHolderSelect=g.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=g.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.mensajeAgregar="El c\xf3digo postal ha sido agregado",this.mensajeEditar="El c\xf3digo postal ha sido modificado",this.btnSubmit=!1,this.codigoPostal=new I,this.municipioList=[]}ngOnInit(){this.consultarMunicipio()}consultarMunicipio(){this.municipioService.consultarParaSelector().subscribe(i=>{this.municipioList=i,this.codigoPostal.idMunicipio>0&&(this.idMunicipio=this.codigoPostal.idMunicipio)})}enviarFormulario(i){if(this.btnSubmit=!0,!i.valid)return this.formularioService.validarCamposRequeridos(i),void(this.btnSubmit=!1);this.codigoPostal.idMunicipio=this.idMunicipio,this.accion===g.g.MODAL_ACCION_AGREGAR?this.agregar():this.accion===g.g.MODAL_ACCION_EDITAR&&this.editar()}agregar(){this.codigoPostalService.agregar(this.codigoPostal).subscribe(i=>{this.mensajeService.modalExito(this.mensajeAgregar),this.onClose(!0)},i=>{this.btnSubmit=!1})}editar(){this.codigoPostalService.editar(this.codigoPostal).subscribe(i=>{this.mensajeService.modalExito(this.mensajeEditar),this.onClose(!0)},i=>{this.btnSubmit=!1})}cancelar(){this.onClose(!0)}static#o=this.\u0275fac=function(n){return new(n||C)(o.Y36(p.UZ),o.Y36(f.G),o.Y36(P.V),o.Y36(S.Y),o.Y36(v.R))};static#i=this.\u0275cmp=o.Xpm({type:C,selectors:[["app-codigo-postal-formulario"]],decls:44,vars:14,consts:[[1,"d-flex"],[1,"barra-lateral-modal"],[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],[1,"far","fa-times-circle"],["novalidate","novalidate",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],["id","modal",1,"modal-body"],[1,"row"],[1,"col-md-2"],[1,"form-group"],[1,"label-input","required-label"],["name","codigoPostal","type","text","pattern","[0-9]+","maxlength","5","minlength","5","autocomplete","off","required","","autofocus","",1,"form-control",3,"ngModel","ngModelChange"],["CodigoPostal","ngModel"],["class","error",4,"ngIf"],[1,"col-md-5"],["name","colonia","type","text","maxlength","200","autocomplete","off","required","",1,"form-control",3,"ngModel","ngModelChange"],["Colonia","ngModel"],["name","municipio","bindLabel","nombre","bindValue","idMunicipio","appendTo","body",3,"items","ngModel","placeholder","notFoundText","required","ngModelChange"],["Municipio","ngModel"],[1,"modal-footer"],[1,"text-center"],["type","button",1,"btn-secundario","mr-3",3,"click"],["type","submit",1,"btn-primario","btn-margin-left",3,"disabled"],[1,"error"]],template:function(n,e){if(1&n){const s=o.EpF();o.TgZ(0,"div",0),o._UZ(1,"div",1),o.TgZ(2,"div",2)(3,"div",3)(4,"div"),o._uU(5),o.qZA(),o.TgZ(6,"button",4),o.NdJ("click",function(){return e.cancelar()}),o._UZ(7,"i",5),o.qZA()(),o.TgZ(8,"form",6,7),o.NdJ("keydown.enter",function(c){return c.preventDefault()})("ngSubmit",function(){o.CHM(s);const c=o.MAs(9);return o.KtG(e.enviarFormulario(c))}),o.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"label",12),o._uU(15,"C\xf3digo Postal"),o.qZA(),o.TgZ(16,"div")(17,"input",13,14),o.NdJ("ngModelChange",function(c){return e.codigoPostal.codigoPostal1=c}),o.qZA(),o.YNc(19,Z,2,0,"div",15),o.YNc(20,N,2,0,"div",15),o.YNc(21,D,2,0,"div",15),o.qZA()()(),o.TgZ(22,"div",16)(23,"div",11)(24,"label",12),o._uU(25,"Colonia"),o.qZA(),o.TgZ(26,"div")(27,"input",17,18),o.NdJ("ngModelChange",function(c){return e.codigoPostal.colonia=c}),o.qZA(),o.YNc(29,L,2,0,"div",15),o.qZA()()(),o.TgZ(30,"div",16)(31,"div",11)(32,"label",12),o._uU(33,"Municipio"),o.qZA(),o.TgZ(34,"div")(35,"ng-select",19,20),o.NdJ("ngModelChange",function(c){return e.idMunicipio=c}),o.qZA(),o.YNc(37,F,2,0,"div",15),o.qZA()()()()(),o.TgZ(38,"div",21)(39,"div",22)(40,"button",23),o.NdJ("click",function(){return e.cancelar()}),o._uU(41,"Cancelar"),o.qZA(),o.TgZ(42,"button",24),o._uU(43,"Guardar"),o.qZA()()()()()()}if(2&n){const s=o.MAs(18),r=o.MAs(28),c=o.MAs(36);o.xp6(5),o.hij("C\xf3digo Postal - ",e.accion," "),o.xp6(12),o.Q6J("ngModel",e.codigoPostal.codigoPostal1),o.xp6(2),o.Q6J("ngIf",(null==s.errors?null:s.errors.required)&&s.touched),o.xp6(1),o.Q6J("ngIf",null==s.errors?null:s.errors.minlength),o.xp6(1),o.Q6J("ngIf",null==s.errors?null:s.errors.pattern),o.xp6(6),o.Q6J("ngModel",e.codigoPostal.colonia),o.xp6(2),o.Q6J("ngIf",(null==r.errors?null:r.errors.required)&&r.touched),o.xp6(6),o.Q6J("items",e.municipioList)("ngModel",e.idMunicipio)("placeholder",e.placeHolderSelect)("notFoundText",e.placeHolderNoOptions)("required",!0),o.xp6(2),o.Q6J("ngIf",(null==c.errors?null:c.errors.required)&&c.touched),o.xp6(5),o.Q6J("disabled",e.btnSubmit)}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.wO,m.nD,m.c5,m.On,m.F,T.O5,R.w9],encapsulation:2})}var G=t(62861),y=t(58390);function U(u,i){if(1&u){const n=o.EpF();o.TgZ(0,"div",7),o.NdJ("click",function(){o.CHM(n);const s=o.oxw();return o.KtG(s.agregar())}),o.TgZ(1,"button",8),o._uU(2,"Agregar C\xf3digo Postal"),o.qZA()()}}class A{constructor(i,n,e,s,r){this.mensajeService=i,this.accesoService=n,this.modalService=e,this.bsModalRef=s,this.codigoPostalService=r,this.tieneAccesoAgregar=!1,this.accesoEditar=l.v.EDITAR_CODIGO_POSTAL,this.accesoEliminar=l.v.ELIMINAR_CODIGO_POSTAL,this.cargandoGrid=!1,this.HEADER_GRID="C\xf3digo Postal",this.MENSAJE_EXITO_ELIMINAR="El c\xf3digo postal ha sido eliminado",this.TITULO_MODAL_ELIMINAR="Eliminar C\xf3digo Postal",this.columns=[{headerName:"C\xf3digo Postal",field:"codigoPostal1",minWidth:150},{headerName:"Colonia",field:"colonia",minWidth:150},{headerName:"Municipio",field:"municipio",minWidth:150},{headerName:"Estado",field:"estado",minWidth:150}]}ngOnInit(){this.accesoService.tieneAcceso(l.v.AGREGAR_CODIGO_POSTAL).subscribe({next:i=>{this.tieneAccesoAgregar=i}}),this.consultarGrid()}consultarGrid(){this.cargandoGrid=!0,this.codigoPostalService.consultarTodosParaGrid().subscribe(i=>{this.CodigoPostalList=i})}onGridClick(i){i.accion!==g.g.GRID_ACCION_EDITAR?i.accion!==g.g.GRID_ACCION_ELIMINAR||this.eliminar(i.data):this.editar(i.data.idCodigoPostal)}agregar(){this.bsModalRef=this.modalService.show(C,g.g.CONFIG_MODAL_MEDIUM),this.bsModalRef.content.accion=g.g.MODAL_ACCION_AGREGAR,this.bsModalRef.content.onClose=i=>{i&&this.consultarGrid(),this.bsModalRef.hide()}}editar(i){this.codigoPostalService.consultar(i).subscribe(n=>{this.bsModalRef=this.modalService.show(C,g.g.CONFIG_MODAL_MEDIUM),this.bsModalRef.content.codigoPostal=n,this.bsModalRef.content.accion=g.g.MODAL_ACCION_EDITAR,this.bsModalRef.content.onClose=e=>{e&&this.consultarGrid(),this.bsModalRef.hide()}})}eliminar(i){this.mensajeService.modalConfirmacion("\xbfDesea eliminar el c\xf3digo postal <strong>"+i.codigoPostal1+"</strong>?",this.TITULO_MODAL_ELIMINAR).then(n=>{this.codigoPostalService.eliminar(i.idCodigoPostal).subscribe(e=>{this.mensajeService.modalExito(this.MENSAJE_EXITO_ELIMINAR),this.consultarGrid()})})}static#o=this.\u0275fac=function(n){return new(n||A)(o.Y36(P.V),o.Y36(G.Q),o.Y36(p.tT),o.Y36(p.UZ),o.Y36(v.R))};static#i=this.\u0275cmp=o.Xpm({type:A,selectors:[["app-codigo-postal"]],decls:8,vars:7,consts:[[1,"contenedor"],[1,"titulo-contenedor"],[1,"cuerpo-contenedor"],[1,"row"],[1,"col-md-12"],["class","contenedor-agregar",3,"click",4,"ngIf"],[3,"headerName","data","children","accesoEditar","accesoEliminar","cargandoGrid","event"],[1,"contenedor-agregar",3,"click"],[1,"btn-agregar"]],template:function(n,e){1&n&&(o.TgZ(0,"div",0)(1,"div",1),o._uU(2,"C\xf3digos Postales"),o.qZA(),o.TgZ(3,"div",2)(4,"div",3)(5,"div",4),o.YNc(6,U,3,0,"div",5),o.TgZ(7,"app-grid-general",6),o.NdJ("event",function(r){return e.onGridClick(r)}),o.qZA()()()()()),2&n&&(o.xp6(6),o.Q6J("ngIf",e.tieneAccesoAgregar),o.xp6(1),o.Q6J("headerName",e.HEADER_GRID)("data",e.CodigoPostalList)("children",e.columns)("accesoEditar",e.accesoEditar)("accesoEliminar",e.accesoEliminar)("cargandoGrid",e.cargandoGrid))},dependencies:[T.O5,y.$],encapsulation:2})}const J=[{path:"",component:A,canActivate:[d.m],data:{title:"Consulta",acceso:l.v.CONSULTAR_CODIGO_POSTAL}}];class M{static#o=this.\u0275fac=function(n){return new(n||M)};static#i=this.\u0275mod=o.oAB({type:M});static#e=this.\u0275inj=o.cJS({imports:[a.Bz.forChild(J),a.Bz]})}class E{static#o=this.\u0275fac=function(n){return new(n||E)};static#i=this.\u0275mod=o.oAB({type:E});static#e=this.\u0275inj=o.cJS({providers:[v.R,f.G],imports:[b.m,h.Z,p.zk.forChild(),M]})}}}]);