"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[533],{90533:(dt,I,e)=>{e.r(I),e.d(I,{CursosColaboradorModule:()=>m});var v=e(36895),g=e(9116),p=e(15861),O=e(11620),M=e(32302),f=e(75040),r=e(50986),A=e(79619),d=e(15439),E=e(49808),t=e(94650),S=e(62861),N=e(21006),T=e(2060),b=e(25587),x=e(46558),C=e(20388),R=e(11481),Z=e(12846),P=e(58390),G=e(40603),y=e(1581);const L=["gridPerfil"];function Y(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"div")(1,"app-grid-general",14,15),t.NdJ("event",function(c){t.CHM(o);const l=t.oxw();return t.KtG(l.onGridClick(c))}),t.qZA()()}if(2&n){const o=t.oxw();t.xp6(1),t.Q6J("headerName",o.HEADER_GRID)("data",o.proyectoList)("gridOptions",o.gridOptions)("children",o.columns)("accesoEditar",o.EDITAR_GUIA)("accesoEliminar",o.ELIMINAR_GUIA)("disableEdit",!0)("disableDelete",!0)}}function D(n,i){if(1&n&&(t.TgZ(0,"div",21),t._UZ(1,"app-tarjeta",22),t.qZA()),2&n){const o=i.$implicit,a=t.oxw(2);t.xp6(1),t.Q6J("titulo",o.nombre)("clave",o.clave)("numeroParticipantes",o.participantes)("porcentajeAciertos",o.porcentajeAciertos)("imagen",a.imagen.bind(a))("idImagen",o.idProyectoImagen)("idProyecto",o.idProyecto)("fechaInicio",o.fechaInicio)("fechaFin",o.fechaFin)("esColaborador",!0)}}function F(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"div"),t._UZ(1,"div",16),t.TgZ(2,"div",10)(3,"div",17)(4,"div",18),t.YNc(5,D,2,10,"div",19),t.qZA()(),t.TgZ(6,"mat-paginator",20),t.NdJ("page",function(c){t.CHM(o);const l=t.oxw();return t.KtG(l.onPageChange(c))}),t.qZA()()()}if(2&n){const o=t.oxw();t.xp6(5),t.Q6J("ngForOf",o.pagedItems),t.xp6(1),t.Q6J("length",o.tarjetasList.length)("pageSize",o.pageSize)("pageSizeOptions",o.pageSizeOptions)}}function U(n,i){if(1&n&&(t.TgZ(0,"div")(1,"div",33)(2,"div",34),t._UZ(3,"img",35),t.qZA(),t.TgZ(4,"div",36)(5,"div",2)(6,"div",26)(7,"b"),t._uU(8),t.qZA()(),t.TgZ(9,"div",30),t._uU(10),t.qZA()()()()()),2&n){const o=i.$implicit;t.xp6(3),t.Q6J("src",o.imagen,t.LSH),t.xp6(5),t.hij("Porcentaje de aciertos ",null==o?null:o.aciertos,"%"),t.xp6(2),t.hij(" ",null==o?null:o.nombre," ")}}function j(n,i){if(1&n&&(t.TgZ(0,"div",23)(1,"div",2)(2,"div",24)(3,"div",25)(4,"div",2)(5,"div",26)(6,"b"),t._uU(7),t.qZA()(),t.TgZ(8,"div",27),t._uU(9," Cursos Evaluados "),t.qZA()()()(),t.TgZ(10,"div",24)(11,"div",28)(12,"div",2)(13,"div",26)(14,"b"),t._uU(15),t.qZA(),t.TgZ(16,"div",27),t._uU(17," Cursos Pendientes "),t.qZA()()()()()(),t.TgZ(18,"div",29)(19,"div",30),t._uU(20),t.qZA(),t.TgZ(21,"div",31),t.YNc(22,U,11,3,"div",32),t.qZA()()()),2&n){const o=t.oxw();t.xp6(7),t.Oqu(null==o.informacionCursos?null:o.informacionCursos.evaluacionesTerminadas),t.xp6(8),t.Oqu(null==o.informacionCursos?null:o.informacionCursos.evaluacionesPendientes),t.xp6(5),t.hij(" Asignados (",null==o.informacionCursos||null==o.informacionCursos.cursos?null:o.informacionCursos.cursos.length,") "),t.xp6(2),t.Q6J("ngForOf",null==o.informacionCursos?null:o.informacionCursos.cursos)}}class h{constructor(i,o,a,c,l,at,st,rt,nt,ct){this.accesoService=i,this.encryptionService=o,this.modalMensajeService=a,this.proyectoService=c,this.router=l,this.usuarioService=at,this.bsModalRef=st,this.modalService=rt,this.sanitizer=nt,this.formularioService=ct,this.HEADER_GRID="Cursos",this.MENSAJE_EXITO_ELIMINAR="Curso eliminado exitosamente.",this.TITULO_MODAL_ELIMINAR="Eliminar Curso.",this.fechaInicio=new Date,this.fechaFin=new Date,this.idPerfilesSeleccionadas=[],this.optionsFecha=r.g.CONFIG_DATEPICKER,this.tieneAccesoAgregar=!1,this.EDITAR_GUIA=f._v.Editar,this.ELIMINAR_GUIA=f._v.Eliminar,this.guiaList=[],this.proyectoList=[],this.isCollapsed=!0,this.filtro=new M.K,this.placeHolderSelect=r.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=r.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.idsEstatusList=[{idEstatus:0,nombre:"Inactivo"},{idEstatus:1,nombre:"Activo"}],this.idsEstatusSeleccionados=[],this.vista=!1,this.pageSizeOptions=[1,5,10,25,100],this.pageIndex=0,this.pagedItems=[],this.pageSize=10,this.tarjetasList=[],this.columnaDetalle=Object.assign({headerName:"",field:"",action:r.g.GRID_ACCION_VER,cellRendererSelector:s=>({component:"actionButton",params:{disabled:!1}}),minWidth:44,maxWidth:44,resizable:!1,sortable:!1,filter:!1,suppressMovable:!0,lockPosition:!0,pinned:"right"},r.g.CONFIG_COLUMN_ACTION),this.columnaVer=Object.assign({title:"Ver",action:r.g.GRID_ACCION_VER,cellRendererSelector:s=>({component:"actionButton",params:{disabled:s.data.idUsuarioResponsable!==this.idUsuarioSesion}})},r.g.CONFIG_COLUMN_ACTION),this.columns=[{headerName:"Clave",field:"clave",minWidth:50,width:50},{headerName:"Estatus",field:"estatus",minWidth:50,width:100,valueGetter:s=>s.data.estatus?"Activo":"Inactivo"},{headerName:"Fecha Alta",field:"fechaAlta",minWidth:100,width:100,cellRenderer:s=>d(s.data.fechaAlta).format("DD/MM/YYYY"),valueGetter:s=>d(s.data.fechaAlta).format("DD/MM/YYYY")},{headerName:"Curso",field:"nombre",minWidth:200,width:200},{headerName:"Fecha Inicio",field:"fechaInicio",minWidth:100,width:100,cellRenderer:s=>d(s.data.fechaInicio).format("DD/MM/YYYY"),valueGetter:s=>d(s.data.fechaInicio).format("DD/MM/YYYY")},{headerName:"Fecha Fin",field:"fechaFin",minWidth:100,width:100,cellRenderer:s=>d(s.data.fechaFin).format("DD/MM/YYYY"),valueGetter:s=>d(s.data.fechaFin).format("DD/MM/YYYY")},{headerName:"Locaci\xf3n",field:"sucursal",minWidth:200,width:200},{headerName:"Cantidad Participantes",field:"participantes",minWidth:200,width:200}]}ngOnInit(){var i=this;return(0,p.Z)(function*(){i.height="calc(80vh - 55px)",i.consultarUsuarioSesion(),i.consultarGrid(),i.consultarInformacionCursos(),i.accesoService.tieneAcceso(f._v.Agregar).subscribe(o=>{i.tieneAccesoAgregar=o})})()}consultarGrid(){this.proyectoService.consultarGeneralCursosColaborador().subscribe(i=>{this.proyectoList=i}),this.consultarCuadricula()}consultarInformacionCursos(){this.proyectoService.consultarInformacionCursosColaborador().subscribe(i=>{this.informacionCursos=i,this.informacionCursos.cursos.forEach(o=>{this.proyectoService.consultar(o.idProyecto).subscribe(a=>{o.imagen="data:"+a.proyectoImagen.archivoTipoMime+";base64,"+a.proyectoImagen.archivo})})})}consultarUsuarioSesion(){var i=this;return(0,p.Z)(function*(){const o=yield i.usuarioService.consultarMiPerfil().toPromise();i.idUsuarioSesion=o.idUsuario})()}onGridClick(i){i.accion===r.g.GRID_ACCION_EDITAR?this.editar(i.data.idProyecto):i.accion===r.g.GRID_ACCION_ELIMINAR?this.eliminar(i.data):i.accion===r.g.GRID_ACCION_VER&&this.ver(i.data)}editar(i){this.proyectoService.consultar(i).subscribe(o=>{var a=this.sanitizer.bypassSecurityTrustResourceUrl(`data:${o.proyectoImagen.archivoTipoMime};base64,${o.proyectoImagen.archivo}`);o.proyectoImagen.imagenUrl=a;const c={accion:r.g.COMPONENT_ACCION_EDITAR,proyecto:o,idProyecto:i};this.bsModalRef=this.modalService.show(A.j,{initialState:c,...r.g.CONFIG_MODAL_LARGE}),this.bsModalRef.content.onClose=l=>{l&&this.consultarGrid(),this.bsModalRef.hide()}})}eliminar(i){this.modalMensajeService.modalConfirmacion("\xbfDesea eliminar el proyecto de implementaci\xf3n <strong>"+i.nombre+"</strong>?",this.TITULO_MODAL_ELIMINAR,r.g.ICONO_CRUZ).then(o=>{this.proyectoService.eliminar(i.idProyecto).subscribe(a=>{this.modalMensajeService.modalExito(this.MENSAJE_EXITO_ELIMINAR),this.consultarGrid()})})}ver(i){this.router.navigate(["/administrador/proyectos/proyecto/ver"],{queryParams:this.encryptionService.generateURL({i:i.idProyecto.toString(),n:i.nombre})})}cancelar(){this.onClose(!1),this.bsModalRef.hide()}agregar(){this.bsModalRef=this.modalService.show(A.j,r.g.CONFIG_MODAL_LARGE),this.bsModalRef.content.accion=r.g.MODAL_ACCION_AGREGAR,this.bsModalRef.content.onClose=i=>{i&&this.consultarGrid(),this.bsModalRef.hide()}}modoTarjetaLista(){this.vista=!this.vista}loadPagedItems(){const i=this.pageIndex*this.pageSize,o=i+this.pageSize;this.pagedItems=this.tarjetasList.slice(i,o)}onPageChange(i){this.pageIndex=i.pageIndex,this.pageSize=i.pageSize,this.loadPagedItems()}consultarCuadricula(){this.proyectoService.consultarCursosColaboradorCuadricula().subscribe(i=>{this.tarjetasList=i,this.loadPagedItems()})}imagen(i){return this.proyectoService.consultarImagen(i)}editarCuadricula(i){this.editar(i)}eliminarCuadricula(i){let o=new O.k;o=this.proyectoList.find(a=>a.idProyecto===i),this.eliminar(o)}isCollapsedFunction(){this.isCollapsed=!this.isCollapsed,this.isCollapsed?this.height="calc(80vh - 55px)":this.height="calc(64vh - 55px)"}enviarFormulario(i){i.valid?(this.idsEstatusSeleccionados.includes(0)&&(this.filtro.inactivo=!0),this.idsEstatusSeleccionados.includes(1)&&(this.filtro.activo=!0),this.proyectoService.consultarFiltro(this.filtro).subscribe(o=>{this.proyectoList=o,this.reiniciarFiltro()}),this.consultarCuadricula()):this.formularioService.validarCamposRequeridos(i)}reiniciarFiltro(){this.filtro.activo=!1,this.filtro.inactivo=!1}obtenerImagen(i){var o=this;return(0,p.Z)(function*(){let a=yield(0,E.n)(o.proyectoService.consultar(i));return"data"+a.proyectoImagen.archivoTipoMime+";base64,"+a.proyectoImagen.archivo})()}static#t=this.\u0275fac=function(o){return new(o||h)(t.Y36(S.Q),t.Y36(N.C),t.Y36(T.V),t.Y36(b.X),t.Y36(g.F0),t.Y36(x.i),t.Y36(C.UZ),t.Y36(C.tT),t.Y36(R.H7),t.Y36(Z.Y))};static#o=this.\u0275cmp=t.Xpm({type:h,selectors:[["app-cursos-colaborador"]],viewQuery:function(o,a){if(1&o&&t.Gf(L,5),2&o){let c;t.iGM(c=t.CRH())&&(a.gridPerfil=c.first)}},decls:16,vars:5,consts:[[1,"contenedor"],[1,"cuerpo-contenedor"],[1,"row"],[1,"titulo-contenedor"],[1,"col-md-8"],[1,"contenedor-derecha"],["type","button","title","Mostrar tarjetas",1,"botones-icono",3,"disabled","click"],["src","assets/img/svg/ico-20x20-Grid-Bloques.svg","alt","..."],["type","button","title","Mostrar grid",1,"botones-icono",3,"disabled","click"],["src","assets/img/svg/ico-20x20-Grid-Lista.svg","alt","..."],[1,"row","justify-content-center"],[1,"col-md-10"],[4,"ngIf"],["class","col-md-2",4,"ngIf"],[3,"headerName","data","gridOptions","children","accesoEditar","accesoEliminar","disableEdit","disableDelete","event"],["gridNecesidad",""],[1,"row",2,"height","30px"],[1,"col-md-11"],[1,"row","row-cols-1","row-cols-md-4","g-4"],["class","col",4,"ngFor","ngForOf"],[3,"length","pageSize","pageSizeOptions","page"],[1,"col"],[3,"titulo","clave","numeroParticipantes","porcentajeAciertos","imagen","idImagen","idProyecto","fechaInicio","fechaFin","esColaborador"],[1,"col-md-2"],[1,"col-6"],[1,"circle-green"],[1,"col-12",2,"color","rgb(20, 94, 222)"],[1,"col-12",2,"color","blueviolet"],[1,"circle-orange"],[1,"row","mt-3"],[1,"col-12"],[1,"col-12","mt-1"],[4,"ngFor","ngForOf"],[1,"row",2,"display","flex","justify-content","center","align-items","center"],[1,"col-4"],["alt","",2,"height","8vh",3,"src"],[1,"col-8"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"Capacitaci\xf3n"),t.qZA(),t.TgZ(5,"div",4)(6,"div",5)(7,"button",6),t.NdJ("click",function(){return a.modoTarjetaLista()}),t._UZ(8,"img",7),t.qZA(),t.TgZ(9,"button",8),t.NdJ("click",function(){return a.modoTarjetaLista()}),t._UZ(10,"img",9),t.qZA()()()(),t.TgZ(11,"div",10)(12,"div",11),t.YNc(13,Y,3,8,"div",12),t.YNc(14,F,7,4,"div",12),t.qZA(),t.YNc(15,j,23,4,"div",13),t.qZA()()()),2&o&&(t.xp6(7),t.Q6J("disabled",!a.vista),t.xp6(2),t.Q6J("disabled",a.vista),t.xp6(4),t.Q6J("ngIf",!0===a.vista),t.xp6(1),t.Q6J("ngIf",!1===a.vista),t.xp6(1),t.Q6J("ngIf",!1===a.vista))},dependencies:[v.sg,v.O5,P.$,G.O,y.NW],styles:['@charset "UTF-8";.excel[_ngcontent-%COMP%]{color:#217346}.word[_ngcontent-%COMP%]{color:#2b579a}.powerpoint[_ngcontent-%COMP%]{color:#b7472a}.pdf[_ngcontent-%COMP%]{color:#b30b00}.upload[_ngcontent-%COMP%]{color:#33b64c}.notUpload[_ngcontent-%COMP%]{color:#e53b3b}.estatus[_ngcontent-%COMP%]{background-repeat:no-repeat;aspect-ratio:1/1;width:15px}.botones-icono[_ngcontent-%COMP%]{border:none;background-color:#fff}.contenedor-derecha[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:center}.circle-green[_ngcontent-%COMP%]{width:12vh;height:12vh;border:5px solid #4CAF50;border-radius:50%;display:flex;justify-content:center;align-items:center;text-align:center}.circle-orange[_ngcontent-%COMP%]{width:12vh;height:12vh;border:5px solid #ffae00;border-radius:50%;display:flex;justify-content:center;align-items:center;text-align:center}']})}var z=e(13050);const J=[{path:"",component:h,canActivate:[z.m]}];class u{static#t=this.\u0275fac=function(o){return new(o||u)};static#o=this.\u0275mod=t.oAB({type:u});static#i=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(J),g.Bz]})}var Q=e(24006),W=e(43876),H=e(71436),B=e(63666),V=e(88796),X=e(41283),$=e(90061),K=e(4724),w=e(74369),_=e(92237),q=e(59241),k=e(98520),tt=e(13024),ot=e(50012),it=e(8816),et=e(92020);class m{static#t=this.\u0275fac=function(o){return new(o||m)};static#o=this.\u0275mod=t.oAB({type:m});static#i=this.\u0275inj=t.cJS({providers:[b.X],imports:[v.ez,u,Q.u5,W.m81,H.a,B.xc,V.A0,X.Z,C.zk.forChild(),$.kn,K.w,w.E,_.m,q.P4,k.G,tt.u,ot.M,y.TU,it.f,et.A]})}}}]);