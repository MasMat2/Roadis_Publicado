"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[8386],{50076:(B,E,c)=>{var t,f,C,y;c.d(E,{GW:()=>C,dk:()=>y,oK:()=>t}),(f=t||(t={})).Prompt="PROMPT",f.Camera="CAMERA",f.Photos="PHOTOS",function(f){f.Rear="REAR",f.Front="FRONT"}(C||(C={})),function(f){f.Uri="uri",f.Base64="base64",f.DataUrl="dataUrl"}(y||(y={}))},47423:(B,E,c)=>{c.d(E,{Uw:()=>J,fo:()=>d,xz:()=>O});var t=c(15861);const f=(o=>o.CapacitorPlatforms=(o=>{const e=new Map;e.set("web",{name:"web"});const r=o.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e};return r.addPlatform=(n,u)=>{r.platforms.set(n,u)},r.setPlatform=n=>{r.platforms.has(n)&&(r.currentPlatform=r.platforms.get(n))},r})(o))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});f.addPlatform,f.setPlatform;var g,o;(o=g||(g={})).Unimplemented="UNIMPLEMENTED",o.Unavailable="UNAVAILABLE";class O extends Error{constructor(e,r,i){super(e),this.message=e,this.code=r,this.data=i}}const A=o=>{var e,r,i,s,n;const u=o.CapacitorCustomPlatform||null,a=o.Capacitor||{},_=a.Plugins=a.Plugins||{},h=o.CapacitorPlatforms,j=(null===(e=h?.currentPlatform)||void 0===e?void 0:e.getPlatform)||(()=>null!==u?u.name:(o=>{var e,r;return o?.androidBridge?"android":null!==(r=null===(e=o?.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==r&&r.bridge?"ios":"web"})(o)),le=(null===(r=h?.currentPlatform)||void 0===r?void 0:r.isNativePlatform)||(()=>"web"!==j()),ue=(null===(i=h?.currentPlatform)||void 0===i?void 0:i.isPluginAvailable)||(v=>!(!X.get(v)?.platforms.has(j())&&!te(v))),te=(null===(s=h?.currentPlatform)||void 0===s?void 0:s.getPluginHeader)||(v=>{var p;return null===(p=a.PluginHeaders)||void 0===p?void 0:p.find($=>$.name===v)}),X=new Map,ve=(null===(n=h?.currentPlatform)||void 0===n?void 0:n.registerPlugin)||((v,p={})=>{const $=X.get(v);if($)return console.warn(`Capacitor plugin "${v}" already registered. Cannot register plugins twice.`),$.proxy;const x=j(),S=te(v);let U;const pe=function(){var P=(0,t.Z)(function*(){return!U&&x in p?U=U="function"==typeof p[x]?yield p[x]():p[x]:null!==u&&!U&&"web"in p&&(U=U="function"==typeof p.web?yield p.web():p.web),U});return function(){return P.apply(this,arguments)}}(),Y=P=>{let w;const D=(...R)=>{const k=pe().then(L=>{const I=((P,w)=>{var D,R;if(!S){if(P)return null===(R=P[w])||void 0===R?void 0:R.bind(P);throw new O(`"${v}" plugin is not implemented on ${x}`,g.Unimplemented)}{const k=S?.methods.find(L=>w===L.name);if(k)return"promise"===k.rtype?L=>a.nativePromise(v,w.toString(),L):(L,I)=>a.nativeCallback(v,w.toString(),L,I);if(P)return null===(D=P[w])||void 0===D?void 0:D.bind(P)}})(L,P);if(I){const N=I(...R);return w=N?.remove,N}throw new O(`"${v}.${P}()" is not implemented on ${x}`,g.Unimplemented)});return"addListener"===P&&(k.remove=(0,t.Z)(function*(){return w()})),k};return D.toString=()=>`${P.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:P,writable:!1,configurable:!1}),D},re=Y("addListener"),oe=Y("removeListener"),_e=(P,w)=>{const D=re({eventName:P},w),R=function(){var L=(0,t.Z)(function*(){const I=yield D;oe({eventName:P,callbackId:I},w)});return function(){return L.apply(this,arguments)}}(),k=new Promise(L=>D.then(()=>L({remove:R})));return k.remove=(0,t.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield R()}),k},ee=new Proxy({},{get(P,w){switch(w){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return S?_e:re;case"removeListener":return oe;default:return Y(w)}}});return _[v]=ee,X.set(v,{name:v,proxy:ee,platforms:new Set([...Object.keys(p),...S?[x]:[]])}),ee});return a.convertFileSrc||(a.convertFileSrc=v=>v),a.getPlatform=j,a.handleError=v=>o.console.error(v),a.isNativePlatform=le,a.isPluginAvailable=ue,a.pluginMethodNoop=(v,p,$)=>Promise.reject(`${$} does not have an implementation of "${p}".`),a.registerPlugin=ve,a.Exception=O,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},l=(o=>o.Capacitor=A(o))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),d=l.registerPlugin;l.Plugins;class J{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,r){var i=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(r);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n);const u=function(){var _=(0,t.Z)(function*(){return i.removeListener(e,r)});return function(){return _.apply(this,arguments)}}(),a=Promise.resolve({remove:u});return Object.defineProperty(a,"remove",{value:(_=(0,t.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield u()}),function(){return _.apply(this,arguments)})}),a;var _}removeAllListeners(){var e=this;return(0,t.Z)(function*(){e.listeners={};for(const r in e.windowListeners)e.removeWindowListener(e.windowListeners[r]);e.windowListeners={}})()}notifyListeners(e,r){const i=this.listeners[e];i&&i.forEach(s=>s(r))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,r){this.windowListeners[r]={registered:!1,windowEventName:e,pluginEventName:r,handler:i=>{this.notifyListeners(r,i)}}}unimplemented(e="not implemented"){return new l.Exception(e,g.Unimplemented)}unavailable(e="not available"){return new l.Exception(e,g.Unavailable)}removeListener(e,r){var i=this;return(0,t.Z)(function*(){const s=i.listeners[e];if(!s)return;const n=s.indexOf(r);i.listeners[e].splice(n,1),i.listeners[e].length||i.removeWindowListener(i.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const W=o=>encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),K=o=>o.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class V extends J{getCookies(){return(0,t.Z)(function*(){const e=document.cookie,r={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[s,n]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=K(s).trim(),n=K(n).trim(),r[s]=n}),r})()}setCookie(e){return(0,t.Z)(function*(){try{const r=W(e.key),i=W(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,n=(e.path||"/").replace("path=",""),u=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${r}=${i||""}${s}; path=${n}; ${u};`}catch(r){return Promise.reject(r)}})()}deleteCookie(e){return(0,t.Z)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}})()}clearCookies(){return(0,t.Z)(function*(){try{const e=document.cookie.split(";")||[];for(const r of e)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,t.Z)(function*(){try{yield e.clearCookies()}catch(r){return Promise.reject(r)}})()}}d("CapacitorCookies",{web:()=>new V});const ne=function(){var o=(0,t.Z)(function*(e){return new Promise((r,i)=>{const s=new FileReader;s.onload=()=>{const n=s.result;r(n.indexOf(",")>=0?n.split(",")[1]:n)},s.onerror=n=>i(n),s.readAsDataURL(e)})});return function(r){return o.apply(this,arguments)}}(),se=(o,e={})=>{const r=Object.assign({method:o.method||"GET",headers:o.headers},e),s=((o={})=>{const e=Object.keys(o);return Object.keys(o).map(s=>s.toLocaleLowerCase()).reduce((s,n,u)=>(s[n]=o[e[u]],s),{})})(o.headers)["content-type"]||"";if("string"==typeof o.data)r.body=o.data;else if(s.includes("application/x-www-form-urlencoded")){const n=new URLSearchParams;for(const[u,a]of Object.entries(o.data||{}))n.set(u,a);r.body=n.toString()}else if(s.includes("multipart/form-data")||o.data instanceof FormData){const n=new FormData;if(o.data instanceof FormData)o.data.forEach((a,_)=>{n.append(_,a)});else for(const a of Object.keys(o.data))n.append(a,o.data[a]);r.body=n;const u=new Headers(r.headers);u.delete("content-type"),r.headers=u}else(s.includes("application/json")||"object"==typeof o.data)&&(r.body=JSON.stringify(o.data));return r};class ce extends J{request(e){return(0,t.Z)(function*(){const r=se(e,e.webFetchExtra),i=((o,e=!0)=>o?Object.entries(o).reduce((i,s)=>{const[n,u]=s;let a,_;return Array.isArray(u)?(_="",u.forEach(h=>{a=e?encodeURIComponent(h):h,_+=`${n}=${a}&`}),_.slice(0,-1)):(a=e?encodeURIComponent(u):u,_=`${n}=${a}`),`${i}&${_}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),s=i?`${e.url}?${i}`:e.url,n=yield fetch(s,r),u=n.headers.get("content-type")||"";let _,h,{responseType:a="text"}=n.ok?e:{};switch(u.includes("application/json")&&(a="json"),a){case"arraybuffer":case"blob":h=yield n.blob(),_=yield ne(h);break;case"json":_=yield n.json();break;default:_=yield n.text()}const G={};return n.headers.forEach((j,q)=>{G[q]=j}),{data:_,headers:G,status:n.status,url:n.url}})()}get(e){var r=this;return(0,t.Z)(function*(){return r.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var r=this;return(0,t.Z)(function*(){return r.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var r=this;return(0,t.Z)(function*(){return r.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var r=this;return(0,t.Z)(function*(){return r.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var r=this;return(0,t.Z)(function*(){return r.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}d("CapacitorHttp",{web:()=>new ce})},4837:(B,E,c)=>{c.d(E,{x:()=>O});var t=c(94650),C=c(19904),y=c(93416),f=c(44826),Z=c(50986),M=c(20388),b=c(24006);const g=["inputArchivo"];class O{constructor(A,m){this.modalService=A,this.bsModalRef=m,this.label="Etiqueta",this.habilitado=!1,this.contieneAyuda=!0,this.archivoDto=new t.vpe,this.idArchivoDescarga=new t.vpe,this.idArchivoAyuda=new t.vpe}ngOnInit(){0==this.nombreArchivo.length&&(this.nombreArchivo="Archivo - Fecha - Hora")}previsualizar(){this.tipoMime.startsWith("image/")?this.previsualizarImagen():(this.bsModalRef=this.modalService.show(f.O,Z.g.CONFIG_MODAL_DEFAULT),this.bsModalRef.content.archivo=this.archivo,this.bsModalRef.content.nombre=this.nombreArchivo,this.bsModalRef.content.archivoNombre=this.nombreArchivo,this.bsModalRef.content.onClose=A=>{this.bsModalRef.hide()})}previsualizarImagen(){const A={initialState:{archivo:this.archivo,nombreImagen:this.nombreArchivo,archivoTipoMime:this.tipoMime,onCloseCallback:m=>{this.bsModalRef.hide()}},...Z.g.CONFIG_MODAL_DEFAULT};this.bsModalRef=this.modalService.show(y.U,A)}previsualizarAyuda(){this.idArchivoAyuda.emit(this.idRegistroArchivoAyuda)}fileChange(A){if(A.target.files&&A.target.files[0]){this.inputArchivo.control.markAsTouched();const m=new FileReader,l=A.target.files[0];m.readAsDataURL(l),m.onload=()=>{this.archivo=m.result.toString().split(",")[1],this.tipoMime=l.type,this.nombreArchivo=l.name;let d=new C.q;d.idArchivo=this.idRegistroArchivo,d.archivo=this.archivo,d.nombreArchivo=this.nombreArchivo,d.tipoMime=this.tipoMime,this.archivoDto.emit(d)}}}getElement(){document.getElementById(this.id).click()}descargarArchivo(){this.downl_endpoint(this.idRegistroArchivo).subscribe(m=>{if("vacio"!=m.tipoMime){let d,T=((m,l="",d=512)=>{const T=atob(m),Q=[];for(let F=0;F<T.length;F+=d){const W=T.slice(F,F+d),K=new Array(W.length);for(let H=0;H<W.length;H++)K[H]=W.charCodeAt(H);const V=new Uint8Array(K);Q.push(V)}return new Blob(Q,{type:l})})(m.archivo,m.tipoMime);d=URL.createObjectURL(T);var l=document.createElement("a");l.href=d,l.download=m.nombreArchivo,l.click()}})}static#e=this.\u0275fac=function(m){return new(m||O)(t.Y36(M.tT),t.Y36(M.UZ))};static#t=this.\u0275cmp=t.Xpm({type:O,selectors:[["app-input-archivo"]],viewQuery:function(m,l){if(1&m&&t.Gf(g,5),2&m){let d;t.iGM(d=t.CRH())&&(l.inputArchivo=d.first)}},inputs:{label:"label",nombreArchivo:"nombreArchivo",archivo:"archivo",tipoMime:"tipoMime",fechaEvidencia:"fechaEvidencia",categoria:"categoria",habilitado:"habilitado",contieneAyuda:"contieneAyuda",id:"id",indice1:"indice1",indice2:"indice2",idRegistroArchivo:"idRegistroArchivo",idRegistroArchivoAyuda:"idRegistroArchivoAyuda",downl_endpoint:"downl_endpoint"},outputs:{archivoDto:"archivoDto",idArchivoDescarga:"idArchivoDescarga",idArchivoAyuda:"idArchivoAyuda"},decls:16,vars:8,consts:[[1,"form-group",2,"margin-top","40px"],[1,"label-input","required-label",2,"margin-left","30px","margin-top","-5px","font-size","12px"],[1,"d-flex","justify-content-around"],["type","button",1,"btn-subir",3,"disabled","click"],["src","assets/img/svg/ico-15x15-Boton-Circular-Naranja-Subir_Archivo-Cargar.svg",1,"icono"],["ngModel","","type","file","autocomplete","off",1,"col-md-7",3,"id","name","hidden","change"],["inputArchivo","ngModel"],["name","nombre","type","text","maxlength","100","readonly","","disabled","",1,"form-control",2,"height","calc(1.5em + 0.75rem + 7px)  !important",3,"ngModel","ngModelChange"],["nombre","ngModel"],["src","assets/img/svg/ico-15x15-Boton-Circular-Naranja-Ver_Archivo.svg",1,"icono"],["type","button",1,"btn-subir",3,"click"],["src","assets/img/svg/ico-15x15-Boton-Circular-Naranja-Descargar.svg",1,"icono"],["type","button",1,"btn-subir","btn-ayuda",3,"disabled","click"],["src","assets/img/svg/ico-15x15-Boton-Circular-Amarillo-Ayuda.svg",1,"icono"]],template:function(m,l){1&m&&(t.TgZ(0,"div",0)(1,"label",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"button",3),t.NdJ("click",function(){return l.getElement()}),t._UZ(5,"img",4),t.qZA(),t.TgZ(6,"input",5,6),t.NdJ("change",function(T){return l.fileChange(T)}),t.qZA(),t.TgZ(8,"input",7,8),t.NdJ("ngModelChange",function(T){return l.nombreArchivo=T}),t.qZA(),t.TgZ(10,"button",3),t.NdJ("click",function(){return l.previsualizar()}),t._UZ(11,"img",9),t.qZA(),t.TgZ(12,"button",10),t.NdJ("click",function(){return l.descargarArchivo()}),t._UZ(13,"img",11),t.qZA(),t.TgZ(14,"button",12),t.NdJ("click",function(){return l.previsualizarAyuda()}),t._UZ(15,"img",13),t.qZA()()()),2&m&&(t.xp6(2),t.Oqu(l.label),t.xp6(2),t.Q6J("disabled",l.habilitado),t.xp6(2),t.Q6J("id",l.id)("name",l.label)("hidden",!0),t.xp6(2),t.Q6J("ngModel",l.nombreArchivo),t.xp6(2),t.Q6J("disabled",l.habilitado),t.xp6(4),t.Q6J("disabled",!l.contieneAyuda))},dependencies:[b.Fj,b.JJ,b.nD,b.On],styles:["[_ngcontent-%COMP%]:root{--color-primario: #3f75d2;--color-primario-hover: #F9EFFB;--color-menu: #3f75d2}.btn-subir[_ngcontent-%COMP%]{font-size:small;color:#fbe5d6;padding:0;margin:1px 5px;height:calc(1.3em + .7rem + 6px);background-color:transparent;transition:.2s;border:none;color:#fff;font-size:14px;text-align:center;border-radius:20px;text-wrap:true;max-width:100%;max-height:100%;align-content:center}.form-control[_ngcontent-%COMP%]{color:gray}.icono[_ngcontent-%COMP%]{height:80%;background-color:transparent;border-radius:50%}.icono[_ngcontent-%COMP%]:hover{background-color:#f3f3f3}.btn-ayuda[_ngcontent-%COMP%]:disabled{opacity:0}"]})}},98520:(B,E,c)=>{c.d(E,{G:()=>f});var t=c(36895),C=c(24006),y=c(94650);class f{static#e=this.\u0275fac=function(b){return new(b||f)};static#t=this.\u0275mod=y.oAB({type:f});static#r=this.\u0275inj=y.cJS({imports:[t.ez,C.u5]})}},44826:(B,E,c)=>{c.d(E,{O:()=>y});var t=c(94650),C=c(3930);class y{constructor(){this.height="80vh"}ngOnInit(){}cancelar(){this.onClose(!0)}static#e=this.\u0275fac=function(M){return new(M||y)};static#t=this.\u0275cmp=t.Xpm({type:y,selectors:[["app-pdf-visor"]],inputs:{archivo:"archivo",nombre:"nombre",archivoNombre:"archivoNombre",height:"height"},decls:7,vars:6,consts:[[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],[1,"far","fa-times-circle"],[3,"base64Src","filenameForDownload","useBrowserLocale","zoom","height"]],template:function(M,b){1&M&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div"),t._uU(3),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return b.cancelar()}),t._UZ(5,"i",3),t.qZA()(),t._UZ(6,"ngx-extended-pdf-viewer",4),t.qZA()),2&M&&(t.xp6(3),t.hij("",b.nombre," "),t.xp6(3),t.Q6J("base64Src",b.archivo)("filenameForDownload",b.archivoNombre)("useBrowserLocale",!0)("zoom","page-actual")("height",b.height))},dependencies:[C.S3]})}},19904:(B,E,c)=>{c.d(E,{q:()=>t});class t{}},33186:(B,E,c)=>{c.d(E,{Z:()=>Z});var t=c(15861),C=c(47423),y=c(50076);const f=(0,C.fo)("Camera",{web:()=>c.e(3954).then(c.bind(c,63954)).then(M=>new M.CameraWeb)});class Z{constructor(){var b=this;this.tomarFoto=(0,t.Z)(function*(){try{const g=yield f.getPhoto({quality:90,allowEditing:!0,resultType:y.dk.Base64});if(g)return{idArchivo:0,archivo:g.base64String,nombreArchivo:b.generarNombreArchivo(g.format),tipoMime:"image/"+g.format};throw new Error("Error")}catch(g){throw console.error("Error al tomar la foto:",g),g}})}generarNombreArchivo(b){const g=new Date;return`foto_${g.toISOString().split("T")[0].replace(/-/g,"")}_${g.getTime().toString().slice(-5)}.${b}`}}}}]);