"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[5463],{94654:(J,M,l)=>{l.d(M,{d:()=>u});var h=l(94650),Z=l(80529);class u{constructor(s){this.http=s,this.dataUrl="contrato/"}consultarParaGrid(){return this.http.get(this.dataUrl+"grid")}consultarParaGridParticipantes(s){return this.http.post(this.dataUrl+"gridParticipantes",s)}selectorContratosPadre(){return this.http.get(this.dataUrl+"selectorContratosPadre")}selectorContratista(s){return this.http.get(this.dataUrl+`selectorContratista/${s}`)}selectorAreas(){return this.http.get(this.dataUrl+"selectorArea")}selectorContrato(s){return this.http.post(this.dataUrl+"selectorContratos",s)}selectorLocaciones(){return this.http.get(this.dataUrl+"selectorLocaciones")}consultarParaFormulario(s){return this.http.get(this.dataUrl+`formulario/${s}`)}consultarParaConfigurar(s){return this.http.get(this.dataUrl+`guias/${s}`)}agregar(s){return console.log(s),this.http.post(this.dataUrl,s)}editarGeneral(s){return this.http.put(this.dataUrl+"general",s)}editarDocumentos(s){return this.http.put(this.dataUrl+"documentos",s)}editarAmbientales(s){return this.http.put(this.dataUrl+"ambientales",s)}eliminar(s){return this.http.delete(this.dataUrl+`${s}`)}editarTipoGuia(s,c){return this.http.post(this.dataUrl+`guias/${c}`,s)}consultarPromedios(s){return this.http.get(this.dataUrl+`promedios/${s}`)}static#e=this.\u0275fac=function(c){return new(c||u)(h.LFG(Z.eN))};static#t=this.\u0275prov=h.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}},95463:(J,M,l)=>{l.r(M),l.d(M,{CumplimientoMesModule:()=>A});var h=l(36895),Z=l(92020),u=l(41283),x=l(20388),s=l(71436),c=l(9116),w=l(86936),y=l(27974),q=l(18505),O=l(52522),E=l(50986);class j{}var Y=l(15861),Q=l(70615),R=l(77579);class ${}var e=l(94650),U=l(2060),W=l(61135),N=l(80529);class m{constructor(n){this.http=n,this.dataUrl="ContratoCierreMensual/",this.fechaSubject=new W.X(new Date),this.fecha$=this.fechaSubject.asObservable()}updateFecha(n){this.fechaSubject.next(n)}obtenerPromedioDocumental(n){return this.http.post(this.dataUrl+"ObtenerPromedioDocumental",n)}obtenerPuntaje(n){return this.http.post(this.dataUrl+"ObtenerPuntaje",n)}agregar(n){return this.http.post(this.dataUrl,n)}obtenerContrato(n){return this.http.post(this.dataUrl+"Contrato",n)}editar(n){return this.http.put(this.dataUrl,n)}static#e=this.\u0275fac=function(t){return new(t||m)(e.LFG(N.eN))};static#t=this.\u0275prov=e.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}var P=l(94654);class p{constructor(n){this.http=n,this.dataUrl="cumplimientoMes/"}cumplimientoMes(n){return this.http.post(this.dataUrl,n)}semaforizacionEvalProv(){return this.http.get(this.dataUrl+"semaforizacion-eval-prov")}static#e=this.\u0275fac=function(t){return new(t||p)(e.LFG(N.eN))};static#t=this.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}var B=l(58390),d=l(24006),I=l(383);function L(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cancelar())}),e._uU(1," Cancelar "),e.qZA(),e.TgZ(2,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onSubmit())}),e._uU(3," Guardar "),e.qZA()}if(2&i){e.oxw();const t=e.MAs(3);e.xp6(2),e.Q6J("disabled",t.form.invalid)}}function K(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",2),e._UZ(1,"app-grid-general",3),e.qZA(),e.TgZ(2,"form",4,5)(4,"div",6),e._uU(5," Ingresar Datos para Reporte Trimestral "),e.qZA(),e.TgZ(6,"div",7)(7,"div",8)(8,"div",9)(9,"label",10),e._uU(10,"Promedio Documental"),e.qZA(),e.TgZ(11,"input",11),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.cierreMensual.promedioDocumental=r)}),e.qZA()()(),e.TgZ(12,"div",8)(13,"div",9)(14,"label",10),e._uU(15,"% Observaciones en Campo"),e.qZA(),e.TgZ(16,"input",12),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.cierreMensual.observacionesenCampo=r)})("ngModelChange",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.calcularPromedioEvaluacion())}),e.qZA()()(),e.TgZ(17,"div",8)(18,"div",9)(19,"label",10),e._uU(20,"Promedio Evaluacion"),e.qZA(),e.TgZ(21,"input",13),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.cierreMensual.promedioEvaluacion=r)}),e.qZA()()()(),e.TgZ(22,"div",6),e._uU(23," Evaluaci\xf3n Proveedores Mensual "),e.qZA(),e.TgZ(24,"div",7)(25,"div",8)(26,"div",9)(27,"label",10),e._uU(28,"Servicio / Producto"),e.qZA(),e.TgZ(29,"input",14),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.cierreMensual.servicioProducto=r)})("ngModelChange",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.calcularPuntaje("001",r.cierreMensual.servicioProducto))}),e.qZA()()(),e.TgZ(30,"div",8)(31,"div",9)(32,"label",10),e._uU(33,"Atenci\xf3n a Quejas"),e.qZA(),e.TgZ(34,"input",15),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.cierreMensual.atencionQuejas=r)})("ngModelChange",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.calcularPuntaje("002",r.cierreMensual.atencionQuejas))}),e.qZA()()(),e.TgZ(35,"div",8)(36,"div",9)(37,"label",10),e._uU(38,"Legal financiero"),e.qZA(),e.TgZ(39,"input",16),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.cierreMensual.legalFinanciero=r)})("ngModelChange",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.calcularPuntaje("003",r.cierreMensual.legalFinanciero))}),e.qZA()()()(),e.TgZ(40,"div",7)(41,"div",8)(42,"div",9)(43,"label",10),e._uU(44,"Soporte T\xe9cnico"),e.qZA(),e.TgZ(45,"input",17),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.cierreMensual.soporteTecnico=r)})("ngModelChange",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.calcularPuntaje("004",r.cierreMensual.soporteTecnico))}),e.qZA()()(),e.TgZ(46,"div",8)(47,"div",9)(48,"label",10),e._uU(49,"Ciberseguridad"),e.qZA(),e.TgZ(50,"input",18),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.cierreMensual.ciberseguridad=r)})("ngModelChange",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.calcularPuntaje("005",r.cierreMensual.ciberseguridad))}),e.qZA()()(),e.TgZ(51,"div",8)(52,"div",9)(53,"label",10),e._uU(54,"HSEQ"),e.qZA(),e.TgZ(55,"input",19),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.cierreMensual.hseq=r)}),e.qZA()()()(),e.TgZ(56,"div",7)(57,"div",8)(58,"div",9)(59,"label",10),e._uU(60,"Puntaje"),e.qZA(),e.TgZ(61,"input",20),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.cierreMensual.puntaje=r)}),e.qZA()()()(),e.YNc(62,L,4,1,"ng-template",null,21,e.W1O),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("children",t.columns)("data",t.regs)("disableXLS",!0)("disableDelete",!0)("disableEdit",!0)("mostrarTodo",!0),e.xp6(10),e.Q6J("disabled",!0)("ngModel",t.cierreMensual.promedioDocumental),e.xp6(5),e.Q6J("ngModel",t.cierreMensual.observacionesenCampo),e.xp6(5),e.Q6J("disabled",!0)("ngModel",t.cierreMensual.promedioEvaluacion),e.xp6(8),e.Q6J("ngModel",t.cierreMensual.servicioProducto),e.xp6(5),e.Q6J("ngModel",t.cierreMensual.atencionQuejas),e.xp6(5),e.Q6J("ngModel",t.cierreMensual.legalFinanciero),e.xp6(6),e.Q6J("ngModel",t.cierreMensual.soporteTecnico),e.xp6(5),e.Q6J("ngModel",t.cierreMensual.ciberseguridad),e.xp6(5),e.Q6J("disabled",!0)("ngModel",t.cierreMensual.hseq),e.xp6(6),e.Q6J("disabled",!0)("ngModel",t.cierreMensual.puntaje)}}function D(i){return i>81?"#00B050":i>70?"#F7A823":"#C00000"}function g(i){const n=D(i.value);return`<text class="m-2">${i.value.toFixed(2)}</text>\n    <svg width="106" height="28" xmlns="http://www.w3.org/2000/svg">\n      <polygon points="0,5 10,5 20,14 10,23 0,23" fill=${n} />\n    </svg>`}function z(i){const n=D(i.value);return`<text class="m-2">${i.value.toFixed(2)}</text>\n    <svg width="106" height="28" xmlns="http://www.w3.org/2000/svg">\n    <circle cx="10%" cy="50%" r="9" fill=${n} />\n    </svg>`}class _ extends Q.P{constructor(n,t,a,r,o){super(n),this.modalService=t,this.contratoCierreMensualService=a,this.contratoService=r,this.cumplimientoMesService=o,this.destroy$=new R.x,this.submiting=!1,this.cierreMensual=new $,this.esEditar=!1,this.puntajes=[],this.columns=[{headerName:"Contrato",field:"numContrato",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:20,width:30},{headerName:"Estatus",field:"estatusContrato",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:30,width:50,valueFormatter:function(C){return C.value?"Activo":"Inactivo"}},{headerName:"Descripci\xf3n Breve",field:"descripcionContrato",wrapHeaderText:!0,autoHeaderHeight:!0,wrapText:!0,minWidth:30,width:50},{headerName:"Contratista",field:"contratista",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50},{headerName:"% Prom Docum",field:"promedio",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50,cellRenderer:z},{headerName:"% Empresa",field:"empresa",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50,cellRenderer:g},{headerName:"% Personal",field:"personal",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50,cellRenderer:g},{headerName:"% Materiales",field:"materiales",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50,cellRenderer:g},{headerName:"% Equipo",field:"equipo",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50,cellRenderer:g},{headerName:"% Req. Ambiental",field:"ambiental",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50,cellRenderer:g},{headerName:"% Eval. Proveed",field:"contratoPadre",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50}],this.crudConfig={nombreEntidad:"",generoGramatical:"masc",nombrePropiedadId:"idContrato"}}ngOnDestroy(){this.destroy$.next()}ngOnInit(){var n=this;return(0,Y.Z)(function*(){n.contratoCierreMensualService.fecha$.subscribe(t=>{n.fecha=t}),n.cierreMensual.idContrato=n.idEntidad,n.cierreMensual.a\u00f1o=n.fecha.getFullYear(),n.cierreMensual.mes=n.fecha.getMonth()+1,n.obtenerPromedioDocumental(),n.rellenarGrid();for(let t=1;t<=6;t++){let a={clave:"00"+t,cumplimiento:0};n.puntajes.push(a)}n.obtenerContrato()})()}rellenarGrid(){let n={idUsuarioContratista:void 0,a\u00f1o:this.fecha.getFullYear(),mes:this.fecha.getMonth()+1};this.registros$=this.cumplimientoMesService.cumplimientoMes(n),this.registros$.subscribe(t=>{this.regs=t.filter(a=>a.idContrato==this.idEntidad)})}obtenerPromedioDocumental(){let n={idContrato:this.idEntidad,a\u00f1o:this.fecha.getFullYear(),mes:this.fecha.getMonth()+1};this.contratoCierreMensualService.obtenerPromedioDocumental(n).subscribe(t=>{this.cierreMensual.promedioDocumental=t.promedioDocumental,this.cierreMensual.hseq=this.cierreMensual.promedioDocumental,this.cambiarPuntaje("006",this.cierreMensual.hseq)})}obtenerContrato(){let n={idContrato:this.idEntidad,a\u00f1o:this.fecha.getFullYear(),mes:this.fecha.getMonth()+1};this.contratoCierreMensualService.obtenerContrato(n).subscribe(t=>{t&&(this.cierreMensual=t,this.esEditar=!0)})}calcularPromedioEvaluacion(){this.cierreMensual.promedioEvaluacion=(this.cierreMensual.promedioDocumental+this.cierreMensual.observacionesenCampo)/2}cambiarPuntaje(n,t){let a=this.puntajes.find(r=>r.clave===n);a&&(a.cumplimiento=t)}calcularPuntaje(n,t){t||(t=0),t>100&&(t=100),this.cambiarPuntaje(n,t),this.contratoCierreMensualService.obtenerPuntaje(this.puntajes).subscribe(a=>{this.cierreMensual.puntaje=a.puntaje})}consultar(){}editar(){}agregar(){}cerrarModal(n){n&&(super.onClose(n),this.destroy$.next(),super.cancelar())}onSubmit(){this.esEditar?this.contratoCierreMensualService.editar(this.cierreMensual).subscribe():this.contratoCierreMensualService.agregar(this.cierreMensual).subscribe(),this.cancelar()}static#e=this.\u0275fac=function(t){return new(t||_)(e.Y36(U.V),e.Y36(x.UZ),e.Y36(m),e.Y36(P.d),e.Y36(p))};static#t=this.\u0275cmp=e.Xpm({type:_,selectors:[["app-editar-cumplimiento-mes"]],features:[e.qOj],decls:3,vars:1,consts:[[3,"titulo"],["modalBody",""],[1,"col-md-12"],[3,"children","data","disableXLS","disableDelete","disableEdit","mostrarTodo"],["novalidate","novalidate"],["formulario","ngForm"],[1,"subseccion"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"label-input","required-label"],["type","number","name","promedioDocumental","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["type","number","name","observacionesenCampo","required","","min","0","max","100",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","promedioEvaluacion","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["type","number","name","servicioProducto","required","","min","0",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","atencionQuejas","required","","min","0",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","legalFinanciero","required","","min","0",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","soporteTecnico","required","","min","0",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","ciberseguridad","required","","min","0",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","hseq","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["type","number","name","puntaje","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["modalFooter",""],["type","button",1,"btn-secundario","mr-3",3,"click"],["type","submit","form","form",1,"btn-primario","btn-margin-left",3,"disabled","click"]],template:function(t,a){1&t&&(e.TgZ(0,"app-modal-base",0),e.YNc(1,K,64,20,"ng-template",null,1,e.W1O),e.qZA()),2&t&&e.Q6J("titulo","Resultados de Cumplimiento por Mes de Contratista Editar")},dependencies:[B.$,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.Q7,d.qQ,d.Fd,d.On,d.F,I.B]})}var V=l(62861),X=l(74654),k=l(85246),H=l(90061),v=l(88796);function ee(i,n){1&i&&(e.TgZ(0,"label"),e._uU(1," Todos "),e.qZA())}function te(i,n){if(1&i&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&i){const t=n.item;e.xp6(1),e.hij(" ",t.nombre," ")}}function ne(i,n){1&i&&(e.TgZ(0,"label"),e._uU(1," Todos "),e.qZA())}function ae(i,n){if(1&i&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&i){const t=n.item;e.xp6(1),e.hij(" ",t.nombre," ")}}function re(i,n){1&i&&(e.TgZ(0,"label"),e._uU(1," Todos "),e.qZA())}function ie(i,n){if(1&i&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&i){const t=n.item;e.xp6(1),e.hij(" ",t.nombre," ")}}function oe(i,n){1&i&&e._UZ(0,"i",37)}function le(i,n){1&i&&e._UZ(0,"i",38)}const se=function(){return{minMode:"month",adaptivePosition:!0,dateInputFormat:"MM/YYYY"}};function F(i){return i>81?"#00B050":i>70?"#F7A823":"#C00000"}function S(i){return`${i<10?"  ":""}${i.toFixed(2)}`}function f(i,n=F){const t=n(i.value);return`<text class="m-2" style="white-space: pre;">${S(i.value)}</text>\n    <svg width="106" height="28" xmlns="http://www.w3.org/2000/svg">\n      <polygon points="0,5 10,5 20,14 10,23 0,23" fill=${t} />\n    </svg>`}function G(i,n=F){const t=n(i.value);return`<text class="m-2" style="white-space: pre;">${S(i.value)}</text>\n    <svg width="106" height="28" xmlns="http://www.w3.org/2000/svg">\n    <circle cx="10%" cy="50%" r="9" fill=${t} />\n    </svg>`}class b extends y.v{constructor(n,t,a,r,o,C,me){super(a,r,o),this.cumplimientoMesService=n,this.contratoService=t,this.contratoCierreMensualService=C,this.departamentoService=me,this.placeHolderSelect=E.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=E.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.MENSAJE_EXITO_BUSQUEDA="La b\xfasqueda ha sido realizada",this.NOMBRE_ENTIDAD="Contrato",this.fecha=new Date,this.filtro=new j,this.isCollapsed=!0,this.buscando=!1,this.crudConfig={nombreEntidad:this.NOMBRE_ENTIDAD,generoGramatical:"masc",nombrePropiedadId:"idContrato",formConfig:{ComponenteFormulario:_,modalConfig:O.OS.Large,configEditar:{acceso:w.bk.Modificar,params:{fecha:this.fecha}}}},this.columns=[{headerName:"Contrato",field:"numContrato",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:20,width:30},{headerName:"Estatus",field:"estatusContrato",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:30,width:50,valueFormatter:function(pe){return pe.value?"Activo":"Inactivo"}},{headerName:"Descripci\xf3n Breve",field:"descripcionContrato",wrapHeaderText:!0,autoHeaderHeight:!0,wrapText:!0,minWidth:30,width:50},{headerName:"Contratista",field:"contratista",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50},{headerName:"% Prom Docum",field:"promedio",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50,cellRenderer:G},{headerName:"% Empresa",field:"empresa",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50,cellRenderer:f},{headerName:"% Personal",field:"personal",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50,cellRenderer:f},{headerName:"% Materiales",field:"materiales",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50,cellRenderer:f},{headerName:"% Equipo",field:"equipo",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50,cellRenderer:f},{headerName:"% Req. Ambiental",field:"ambiental",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50,cellRenderer:f},{headerName:"% Eval. Proveed",field:"evalProv",wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:50,width:50}]}ngOnInit(){this.fecha=new Date,this.contratoCierreMensualService.updateFecha(this.fecha),this.setSemaforo(),this.selectorContratista(),this.selectorAreas(),super.onInit()}getSemaforo(){this.cumplimientoMesService.semaforizacionEvalProv().subscribe(n=>this.semaforo=t=>{for(const a of n)if(a.valorMinimo<=t&&a.valorMaximo>=t)return a.colorHexadecimal;return"#C00000"})}setSemaforo(){this.getSemaforo();const n=this.columns.find(t=>"evalProv"===t.field);n&&(n.cellRenderer=t=>G(t,this.semaforo))}consultarGrid(){return this.filtro.mes=this.fecha.getMonth()+1,this.filtro.a\u00f1o=this.fecha.getFullYear(),this.contratoCierreMensualService.updateFecha(this.fecha),this.cumplimientoMesService.cumplimientoMes(this.filtro)}eliminar(n){return this.contratoService.eliminar(n)}selectorAreas(){this.contratoService.selectorAreas().subscribe(n=>{this.areas=n,this.areas.forEach(t=>{t.selectedAllGroup="selectedAllGroup"})})}selectorContratista(){this.contratoService.selectorContratista().subscribe(n=>{this.contratistas=n,this.contratistas.forEach(t=>{t.selectedAllGroup="selectedAllGroup"})})}buscar(n){this.buscando=!0,this.registros$=this.consultarGrid().pipe((0,q.b)({next:()=>{n&&this.mensajeService.modalExito(this.MENSAJE_EXITO_BUSQUEDA)},complete:()=>this.buscando=!1}))}limpiarFiltros(){this.filtro.idUsuarioContratista=void 0,this.filtro.idArea=void 0,this.filtro.idDepartamento=void 0,this.filtro.mes=void 0,this.filtro.a\u00f1o=void 0,this.buscar(!1)}cargarDepartamento(n=!1){this.departamentoService.consultarPorArea(this.filtro.idArea||[0]).subscribe(t=>{this.departamentos=t,this.departamentos.forEach(a=>{a.selectedAllGroup="selectedAllGroup"}),n&&(this.filtro.idDepartamento=this.departamentos.map(a=>a.idDepartamento)),this.validarExisteDepartamento()})}marcarTodos(){this.contratistas.length==this.filtro.idUsuarioContratista?.length&&(this.filtro.idArea=this.areas.map(n=>n.id),this.cargarDepartamento(!0))}validarExisteDepartamento(){let n=this.departamentos.map(r=>r.idDepartamento),t=this.filtro.idDepartamento?[...this.filtro.idDepartamento]:[],a=[];t.forEach(r=>{if(!n.includes(r)){let o=t.findIndex(C=>C==r);o=o??-1,o>-1&&a.push(o)}}),a.sort((r,o)=>o-r),a.forEach(r=>{t.splice(r,1)}),this.filtro.idDepartamento=t}static#e=this.\u0275fac=function(t){return new(t||b)(e.Y36(p),e.Y36(P.d),e.Y36(V.Q),e.Y36(x.tT),e.Y36(U.V),e.Y36(m),e.Y36(X._))};static#t=this.\u0275cmp=e.Xpm({type:b,selectors:[["app-cumplimiento-mes"]],features:[e.qOj],decls:74,vars:41,consts:[[1,"contenedor"],[1,"titulo-contenedor"],[1,"cuerpo-contenedor"],[3,"hidden"],[1,"row"],[1,"col-md-12"],[1,"col-md-4"],[1,"form-group","col-md-9"],[1,"label-input","required-label"],["name","idUsuarioContratista","bindLabel","nombre","bindValue","id","groupBy","selectedAllGroup",3,"ngModel","placeholder","items","notFoundText","multiple","selectableGroup","selectableGroupAsModel","closeOnSelect","ngModelChange"],["idUsuarioContratista","ngModel"],["ng-optgroup-tmp",""],["ng-option-tmp",""],["name","area","bindLabel","nombre","bindValue","id","groupBy","selectedAllGroup",3,"ngModel","placeholder","items","notFoundText","multiple","selectableGroup","selectableGroupAsModel","closeOnSelect","ngModelChange"],["area","ngModel"],["name","departamento","bindLabel","nombre","bindValue","idDepartamento","groupBy","selectedAllGroup",3,"ngModel","placeholder","items","notFoundText","multiple","selectableGroup","selectableGroupAsModel","closeOnSelect","ngModelChange"],["departamento","ngModel"],[1,"col-md-12","d-flex","justify-content-center"],[1,"form-group",2,"max-width","100%"],[1,"label-input","required-label",2,"visibility","hidden"],["type","button",1,"btn-secundario","limpiar","ml-4",3,"click"],["type","button",1,"btn-primario","mr-4",3,"disabled","click"],[1,"form-row","panel-busqueda","mb-4"],[1,"panel-carga-elementos","center-element-vertically",3,"click"],[1,"titulo-panel"],[1,"arow-down-up"],["class","fa fa-chevron-down",4,"ngIf"],["class","fa fa-chevron-up",4,"ngIf"],[1,"col-auto"],[1,"form-group","fg-width-2"],[1,"date-input-container"],["name","fecha","type","text","maxlength","50","autocomplete","off","required","","bsDatepicker","",1,"form-control",3,"ngModel","bsConfig","ngModelChange"],["fechaAlta","ngModel"],[1,"fa-regular","fa-calendar-days"],["name","idUsuarioContratista","bindLabel","nombre","bindValue","id","disabled","",3,"ngModel","placeholder","items","notFoundText","multiple","ngModelChange"],[1,"row","mb-5"],["tituloBoton","Contrato",3,"columns","crudConfig","elementos$","tieneAccesoAgregar$","agregarClick","gridClick"],[1,"fa","fa-chevron-down"],[1,"fa","fa-chevron-up"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Resultados de Cumplimiento por Mes de Contratistas"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",4)(8,"div",6)(9,"div",4)(10,"div",7)(11,"label",8),e._uU(12,"Contratista"),e.qZA(),e.TgZ(13,"div")(14,"ng-select",9,10),e.NdJ("ngModelChange",function(o){return a.filtro.idUsuarioContratista=o})("ngModelChange",function(){return a.marcarTodos()}),e.YNc(16,ee,2,0,"ng-template",11),e.YNc(17,te,2,1,"ng-template",12),e.qZA()()()()(),e.TgZ(18,"div",6)(19,"div",4)(20,"div",7)(21,"label",8),e._uU(22,"\xc1rea"),e.qZA(),e.TgZ(23,"div")(24,"ng-select",13,14),e.NdJ("ngModelChange",function(o){return a.filtro.idArea=o})("ngModelChange",function(){return a.cargarDepartamento()}),e.YNc(26,ne,2,0,"ng-template",11),e.YNc(27,ae,2,1,"ng-template",12),e.qZA()()()()(),e.TgZ(28,"div",6)(29,"div",4)(30,"div",7)(31,"label",8),e._uU(32,"Departamento"),e.qZA(),e.TgZ(33,"div")(34,"ng-select",15,16),e.NdJ("ngModelChange",function(o){return a.filtro.idDepartamento=o}),e.YNc(36,re,2,0,"ng-template",11),e.YNc(37,ie,2,1,"ng-template",12),e.qZA()()()()()()()(),e.TgZ(38,"div",4)(39,"div",17)(40,"div",18)(41,"label",19),e._uU(42,"Buscar"),e.qZA(),e.TgZ(43,"button",20),e.NdJ("click",function(){return a.limpiarFiltros()}),e._uU(44," Limpiar "),e.qZA(),e.TgZ(45,"button",21),e.NdJ("click",function(){return a.buscar(!0)}),e._uU(46),e.qZA()()()()(),e.TgZ(47,"div",22)(48,"div",23),e.NdJ("click",function(){return a.isCollapsed=!a.isCollapsed}),e.TgZ(49,"span",24),e._uU(50,"Panel de B\xfasqueda"),e.qZA(),e.TgZ(51,"span",25),e.YNc(52,oe,1,0,"i",26),e.YNc(53,le,1,0,"i",27),e.qZA()()(),e.TgZ(54,"div",4)(55,"div",28)(56,"div",29)(57,"label",8),e._uU(58,"Mes/A\xf1o"),e.qZA(),e.TgZ(59,"div",30)(60,"input",31,32),e.NdJ("ngModelChange",function(o){return a.fecha=o})("ngModelChange",function(){return a.buscar(!0)}),e.qZA(),e._UZ(62,"i",33),e.qZA()()(),e.TgZ(63,"div",6)(64,"div",4)(65,"div",7)(66,"label",8),e._uU(67,"Contratista"),e.qZA(),e.TgZ(68,"div")(69,"ng-select",34,10),e.NdJ("ngModelChange",function(o){return a.filtro.idUsuarioContratista=o}),e.qZA()()()()()(),e.TgZ(71,"div",35)(72,"div",5)(73,"app-catalogo-base",36),e.NdJ("agregarClick",function(){return a.agregar()})("gridClick",function(o){return a.onGridClick(o)}),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("hidden",a.isCollapsed),e.xp6(10),e.Q6J("ngModel",a.filtro.idUsuarioContratista)("placeholder",a.placeHolderSelect)("items",a.contratistas)("notFoundText",a.placeHolderNoOptions)("multiple",!0)("selectableGroup",!0)("selectableGroupAsModel",!1)("closeOnSelect",!1),e.xp6(10),e.Q6J("ngModel",a.filtro.idArea)("placeholder",a.placeHolderSelect)("items",a.areas)("notFoundText",a.placeHolderNoOptions)("multiple",!0)("selectableGroup",!0)("selectableGroupAsModel",!1)("closeOnSelect",!1),e.xp6(10),e.Q6J("ngModel",a.filtro.idDepartamento)("placeholder",a.placeHolderSelect)("items",a.departamentos)("notFoundText",a.placeHolderNoOptions)("multiple",!0)("selectableGroup",!0)("selectableGroupAsModel",!1)("closeOnSelect",!1),e.xp6(11),e.Q6J("disabled",a.buscando),e.xp6(1),e.hij(" ",a.buscando?"Buscando...":"Buscar"," "),e.xp6(6),e.Q6J("ngIf",a.isCollapsed),e.xp6(1),e.Q6J("ngIf",!a.isCollapsed),e.xp6(7),e.Q6J("ngModel",a.fecha)("bsConfig",e.DdM(40,se)),e.xp6(9),e.Q6J("ngModel",a.filtro.idUsuarioContratista)("placeholder",a.placeHolderSelect)("items",a.contratistas)("notFoundText",a.placeHolderNoOptions)("multiple",!0),e.xp6(4),e.Q6J("columns",a.columns)("crudConfig",a.crudConfig)("elementos$",a.registros$)("tieneAccesoAgregar$",a.tieneAccesoAgregar$))},dependencies:[h.O5,k.B,d.Fj,d.JJ,d.Q7,d.nD,d.On,H.Np,H.Y5,v.w9,v.C5,v.ir],styles:[".date-input-container[_ngcontent-%COMP%]{position:relative;width:100%}.date-input-container[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{width:100%;padding-right:30px}.date-input-container[_ngcontent-%COMP%]   .fa-calendar-days[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);pointer-events:none}"]})}var de=l(13050);const ue=[{path:"",component:b,canActivate:[de.m],data:{title:"Consulta",acceso:w.gz.Consultar}}];class T{static#e=this.\u0275fac=function(t){return new(t||T)};static#t=this.\u0275mod=e.oAB({type:T});static#n=this.\u0275inj=e.cJS({imports:[c.Bz.forChild(ue),c.Bz]})}var ce=l(13024);class A{static#e=this.\u0275fac=function(t){return new(t||A)};static#t=this.\u0275mod=e.oAB({type:A});static#n=this.\u0275inj=e.cJS({imports:[h.ez,T,Z.A,u.Z,x.zk.forChild(),s.a,d.u5,H.kn,v.A0,ce.u]})}}}]);