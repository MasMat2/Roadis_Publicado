"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[8098],{74654:(I,g,o)=>{o.d(g,{_:()=>d});var h=o(94650),M=o(80529);class d{constructor(n){this.http=n,this.dataUrl="departamento/"}consultarTodosParaGrid(){return this.http.get(this.dataUrl+"consultarTodosParaGrid")}consultarTodosParaSelector(){return this.http.get(this.dataUrl+"consultarTodosParaSelector")}consultar(n){return this.http.get(this.dataUrl+`consultar/${n}`)}agregar(n){return this.http.post(this.dataUrl+"agregar",n)}editar(n){return this.http.put(this.dataUrl+"editar",n)}eliminar(n){return this.http.delete(this.dataUrl+`eliminar/${n}`)}consultarPorArea(n){return this.http.post(this.dataUrl+"area",n)}static#e=this.\u0275fac=function(E){return new(E||d)(h.LFG(M.eN))};static#t=this.\u0275prov=h.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}},78098:(I,g,o)=>{o.r(g),o.d(g,{DepartamentoModule:()=>C});var h=o(9116),M=o(13050),d=o(85087),l=o(50986),n=o(90429),E=o(49808);class O{constructor(){}}var N=o(41131),e=o(94650),v=o(20388),T=o(2060),_=o(74654),R=o(99809),m=o(24006),D=o(36895),Z=o(88796);const S=["formulario"];function L(u,t){1&u&&(e.TgZ(0,"div",25),e._uU(1," La clave es requerida "),e.qZA())}function F(u,t){1&u&&(e.TgZ(0,"div",25),e._uU(1," El nombre es requerido "),e.qZA())}function U(u,t){1&u&&(e.TgZ(0,"div",25),e._uU(1," El formato de la nombre es inv\xe1lido "),e.qZA())}class p extends N.v{constructor(t,r,a,s){super(),this.bsModalRef=t,this.modalMensajeService=r,this.departamentoService=a,this.areaService=s,this.placeHolderSelect=l.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=l.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.mensajeAgregar="El departamento ha sido agregado",this.mensajeEditar="El departamento ha sido modificado",this.btnSubmit=!1,this.areaList=[],this.departamento=new O}ngOnInit(){this.consultarAreas()}consultarAreas(){(0,E.n)(this.areaService.consultarParaSelector()).then(t=>{this.areaList=t})}esEditar(){return this.accion===l.g.MODAL_ACCION_EDITAR}limpiarFormulario(){this.departamento={},this.accion=l.g.MODAL_ACCION_AGREGAR}agregar(t){this.departamentoService.agregar(this.departamento).subscribe(r=>{this.modalMensajeService.modalExito(this.mensajeAgregar),t.reset(),this.limpiarFormulario(),this.onClose(!0),this.btnSubmit=!1},r=>{this.btnSubmit=!1})}editar(){this.departamentoService.editar(this.departamento).subscribe(t=>{this.modalMensajeService.modalExito(this.mensajeEditar),this.onClose(!0)},t=>{this.btnSubmit=!1})}cancelar(){this.onClose(!1)}enviarFormulario(t){if(this.btnSubmit=!0,!t.valid)return n.CW(t),void(this.btnSubmit=!1);this.accion===l.g.MODAL_ACCION_AGREGAR?this.agregar(t):this.accion===l.g.MODAL_ACCION_EDITAR&&this.editar()}static#e=this.\u0275fac=function(r){return new(r||p)(e.Y36(v.UZ),e.Y36(T.V),e.Y36(_._),e.Y36(R.T))};static#t=this.\u0275cmp=e.Xpm({type:p,selectors:[["app-departamento-formulario"]],viewQuery:function(r,a){if(1&r&&e.Gf(S,5),2&r){let s;e.iGM(s=e.CRH())&&(a.formulario=s.first)}},features:[e.qOj],decls:44,vars:13,consts:[[1,"d-flex"],[1,"barra-lateral-modal"],[1,"fa","fa-plus"],[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],[1,"far","fa-times-circle"],["novalidate","novalidate","formCanDeactivate","",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],["id","modal",1,"cuerpo-contenedor"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"label-input","required-label"],["id","clave","name","claveName","type","text","maxlength","20","required","required","autocomplete","off","autofocus","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["clave","ngModel"],["class","error",4,"ngIf"],["name","areaName","bindLabel","nombre","bindValue","idArea","appendTo","body",1,"select-custom",3,"items","required","ngModel","placeholder","notFoundText","ngModelChange"],["area","ngModel"],["id","nombre","name","nombreName","type","text","maxlength","50","required","required","autocomplete","off","appFormatoAlfanumerico","",1,"form-control",3,"ngModel","ngModelChange"],["nombre","ngModel"],[1,"modal-footer"],[1,"text-right"],["type","button",1,"btn-secundario","btn-margin-left",3,"click"],["type","submit",1,"btn-primario","btn-margin-left",3,"disabled"],[1,"error"]],template:function(r,a){if(1&r){const s=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"div"),e._uU(6),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return a.cancelar()}),e._UZ(8,"i",6),e.qZA()(),e.TgZ(9,"form",7,8),e.NdJ("keydown.enter",function(c){return c.preventDefault()})("ngSubmit",function(){e.CHM(s);const c=e.MAs(10);return e.KtG(a.enviarFormulario(c))}),e.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"label",13),e._uU(16,"Clave"),e.qZA(),e.TgZ(17,"div")(18,"input",14,15),e.NdJ("ngModelChange",function(c){return a.departamento.clave=c}),e.qZA(),e.YNc(20,L,2,0,"div",16),e.qZA()()(),e.TgZ(21,"div",11)(22,"div",12)(23,"label",13),e._uU(24,"\xc1rea"),e.qZA(),e.TgZ(25,"div")(26,"ng-select",17,18),e.NdJ("ngModelChange",function(c){return a.departamento.idArea=c}),e.qZA()()()(),e.TgZ(28,"div",11)(29,"div",12)(30,"label",13),e._uU(31,"Departamento"),e.qZA(),e.TgZ(32,"div")(33,"input",19,20),e.NdJ("ngModelChange",function(c){return a.departamento.nombre=c}),e.qZA(),e.YNc(35,F,2,0,"div",16),e.YNc(36,U,2,0,"div",16),e.qZA()()()()(),e.TgZ(37,"div",21)(38,"div",22)(39,"button",23),e.NdJ("click",function(){return a.cancelar()}),e._uU(40," Cancelar "),e.qZA()(),e.TgZ(41,"div",22)(42,"button",24),e._uU(43," Guardar "),e.qZA()()()()()()}if(2&r){const s=e.MAs(19),i=e.MAs(34);e.xp6(6),e.hij("Departamento - ",a.accion,""),e.xp6(12),e.Q6J("ngModel",a.departamento.clave)("disabled",a.esEditar()),e.xp6(2),e.Q6J("ngIf",(null==s.errors?null:s.errors.required)&&s.touched),e.xp6(6),e.Q6J("items",a.areaList)("required",!0)("ngModel",a.departamento.idArea)("placeholder",a.placeHolderSelect)("notFoundText",a.placeHolderNoOptions),e.xp6(7),e.Q6J("ngModel",a.departamento.nombre),e.xp6(2),e.Q6J("ngIf",(null==i.errors?null:i.errors.required)&&i.touched),e.xp6(1),e.Q6J("ngIf",null==i.errors?null:i.errors.formatoAlfanumerico),e.xp6(6),e.Q6J("disabled",a.btnSubmit)}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.nD,m.On,m.F,D.O5,Z.w9],encapsulation:2})}var G=o(62861),J=o(58390);function y(u,t){if(1&u){const r=e.EpF();e.TgZ(0,"div",7),e.NdJ("click",function(){e.CHM(r);const s=e.oxw();return e.KtG(s.agregar())}),e.TgZ(1,"button",8),e._uU(2,"Agregar Departamento"),e.qZA()()}}class f{constructor(t,r,a,s,i){this.modalMensajeService=t,this.departamentoService=r,this.accesoService=a,this.modalService=s,this.bsModalRef=i,this.tieneAccesoAgregar=!1,this.accesoEditar=d.v.EDITAR_DEPARTAMENTO,this.accesoEliminar=d.v.ELIMINAR_DEPARTAMENTO,this.HEADER_GRID="Departamentos",this.MENSAJE_EXITO_ELIMINAR="El departamento ha sido eliminado",this.TITULO_MODAL_ELIMINAR="Eliminar Departamento",this.departamentoList=[],this.columns=[{headerName:"Clave",field:"clave",minWidth:150,sort:"asc"},{headerName:"Area",field:"area",minWidth:150},{headerName:"Departamento",field:"nombre",minWidth:150}]}ngOnInit(){this.accesoService.tieneAcceso(d.v.AGREGAR_DEPARTAMENTO).subscribe(t=>{this.tieneAccesoAgregar=t}),this.consultarGrid()}consultarGrid(){this.departamentoService.consultarTodosParaGrid().subscribe(t=>{this.departamentoList=t})}onGridClick(t){t.accion===l.g.GRID_ACCION_EDITAR?this.editar(t.data.idDepartamento):t.accion===l.g.GRID_ACCION_ELIMINAR&&this.eliminar(t.data)}agregar(){this.bsModalRef=this.modalService.show(p,l.g.CONFIG_MODAL_MEDIUM),this.bsModalRef.content.accion=l.g.MODAL_ACCION_AGREGAR,this.bsModalRef.content.onClose=t=>{t&&this.consultarGrid(),n.Zm()&&this.bsModalRef.hide()}}editar(t){this.departamentoService.consultar(t).subscribe(r=>{this.bsModalRef=this.modalService.show(p,l.g.CONFIG_MODAL_MEDIUM),this.bsModalRef.content.departamento=r,this.bsModalRef.content.accion=l.g.MODAL_ACCION_EDITAR,this.bsModalRef.content.onClose=a=>{a&&this.consultarGrid(),n.Zm()&&this.bsModalRef.hide()}})}eliminar(t){this.modalMensajeService.modalConfirmacion("\xbfDesea eliminar el departamento <strong>"+t.nombre+"</strong>?",this.TITULO_MODAL_ELIMINAR,l.g.ICONO_CRUZ).then(r=>{this.departamentoService.eliminar(t.idDepartamento).subscribe(a=>{this.modalMensajeService.modalExito(this.MENSAJE_EXITO_ELIMINAR),this.consultarGrid()})})}static#e=this.\u0275fac=function(r){return new(r||f)(e.Y36(T.V),e.Y36(_._),e.Y36(G.Q),e.Y36(v.tT),e.Y36(v.UZ))};static#t=this.\u0275cmp=e.Xpm({type:f,selectors:[["app-departamento"]],decls:8,vars:6,consts:[[1,"contenedor"],[1,"titulo-contenedor"],[1,"cuerpo-contenedor"],[1,"row"],[1,"col-md-12"],["class","contenedor-agregar",3,"click",4,"ngIf"],[3,"headerName","data","children","accesoEditar","accesoEliminar","event"],[1,"contenedor-agregar",3,"click"],[1,"btn-agregar"]],template:function(r,a){1&r&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Departamentos"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e.YNc(6,y,3,0,"div",5),e.TgZ(7,"app-grid-general",6),e.NdJ("event",function(i){return a.onGridClick(i)}),e.qZA()()()()()),2&r&&(e.xp6(6),e.Q6J("ngIf",a.tieneAccesoAgregar),e.xp6(1),e.Q6J("headerName",a.HEADER_GRID)("data",a.departamentoList)("children",a.columns)("accesoEditar",a.accesoEditar)("accesoEliminar",a.accesoEliminar))},dependencies:[D.O5,J.$],encapsulation:2})}var b=o(81237);const P=[{path:"",component:f,canActivate:[M.m],canDeactivate:[b.I],data:{title:"Consulta",acceso:d.v.CONSULTAR_DEPARTAMENTO}}];class A{static#e=this.\u0275fac=function(r){return new(r||A)};static#t=this.\u0275mod=e.oAB({type:A});static#a=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(P),h.Bz]})}var j=o(63405),Y=o(41283);class C{static#e=this.\u0275fac=function(r){return new(r||C)};static#t=this.\u0275mod=e.oAB({type:C});static#a=this.\u0275inj=e.cJS({providers:[_._,b.I],imports:[A,j.m,Y.Z,v.zk.forChild()]})}}}]);