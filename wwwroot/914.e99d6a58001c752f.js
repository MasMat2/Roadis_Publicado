"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[914],{12846:(E,g,t)=>{t.d(g,{Y:()=>n});var h=t(50986),s=t(94650),m=t(2060);class n{constructor(a){this.modalMensajeService=a}validarCamposRequeridos(a){Object.keys(a.controls).forEach(o=>{const u=a.controls[o];u.markAsTouched({onlySelf:!0}),u.markAsDirty({onlySelf:!0})})}validarCamposRequeridosConMensaje(a){Object.keys(a.controls).forEach(o=>{const u=a.controls[o];u.markAsTouched({onlySelf:!0}),u.markAsDirty({onlySelf:!0})}),Object.keys(a.controls).some(o=>{const u=a.controls[o];return!!(u.errors&&u.errors.required&&u.invalid)&&(this.modalMensajeService.modalError(h.g.MENSAJE_REQUERIDOS),!0)})}markAsUntouched(a){Object.keys(a.controls).forEach(o=>{a.controls[o].markAsUntouched({onlySelf:!0})})}static#a=this.\u0275fac=function(o){return new(o||n)(s.LFG(m.V))};static#e=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}},40675:(E,g,t)=>{t.d(g,{V_:()=>s,aQ:()=>n,vf:()=>m});var s,f;t(40675);(f=s||(s={})).Agregar="Agregar",f.Editar="Editar",f.Ver="Consultar";const m="Seleccione una opci\xf3n",n="No hay opciones disponibles"},14815:(E,g,t)=>{var h,s;t.d(g,{m:()=>h}),(s=h||(h={})).Cruz="fa fa-times",s.Pesos="fa fa-dollar-sign",s.Cambio="fas fa-exchange-alt",s.CheckOut="fas fa-door-open",s.Exito="fas fa-check"},94540:(E,g,t)=>{t.d(g,{gy:()=>s,sO:()=>m});var s,n;t(94540);(n=s||(s={})).Editar="edit",n.Eliminar="delete",n.Ver="see",n.DescargarPdf="DescargarPdf",n.Revisar="Revisar",n.Presentar="presentar";const m={headerName:"",field:"",cellClass:"center-ag",minWidth:44,maxWidth:44,suppressMovable:!0,resizable:!1,filter:!1,lockPinned:!0,pinned:"right",lockPosition:!0}},20914:(E,g,t)=>{t.r(g),t.d(g,{AsignaturaModule:()=>b});var h=t(71436),s=t(20388),m=t(36895),n=t(24006),f=t(90061),a=t(94650);class o{static#a=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=a.oAB({type:o});static#t=this.\u0275inj=a.cJS({imports:[m.ez,f.kn,n.u5]})}var u=t(9116),_=t(31321),y=t(13050),v=t(40675),R=t(14815),T=t(94540),S=t(52522);class D{constructor(){}}var O=t(12846),Z=t(2060),N=t(21722);function J(A,e){1&A&&(a.TgZ(0,"div",27),a._uU(1," La fecha alta es requerida "),a.qZA())}function U(A,e){1&A&&(a.TgZ(0,"div",27),a._uU(1," La Asignatura es requerida "),a.qZA())}const F=function(){return{dateInputFormat:"DD/MM/YYYY"}};class p{constructor(e,r,i,c){this.formularioService=e,this.mensajeService=r,this.asignaturaService=i,this.bsModalRef=c,this.MENSAJE_AGREGAR="La asignatura ha sido agregada",this.MENSAJE_EDITAR="La asignatura ha sido modificada",this.esEdicion=!1,this.submiting=!1,this.asignatura=new D}ngOnInit(){if(this.accion===v.V_.Agregar)this.asignatura.fechaAlta=new Date,this.asignatura.estatus=!0;else{if(void 0===this.idAsignatura)throw new Error("No se especific\xf3 el id de la asignatura");this.asignaturaService.consultar(this.idAsignatura).subscribe(e=>{e.fechaAlta=new Date(e.fechaAlta),this.asignatura=e})}}enviarFormulario(e){if(this.submiting=!0,!e.valid)return this.formularioService.validarCamposRequeridos(e),void(this.submiting=!1);this.accion===v.V_.Agregar?this.agregar():this.accion===v.V_.Editar&&this.editar()}agregar(){this.asignaturaService.agregar(this.asignatura).subscribe({next:e=>{this.mensajeService.modalExito(this.MENSAJE_AGREGAR),this.asignatura.idAsignatura=e,this.cerrar()},error:()=>{this.submiting=!1}})}editar(){this.asignaturaService.editar(this.asignatura).subscribe({next:()=>{this.mensajeService.modalExito(this.MENSAJE_EDITAR),this.cerrar()},error:()=>{this.submiting=!1}})}cerrar(){this.onClose(!0),this.bsModalRef.hide()}cancelar(){this.onClose(!1),this.bsModalRef.hide()}static#a=this.\u0275fac=function(r){return new(r||p)(a.Y36(O.Y),a.Y36(Z.V),a.Y36(N.x),a.Y36(s.UZ))};static#e=this.\u0275cmp=a.Xpm({type:p,selectors:[["app-asignatura-formulario"]],decls:48,vars:14,consts:[[1,"d-flex"],[1,"barra-lateral-modal"],[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],[1,"far","fa-times-circle"],["novalidate","novalidate",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],["id","modal",1,"modal-body",2,"overflow","visible"],[1,"row"],[1,"col-1",2,"width","30%"],[1,"form-group"],[1,"label-input","required-label"],["name","clave","type","text","maxlength","10",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["clave","ngModel"],[1,"calendario"],["type","text","autocomplete","off","placeholder","dd/mm/aaaa","name","fechaAlta","required","","bsDatepicker","","disabled","disabled",1,"form-control",3,"bsConfig","ngModel","ngModelChange"],["fechaAlta","ngModel"],["class","error",4,"ngIf"],["name","estatusContrato","type","text","disabled","disabled",1,"form-control",3,"value","required"],[1,"col-1",2,"width","60%"],["maxlength","200","name","descripcion","type","text",1,"form-control",3,"ngModel","required","ngModelChange"],["descripcion","ngModel"],[1,"modal-footer"],[1,"text-right"],["type","button",1,"btn-secundario","btn-margin-right",3,"click"],["type","submit",1,"btn-primario","btn-margin-left",3,"disabled"],[1,"error"]],template:function(r,i){if(1&r){const c=a.EpF();a.TgZ(0,"div",0),a._UZ(1,"div",1),a.TgZ(2,"div",2)(3,"div",3)(4,"div"),a._uU(5),a.qZA(),a.TgZ(6,"button",4),a.NdJ("click",function(){return i.cancelar()}),a._UZ(7,"i",5),a.qZA()(),a.TgZ(8,"form",6,7),a.NdJ("keydown.enter",function(d){return d.preventDefault()})("ngSubmit",function(){a.CHM(c);const d=a.MAs(9);return a.KtG(i.enviarFormulario(d))}),a.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"label",12),a._uU(15,"Clave"),a.qZA(),a.TgZ(16,"div")(17,"input",13,14),a.NdJ("ngModelChange",function(d){return i.asignatura.idAsignatura=d}),a.qZA()()()(),a.TgZ(19,"div",10)(20,"div",11)(21,"label",12),a._uU(22,"Fecha Alta"),a.qZA(),a.TgZ(23,"div",15)(24,"input",16,17),a.NdJ("ngModelChange",function(d){return i.asignatura.fechaAlta=d}),a.qZA()(),a.YNc(26,J,2,0,"div",18),a.qZA()(),a.TgZ(27,"div",10)(28,"div",11)(29,"label",12),a._uU(30,"Estatus"),a.qZA(),a.TgZ(31,"div",15),a._UZ(32,"input",19),a.qZA()()()(),a.TgZ(33,"div",9)(34,"div",20)(35,"div",11)(36,"label",12),a._uU(37,"Asignatura"),a.qZA(),a.TgZ(38,"div")(39,"input",21,22),a.NdJ("ngModelChange",function(d){return i.asignatura.descripcion=d}),a.qZA()(),a.YNc(41,U,2,0,"div",18),a.qZA()()()(),a.TgZ(42,"div",23)(43,"div",24)(44,"button",25),a.NdJ("click",function(){return i.cancelar()}),a._uU(45,"Cancelar"),a.qZA(),a.TgZ(46,"button",26),a._uU(47,"Guardar Asignatura"),a.qZA()()()()()()}if(2&r){const c=a.MAs(25),l=a.MAs(40);a.xp6(5),a.hij("Asignatura - ",i.accion,""),a.xp6(12),a.Q6J("ngModel",i.asignatura.idAsignatura)("required",!0)("disabled",!0),a.xp6(7),a.Q6J("bsConfig",a.DdM(13,F))("ngModel",i.asignatura.fechaAlta),a.xp6(2),a.Q6J("ngIf",(null==c.errors?null:c.errors.required)&&c.touched),a.xp6(6),a.Q6J("value",i.asignatura.estatus?"Activo":"Inactivo")("required",!0),a.xp6(7),a.Q6J("ngModel",i.asignatura.descripcion)("required",!0),a.xp6(2),a.Q6J("ngIf",(null==l.errors?null:l.errors.required)&&l.touched),a.xp6(5),a.Q6J("disabled",i.submiting)}},dependencies:[m.O5,f.Np,f.Y5,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.nD,n.On,n.F],encapsulation:2})}var I=t(62861),j=t(58390);function Y(A,e){if(1&A){const r=a.EpF();a.TgZ(0,"div",8),a.NdJ("click",function(){a.CHM(r);const c=a.oxw();return a.KtG(c.agregar())}),a.TgZ(1,"button",9),a._uU(2,"Agregar Asignatura"),a.qZA()()}}class M{constructor(e,r,i,c,l){this.accesoService=e,this.asignaturaService=r,this.bsModalRef=i,this.mensajeService=c,this.modalService=l,this.NOMBRE_ENTIDAD="Asignaturas",this.tieneAccesoAgregar=!1,this.EDITAR_ASIGNATURA=_.rW.Editar,this.ELIMINAR_ASIGNATURA=_.rW.Eliminar,this.asignaturas=[],this.columns=[{headerName:"Clave",field:"idAsignatura",maxWidth:200},{headerName:"Estatus",field:"estatus",minWidth:100,valueGetter:d=>d.data.estatus?"Activo":"Inactivo"},{headerName:"Fecha Alta",field:"fechaAlta",minWidth:100,cellRenderer:d=>d.value?new Date(d.value).toLocaleDateString():""},{headerName:"Asignatura",field:"descripcion",minWidth:300}]}ngOnInit(){this.consultarGrid(),this.accesoService.tieneAcceso(_.rW.Agregar).subscribe(e=>{this.tieneAccesoAgregar=e})}consultarGrid(){this.asignaturaService.consultarGeneral().subscribe(e=>{this.asignaturas=e})}onGridClick(e){({[T.gy.Editar]:()=>this.editar(e.data.idAsignatura),[T.gy.Eliminar]:()=>this.eliminar(e.data),[T.gy.Ver]:()=>{}})[e.accion]()}agregar(){const e={accion:v.V_.Agregar,esEdicion:!1,onClose:r=>{r&&this.consultarGrid(),this.bsModalRef.hide()}};this.bsModalRef=this.modalService.show(p,{initialState:e,...S.OS.Medium})}editar(e){const r={accion:v.V_.Editar,esEdicion:!0,idAsignatura:e,onClose:i=>{i&&this.consultarGrid(),this.bsModalRef.hide()}};this.bsModalRef=this.modalService.show(p,{initialState:r,...S.OS.Medium})}eliminar(e){const c=`\xbfDesea eliminar la Asignatura: <strong>${e.descripcion}</strong>?`;this.mensajeService.modalConfirmacion(c,"Eliminar Asignatura",R.m.Cruz).then(()=>{this.asignaturaService.eliminar(e.idAsignatura).subscribe(()=>{this.mensajeService.modalExito("La Asignatura ha sido eliminada"),this.consultarGrid()})})}static#a=this.\u0275fac=function(r){return new(r||M)(a.Y36(I.Q),a.Y36(N.x),a.Y36(s.UZ),a.Y36(Z.V),a.Y36(s.tT))};static#e=this.\u0275cmp=a.Xpm({type:M,selectors:[["app-asignatura"]],decls:9,vars:7,consts:[[1,"contenedor"],[1,"titulo-contenedor"],[1,"cuerpo-contenedor"],[1,"row"],[1,"col-12"],["class","contenedor-agregar",3,"click",4,"ngIf"],[3,"headerName","data","children","accesoEditar","accesoEliminar","event"],["gridNecesidad",""],[1,"contenedor-agregar",3,"click"],[1,"btn-agregar"]],template:function(r,i){1&r&&(a.TgZ(0,"div",0)(1,"div",1),a._uU(2),a.qZA(),a.TgZ(3,"div",2)(4,"div",3)(5,"div",4),a.YNc(6,Y,3,0,"div",5),a.TgZ(7,"app-grid-general",6,7),a.NdJ("event",function(l){return i.onGridClick(l)}),a.qZA()()()()()),2&r&&(a.xp6(2),a.Oqu(i.NOMBRE_ENTIDAD),a.xp6(4),a.Q6J("ngIf",i.tieneAccesoAgregar),a.xp6(1),a.Q6J("headerName",i.NOMBRE_ENTIDAD)("data",i.asignaturas)("children",i.columns)("accesoEditar",i.EDITAR_ASIGNATURA)("accesoEliminar",i.ELIMINAR_ASIGNATURA))},dependencies:[j.$,m.O5],encapsulation:2})}const L=[{path:"",component:M,canActivate:[y.m],data:{title:"Asignaturas",acceso:_.rW.Consultar}}];class C{static#a=this.\u0275fac=function(r){return new(r||C)};static#e=this.\u0275mod=a.oAB({type:C});static#t=this.\u0275inj=a.cJS({imports:[u.Bz.forChild(L),u.Bz]})}class b{static#a=this.\u0275fac=function(r){return new(r||b)};static#e=this.\u0275mod=a.oAB({type:b});static#t=this.\u0275inj=a.cJS({imports:[C,h.a,m.ez,s.zk.forChild(),o]})}}}]);