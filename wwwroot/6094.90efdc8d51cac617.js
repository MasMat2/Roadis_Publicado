"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[6094],{36094:(w,S,a)=>{a.r(S),a.d(S,{ConfiguracionSeccionesModule:()=>C});var A=a(36895),h=a(59077),v=a(21890),Z=a(62392),f=a(20388),I=a(41283),q=a(63405),T=a(9116),x=a(85087),O=a(13050),u=a(15861),d=a(50986);class J{constructor(){}}class M{constructor(){}}var E=a(90429),e=a(94650),N=a(2060),m=a(24006),b=a(58390),R=a(88796),F=a(86749);function D(t,i){1&t&&(e.TgZ(0,"div",29),e._uU(1," La clave es requerida "),e.qZA())}function G(t,i){1&t&&(e.TgZ(0,"div",29),e._uU(1," El nombre es requerido "),e.qZA())}function U(t,i){1&t&&(e.TgZ(0,"div",29),e._uU(1," La clave es requerida "),e.qZA())}function L(t,i){1&t&&(e.TgZ(0,"div",29),e._uU(1," La descripci\xf3n es requerida "),e.qZA())}function y(t,i){1&t&&(e.TgZ(0,"div",29),e._uU(1," El dominio es requerido "),e.qZA())}function Q(t,i){1&t&&(e.TgZ(0,"div",29),e._uU(1," El orden es requerido "),e.qZA())}function P(t,i){1&t&&(e.TgZ(0,"div",29),e._uU(1," La cantidad de columnas es requerida "),e.qZA())}function H(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Guardar"),e.qZA())}function Y(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Agregar"),e.qZA())}function k(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div")(1,"div",30),e._uU(2,"Campos"),e.qZA(),e.TgZ(3,"form",31,32),e.NdJ("keydown.enter",function(c){return c.preventDefault()})("ngSubmit",function(){e.CHM(o);const c=e.MAs(4),r=e.oxw();return e.KtG(r.enviarFormularioCampo(c))}),e.TgZ(5,"div",9)(6,"div",10)(7,"div",11)(8,"label",12),e._uU(9,"Clave"),e.qZA(),e.TgZ(10,"div")(11,"input",33,34),e.NdJ("ngModelChange",function(c){e.CHM(o);const r=e.oxw();return e.KtG(r.campo.clave=c)}),e.qZA(),e.YNc(13,U,2,0,"div",15),e.qZA()()(),e.TgZ(14,"div",10)(15,"div",11)(16,"label",12),e._uU(17,"Descripci\xf3n"),e.qZA(),e.TgZ(18,"div")(19,"input",35,36),e.NdJ("ngModelChange",function(c){e.CHM(o);const r=e.oxw();return e.KtG(r.campo.descripcion=c)}),e.qZA(),e.YNc(21,L,2,0,"div",15),e.qZA()()(),e.TgZ(22,"div",10)(23,"div",11)(24,"label",12),e._uU(25,"Dominio"),e.qZA(),e.TgZ(26,"div")(27,"ng-select",37,38),e.NdJ("ngModelChange",function(c){e.CHM(o);const r=e.oxw();return e.KtG(r.campo.idDominio=c)}),e.qZA()(),e.YNc(29,y,2,0,"div",15),e.qZA()()(),e.TgZ(30,"div",9)(31,"div",39)(32,"div",11)(33,"label",12),e._uU(34,"Orden"),e.qZA(),e.TgZ(35,"div")(36,"input",40,41),e.NdJ("ngModelChange",function(c){e.CHM(o);const r=e.oxw();return e.KtG(r.campo.orden=c)}),e.qZA(),e.YNc(38,Q,2,0,"div",15),e.qZA()()(),e.TgZ(39,"div",39)(40,"div",11)(41,"label",12),e._uU(42,"Cantidad de Columnas"),e.qZA(),e.TgZ(43,"div")(44,"input",42,43),e.NdJ("ngModelChange",function(c){e.CHM(o);const r=e.oxw();return e.KtG(r.campo.tamanoColumna=c)}),e.qZA(),e.YNc(46,P,2,0,"div",15),e.qZA()()(),e.TgZ(47,"div",44)(48,"label",12),e._uU(49,"Requerido"),e.qZA(),e._UZ(50,"br"),e.TgZ(51,"label",18)(52,"input",45,46),e.NdJ("change",function(){e.CHM(o);const c=e.MAs(53),r=e.oxw();return e.KtG(r.onRequeridoChanged(c.checked))}),e.qZA(),e.TgZ(54,"span",21)(55,"span",22),e._uU(56,"Si"),e.qZA(),e.TgZ(57,"span",23),e._uU(58,"No"),e.qZA()()()(),e.TgZ(59,"div",44)(60,"label",12),e._uU(61,"Deshabilitado"),e.qZA(),e._UZ(62,"br"),e.TgZ(63,"label",18)(64,"input",47,48),e.NdJ("change",function(){e.CHM(o);const c=e.MAs(65),r=e.oxw();return e.KtG(r.onDeshbilitadoChanged(c.checked))}),e.qZA(),e.TgZ(66,"span",21)(67,"span",22),e._uU(68,"Si"),e.qZA(),e.TgZ(69,"span",23),e._uU(70,"No"),e.qZA()()()()(),e.TgZ(71,"div",49)(72,"div",50)(73,"button",51),e.NdJ("click",function(){e.CHM(o);const c=e.oxw();return e.KtG(c.limpiarFormularioCampos())}),e._uU(74," Cancelar "),e.qZA(),e.TgZ(75,"button",52),e.YNc(76,H,2,0,"div",24),e.YNc(77,Y,2,0,"div",24),e.qZA()()()(),e.TgZ(78,"div",9)(79,"div",53)(80,"app-grid-general",54),e.NdJ("event",function(c){e.CHM(o);const r=e.oxw();return e.KtG(r.onGridClickCampo(c))}),e.qZA()()()()}if(2&t){const o=e.MAs(12),n=e.MAs(20),c=e.MAs(28),r=e.MAs(37),s=e.MAs(45),l=e.oxw();e.xp6(11),e.Q6J("ngModel",l.campo.clave),e.xp6(2),e.Q6J("ngIf",(null==o.errors?null:o.errors.required)&&o.touched),e.xp6(6),e.Q6J("ngModel",l.campo.descripcion),e.xp6(2),e.Q6J("ngIf",(null==n.errors?null:n.errors.required)&&n.touched),e.xp6(6),e.Q6J("items",l.dominioList)("required",!0)("ngModel",l.campo.idDominio)("placeholder",l.placeHolderSelect)("notFoundText",l.placeHolderNoOptions),e.xp6(2),e.Q6J("ngIf",(null==c.errors?null:c.errors.required)&&c.touched),e.xp6(7),e.Q6J("ngModel",l.campo.orden),e.xp6(2),e.Q6J("ngIf",(null==r.errors?null:r.errors.required)&&r.touched),e.xp6(6),e.Q6J("ngModel",l.campo.tamanoColumna),e.xp6(2),e.Q6J("ngIf",(null==s.errors?null:s.errors.required)&&s.touched),e.xp6(6),e.Q6J("checked",l.campo.requerido),e.xp6(12),e.Q6J("checked",l.campo.deshabilitado),e.xp6(11),e.Q6J("disabled",!1),e.xp6(1),e.Q6J("ngIf",l.campo.idSeccionCampo>0),e.xp6(1),e.Q6J("ngIf",!(l.campo.idSeccionCampo>0)),e.xp6(3),e.Q6J("headerName",l.HEADER_GRID_CAMPOS)("data",l.camposList)("children",l.columnsCampos)}}class p{constructor(i,o,n,c){this.dominioService=i,this.seccionCampoService=o,this.seccionService=n,this.mensajeService=c,this.MENSAJE_EXITO_AGREGAR_SECCION="La secci\xf3n ha sido agregada",this.MENSAJE_EXITO_EDITAR_SECCION="La secci\xf3n ha sido editada",this.MENSAJE_EXITO_AGREGAR_CAMPO="El campo ha sido agregado",this.MENSAJE_EXITO_EDITAR_CAMPO="El campo ha sido editado",this.MENSAJE_EXITO_ELIMINAR_CAMPO="El campo ha sido eliminado",this.placeHolderSelect=d.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=d.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.accion=d.g.MODAL_ACCION_AGREGAR,this.disableSubmit=!1,this.seccion=new J,this.campo=new M,this.HEADER_GRID_CAMPOS="Campos",this.columnsCampos=[{headerName:"Clave",field:"clave",minWidth:30},{headerName:"Descripci\xf3n",field:"descripcion",minWidth:30},{headerName:"Dominio",field:"nombreDominio",minWidth:30},{headerName:"Orden",field:"orden",minWidth:30},{headerName:"Requerido",field:"requerido",minWidth:30,valueGetter:r=>this.convertirSiNo(r.data)},{headerName:"Secci\xf3n",field:"grupo",minWidth:30},{headerName:"Fila",field:"fila",minWidth:30}]}ngOnInit(){this.consultarDominios()}consultarDominios(){this.dominioService.consultarTodosParaSelector().subscribe(i=>{this.dominioList=i})}enviarFormularioSeccion(i){var o=this;return(0,u.Z)(function*(){if(o.disableSubmit=!0,!i.valid)return void E.CW(i);let n=!1,c="";o.accion===d.g.MODAL_ACCION_AGREGAR?(n=yield o.agregarSeccion(o.seccion),c=o.MENSAJE_EXITO_AGREGAR_SECCION):o.accion===d.g.MODAL_ACCION_EDITAR&&(n=yield o.editarSeccion(o.seccion),c=o.MENSAJE_EXITO_EDITAR_SECCION),n?(o.mensajeService.modalExito(c),o.onClose(!0)):o.disableSubmit=!1})()}agregarSeccion(i){var o=this;return(0,u.Z)(function*(){return o.seccionService.agregar(i).toPromise().then(()=>!0).catch(()=>!1)})()}editarSeccion(i){var o=this;return(0,u.Z)(function*(){return o.seccionService.editar(i).toPromise().then(()=>!0).catch(()=>!1)})()}onGridClickCampo(i){i.accion===d.g.GRID_ACCION_EDITAR?this.consultarCampo(i.data.idSeccionCampo):i.accion===d.g.GRID_ACCION_ELIMINAR&&this.eliminarCampo(i.data)}enviarFormularioCampo(i){var o=this;return(0,u.Z)(function*(){if(o.disableSubmit=!0,!i.valid)return void E.CW(i);let c,n=!1;o.campo.idSeccionCampo>0?(n=yield o.editarCampo(o.campo),c=o.MENSAJE_EXITO_EDITAR_CAMPO):(o.campo.idSeccion=o.seccion.idSeccion,n=yield o.agregarCampo(o.campo),c=o.MENSAJE_EXITO_AGREGAR_CAMPO),n?(o.mensajeService.modalExito(c),o.consultarGridCampos(o.seccion.idSeccion),o.limpiarFormularioCampos()):o.disableSubmit=!1})()}consultarGridCampos(i){this.seccionCampoService.consultarPorSeccion(i).subscribe(o=>{this.camposList=o})}consultarCampo(i){this.seccionCampoService.consultar(i).subscribe(o=>{this.campo=o})}agregarCampo(i){var o=this;return(0,u.Z)(function*(){return o.seccionCampoService.agregar(i).toPromise().then(()=>!0).catch(()=>!1)})()}editarCampo(i){var o=this;return(0,u.Z)(function*(){return o.seccionCampoService.editar(i).toPromise().then(()=>!0).catch(()=>!1)})()}eliminarCampo(i){this.mensajeService.modalConfirmacion("\xbfDesea eliminar el campo <string>"+i.descripcion+"</string>?","Eliminar Campo").then(o=>{this.seccionCampoService.eliminar(i.idSeccionCampo).subscribe(n=>{this.mensajeService.modalExito(this.MENSAJE_EXITO_ELIMINAR_CAMPO),this.consultarGridCampos(this.seccion.idSeccion),this.limpiarFormularioCampos()})})}onRequeridoChanged(i){this.campo.requerido=i}onDeshbilitadoChanged(i){this.campo.deshabilitado=i}limpiarFormularioCampos(){this.campo=new M,this.campo.idSeccionCampo=0,document.getElementById("formularioCampo").reset()}cancelar(){this.onClose(!1)}convertirSiNo(i){return i.requerido?"S\xed":"No"}static#e=this.\u0275fac=function(o){return new(o||p)(e.Y36(Z.S),e.Y36(h.t),e.Y36(v.D),e.Y36(N.V))};static#o=this.\u0275cmp=e.Xpm({type:p,selectors:[["app-configuracion-secciones-formulario"]],decls:48,vars:8,consts:[[1,"d-flex"],[1,"barra-lateral-modal"],[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],[1,"far","fa-times-circle"],[1,"modal-body"],["novalidate","novalidate","id","formulario",3,"keydown.enter"],["formularioSeccion","ngForm"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"label-input","required-label"],["id","claveSeccion","name","claveSeccion","type","text","maxlength","10","required","true","autocomplete","off",1,"form-control",3,"ngModel","disabled","ngModelChange"],["claveSeccion","ngModel"],["class","error",4,"ngIf"],["id","nombreSeccion","name","nombreSeccion","type","text","maxlength","100","required","required","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["nombreSeccion","ngModel"],[1,"switch"],["id","tabla","name","tablaName","type","checkbox",3,"ngModel","ngModelChange"],["tabla",""],[1,"slider","round"],[1,"on"],[1,"off"],[4,"ngIf"],[1,"modal-footer"],[1,"text-right"],["type","button",1,"btn-secundario","btn-margin-left",3,"click"],["type","button",1,"btn-primario","btn-margin-left",3,"click"],[1,"error"],[1,"subseccion"],["novalidate","novalidate","id","formularioCampo",3,"keydown.enter","ngSubmit"],["formularioCampong","ngForm"],["id","nombreCampo","name","nombreCampo","type","text","maxlength","10","required","required","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["nombreCampo","ngModel"],["id","descripcionCampo","name","descripcionCampo","type","text","maxlength","200","required","required","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["descripcionCampo","ngModel"],["name","dominio","bindLabel","nombre","bindValue","idDominio",3,"items","required","ngModel","placeholder","notFoundText","ngModelChange"],["dominio","ngModel"],[1,"col-md-2"],["id","ordenCampo","name","ordenCampo","type","number","min","0","step","1","maxlength","10","required","required","autocomplete","off","appPermitirSoloNumeros","",1,"form-control",3,"ngModel","ngModelChange"],["ordenCampo","ngModel"],["id","tamanoColumna","name","tamanoColumna","type","number","maxlength","2","min","0","step","1","required","required","autocomplete","off","appPermitirSoloNumeros","",1,"form-control",3,"ngModel","ngModelChange"],["tamanoColumna","ngModel"],[1,"col-md-1"],["id","requerido","type","checkbox",3,"checked","change"],["requerido",""],["id","deshabilitado","type","checkbox",3,"checked","change"],["deshabilitado",""],[1,"row","mt-3"],[1,"col-md-12","text-center"],[1,"btn-secundario","mr-3",3,"click"],["type","submit",1,"btn-terceario","ml-3",3,"disabled"],[1,"col-md-12"],[3,"headerName","data","children","event"]],template:function(o,n){if(1&o){const c=e.EpF();e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div"),e._uU(5),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return n.cancelar()}),e._UZ(7,"i",5),e.qZA()(),e.TgZ(8,"div",6)(9,"form",7,8),e.NdJ("keydown.enter",function(s){return s.preventDefault()}),e.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"label",12),e._uU(15,"Clave"),e.qZA(),e.TgZ(16,"div")(17,"input",13,14),e.NdJ("ngModelChange",function(s){return n.seccion.clave=s}),e.qZA(),e.YNc(19,D,2,0,"div",15),e.qZA()()(),e.TgZ(20,"div",10)(21,"div",11)(22,"label",12),e._uU(23,"Secci\xf3n"),e.qZA(),e.TgZ(24,"div")(25,"input",16,17),e.NdJ("ngModelChange",function(s){return n.seccion.nombre=s}),e.qZA(),e.YNc(27,G,2,0,"div",15),e.qZA()()(),e.TgZ(28,"div",10)(29,"label",12),e._uU(30,"Tabla"),e.qZA(),e._UZ(31,"br"),e.TgZ(32,"label",18)(33,"input",19,20),e.NdJ("ngModelChange",function(s){return n.seccion.esTabla=s}),e.qZA(),e.TgZ(35,"span",21)(36,"span",22),e._uU(37,"Si"),e.qZA(),e.TgZ(38,"span",23),e._uU(39,"No"),e.qZA()()()()()(),e.YNc(40,k,81,22,"div",24),e.qZA(),e.TgZ(41,"div",25)(42,"div",26)(43,"button",27),e.NdJ("click",function(){return n.cancelar()}),e._uU(44," Cancelar "),e.qZA()(),e.TgZ(45,"div",26)(46,"button",28),e.NdJ("click",function(){e.CHM(c);const s=e.MAs(10);return e.KtG(n.enviarFormularioSeccion(s))}),e._uU(47," Guardar "),e.qZA()()()()()}if(2&o){const c=e.MAs(18),r=e.MAs(26);e.xp6(5),e.hij("Secci\xf3n - ",n.accion,""),e.xp6(12),e.Q6J("ngModel",n.seccion.clave)("disabled",!0),e.xp6(2),e.Q6J("ngIf",(null==c.errors?null:c.errors.required)&&c.touched),e.xp6(6),e.Q6J("ngModel",n.seccion.nombre),e.xp6(2),e.Q6J("ngIf",(null==r.errors?null:r.errors.required)&&r.touched),e.xp6(6),e.Q6J("ngModel",n.seccion.esTabla),e.xp6(7),e.Q6J("ngIf",n.seccion.idSeccion>0)}},dependencies:[A.O5,m._Y,m.Fj,m.wV,m.Wl,m.JJ,m.JL,m.Q7,m.nD,m.qQ,m.On,m.F,b.$,R.w9,F.C]})}class g{constructor(i,o,n,c,r){this.modalService=i,this.bsModalRef=o,this.seccionService=n,this.mensajeService=c,this.seccionCampoService=r,this.MENSAJE_EXITO_ELIMINAR="La secci\xf3n ha sido eliminada",this.TITULO_MODAL_ELIMINAR="Eliminar Secci\xf3n",this.HEADER_GRID_SECCIONES="Secciones",this.seccionesList=[],this.columnsSeccion=[{headerName:"Clave",field:"clave",minWidth:50},{headerName:"Secci\xf3n",field:"nombre",minWidth:150}]}ngOnInit(){this.consultarSecciones()}onGridClickSeccion(i){i.accion===d.g.GRID_ACCION_EDITAR?this.edicionSeccion(i.data.idSeccion):i.accion===d.g.GRID_ACCION_ELIMINAR&&this.eliminarSeccion(i.data)}consultarSecciones(){this.seccionService.consultarGeneral().subscribe(i=>{this.seccionesList=i})}agregarSeccion(){const i={accion:d.g.MODAL_ACCION_AGREGAR,onClose:o=>{o&&this.consultarSecciones(),this.bsModalRef.hide()}};this.bsModalRef=this.modalService.show(p,{initialState:i,...d.g.CONFIG_MODAL_MEDIUM})}edicionSeccion(i){var o=this;return(0,u.Z)(function*(){const n=yield o.seccionService.consultar(i).toPromise().catch(()=>null),c=yield o.seccionCampoService.consultarPorSeccion(i).toPromise().catch(()=>[]),r={accion:d.g.MODAL_ACCION_EDITAR,seccion:n,camposList:c,onClose:s=>{s&&o.consultarSecciones(),o.bsModalRef.hide()}};o.bsModalRef=o.modalService.show(p,{initialState:r,...d.g.CONFIG_MODAL_LARGE})})()}eliminarSeccion(i){this.mensajeService.modalConfirmacion("\xbfDesea eliminar la secci\xf3n <strong>"+i.clave+" - "+i.nombre+"</strong>?",this.TITULO_MODAL_ELIMINAR).then(o=>{this.seccionService.eliminar(i.idSeccion).subscribe(()=>{this.mensajeService.modalExito(this.MENSAJE_EXITO_ELIMINAR),this.consultarSecciones()})})}static#e=this.\u0275fac=function(o){return new(o||g)(e.Y36(f.tT),e.Y36(f.UZ),e.Y36(v.D),e.Y36(N.V),e.Y36(h.t))};static#o=this.\u0275cmp=e.Xpm({type:g,selectors:[["app-configuracion-secciones"]],decls:10,vars:3,consts:[[1,"contenedor"],[1,"titulo-contenedor"],[1,"cuerpo-contenedor"],[1,"row"],[1,"col-md-12"],[1,"contenedor-agregar",3,"click"],[1,"btn-agregar"],[3,"headerName","data","children","event"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Configurador de Secciones"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e.NdJ("click",function(){return n.agregarSeccion()}),e.TgZ(7,"button",6),e._uU(8,"Agregar"),e.qZA()(),e.TgZ(9,"app-grid-general",7),e.NdJ("event",function(r){return n.onGridClickSeccion(r)}),e.qZA()()()()()),2&o&&(e.xp6(9),e.Q6J("headerName",n.HEADER_GRID_SECCIONES)("data",n.seccionesList)("children",n.columnsSeccion))},dependencies:[b.$]})}const j=[{path:"",component:g,canActivate:[O.m],data:{title:"Consulta",acceso:x.v.CONFIGURADOR_SECCION}}];class _{static#e=this.\u0275fac=function(o){return new(o||_)};static#o=this.\u0275mod=e.oAB({type:_});static#i=this.\u0275inj=e.cJS({imports:[T.Bz.forChild(j),T.Bz]})}class C{static#e=this.\u0275fac=function(o){return new(o||C)};static#o=this.\u0275mod=e.oAB({type:C});static#i=this.\u0275inj=e.cJS({providers:[h.t,v.D,Z.S],imports:[A.ez,q.m,I.Z,f.zk.forChild(),_]})}}}]);