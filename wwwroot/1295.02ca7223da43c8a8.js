"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[1295],{85246:(C,p,o)=>{o.d(p,{B:()=>r});var t=o(94650),c=o(36895),E=o(58390);const u=["grid"];function n(f,d){if(1&f){const e=t.EpF();t.TgZ(0,"div",8),t.NdJ("click",function(){t.CHM(e);const h=t.oxw();return t.KtG(h.onAgregarClick())}),t.TgZ(1,"button",9),t._uU(2),t.qZA()()}if(2&f){const e=t.oxw();t.xp6(2),t.hij("Agregar ",e.tituloBoton," ")}}class r{constructor(){this.mostrarBotonExcel=!1,this.disableXLS=!1,this.gridClick=new t.vpe,this.agregarClick=new t.vpe,this.excelClick=new t.vpe,this.disableEdit=!0,this.disableDelete=!0}ngOnInit(){this.mapearAccesos()}mapearAccesos(){const d=this.crudConfig.configEliminar;d&&(this.accesoEliminar=d.acceso,this.disableDelete=!1);const e=this.crudConfig.formConfig,a=e&&e.configEditar;a&&(this.accesoEditar=a.acceso,this.disableEdit=!1)}onGridClick(d){this.gridClick.emit(d)}onAgregarClick(){this.agregarClick.emit()}onExcelClick(){this.excelClick.emit()}static#e=this.\u0275fac=function(e){return new(e||r)};static#t=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-catalogo-base"]],viewQuery:function(e,a){if(1&e&&t.Gf(u,5),2&e){let h;t.iGM(h=t.CRH())&&(a.grid=h.first)}},inputs:{columns:"columns",titulo:"titulo",tituloBoton:"tituloBoton",gridOptions:"gridOptions",crudConfig:"crudConfig",elementos$:"elementos$",tieneAccesoAgregar$:"tieneAccesoAgregar$",mostrarBotonExcel:"mostrarBotonExcel",disableXLS:"disableXLS"},outputs:{gridClick:"gridClick",agregarClick:"agregarClick",excelClick:"excelClick"},decls:11,vars:17,consts:[[1,"contenedor"],[1,"titulo-contenedor",3,"hidden"],[1,"cuerpo-contenedor"],[1,"row"],[1,"col-12"],["class","contenedor-agregar",3,"click",4,"ngIf"],[3,"headerName","data","gridOptions","children","disableDelete","disableEdit","accesoEditar","accesoEliminar","mostrarBotonExcel","disableXLS","event","exportarExcelEvent"],["grid",""],[1,"contenedor-agregar",3,"click"],[1,"btn-agregar"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4),t.YNc(6,n,3,1,"div",5),t.ALo(7,"async"),t.TgZ(8,"app-grid-general",6,7),t.NdJ("event",function(v){return a.onGridClick(v)})("exportarExcelEvent",function(){return a.onExcelClick()}),t.ALo(10,"async"),t.qZA()()()()()),2&e&&(t.xp6(1),t.Q6J("hidden",null==a.titulo),t.xp6(1),t.hij(" ",a.titulo," "),t.xp6(4),t.Q6J("ngIf",t.lcZ(7,13,a.tieneAccesoAgregar$)),t.xp6(2),t.Q6J("headerName",a.crudConfig.nombreEntidad)("data",t.lcZ(10,15,a.elementos$))("gridOptions",a.gridOptions)("children",a.columns)("disableDelete",a.disableDelete)("disableEdit",a.disableEdit)("accesoEditar",a.accesoEditar)("accesoEliminar",a.accesoEliminar)("mostrarBotonExcel",a.mostrarBotonExcel)("disableXLS",a.disableXLS))},dependencies:[c.O5,E.$,c.Ov]})}},92020:(C,p,o)=>{o.d(p,{A:()=>n});var t=o(20388),c=o(63405),E=o(71436),u=o(94650);class n{static#e=this.\u0275fac=function(d){return new(d||n)};static#t=this.\u0275mod=u.oAB({type:n});static#o=this.\u0275inj=u.cJS({imports:[c.m,E.a,t.zk.forChild()]})}},27974:(C,p,o)=>{o.d(p,{v:()=>u});var t=o(94540),c=o(40675),E=o(14815);class u{constructor(r,f,d){this.accesoService=r,this.bsModalService=f,this.mensajeService=d}onInit(){this.actualizarGrid(),this.consultarAccesoAgregar()}actualizarGrid(){this.registros$=this.consultarGrid()}consultarAccesoAgregar(){if(!this.crudConfig.formConfig)return;const r=this.crudConfig.formConfig.configAgregar;r&&(this.tieneAccesoAgregar$=this.accesoService.tieneAcceso(r.acceso))}onGridClick(r){const f=this.crudConfig.nombrePropiedadId,d=r.data[f];if(this.esConfig=r.data.esConfig??!1,"number"!=typeof d)throw new Error(`No se pudo obtener el id del elemento. La propiedad "${this.crudConfig.nombrePropiedadId}" no es un n\xfamero.`);({[t.gy.Editar]:()=>this.editar(d),[t.gy.Eliminar]:()=>this.confirmarEliminacion(r.data,d)})[r.accion]()}openForm(r,f){if(!this.crudConfig.formConfig)throw new Error('No se configur\xf3 la propiedad "formConfig" en el objeto "crudConfig"');const d=r===c.V_.Agregar?this.crudConfig.formConfig.configAgregar:this.crudConfig.formConfig.configEditar;if(!d){const h=r===c.V_.Editar?"configEditar":"configAgregar";throw new Error(`No se configur\xf3 la propiedad "${h}" en el objeto "crudConfig"`)}let e={accion:r,idEntidad:f,nombreEntidad:this.crudConfig.nombreEntidad,generoGramatical:this.crudConfig.generoGramatical,esConfig:this.esConfig,...d.params};e.onClose=h=>{h&&this.actualizarGrid(),a.hide()};const a=this.bsModalService.show(this.crudConfig.formConfig.ComponenteFormulario,{initialState:e,...this.crudConfig.formConfig.modalConfig})}agregar(r){void 0!==r?this.openForm(c.V_.Agregar,r):this.openForm(c.V_.Agregar)}editar(r){this.openForm(c.V_.Editar,r)}confirmarEliminacion(r,f){if(!this.crudConfig.configEliminar)throw new Error('No se configur\xf3 la propiedad "configEliminar" en el objeto "crudConfig"');const d=`Eliminar ${this.crudConfig.nombreEntidad}`,[e,a]="masc"===this.crudConfig.generoGramatical?["El","eliminado"]:["La","eliminada"],T=`\xbfDesea eliminar ${`${e.toLowerCase()} ${this.crudConfig.nombreEntidad.toLowerCase()}`}: <strong>${this.crudConfig.configEliminar.elementToString(r)}</strong>?`;this.mensajeService.modalConfirmacion(T,d,E.m.Cruz).then(()=>{const A=`${e} ${this.crudConfig.nombreEntidad.toLowerCase()} ha sido ${a}`;this.eliminar(f).subscribe(()=>{this.mensajeService.modalExito(A),this.actualizarGrid()})}).catch(()=>{})}}},70615:(C,p,o)=>{o.d(p,{P:()=>E});var t=o(40675),c=o(90429);class E{constructor(n){this.mensajeService=n,this.submitting=!1,this.entidad={}}onInit(){this.accion===t.V_.Editar&&this.idEntidad&&this.consultar(this.idEntidad).subscribe({next:n=>{this.entidad=n}})}onSubmit(n){if(this.submitting=!0,!n.valid)return c.CW(n),void(this.submitting=!1);const[r,f]="masc"===this.generoGramatical?["El","o"]:["La","a"],d=this.accion===t.V_.Agregar?`agregad${f}`:`modificad${f}`,e=`${r} ${this.nombreEntidad.toLocaleLowerCase()} ha sido ${d}`;(this.accion===t.V_.Agregar?this.agregar(this.entidad):this.editar(this.entidad)).subscribe({next:()=>{this.mensajeService.modalExito(e),this.onClose(!0)},error:()=>{this.submitting=!1}})}cancelar(n){n=n??!1,this.onClose(n)}}},40675:(C,p,o)=>{o.d(p,{V_:()=>c,aQ:()=>u,vf:()=>E});var c,n;o(40675);(n=c||(c={})).Agregar="Agregar",n.Editar="Editar",n.Ver="Consultar";const E="Seleccione una opci\xf3n",u="No hay opciones disponibles"},14815:(C,p,o)=>{var t,c;o.d(p,{m:()=>t}),(c=t||(t={})).Cruz="fa fa-times",c.Pesos="fa fa-dollar-sign",c.Cambio="fas fa-exchange-alt",c.CheckOut="fas fa-door-open",c.Exito="fas fa-check"},94540:(C,p,o)=>{o.d(p,{gy:()=>c,sO:()=>E});var c,u;o(94540);(u=c||(c={})).Editar="edit",u.Eliminar="delete",u.Ver="see",u.DescargarPdf="DescargarPdf",u.Revisar="Revisar",u.Presentar="presentar";const E={headerName:"",field:"",cellClass:"center-ag",minWidth:44,maxWidth:44,suppressMovable:!0,resizable:!1,filter:!1,lockPinned:!0,pinned:"right",lockPosition:!0}},41295:(C,p,o)=>{o.r(p),o.d(p,{EstadoModule:()=>O});var t=o(36895),c=o(71436),E=o(20388),u=o(41283),n=o(24006),r=o(46101),f=o(88796),d=o(13024),e=o(94650);class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.oAB({type:a});static#o=this.\u0275inj=e.cJS({providers:[r.$],imports:[t.ez,n.u5,f.A0,d.u]})}var h=o(9116),v=o(13050),T=o(27974),A=o(60393),L=o(52522),x=o(77579);class Z{}var y=o(70615),D=o(50986),N=o(82722),$=o(18505),F=o(54004),S=o(36441),B=o(2060),U=o(383);function J(_,l){1&_&&(e.TgZ(0,"div",19),e._uU(1," La clave es requerida "),e.qZA())}function I(_,l){1&_&&(e.TgZ(0,"div",19),e._uU(1," El nombre es requerido "),e.qZA())}function R(_,l){1&_&&(e.TgZ(0,"div",19),e._uU(1," El pa\xeds es requerido "),e.qZA())}function W(_,l){if(1&_){const i=e.EpF();e.TgZ(0,"form",3,4),e.NdJ("keydown.enter",function(g){return g.preventDefault()})("ngSubmit",function(){e.CHM(i);const g=e.MAs(1),m=e.oxw();return e.KtG(m.onSubmit(g))}),e.TgZ(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"label",9),e._uU(7,"Clave"),e.qZA(),e.TgZ(8,"div")(9,"input",10,11),e.NdJ("ngModelChange",function(g){e.CHM(i);const m=e.oxw();return e.KtG(m.entidad.clave=g)}),e.qZA(),e.YNc(11,J,2,0,"div",12),e.qZA()()(),e.TgZ(12,"div",13)(13,"div",8)(14,"label",9),e._uU(15,"Estado"),e.qZA(),e.TgZ(16,"div")(17,"input",14,15),e.NdJ("ngModelChange",function(g){e.CHM(i);const m=e.oxw();return e.KtG(m.entidad.nombre=g)}),e.qZA(),e.YNc(19,I,2,0,"div",12),e.qZA()()(),e.TgZ(20,"div",16)(21,"div",8)(22,"label",9),e._uU(23,"Pa\xeds"),e.qZA(),e.TgZ(24,"ng-select",17,18),e.NdJ("ngModelChange",function(g){e.CHM(i);const m=e.oxw();return e.KtG(m.idPais=g)}),e.ALo(26,"async"),e.qZA(),e.YNc(27,R,2,0,"div",12),e.qZA()()()()()}if(2&_){const i=e.MAs(10),s=e.MAs(18),g=e.MAs(25),m=e.oxw();e.xp6(9),e.Q6J("ngModel",m.entidad.clave)("disabled",m.entidad.idEstado>0),e.xp6(2),e.Q6J("ngIf",(null==i.errors?null:i.errors.required)&&i.touched),e.xp6(6),e.Q6J("ngModel",m.entidad.nombre),e.xp6(2),e.Q6J("ngIf",(null==s.errors?null:s.errors.required)&&s.touched),e.xp6(5),e.Q6J("items",e.lcZ(26,11,m.paises$))("required",!0)("ngModel",m.idPais)("placeholder",m.placeHolderSelect)("notFoundText",m.placeHolderNoOptions),e.xp6(3),e.Q6J("ngIf",(null==g.errors?null:g.errors.required)&&g.touched)}}function G(_,l){if(1&_){const i=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(i);const g=e.oxw();return e.KtG(g.cancelar())}),e._uU(1," Cancelar "),e.qZA(),e.TgZ(2,"button",21),e._uU(3," Guardar "),e.qZA()}if(2&_){const i=e.oxw();e.xp6(2),e.Q6J("disabled",i.submiting)}}class b extends y.P{constructor(l,i,s){super(s),this.estadoService=l,this.paisService=i,this.destroy$=new x.x,this.placeHolderSelect=D.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=D.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.submiting=!1}ngOnInit(){super.onInit(),this.consultarPaises()}ngOnDestroy(){this.destroy$.next()}consultar(l){return this.estadoService.consultarParaFormulario(l).pipe((0,N.R)(this.destroy$),(0,$.b)(i=>{this.idPais=i.idPais}),(0,F.U)(i=>{const s=new Z;return s.idEstado=i.idEstado,s.clave=i.clave,s.nombre=i.nombre,s.idPais=i.idPais,s}))}agregar(l){return this.estadoService.agregar(l)}editar(l){return this.estadoService.editar(l)}onSubmit(l){this.entidad.idPais=this.idPais,super.onSubmit(l)}consultarPaises(){this.paises$=this.paisService.consultarGeneral()}static#e=this.\u0275fac=function(i){return new(i||b)(e.Y36(S.s),e.Y36(r.$),e.Y36(B.V))};static#t=this.\u0275cmp=e.Xpm({type:b,selectors:[["app-estado-formulario"]],features:[e.qOj],decls:5,vars:1,consts:[[3,"titulo"],["modalBody",""],["modalFooter",""],["id","form","novalidate","novalidate",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],[1,"container-fluid"],[1,"row"],[1,"col-12","col-md-2"],[1,"form-group"],[1,"label-input","required-label"],["id","clave","name","claveName","type","text","maxlength","20","required","true","autocomplete","off",1,"form-control",3,"ngModel","disabled","ngModelChange"],["clave","ngModel"],["class","error",4,"ngIf"],[1,"col-12","col-md-5"],["name","nombre","type","text","maxlength","50","autocomplete","off","required","",1,"form-control",3,"ngModel","ngModelChange"],["nombre","ngModel"],[1,"col-5"],["name","paisName","bindLabel","nombre","bindValue","idPais","appendTo","body",3,"items","required","ngModel","placeholder","notFoundText","ngModelChange"],["paisLst","ngModel"],[1,"error"],["type","button",1,"btn-secundario","mr-3",3,"click"],["type","submit","form","form",1,"btn-primario","btn-margin-left",3,"disabled"]],template:function(i,s){1&i&&(e.TgZ(0,"app-modal-base",0),e.YNc(1,W,28,13,"ng-template",null,1,e.W1O),e.YNc(3,G,4,1,"ng-template",null,2,e.W1O),e.qZA()),2&i&&e.Q6J("titulo",s.nombreEntidad+" - "+s.accion)},dependencies:[t.O5,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.nD,n.On,n.F,f.w9,U.B,t.Ov],encapsulation:2})}var j=o(62861),K=o(85246);class M extends T.v{constructor(l,i,s,g){super(i,s,g),this.estadoService=l,this.HEADER_GRID="Estados",this.destroy$=new x.x,this.NOMBRE_ENTIDAD="Estado",this.crudConfig={nombreEntidad:this.NOMBRE_ENTIDAD,generoGramatical:"masc",nombrePropiedadId:"idEstado",formConfig:{ComponenteFormulario:b,modalConfig:L.OS.Medium,configAgregar:{acceso:A.Uh.Agregar},configEditar:{acceso:A.Uh.Editar}},configEliminar:{acceso:A.Uh.Eliminar,elementToString:m=>m.nombre}},this.columns=[{headerName:"Clave",field:"clave",minWidth:150,width:70},{headerName:"Nombre",field:"nombre",minWidth:150},{headerName:"Pa\xeds",field:"nombrePais",minWidth:150}]}ngOnInit(){super.onInit()}consultarGrid(){return this.estadoService.consultarParaGrid()}eliminar(l){return this.estadoService.eliminar(l)}static#e=this.\u0275fac=function(i){return new(i||M)(e.Y36(S.s),e.Y36(j.Q),e.Y36(E.tT),e.Y36(B.V))};static#t=this.\u0275cmp=e.Xpm({type:M,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:4,consts:[["titulo","Estados","tituloBoton","Estado",3,"columns","crudConfig","elementos$","tieneAccesoAgregar$","agregarClick","gridClick"]],template:function(i,s){1&i&&(e.TgZ(0,"app-catalogo-base",0),e.NdJ("agregarClick",function(){return s.agregar()})("gridClick",function(m){return s.onGridClick(m)}),e.qZA()),2&i&&e.Q6J("columns",s.columns)("crudConfig",s.crudConfig)("elementos$",s.registros$)("tieneAccesoAgregar$",s.tieneAccesoAgregar$)},dependencies:[K.B],encapsulation:2})}var Q=o(85087);const H=[{path:"",component:M,canActivate:[v.m],data:{title:"Consulta",acceso:Q.v.CONSULTAR_ESTADO}}];class P{static#e=this.\u0275fac=function(i){return new(i||P)};static#t=this.\u0275mod=e.oAB({type:P});static#o=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(H),h.Bz]})}var V=o(92020);class O{static#e=this.\u0275fac=function(i){return new(i||O)};static#t=this.\u0275mod=e.oAB({type:O});static#o=this.\u0275inj=e.cJS({imports:[t.ez,u.Z,E.zk.forChild(),c.a,P,a,V.A]})}}}]);