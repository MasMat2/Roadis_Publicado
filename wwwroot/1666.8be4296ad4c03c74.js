"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[1666],{41666:(x,M,r)=>{r.r(M),r.d(M,{AreaModule:()=>v});var b=r(9116),N=r(13050),f=r(90429);class O{constructor(){}}var o=r(50986),R=r(41131),e=r(94650),u=r(20388),I=r(2060),p=r(99809),c=r(24006),_=r(36895);const T=["formulario"];function Z(d,a){1&d&&(e.TgZ(0,"div",25),e._uU(1," La clave es requerida "),e.qZA())}function S(d,a){1&d&&(e.TgZ(0,"div",25),e._uU(1," El nombre es requerido "),e.qZA())}class m extends R.v{constructor(a,t,i){super(),this.bsModalRef=a,this.modalMensajeService=t,this.areaService=i,this.placeHolderSelect=o.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=o.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.mensajeAgregar="El \xe1rea ha sido agregado",this.mensajeEditar="El \xe1rea ha sido modificado",this.btnSubmit=!1,this.area=new O}ngOnInit(){}esEditar(){return this.accion===o.g.MODAL_ACCION_EDITAR}limpiarFormulario(){this.area={},this.accion=o.g.MODAL_ACCION_AGREGAR}agregar(a){this.areaService.agregar(this.area).subscribe(t=>{this.modalMensajeService.modalExito(this.mensajeAgregar),a.reset(),this.limpiarFormulario(),this.onClose(!0),this.btnSubmit=!1},t=>{this.btnSubmit=!1})}editar(){this.areaService.editar(this.area).subscribe(a=>{this.modalMensajeService.modalExito(this.mensajeEditar),this.onClose(!0)},a=>{this.btnSubmit=!1})}cancelar(){this.onClose(!1)}enviarFormulario(a){if(this.btnSubmit=!0,!a.valid)return f.CW(a),void(this.btnSubmit=!1);this.accion===o.g.MODAL_ACCION_AGREGAR?this.agregar(a):this.accion===o.g.MODAL_ACCION_EDITAR&&this.editar()}static#e=this.\u0275fac=function(t){return new(t||m)(e.Y36(u.UZ),e.Y36(I.V),e.Y36(p.T))};static#a=this.\u0275cmp=e.Xpm({type:m,selectors:[["app-area-formulario"]],viewQuery:function(t,i){if(1&t&&e.Gf(T,5),2&t){let s;e.iGM(s=e.CRH())&&(i.formulario=s.first)}},features:[e.qOj],decls:42,vars:8,consts:[[1,"d-flex"],[1,"barra-lateral-modal"],[1,"fa","fa-plus"],[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],[1,"far","fa-times-circle"],["novalidate","novalidate","formCanDeactivate","",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],["id","modal",1,"cuerpo-contenedor"],[1,"row"],[1,"col-md-3"],[1,"form-group"],[1,"label-input","required-label"],["id","idarea","name","idarea","type","text","maxlength","20","disabled","","autofocus","",1,"form-control",3,"ngModel","ngModelChange"],["clave","ngModel"],["id","clave","name","claveName","type","text","maxlength","20","required","required","autocomplete","off","autofocus","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","error",4,"ngIf"],[1,"col-md-6"],["id","nombre","name","nombreName","type","text","maxlength","50","required","required","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["nombre","ngModel"],[1,"modal-footer"],[1,"text-right"],["type","button",1,"btn-secundario","btn-margin-left",3,"click"],["type","submit",1,"btn-primario","btn-margin-left",3,"disabled"],[1,"error"]],template:function(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"div"),e._uU(6),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return i.cancelar()}),e._UZ(8,"i",6),e.qZA()(),e.TgZ(9,"form",7,8),e.NdJ("keydown.enter",function(l){return l.preventDefault()})("ngSubmit",function(){e.CHM(s);const l=e.MAs(10);return e.KtG(i.enviarFormulario(l))}),e.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"label",13),e._uU(16,"Id \xc1rea"),e.qZA(),e.TgZ(17,"div")(18,"input",14,15),e.NdJ("ngModelChange",function(l){return i.area.idArea=l}),e.qZA()()()(),e.TgZ(20,"div",11)(21,"div",12)(22,"label",13),e._uU(23,"Clave"),e.qZA(),e.TgZ(24,"div")(25,"input",16,15),e.NdJ("ngModelChange",function(l){return i.area.clave=l}),e.qZA(),e.YNc(27,Z,2,0,"div",17),e.qZA()()(),e.TgZ(28,"div",18)(29,"div",12)(30,"label",13),e._uU(31,"Nombre"),e.qZA(),e.TgZ(32,"div")(33,"input",19,20),e.NdJ("ngModelChange",function(l){return i.area.nombre=l}),e.qZA(),e.YNc(35,S,2,0,"div",17),e.qZA()()()()(),e.TgZ(36,"div",21)(37,"div",22)(38,"button",23),e.NdJ("click",function(){return i.cancelar()}),e._uU(39,"Cancelar"),e.qZA(),e.TgZ(40,"button",24),e._uU(41,"Guardar"),e.qZA()()()()()()}if(2&t){const s=e.MAs(19),n=e.MAs(34);e.xp6(6),e.hij("",i.accion," \xc1rea"),e.xp6(12),e.Q6J("ngModel",i.area.idArea),e.xp6(7),e.Q6J("ngModel",i.area.clave)("disabled",i.esEditar()),e.xp6(2),e.Q6J("ngIf",(null==s.errors?null:s.errors.required)&&s.touched),e.xp6(6),e.Q6J("ngModel",i.area.nombre),e.xp6(2),e.Q6J("ngIf",(null==n.errors?null:n.errors.required)&&n.touched),e.xp6(5),e.Q6J("disabled",i.btnSubmit)}},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.nD,c.On,c.F,_.O5],encapsulation:2})}var h=r(85087),D=r(62861),G=r(73687),L=r(58390);function F(d,a){if(1&d){const t=e.EpF();e.TgZ(0,"div",7),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.agregar())}),e.TgZ(1,"button",8),e._uU(2,"Agregar \xc1rea"),e.qZA()()}}class g{constructor(a,t,i,s,n,l){this.modalMensajeService=a,this.accesoService=t,this.areaService=i,this.modalService=s,this.bsModalRef=n,this.sessionService=l,this.tieneAccesoAgregar=!1,this.accesoEditar=h.v.EDITAR_AREA,this.accesoEliminar=h.v.ELIMINAR_AREA,this.HEADER_GRID="\xc1reas",this.MENSAJE_EXITO_ELIMINAR="El \xe1rea ha sido eliminado",this.TITULO_MODAL_ELIMINAR="Eliminar \xc1rea",this.areaList=[],this.columnaEditar=Object.assign({action:o.g.GRID_ACCION_EDITAR,title:"Editar",acceso:this.accesoEditar,cellRendererSelector:C=>C.data.idCompania!==this.idCompaniaUsuarioSesion?null:{component:"actionButton",params:{disabled:!1}}},o.g.CONFIG_COLUMN_ACTION),this.columnaEliminar=Object.assign({action:o.g.GRID_ACCION_ELIMINAR,title:"Eliminar",acceso:this.accesoEliminar,cellRendererSelector:C=>C.data.idCompania!==this.idCompaniaUsuarioSesion?null:{component:"actionButton",params:{disabled:!1}}},o.g.CONFIG_COLUMN_ACTION),this.columns=[{headerName:"Id \xc1rea",field:"idArea",maxWidth:150,sort:"asc"},{headerName:"Clave",field:"clave",maxWidth:150,sort:"asc"},{headerName:"\xc1rea",field:"nombre",minWidth:150},this.columnaEditar,this.columnaEliminar]}ngOnInit(){this.accesoService.tieneAcceso(h.v.AGREGAR_AREA).subscribe(a=>{this.tieneAccesoAgregar=a}),this.idCompaniaUsuarioSesion=this.sessionService.obtenerIdCompaniaUsuarioSesion(),this.consultarGrid()}consultarGrid(){this.areaService.consultarParaGrid().subscribe(a=>{this.areaList=a})}onGridClick(a){a.accion===o.g.GRID_ACCION_EDITAR?this.editar(a.data.idArea):a.accion===o.g.GRID_ACCION_ELIMINAR&&this.eliminar(a.data)}agregar(){this.bsModalRef=this.modalService.show(m,o.g.CONFIG_MODAL_MEDIUM),this.bsModalRef.content.accion=o.g.MODAL_ACCION_AGREGAR,this.bsModalRef.content.onClose=a=>{a&&this.consultarGrid(),f.Zm()&&this.bsModalRef.hide()}}editar(a){this.areaService.consultar(a).subscribe(t=>{this.bsModalRef=this.modalService.show(m,o.g.CONFIG_MODAL_MEDIUM),this.bsModalRef.content.area=t,this.bsModalRef.content.accion=o.g.MODAL_ACCION_EDITAR,this.bsModalRef.content.onClose=i=>{i&&this.consultarGrid(),f.Zm()&&this.bsModalRef.hide()}})}eliminar(a){this.modalMensajeService.modalConfirmacion("\xbfDesea eliminar el \xe1rea <strong>"+a.nombre+"</strong>?",this.TITULO_MODAL_ELIMINAR,o.g.ICONO_CRUZ).then(t=>{this.areaService.eliminar(a.idArea).subscribe(i=>{this.modalMensajeService.modalExito(this.MENSAJE_EXITO_ELIMINAR),this.consultarGrid()})})}static#e=this.\u0275fac=function(t){return new(t||g)(e.Y36(I.V),e.Y36(D.Q),e.Y36(p.T),e.Y36(u.tT),e.Y36(u.UZ),e.Y36(G.m))};static#a=this.\u0275cmp=e.Xpm({type:g,selectors:[["app-area"]],decls:8,vars:4,consts:[[1,"contenedor"],[1,"titulo-contenedor"],[1,"cuerpo-contenedor"],[1,"row"],[1,"col-md-12"],["class","contenedor-agregar",3,"click",4,"ngIf"],[3,"headerName","data","children","event"],[1,"contenedor-agregar",3,"click"],[1,"btn-agregar"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"\xc1reas"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e.YNc(6,F,3,0,"div",5),e.TgZ(7,"app-grid-general",6),e.NdJ("event",function(n){return i.onGridClick(n)}),e.qZA()()()()()),2&t&&(e.xp6(6),e.Q6J("ngIf",i.tieneAccesoAgregar),e.xp6(1),e.Q6J("headerName",i.HEADER_GRID)("data",i.areaList)("children",i.columns))},dependencies:[_.O5,L.$],encapsulation:2})}var E=r(81237);const U=[{path:"",component:g,canActivate:[N.m],canDeactivate:[E.I],data:{title:"Consulta",acceso:h.v.CONSULTAR_AREA}}];class A{static#e=this.\u0275fac=function(t){return new(t||A)};static#a=this.\u0275mod=e.oAB({type:A});static#i=this.\u0275inj=e.cJS({imports:[b.Bz.forChild(U),b.Bz]})}var J=r(63405),y=r(41283);class v{static#e=this.\u0275fac=function(t){return new(t||v)};static#a=this.\u0275mod=e.oAB({type:v});static#i=this.\u0275inj=e.cJS({providers:[p.T,E.I],imports:[A,J.m,y.Z,u.zk.forChild()]})}}}]);