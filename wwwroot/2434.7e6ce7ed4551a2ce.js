"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[2434],{12846:(T,v,t)=>{t.d(v,{Y:()=>i});var f=t(50986),p=t(94650),h=t(2060);class i{constructor(e){this.modalMensajeService=e}validarCamposRequeridos(e){Object.keys(e.controls).forEach(d=>{const l=e.controls[d];l.markAsTouched({onlySelf:!0}),l.markAsDirty({onlySelf:!0})})}validarCamposRequeridosConMensaje(e){Object.keys(e.controls).forEach(d=>{const l=e.controls[d];l.markAsTouched({onlySelf:!0}),l.markAsDirty({onlySelf:!0})}),Object.keys(e.controls).some(d=>{const l=e.controls[d];return!!(l.errors&&l.errors.required&&l.invalid)&&(this.modalMensajeService.modalError(f.g.MENSAJE_REQUERIDOS),!0)})}markAsUntouched(e){Object.keys(e.controls).forEach(d=>{e.controls[d].markAsUntouched({onlySelf:!0})})}static#e=this.\u0275fac=function(d){return new(d||i)(p.LFG(h.V))};static#o=this.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}},22434:(T,v,t)=>{t.r(v),t.d(v,{MonedaModule:()=>b});var f=t(9116),p=t(13050),h=t(85087),i=t(50986);class I{constructor(){}}var e=t(94650),d=t(2060),l=t(12846),C=t(70932),m=t(24006),E=t(36895);function O(u,o){1&u&&(e.TgZ(0,"div",25),e._uU(1," La clave es requerida "),e.qZA())}function S(u,o){1&u&&(e.TgZ(0,"div",25),e._uU(1," El nombre de la moneda es requerido "),e.qZA())}function Z(u,o){1&u&&(e.TgZ(0,"div",25),e._uU(1," El s\xedmbolo la moneda es requerido "),e.qZA())}class g{constructor(o,a,n){this.mensajeService=o,this.formularioService=a,this.monedaService=n,this.mensajeAgregar="La moneda ha sido agregada",this.mensajeEditar="La moneda ha sido modificada",this.btnSubmit=!1,this.moneda=new I,this.deshabilitarGuardarArchivo=!0}ngOnInit(){}enviarFormulario(o){if(this.btnSubmit=!0,!o.valid)return this.formularioService.validarCamposRequeridos(o),void(this.btnSubmit=!1);this.accion===i.g.MODAL_ACCION_AGREGAR?this.agregar():this.accion===i.g.MODAL_ACCION_EDITAR&&this.editar()}agregar(){this.monedaService.agregar(this.moneda).subscribe(o=>{this.mensajeService.modalExito(this.mensajeAgregar),this.onClose(!0)},o=>{this.btnSubmit=!1})}editar(){this.monedaService.editar(this.moneda).subscribe(o=>{this.mensajeService.modalExito(this.mensajeEditar),this.onClose(!0)},o=>{this.btnSubmit=!1})}cancelar(){this.onClose(!0)}static#e=this.\u0275fac=function(a){return new(a||g)(e.Y36(d.V),e.Y36(l.Y),e.Y36(C.n))};static#o=this.\u0275cmp=e.Xpm({type:g,selectors:[["app-moneda-formulario"]],decls:42,vars:9,consts:[[1,"d-flex"],[1,"barra-lateral-modal"],[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],[1,"far","fa-times-circle"],["novalidate","novalidate",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],["id","modal",1,"cuerpo-contenedor"],[1,"row"],[1,"col-md-2"],[1,"form-group"],[1,"label-input","required-label"],["name","clave","type","text","maxlength","20","autocomplete","off","required","","autofocus","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["clave","ngModel"],["class","error",4,"ngIf"],[1,"col-md-5"],["name","nombre","type","text","maxlength","50","autocomplete","off","required","",1,"form-control",3,"ngModel","ngModelChange"],["nombre","ngModel"],["name","simbolo","type","text","maxlength","5","autocomplete","off","required","",1,"form-control",3,"ngModel","ngModelChange"],["simbolo","ngModel"],[1,"modal-footer"],[1,"text-right"],["type","button",1,"btn-secundario","mr-3",3,"click"],["type","submit",1,"btn-primario","btn-margin-left",3,"disabled"],[1,"error"]],template:function(a,n){if(1&a){const c=e.EpF();e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div"),e._uU(5),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return n.cancelar()}),e._UZ(7,"i",5),e.qZA()(),e.TgZ(8,"form",6,7),e.NdJ("keydown.enter",function(s){return s.preventDefault()})("ngSubmit",function(){e.CHM(c);const s=e.MAs(9);return e.KtG(n.enviarFormulario(s))}),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"label",12),e._uU(15,"Clave"),e.qZA(),e.TgZ(16,"div")(17,"input",13,14),e.NdJ("ngModelChange",function(s){return n.moneda.clave=s}),e.qZA(),e.YNc(19,O,2,0,"div",15),e.qZA()()(),e.TgZ(20,"div",16)(21,"div",11)(22,"label",12),e._uU(23,"Nombre de la moneda"),e.qZA(),e.TgZ(24,"div")(25,"input",17,18),e.NdJ("ngModelChange",function(s){return n.moneda.nombre=s}),e.qZA(),e.YNc(27,S,2,0,"div",15),e.qZA()()(),e.TgZ(28,"div",16)(29,"div",11)(30,"label",12),e._uU(31,"S\xedmbolo"),e.qZA(),e.TgZ(32,"div")(33,"input",19,20),e.NdJ("ngModelChange",function(s){return n.moneda.simbolo=s}),e.qZA(),e.YNc(35,Z,2,0,"div",15),e.qZA()()()()(),e.TgZ(36,"div",21)(37,"div",22)(38,"button",23),e.NdJ("click",function(){return n.cancelar()}),e._uU(39," Cancelar "),e.qZA(),e.TgZ(40,"button",24),e._uU(41," Guardar "),e.qZA()()()()()()}if(2&a){const c=e.MAs(18),r=e.MAs(26),s=e.MAs(34);e.xp6(5),e.hij("Moneda - ",n.accion,""),e.xp6(12),e.Q6J("ngModel",n.moneda.clave)("disabled",n.moneda.idMoneda>0),e.xp6(2),e.Q6J("ngIf",(null==c.errors?null:c.errors.required)&&c.touched),e.xp6(6),e.Q6J("ngModel",n.moneda.nombre),e.xp6(2),e.Q6J("ngIf",(null==r.errors?null:r.errors.required)&&r.touched),e.xp6(6),e.Q6J("ngModel",n.moneda.simbolo),e.xp6(2),e.Q6J("ngIf",(null==s.errors?null:s.errors.required)&&s.touched),e.xp6(5),e.Q6J("disabled",n.btnSubmit)}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.nD,m.On,m.F,E.O5],styles:[".subtitulo[_ngcontent-%COMP%]{color:#ff6c00;padding-top:10px;border-top:1px #ff6c00 solid;margin-top:40px;margin-bottom:20px;width:100%}.image-box[_ngcontent-%COMP%]{display:flex;margin-top:25px;padding-left:15px;justify-items:center;align-items:center}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]})}var R=t(62861),M=t(20388),N=t(58390);function D(u,o){if(1&u){const a=e.EpF();e.TgZ(0,"div",7),e.NdJ("click",function(){e.CHM(a);const c=e.oxw();return e.KtG(c.agregar())}),e.TgZ(1,"button",8),e._uU(2,"Agregar Moneda"),e.qZA()()}}class A{constructor(o,a,n,c,r){this.mensajeService=o,this.monedaService=a,this.accesoService=n,this.modalService=c,this.bsModalRef=r,this.tieneAccesoAgregar=!1,this.accesoEditar=h.v.EDITAR_MONEDA,this.accesoEliminar=h.v.ELIMINAR_MONEDA,this.HEADER_GRID="Monedas",this.MENSAJE_EXITO_ELIMINAR="La moneda ha sido eliminada",this.TITULO_MODAL_ELIMINAR="Eliminar moneda",this.columns=[{headerName:"Clave",field:"clave",minWidth:150},{headerName:"Nombre de la moneda",field:"nombre",minWidth:150},{headerName:"S\xedmbolo",field:"simbolo",minWidth:150}]}ngOnInit(){this.accesoService.tieneAcceso(h.v.AGREGAR_MONEDA).subscribe({next:o=>{this.tieneAccesoAgregar=o}}),this.consultarGrid()}consultarGrid(){this.monedaService.consultarTodosParaGrid().subscribe(o=>{this.monedaList=o})}onGridClick(o){o.accion!==i.g.GRID_ACCION_EDITAR?o.accion!==i.g.GRID_ACCION_ELIMINAR||this.eliminar(o.data):this.editar(o.data.idMoneda)}agregar(){this.bsModalRef=this.modalService.show(g,i.g.CONFIG_MODAL_MEDIUM),this.bsModalRef.content.accion=i.g.MODAL_ACCION_AGREGAR,this.bsModalRef.content.onClose=o=>{o&&this.consultarGrid(),this.bsModalRef.hide()}}editar(o){this.monedaService.consultarPorId(o).subscribe(a=>{this.bsModalRef=this.modalService.show(g,i.g.CONFIG_MODAL_MEDIUM),this.bsModalRef.content.moneda=a,this.bsModalRef.content.accion=i.g.MODAL_ACCION_EDITAR,this.bsModalRef.content.idMoneda=o,this.bsModalRef.content.onClose=n=>{n&&this.consultarGrid(),this.bsModalRef.hide()}})}eliminar(o){this.mensajeService.modalConfirmacion("\xbfDesea eliminar la moneda <strong>"+o.nombre+"</strong>?",this.TITULO_MODAL_ELIMINAR).then(a=>{this.monedaService.eliminar(o.idMoneda).subscribe(n=>{this.mensajeService.modalExito(this.MENSAJE_EXITO_ELIMINAR),this.consultarGrid()})})}static#e=this.\u0275fac=function(a){return new(a||A)(e.Y36(d.V),e.Y36(C.n),e.Y36(R.Q),e.Y36(M.tT),e.Y36(M.UZ))};static#o=this.\u0275cmp=e.Xpm({type:A,selectors:[["ng-component"]],decls:8,vars:6,consts:[[1,"contenedor"],[1,"titulo-contenedor"],[1,"cuerpo-contenedor"],[1,"row"],[1,"col-md-12"],["class","contenedor-agregar",3,"click",4,"ngIf"],[3,"headerName","data","children","accesoEditar","accesoEliminar","event"],[1,"contenedor-agregar",3,"click"],[1,"btn-agregar"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Monedas"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e.YNc(6,D,3,0,"div",5),e.TgZ(7,"app-grid-general",6),e.NdJ("event",function(r){return n.onGridClick(r)}),e.qZA()()()()()),2&a&&(e.xp6(6),e.Q6J("ngIf",n.tieneAccesoAgregar),e.xp6(1),e.Q6J("headerName",n.HEADER_GRID)("data",n.monedaList)("children",n.columns)("accesoEditar",n.accesoEditar)("accesoEliminar",n.accesoEliminar))},dependencies:[E.O5,N.$],encapsulation:2})}const y=[{path:"",component:A,canActivate:[p.m],data:{title:"Consulta",acceso:h.v.CONSULTAR_MONEDA}}];class _{static#e=this.\u0275fac=function(a){return new(a||_)};static#o=this.\u0275mod=e.oAB({type:_});static#n=this.\u0275inj=e.cJS({imports:[f.Bz.forChild(y),f.Bz]})}var L=t(41283),U=t(63405);class b{static#e=this.\u0275fac=function(a){return new(a||b)};static#o=this.\u0275mod=e.oAB({type:b});static#n=this.\u0275inj=e.cJS({providers:[C.n,M.UZ],imports:[_,U.m,L.Z,M.zk.forChild()]})}}}]);