"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[458],{63666:(Lo,Lr,xt)=>{xt.d(Lr,{iM:()=>E,qr:()=>_e,xc:()=>Je,rO:()=>xe,kj:()=>Oe});var o=xt(94650),V=xt(36895),Dt=function(t,e){return(Dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])})(t,e)};function Fn(t,e){function n(){this.constructor=t}Dt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var F=function(){return F=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++)for(var s in n=arguments[r])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e},F.apply(this,arguments)};function Ln(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,a,r=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function Ot(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ln(arguments[e]));return t}var Pr="An invariant failed, however the error is obfuscated because this is an production build.",rt=[];Object.freeze(rt);var Nt={};Object.freeze(Nt);var jr={};function Ae(){return typeof window<"u"?window:typeof global<"u"?global:jr}function L(){return++d.mobxGuid}function f(t){throw ve(!1,t),"X"}function ve(t,e){if(!t)throw new Error("[mobx] "+(e||Pr))}function Tt(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var it=function(){};function Et(t){return null!==t&&"object"==typeof t}function we(t){if(null===t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function me(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Qe(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function de(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(r){return Et(r)&&!0===r[n]}}function Ie(t){return void 0!==Ae().Map&&t instanceof Ae().Map}function Ye(t){return t instanceof Set}function ne(t){for(var e=[];;){var n=t.next();if(n.done)break;e.push(n.value)}return e}function jn(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function kn(t){return null===t?null:"object"==typeof t?""+t:t}function Ct(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function At(t,e){Qe(t,Ct(),e)}function qe(t){return t[Ct()]=Gr,t}function wt(){return"function"==typeof Symbol&&Symbol.toStringTag||"@@toStringTag"}function Gr(){return this}var ot=function(){function t(e){void 0===e&&(e="Atom@"+L()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=b.NOT_TRACKING}return t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.reportObserved=function(){return nr(this)},t.prototype.reportChanged=function(){$(),function fi(t){if(t.lowestObserverState!==b.STALE){t.lowestObserverState=b.STALE;for(var e=t.observers,n=e.length;n--;){var r=e[n];r.dependenciesState===b.UP_TO_DATE&&(r.isTracing!==G.NONE&&rr(r,t),r.onBecomeStale()),r.dependenciesState=b.STALE}}}(this),J()},t.prototype.toString=function(){return this.name},t}(),It=de("Atom",ot);function $r(t,e,n){void 0===e&&(e=it),void 0===n&&(n=it);var r=new ot(t);return function Ti(t,e,n){return cr("onBecomeObserved",t,e,n)}(r,e),dr(r,n),r}function Vn(t,e){return t===e}var Se={identity:Vn,structural:function Jr(t,e){return Ht(t,e)},default:function Yr(t,e){return function Hr(t,e){return"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}(t,e)||Vn(t,e)},shallow:function Qr(t,e){return Ht(t,e,1)}},qr={},Wr={};function ye(t){if(!0!==t.__mobxDidRunLazyInitializers){var e=t.__mobxDecorators;if(e)for(var n in me(t,"__mobxDidRunLazyInitializers",!0),e){var r=e[n];r.propertyCreator(t,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function Un(t,e){return function(){var r,i=function(a,l,u,g){if(!0===g)return e(a,l,u,a,r),null;if(!Object.prototype.hasOwnProperty.call(a,"__mobxDecorators")){var h=a.__mobxDecorators;me(a,"__mobxDecorators",F({},h))}return a.__mobxDecorators[l]={prop:l,propertyCreator:e,descriptor:u,decoratorTarget:a,decoratorArguments:r},function zr(t,e){var n=e?qr:Wr;return n[t]||(n[t]={configurable:!0,enumerable:e,get:function(){return ye(this),this[t]},set:function(r){ye(this),this[t]=r}})}(l,t)};return function Kr(t){return(2===t.length||3===t.length)&&"string"==typeof t[1]||4===t.length&&!0===t[3]}(arguments)?(r=rt,i.apply(null,arguments)):(r=Array.prototype.slice.call(arguments),i)}}function We(t,e,n){return gt(t)?t:Array.isArray(t)?m.array(t,{name:n}):we(t)?m.object(t,void 0,{name:n}):Ie(t)?m.map(t,{name:n}):Ye(t)?m.set(t,{name:n}):t}function ze(t){return t}function st(t){var e=Un(!0,function(r,i,s,a,l){xr(r,i,s?s.initializer?s.initializer.call(r):s.value:void 0,t)}),n=(typeof process<"u"&&process.env,e);return n.enhancer=t,n}var Hn={deep:!0,name:void 0,defaultDecorator:void 0},Gn={deep:!1,name:void 0,defaultDecorator:void 0};function Me(t){return null==t?Hn:"string"==typeof t?{name:t,deep:!0}:t}function at(t){return t.defaultDecorator?t.defaultDecorator.enhancer:!1===t.deep?ze:We}Object.freeze(Hn),Object.freeze(Gn);var St=st(We),ei=st(function Zr(t,e,n){return null==t||k(t)||P(t)||M(t)||j(t)?t:Array.isArray(t)?m.array(t,{name:n,deep:!1}):we(t)?m.object(t,void 0,{name:n,deep:!1}):Ie(t)?m.map(t,{name:n,deep:!1}):Ye(t)?m.set(t,{name:n,deep:!1}):f(!1)}),$n=st(ze),ti=st(function Xr(t,e,n){return Ht(t,e)?e:t});var Jn={box:function(t,e){arguments.length>2&&re("box");var n=Me(e);return new pe(t,at(n),n.name,!0,n.equals)},shallowBox:function(t,e){return arguments.length>2&&re("shallowBox"),m.box(t,{name:e,deep:!1})},array:function(t,e){arguments.length>2&&re("array");var n=Me(e);return new oe(t,at(n),n.name)},shallowArray:function(t,e){return arguments.length>2&&re("shallowArray"),m.array(t,{name:e,deep:!1})},map:function(t,e){arguments.length>2&&re("map");var n=Me(e);return new vt(t,at(n),n.name)},shallowMap:function(t,e){return arguments.length>2&&re("shallowMap"),m.map(t,{name:e,deep:!1})},set:function(t,e){arguments.length>2&&re("set");var n=Me(e);return new yt(t,at(n),n.name)},object:function(t,e,n){return"string"==typeof arguments[1]&&re("object"),ur({},t,e,Me(n))},shallowObject:function(t,e){return"string"==typeof arguments[1]&&re("shallowObject"),m.object(t,{},{name:e,deep:!1})},ref:$n,shallow:ei,deep:St,struct:ti},m=function ni(t,e,n){if("string"==typeof arguments[1])return St.apply(null,arguments);if(gt(t))return t;var r=we(t)?m.object(t,e,n):Array.isArray(t)?m.array(t,e):Ie(t)?m.map(t,e):Ye(t)?m.set(t,e):t;if(r!==t)return r;f(!1)};function re(t){f("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}Object.keys(Jn).forEach(function(t){return m[t]=Jn[t]});var b,t,G,lt=Un(!1,function(t,e,n,r,i){var s=n.get,a=n.set,l=i[0]||{};!function Qi(t,e,n){var r=Ut(t);n.name=r.name+"."+e,n.context=t,r.values[e]=new fe(n),Object.defineProperty(t,e,function qi(t){return Or[t]||(Or[t]={configurable:d.computedConfigurable,enumerable:!1,get:function(){return Nr(this).read(this,t)},set:function(e){Nr(this).write(this,t,e)}})}(e))}(t,e,F({get:s,set:a},l))}),ri=lt({equals:Se.structural}),O=function(e,n,r){if("string"==typeof n||null!==e&&"object"==typeof e&&1===arguments.length)return lt.apply(null,arguments);var i="object"==typeof n?n:{};return i.get=e,i.set="function"==typeof n?n:i.set,i.name=i.name||e.name||"",new fe(i)};O.struct=ri,(t=b||(b={}))[t.NOT_TRACKING=-1]="NOT_TRACKING",t[t.UP_TO_DATE=0]="UP_TO_DATE",t[t.POSSIBLY_STALE=1]="POSSIBLY_STALE",t[t.STALE=2]="STALE",function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(G||(G={}));var dt=function t(e){this.cause=e};function Ke(t){return t instanceof dt}function Mt(t){switch(t.dependenciesState){case b.UP_TO_DATE:return!1;case b.NOT_TRACKING:case b.STALE:return!0;case b.POSSIBLY_STALE:for(var e=Re(),n=t.observing,r=n.length,i=0;i<r;i++){var s=n[i];if(Be(s)){if(d.disableErrorBoundaries)s.get();else try{s.get()}catch{return ce(e),!0}if(t.dependenciesState===b.STALE)return ce(e),!0}}return zn(t),ce(e),!1}}function ct(t){var e=t.observers.length>0;d.computationDepth>0&&e&&f(!1),!d.allowStateChanges&&(e||"strict"===d.enforceActions)&&f(!1)}function Qn(t,e,n){var r=qn(!0);zn(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++d.runId;var s,i=d.trackingDerivation;if(d.trackingDerivation=t,!0===d.disableErrorBoundaries)s=e.call(n);else try{s=e.call(n)}catch(a){s=new dt(a)}return d.trackingDerivation=i,function ii(t){for(var e=t.observing,n=t.observing=t.newObserving,r=b.UP_TO_DATE,i=0,s=t.unboundDepsCount,a=0;a<s;a++){0===(l=n[a]).diffValue&&(l.diffValue=1,i!==a&&(n[i]=l),i++),l.dependenciesState>r&&(r=l.dependenciesState)}for(n.length=i,t.newObserving=null,s=e.length;s--;){0===(l=e[s]).diffValue&&er(l,t),l.diffValue=0}for(;i--;){var l;1===(l=n[i]).diffValue&&(l.diffValue=0,pi(l,t))}r!==b.UP_TO_DATE&&(t.dependenciesState=r,t.onBecomeStale())}(t),t.observing.length,Wn(r),s}function Rt(t){var e=t.observing;t.observing=[];for(var n=e.length;n--;)er(e[n],t);t.dependenciesState=b.NOT_TRACKING}function Yn(t){var e=Re(),n=t();return ce(e),n}function Re(){var t=d.trackingDerivation;return d.trackingDerivation=null,t}function ce(t){d.trackingDerivation=t}function qn(t){var e=d.allowStateReads;return d.allowStateReads=t,e}function Wn(t){d.allowStateReads=t}function zn(t){if(t.dependenciesState!==b.UP_TO_DATE){t.dependenciesState=b.UP_TO_DATE;for(var e=t.observing,n=e.length;n--;)e[n].lowestObserverState=b.UP_TO_DATE}}var ut=0,oi=1;function ue(t,e){var n=function(){return Kn(t,e,this,arguments)};return n.isMobxAction=!0,n}function Kn(t,e,n,r){var i=function si(t,e,n){var r=I()&&!!t,i=0;if(r){i=Date.now();var s=n&&n.length||0,a=new Array(s);if(s>0)for(var l=0;l<s;l++)a[l]=n[l];Q({type:"action",name:t,object:e,arguments:a})}var u=Re();$();var g=Bt(!0),h=qn(!0),x={prevDerivation:u,prevAllowStateChanges:g,prevAllowStateReads:h,notifySpy:r,startTime:i,actionId:oi++,parentActionId:ut};return ut=x.actionId,x}(t,n,r);try{return e.apply(n,r)}catch(s){throw i.error=s,s}finally{!function ai(t){ut!==t.actionId&&f("invalid action stack. did you forget to finish an action?"),ut=t.parentActionId,void 0!==t.error&&(d.suppressReactionErrors=!0),Ft(t.prevAllowStateChanges),Wn(t.prevAllowStateReads),J(),ce(t.prevDerivation),t.notifySpy&&Y({time:Date.now()-t.startTime}),d.suppressReactionErrors=!1}(i)}}function Bt(t){var e=d.allowStateChanges;return d.allowStateChanges=t,e}function Ft(t){d.allowStateChanges=t}var pe=function(t){function e(n,r,i,s,a){void 0===i&&(i="ObservableValue@"+L()),void 0===s&&(s=!0),void 0===a&&(a=Se.default);var l=t.call(this,i)||this;return l.enhancer=r,l.name=i,l.equals=a,l.hasUnreportedChange=!1,l.value=r(n,void 0,i),s&&I()&&be({type:"create",name:l.name,newValue:""+l.value}),l}return Fn(e,t),e.prototype.dehanceValue=function(n){return void 0!==this.dehancer?this.dehancer(n):n},e.prototype.set=function(n){var r=this.value;if((n=this.prepareNewValue(n))!==d.UNCHANGED){var i=I();i&&Q({type:"update",name:this.name,newValue:n,oldValue:r}),this.setNewValue(n),i&&Y()}},e.prototype.prepareNewValue=function(n){if(ct(this),ee(this)){var r=te(this,{object:this,type:"update",newValue:n});if(!r)return d.UNCHANGED;n=r.newValue}return n=this.enhancer(n,this.value,this.name),this.equals(this.value,n)?d.UNCHANGED:n},e.prototype.setNewValue=function(n){var r=this.value;this.value=n,this.reportChanged(),q(this)&&W(this,{type:"update",object:this,newValue:n,oldValue:r})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(n){return tt(this,n)},e.prototype.observe=function(n,r){return r&&n({object:this,type:"update",newValue:this.value,oldValue:void 0}),nt(this,n)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return kn(this.get())},e}(ot);pe.prototype[jn()]=pe.prototype.valueOf;de("ObservableValue",pe);var fe=function(){function t(e){this.dependenciesState=b.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=b.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+L(),this.value=new dt(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=G.NONE,this.derivation=e.get,this.name=e.name||"ComputedValue@"+L(),e.set&&(this.setter=ue(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?Se.structural:Se.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return t.prototype.onBecomeStale=function(){!function gi(t){if(t.lowestObserverState===b.UP_TO_DATE){t.lowestObserverState=b.POSSIBLY_STALE;for(var e=t.observers,n=e.length;n--;){var r=e[n];r.dependenciesState===b.UP_TO_DATE&&(r.dependenciesState=b.POSSIBLY_STALE,r.isTracing!==G.NONE&&rr(r,t),r.onBecomeStale())}}}(this)},t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.get=function(){this.isComputing&&f("Cycle detected in computation "+this.name+": "+this.derivation),0!==d.inBatch||0!==this.observers.length||this.keepAlive?(nr(this),Mt(this)&&this.trackAndCompute()&&function hi(t){if(t.lowestObserverState!==b.STALE){t.lowestObserverState=b.STALE;for(var e=t.observers,n=e.length;n--;){var r=e[n];r.dependenciesState===b.POSSIBLY_STALE?r.dependenciesState=b.STALE:r.dependenciesState===b.UP_TO_DATE&&(t.lowestObserverState=b.UP_TO_DATE)}}}(this)):Mt(this)&&(this.warnAboutUntrackedRead(),$(),this.value=this.computeValue(!1),J());var e=this.value;if(Ke(e))throw e.cause;return e},t.prototype.peek=function(){var e=this.computeValue(!1);if(Ke(e))throw e.cause;return e},t.prototype.set=function(e){if(this.setter){ve(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else ve(!1,!1)},t.prototype.trackAndCompute=function(){I()&&be({object:this.scope,type:"compute",name:this.name});var e=this.value,n=this.dependenciesState===b.NOT_TRACKING,r=this.computeValue(!0),i=n||Ke(e)||Ke(r)||!this.equals(e,r);return i&&(this.value=r),i},t.prototype.computeValue=function(e){var n;if(this.isComputing=!0,d.computationDepth++,e)n=Qn(this,this.derivation,this.scope);else if(!0===d.disableErrorBoundaries)n=this.derivation.call(this.scope);else try{n=this.derivation.call(this.scope)}catch(r){n=new dt(r)}return d.computationDepth--,this.isComputing=!1,n},t.prototype.suspend=function(){this.keepAlive||(Rt(this),this.value=void 0)},t.prototype.observe=function(e,n){var r=this,i=!0,s=void 0;return Xe(function(){var a=r.get();if(!i||n){var l=Re();e({type:"update",object:r,newValue:a,oldValue:s}),ce(l)}i=!1,s=a})},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return kn(this.get())},t}();fe.prototype[jn()]=fe.prototype.valueOf;var Be=de("ComputedValue",fe),Ze=function t(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},pt=!0,Xn=!1,d=function(){var t=Ae();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(pt=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new Ze).version&&(pt=!1),pt?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Ze):(setTimeout(function(){Xn||f("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Ze)}();function pi(t,e){var n=t.observers.length;n&&(t.observersIndexes[e.__mapid]=n),t.observers[n]=e,t.lowestObserverState>e.dependenciesState&&(t.lowestObserverState=e.dependenciesState)}function er(t,e){if(1===t.observers.length)t.observers.length=0,tr(t);else{var n=t.observers,r=t.observersIndexes,i=n.pop();if(i!==e){var s=r[e.__mapid]||0;s?r[i.__mapid]=s:delete r[i.__mapid],n[s]=i}delete r[e.__mapid]}}function tr(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,d.pendingUnobservations.push(t))}function $(){d.inBatch++}function J(){if(0==--d.inBatch){sr();for(var t=d.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,0===n.observers.length&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof fe&&n.suspend())}d.pendingUnobservations=[]}}function nr(t){var e=d.trackingDerivation;return null!==e?(e.runId!==t.lastAccessedBy&&(t.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(0===t.observers.length&&d.inBatch>0&&tr(t),!1)}function rr(t,e){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+e.name+"'"),t.isTracing===G.BREAK){var n=[];ir(function Ei(t,e){return pr(z(t,e))}(t),n,1),new Function("debugger;\n/*\nTracing '"+t.name+"'\n\nYou are entering this break point because derivation '"+t.name+"' is being traced and '"+e.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof fe?t.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}}function ir(t,e,n){e.length>=1e3?e.push("(and many more)"):(e.push(""+new Array(n).join("\t")+t.name),t.dependencies&&t.dependencies.forEach(function(r){return ir(r,e,n+1)}))}var ft=function(){function t(e,n,r,i){void 0===e&&(e="Reaction@"+L()),void 0===i&&(i=!1),this.name=e,this.onInvalidate=n,this.errorHandler=r,this.requiresObservable=i,this.observing=[],this.newObserving=[],this.dependenciesState=b.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+L(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=G.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,d.pendingReactions.push(this),sr())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if($(),this._isScheduled=!1,Mt(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&I()&&be({name:this.name,type:"scheduled-reaction"})}catch(e){this.reportExceptionInDerivation(e)}}J()}},t.prototype.track=function(e){$();var r,n=I();n&&(r=Date.now(),Q({name:this.name,type:"reaction"})),this._isRunning=!0;var i=Qn(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Rt(this),Ke(i)&&this.reportExceptionInDerivation(i.cause),n&&Y({time:Date.now()-r}),J()},t.prototype.reportExceptionInDerivation=function(e){var n=this;if(this.errorHandler)this.errorHandler(e,this);else{if(d.disableErrorBoundaries)throw e;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";d.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(r,e),I()&&be({type:"error",name:this.name,message:r,error:""+e}),d.globalReactionErrorHandlers.forEach(function(i){return i(e,n)})}},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||($(),Rt(this),J()))},t.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(e){void 0===e&&(e=!1),function Fi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!1;"boolean"==typeof t[t.length-1]&&(n=t.pop());var r=function Li(t){switch(t.length){case 0:return d.trackingDerivation;case 1:return z(t[0]);case 2:return z(t[0],t[1])}}(t);if(!r)return f(!1);r.isTracing===G.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?G.BREAK:G.LOG}(this,e)},t}();var or=100,Lt=function(t){return t()};function sr(){d.inBatch>0||d.isRunningReactions||Lt(vi)}function vi(){d.isRunningReactions=!0;for(var t=d.pendingReactions,e=0;t.length>0;){++e===or&&(console.error("Reaction doesn't converge to a stable state after "+or+" iterations. Probably there is a cycle in the reactive function: "+t[0]),t.splice(0));for(var n=t.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}d.isRunningReactions=!1}var ht=de("Reaction",ft);function I(){return!!d.spyListeners.length}function be(t){if(d.spyListeners.length)for(var e=d.spyListeners,n=0,r=e.length;n<r;n++)e[n](t)}function Q(t){be(F({},t,{spyReportStart:!0}))}var yi={spyReportEnd:!0};function Y(t){be(t?F({},t,{spyReportEnd:!0}):yi)}function _i(){f(!1)}function ar(t){return function(e,n,r){if(r){if(r.value)return{value:ue(t,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return ue(t,i.call(this))}}}return function xi(t){return function(e,n,r){Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:function(){},set:function(i){me(this,n,v(t,i))}})}}(t).apply(this,arguments)}}var v=function(e,n,r,i){return 1===arguments.length&&"function"==typeof e?ue(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof n?ue(e,n):1===arguments.length&&"string"==typeof e?ar(e):!0!==i?ar(n).apply(null,arguments):void(e[n]=ue(e.name||n,r.value))};function Pt(t,e,n){me(t,e,ue(e,n.bind(t)))}function Xe(t,e){void 0===e&&(e=Nt);var i,n=e&&e.name||t.name||"Autorun@"+L();if(!e.scheduler&&!e.delay)i=new ft(n,function(){this.track(l)},e.onError,e.requiresObservable);else{var s=lr(e),a=!1;i=new ft(n,function(){a||(a=!0,s(function(){a=!1,i.isDisposed||i.track(l)}))},e.onError,e.requiresObservable)}function l(){t(i)}return i.schedule(),i.getDisposer()}v.bound=function Di(t,e,n,r){return!0===r?(Pt(t,e,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return Pt(this,e,n.value||n.initializer.call(this)),this[e]},set:_i}:{enumerable:!1,configurable:!0,set:function(i){Pt(this,e,i)},get:function(){}}};var Oi=function(t){return t()};function lr(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:Oi}function Fe(t,e,n){void 0===n&&(n=Nt),"boolean"==typeof n&&(n={fireImmediately:n});var g,r=n.name||"Reaction@"+L(),i=v(r,n.onError?function Ni(t,e){return function(){try{return e.apply(this,arguments)}catch(n){t.call(this,n)}}}(n.onError,e):e),s=!n.scheduler&&!n.delay,a=lr(n),l=!0,u=!1,h=n.compareStructural?Se.structural:n.equals||Se.default,x=new ft(r,function(){l||s?S():u||(u=!0,a(S))},n.onError,n.requiresObservable);function S(){if(u=!1,!x.isDisposed){var X=!1;x.track(function(){var T=t(x);X=l||!h(g,T),g=T}),l&&n.fireImmediately&&i(g,x),!l&&!0===X&&i(g,x),l&&(l=!1)}}return x.schedule(),x.getDisposer()}function dr(t,e,n){return cr("onBecomeUnobserved",t,e,n)}function cr(t,e,n,r){var i="function"==typeof r?z(e,n):z(e),s="function"==typeof r?r:n,a=i[t];return"function"!=typeof a?f(!1):(i[t]=function(){a.call(this),s.call(this)},function(){i[t]=a})}function ur(t,e,n,r){var s=(r=Me(r)).defaultDecorator||(!1===r.deep?$n:St);ye(t),Ut(t,r.name,s.enhancer),$();try{for(var i in e){var a=Object.getOwnPropertyDescriptor(e,i),u=(n&&i in n?n[i]:a.get?lt:s)(t,i,a,!0);u&&Object.defineProperty(t,i,u)}}finally{J()}return t}function pr(t){var e={name:t.name};return t.observing&&t.observing.length>0&&(e.dependencies=function kr(t){var e=[];return t.forEach(function(n){-1===e.indexOf(n)&&e.push(n)}),e}(t.observing).map(pr)),e}function vr(t,e){if(null==t)return!1;if(void 0!==e){if(k(t)){var n=t.$mobx;return n.values&&!!n.values[e]}return!1}return k(t)||!!t.$mobx||It(t)||ht(t)||Be(t)}function gt(t){return 1!==arguments.length&&f(!1),vr(t)}function ie(t,e){void 0===e&&(e=void 0),$();try{return t.apply(e)}finally{J()}}function ee(t){return void 0!==t.interceptors&&t.interceptors.length>0}function tt(t,e){var n=t.interceptors||(t.interceptors=[]);return n.push(e),Tt(function(){var r=n.indexOf(e);-1!==r&&n.splice(r,1)})}function te(t,e){var n=Re();try{var r=t.interceptors;if(r)for(var i=0,s=r.length;i<s&&(ve(!(e=r[i](e))||e.type,"Intercept handlers should return nothing or a change object"),e);i++);return e}finally{ce(n)}}function q(t){return void 0!==t.changeListeners&&t.changeListeners.length>0}function nt(t,e){var n=t.changeListeners||(t.changeListeners=[]);return n.push(e),Tt(function(){var r=n.indexOf(e);-1!==r&&n.splice(r,1)})}function W(t,e){var n=Re(),r=t.changeListeners;if(r){for(var i=0,s=(r=r.slice()).length;i<s;i++)r[i](e);ce(n)}}var ki=function(){var t=!1,e={};return Object.defineProperty(e,"0",{set:function(){t=!0}}),Object.create(e)[0]=1,!1===t}(),jt=0,kt=function t(){};(function Vi(t,e){typeof Object.setPrototypeOf<"u"?Object.setPrototypeOf(t.prototype,e):typeof t.prototype.__proto__<"u"?t.prototype.__proto__=e:t.prototype=e})(kt,Array.prototype),Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(t){Object.defineProperty(kt.prototype,t,{configurable:!0,writable:!0,value:Array.prototype[t]})});var yr=function(){function t(e,n,r,i){this.array=r,this.owned=i,this.values=[],this.lastKnownLength=0,this.atom=new ot(e||"ObservableArray@"+L()),this.enhancer=function(s,a){return n(s,a,e+"[..]")}}return t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.prototype.intercept=function(e){return tt(this,e)},t.prototype.observe=function(e,n){return void 0===n&&(n=!1),n&&e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),nt(this,e)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var n=this.values.length;if(e!==n)if(e>n){for(var r=new Array(e-n),i=0;i<e-n;i++)r[i]=void 0;this.spliceWithArray(n,0,r)}else this.spliceWithArray(e,n-e)},t.prototype.updateArrayLength=function(e,n){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=n,n>0&&e+n+1>jt&&Vt(e+n+1)},t.prototype.spliceWithArray=function(e,n,r){var i=this;ct(this.atom);var s=this.values.length;if(void 0===e?e=0:e>s?e=s:e<0&&(e=Math.max(0,s+e)),n=1===arguments.length?s-e:null==n?0:Math.max(0,Math.min(n,s-e)),void 0===r&&(r=rt),ee(this)){var a=te(this,{object:this.array,type:"splice",index:e,removedCount:n,added:r});if(!a)return rt;n=a.removedCount,r=a.added}var l=(r=0===r.length?r:r.map(function(g){return i.enhancer(g,void 0)})).length-n;this.updateArrayLength(s,l);var u=this.spliceItemsIntoValues(e,n,r);return(0!==n||0!==r.length)&&this.notifyArraySplice(e,r,u),this.dehanceValues(u)},t.prototype.spliceItemsIntoValues=function(e,n,r){var i;if(r.length<1e4)return(i=this.values).splice.apply(i,Ot([e,n],r));var s=this.values.slice(e,e+n);return this.values=this.values.slice(0,e).concat(r,this.values.slice(e+n)),s},t.prototype.notifyArrayChildUpdate=function(e,n,r){var i=!this.owned&&I(),s=q(this),a=s||i?{object:this.array,type:"update",index:e,newValue:n,oldValue:r}:null;i&&Q(F({},a,{name:this.atom.name})),this.atom.reportChanged(),s&&W(this,a),i&&Y()},t.prototype.notifyArraySplice=function(e,n,r){var i=!this.owned&&I(),s=q(this),a=s||i?{object:this.array,type:"splice",index:e,removed:r,added:n,removedCount:r.length,addedCount:n.length}:null;i&&Q(F({},a,{name:this.atom.name})),this.atom.reportChanged(),s&&W(this,a),i&&Y()},t}(),oe=function(t){function e(n,r,i,s){void 0===i&&(i="ObservableArray@"+L()),void 0===s&&(s=!1);var a=t.call(this)||this,l=new yr(i,r,a,s);if(Qe(a,"$mobx",l),n&&n.length){var u=Bt(!0);a.spliceWithArray(0,0,n),Ft(u)}return ki&&Object.defineProperty(l.array,"0",Ui),a}return Fn(e,t),e.prototype.intercept=function(n){return this.$mobx.intercept(n)},e.prototype.observe=function(n,r){return void 0===r&&(r=!1),this.$mobx.observe(n,r)},e.prototype.clear=function(){return this.splice(0)},e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),n.map(function(i){return P(i)?i.peek():i}))},e.prototype.replace=function(n){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,n)},e.prototype.toJS=function(){return this.slice()},e.prototype.toJSON=function(){return this.toJS()},e.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},e.prototype.find=function(n,r,i){void 0===i&&(i=0),arguments.length;var s=this.findIndex.apply(this,arguments);return-1===s?void 0:this.get(s)},e.prototype.findIndex=function(n,r,i){void 0===i&&(i=0),arguments.length;for(var s=this.peek(),a=s.length,l=i;l<a;l++)if(n.call(r,s[l],l,this))return l;return-1},e.prototype.splice=function(n,r){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(n);case 2:return this.$mobx.spliceWithArray(n,r)}return this.$mobx.spliceWithArray(n,r,i)},e.prototype.spliceWithArray=function(n,r,i){return this.$mobx.spliceWithArray(n,r,i)},e.prototype.push=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=this.$mobx;return i.spliceWithArray(i.values.length,0,n),i.values.length},e.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},e.prototype.shift=function(){return this.splice(0,1)[0]},e.prototype.unshift=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=this.$mobx;return i.spliceWithArray(0,0,n),i.values.length},e.prototype.reverse=function(){var n=this.slice();return n.reverse.apply(n,arguments)},e.prototype.sort=function(n){var r=this.slice();return r.sort.apply(r,arguments)},e.prototype.remove=function(n){var r=this.$mobx.dehanceValues(this.$mobx.values).indexOf(n);return r>-1&&(this.splice(r,1),!0)},e.prototype.move=function(n,r){function i(l){if(l<0)throw new Error("[mobx.array] Index out of bounds: "+l+" is negative");var u=this.$mobx.values.length;if(l>=u)throw new Error("[mobx.array] Index out of bounds: "+l+" is not smaller than "+u)}if(i.call(this,n),i.call(this,r),n!==r){var a,s=this.$mobx.values;a=n<r?Ot(s.slice(0,n),s.slice(n+1,r+1),[s[n]],s.slice(r+1)):Ot(s.slice(0,r),[s[n]],s.slice(r,n),s.slice(n+1)),this.replace(a)}},e.prototype.get=function(n){var r=this.$mobx;if(r){if(n<r.values.length)return r.atom.reportObserved(),r.dehanceValue(r.values[n]);console.warn("[mobx.array] Attempt to read an array index ("+n+") that is out of bounds ("+r.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},e.prototype.set=function(n,r){var i=this.$mobx,s=i.values;if(n<s.length){ct(i.atom);var a=s[n];if(ee(i)){var l=te(i,{type:"update",object:this,index:n,newValue:r});if(!l)return;r=l.newValue}(r=i.enhancer(r,a))!==a&&(s[n]=r,i.notifyArrayChildUpdate(n,r,a))}else{if(n!==s.length)throw new Error("[mobx.array] Index out of bounds, "+n+" is larger than "+s.length);i.spliceWithArray(n,0,[r])}},e}(kt);At(oe.prototype,function(){this.$mobx.atom.reportObserved();var t=this,e=0;return qe({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})}),Object.defineProperty(oe.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(t){this.$mobx.setArrayLength(t)}}),me(oe.prototype,wt(),"Array"),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(t){var e=Array.prototype[t];ve("function"==typeof e,"Base function not defined on Array prototype: '"+t+"'"),me(oe.prototype,t,function(){return e.apply(this.peek(),arguments)})}),function Ur(t,e){for(var n=0;n<e.length;n++)me(t,e[n],t[e[n]])}(oe.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var Ui=br(0);function br(t){return{enumerable:!1,configurable:!1,get:function(){return this.get(t)},set:function(e){this.set(t,e)}}}function Hi(t){Object.defineProperty(oe.prototype,""+t,br(t))}function Vt(t){for(var e=jt;e<t;e++)Hi(e);jt=t}Vt(1e3);var Gi=de("ObservableArrayAdministration",yr);function P(t){return Et(t)&&Gi(t.$mobx)}var $i={},vt=function(){function t(e,n,r){if(void 0===n&&(n=We),void 0===r&&(r="ObservableMap@"+L()),this.enhancer=n,this.name=r,this.$mobx=$i,this._keys=new oe(void 0,ze,this.name+".keys()",!0),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return t.prototype._has=function(e){return this._data.has(e)},t.prototype.has=function(e){var n=this;if(!d.trackingDerivation)return this._has(e);var r=this._hasMap.get(e);if(!r){var i=r=new pe(this._has(e),ze,this.name+"."+mt(e)+"?",!1);this._hasMap.set(e,i),dr(i,function(){return n._hasMap.delete(e)})}return r.get()},t.prototype.set=function(e,n){var r=this._has(e);if(ee(this)){var i=te(this,{type:r?"update":"add",object:this,newValue:n,name:e});if(!i)return this;n=i.newValue}return r?this._updateValue(e,n):this._addValue(e,n),this},t.prototype.delete=function(e){var n=this;if(ee(this)&&!(r=te(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var i=I(),s=q(this),r=s||i?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return i&&Q(F({},r,{name:this.name,key:e})),ie(function(){n._keys.remove(e),n._updateHasMapEntry(e,!1),n._data.get(e).setNewValue(void 0),n._data.delete(e)}),s&&W(this,r),i&&Y(),!0}return!1},t.prototype._updateHasMapEntry=function(e,n){var r=this._hasMap.get(e);r&&r.setNewValue(n)},t.prototype._updateValue=function(e,n){var r=this._data.get(e);if((n=r.prepareNewValue(n))!==d.UNCHANGED){var i=I(),s=q(this),a=s||i?{type:"update",object:this,oldValue:r.value,name:e,newValue:n}:null;i&&Q(F({},a,{name:this.name,key:e})),r.setNewValue(n),s&&W(this,a),i&&Y()}},t.prototype._addValue=function(e,n){var r=this;ie(function(){var l=new pe(n,r.enhancer,r.name+"."+mt(e),!1);r._data.set(e,l),n=l.value,r._updateHasMapEntry(e,!0),r._keys.push(e)});var i=I(),s=q(this),a=s||i?{type:"add",object:this,name:e,newValue:n}:null;i&&Q(F({},a,{name:this.name,key:e})),s&&W(this,a),i&&Y()},t.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.keys=function(){return this._keys[Ct()]()},t.prototype.values=function(){var e=this,n=0;return qe({next:function(){return n<e._keys.length?{value:e.get(e._keys[n++]),done:!1}:{value:void 0,done:!0}}})},t.prototype.entries=function(){var e=this,n=0;return qe({next:function(){if(n<e._keys.length){var r=e._keys[n++];return{value:[r,e.get(r)],done:!1}}return{done:!0}}})},t.prototype.forEach=function(e,n){var r=this;this._keys.forEach(function(i){return e.call(n,r.get(i),i,r)})},t.prototype.merge=function(e){var n=this;return M(e)&&(e=e.toJS()),ie(function(){we(e)?Object.keys(e).forEach(function(r){return n.set(r,e[r])}):Array.isArray(e)?e.forEach(function(r){var i=Ln(r,2),s=i[0],a=i[1];return n.set(s,a)}):Ie(e)?e.constructor!==Map?f("Cannot initialize from classes that inherit from Map: "+e.constructor.name):e.forEach(function(r,i){return n.set(i,r)}):null!=e&&f("Cannot initialize map from "+e)}),this},t.prototype.clear=function(){var e=this;ie(function(){Yn(function(){e._keys.slice().forEach(function(n){return e.delete(n)})})})},t.prototype.replace=function(e){var n=this;return ie(function(){for(var r=function Vr(t){return Ie(t)||M(t)?t:Array.isArray(t)?new Map(t):we(t)?new Map(Object.entries(t)):f("Cannot convert to map from '"+t+"'")}(e),i=n._keys,s=Array.from(r.keys()),a=!1,l=0;l<i.length;l++){var u=i[l];i.length===s.length&&u!==s[l]&&(a=!0),r.has(u)||(a=!0,n.delete(u))}r.forEach(function(g,h){n._data.has(h)||(a=!0),n.set(h,g)}),a&&n._keys.replace(s)}),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var e=this,n={};return this._keys.forEach(function(r){return n["symbol"==typeof r?r:mt(r)]=e.get(r)}),n},t.prototype.toJS=function(){var e=this,n=new Map;return this._keys.forEach(function(r){return n.set(r,e.get(r))}),n},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var e=this;return this.name+"[{ "+this._keys.map(function(n){return mt(n)+": "+e.get(n)}).join(", ")+" }]"},t.prototype.observe=function(e,n){return nt(this,e)},t.prototype.intercept=function(e){return tt(this,e)},t}();function mt(t){return t&&t.toString?t.toString():new String(t).toString()}At(vt.prototype,function(){return this.entries()}),Qe(vt.prototype,wt(),"Map");var M=de("ObservableMap",vt),Ji={},yt=function(){function t(e,n,r){if(void 0===n&&(n=We),void 0===r&&(r="ObservableSet@"+L()),this.name=r,this.$mobx=Ji,this._data=new Set,this._atom=$r(this.name),"function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(i,s){return n(i,s,r)},e&&this.replace(e)}return t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.clear=function(){var e=this;ie(function(){Yn(function(){e._data.forEach(function(n){e.delete(n)})})})},t.prototype.forEach=function(e,n){var r=this;this._data.forEach(function(i){e.call(n,i,i,r)})},Object.defineProperty(t.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.add=function(e){var n=this;if((ct(this._atom),ee(this))&&!(r=te(this,{type:"add",object:this,newValue:e})))return this;if(!this.has(e)){ie(function(){n._data.add(n.enhancer(e,void 0)),n._atom.reportChanged()});var i=I(),s=q(this),r=s||i?{type:"add",object:this,newValue:e}:null;s&&W(this,r)}return this},t.prototype.delete=function(e){var n=this;if(ee(this)&&!(r=te(this,{type:"delete",object:this,oldValue:e})))return!1;if(this.has(e)){var i=I(),s=q(this),r=s||i?{type:"delete",object:this,oldValue:e}:null;return ie(function(){n._atom.reportChanged(),n._data.delete(e)}),s&&W(this,r),!0}return!1},t.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},t.prototype.entries=function(){var e=0,n=ne(this.keys()),r=ne(this.values());return qe({next:function(){var i=e;return e+=1,i<r.length?{value:[n[i],r[i]],done:!1}:{done:!0}}})},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){this._atom.reportObserved();var r,e=this,n=0;return void 0!==this._data.values?r=ne(this._data.values()):(r=[],this._data.forEach(function(i){return r.push(i)})),qe({next:function(){return n<r.length?{value:e.dehanceValue(r[n++]),done:!1}:{done:!0}}})},t.prototype.replace=function(e){var n=this;return j(e)&&(e=e.toJS()),ie(function(){Array.isArray(e)||Ye(e)?(n.clear(),e.forEach(function(r){return n.add(r)})):null!=e&&f("Cannot initialize set from "+e)}),this},t.prototype.observe=function(e,n){return nt(this,e)},t.prototype.intercept=function(e){return tt(this,e)},t.prototype.toJS=function(){return new Set(this)},t.prototype.toString=function(){return this.name+"[ "+ne(this.keys()).join(", ")+" ]"},t}();At(yt.prototype,function(){return this.values()}),Qe(yt.prototype,wt(),"Set");var j=de("ObservableSet",yt),_r=function(){function t(e,n,r){this.target=e,this.name=n,this.defaultEnhancer=r,this.values={}}return t.prototype.read=function(e,n){if(this.target===e||(this.illegalAccess(e,n),this.values[n]))return this.values[n].get()},t.prototype.write=function(e,n,r){var i=this.target;i!==e&&this.illegalAccess(e,n);var s=this.values[n];if(s instanceof fe)s.set(r);else{if(ee(this)){if(!(a=te(this,{type:"update",object:i,name:n,newValue:r})))return;r=a.newValue}if((r=s.prepareNewValue(r))!==d.UNCHANGED){var l=q(this),u=I(),a=l||u?{type:"update",object:i,oldValue:s.value,name:n,newValue:r}:null;u&&Q(F({},a,{name:this.name,key:n})),s.setNewValue(r),l&&W(this,a),u&&Y()}}},t.prototype.remove=function(e){if(this.values[e]){var n=this.target;if(ee(this))if(!(r=te(this,{object:n,name:e,type:"remove"})))return;try{$();var i=q(this),s=I(),a=this.values[e].get();this.keys&&this.keys.remove(e),delete this.values[e],delete this.target[e];var r=i||s?{type:"remove",object:n,oldValue:a,name:e}:null;s&&Q(F({},r,{name:this.name,key:e})),i&&W(this,r),s&&Y()}finally{J()}}},t.prototype.illegalAccess=function(e,n){console.warn("Property '"+n+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(e,n){return nt(this,e)},t.prototype.intercept=function(e){return tt(this,e)},t.prototype.getKeys=function(){var e=this;return void 0===this.keys&&(this.keys=new oe(Object.keys(this.values).filter(function(n){return e.values[n]instanceof pe}),ze,"keys("+this.name+")",!0)),this.keys.slice()},t}();function Ut(t,e,n){void 0===e&&(e=""),void 0===n&&(n=We);var r=t.$mobx;return r||(we(t)||(e=(t.constructor.name||"ObservableObject")+"@"+L()),e||(e="ObservableObject@"+L()),Qe(t,"$mobx",r=new _r(t,e,n)),r)}function xr(t,e,n,r){var i=Ut(t);if(ee(i)){var s=te(i,{object:t,name:e,type:"add",newValue:n});if(!s)return;n=s.newValue}n=(i.values[e]=new pe(n,r,i.name+"."+e,!1)).value,Object.defineProperty(t,e,function Yi(t){return Dr[t]||(Dr[t]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,t)},set:function(e){this.$mobx.write(this,t,e)}})}(e)),i.keys&&i.keys.push(e),function Wi(t,e,n,r){var i=q(t),s=I(),a=i||s?{type:"add",object:e,name:n,newValue:r}:null;s&&Q(F({},a,{name:t.name,key:n})),i&&W(t,a),s&&Y()}(i,t,e,n)}var Dr=Object.create(null),Or=Object.create(null);function Nr(t){return t.$mobx||(ye(t),t.$mobx)}var zi=de("ObservableObjectAdministration",_r);function k(t){return!!Et(t)&&(ye(t),zi(t.$mobx))}function z(t,e){if("object"==typeof t&&null!==t){if(P(t))return void 0!==e&&f(!1),t.$mobx.atom;if(j(t))return t.$mobx;if(M(t)){var n=t;return void 0===e?z(n._keys):((r=n._data.get(e)||n._hasMap.get(e))||f(!1),r)}var r;if(ye(t),e&&!t.$mobx&&t[e],k(t))return e?((r=t.$mobx.values[e])||f(!1),r):f(!1);if(It(t)||Be(t)||ht(t))return t}else if("function"==typeof t&&ht(t.$mobx))return t.$mobx;return f(!1)}function se(t,e){return t||f("Expecting some object"),void 0!==e?se(z(t,e)):It(t)||Be(t)||ht(t)||M(t)||j(t)?t:(ye(t),t.$mobx?t.$mobx:void f(!1))}var Tr=Object.prototype.toString;function Ht(t,e,n){return void 0===n&&(n=-1),Gt(t,e,n)}function Gt(t,e,n,r,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var s=typeof t;if("function"!==s&&"object"!==s&&"object"!=typeof e)return!1;t=Er(t),e=Er(e);var a=Tr.call(t);if(a!==Tr.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e)}var l="[object Array]"===a;if(!l){if("object"!=typeof t||"object"!=typeof e)return!1;var u=t.constructor,g=e.constructor;if(u!==g&&!("function"==typeof u&&u instanceof u&&"function"==typeof g&&g instanceof g)&&"constructor"in t&&"constructor"in e)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var h=(r=r||[]).length;h--;)if(r[h]===t)return i[h]===e;if(r.push(t),i.push(e),l){if((h=t.length)!==e.length)return!1;for(;h--;)if(!Gt(t[h],e[h],n-1,r,i))return!1}else{var x=Object.keys(t),S=void 0;if(h=x.length,Object.keys(e).length!==h)return!1;for(;h--;)if(!Zi(e,S=x[h])||!Gt(t[S],e[S],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function Er(t){return P(t)?t.peek():Ie(t)||M(t)||Ye(t)||j(t)?ne(t.entries()):t}function Zi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(function t(){}).name;function eo(t,e){1&t&&(o.TgZ(0,"span"),o._uU(1,"loading..."),o.qZA())}"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function bi(t){return d.spyListeners.push(t),Tt(function(){d.spyListeners=d.spyListeners.filter(function(e){return e!==t})})},extras:{getDebugName:function Ki(t,e){return(void 0!==e?z(t,e):k(t)||M(t)||j(t)?se(t):z(t)).name}},$mobx:"$mobx"});const to=function(t){return{$implicit:t}};function no(t,e){if(1&t&&(o.ynx(0),o.TgZ(1,"div"),o.Hsn(2),o.qZA(),o.BQk()),2&t){const n=o.oxw();o.xp6(1),o.Udp("height",n.getTotalHeight())}}const Pe=function(){return{dontDetach:!0}},io=["loadingTemplate"],oo=["treeNodeTemplate"],so=["treeNodeWrapperTemplate"],ao=["treeNodeFullTemplate"],lo=["viewport"],co=function(t,e,n,r){return{loadingTemplate:t,treeNodeTemplate:e,treeNodeWrapperTemplate:n,treeNodeFullTemplate:r}};function uo(t,e){if(1&t&&o._UZ(0,"tree-node-collection",4),2&t){const n=o.oxw();o.Q6J("nodes",n.treeModel.roots)("treeModel",n.treeModel)("templates",o.l5B(3,co,n.loadingTemplate,n.treeNodeTemplate,n.treeNodeWrapperTemplate,n.treeNodeFullTemplate))}}function po(t,e){if(1&t&&o._UZ(0,"tree-node-drop-slot",5),2&t){const n=o.oxw();o.Q6J("dropIndex",0)("node",n.treeModel.virtualRoot)}}function fo(t,e){if(1&t&&o._UZ(0,"tree-node-drop-slot",6),2&t){const n=o.oxw(3);o.Q6J("dropIndex",n.node.index)("node",n.node.parent)}}function ho(t,e){if(1&t&&(o.TgZ(0,"div"),o.YNc(1,fo,1,2,"tree-node-drop-slot",3),o._UZ(2,"tree-node-wrapper",4)(3,"tree-node-children",5)(4,"tree-node-drop-slot",6),o.qZA()),2&t){const n=o.oxw(2);o.Tol(n.node.getClass()),o.ekj("tree-node",!0)("tree-node-expanded",n.node.isExpanded&&n.node.hasChildren)("tree-node-collapsed",n.node.isCollapsed&&n.node.hasChildren)("tree-node-leaf",n.node.isLeaf)("tree-node-active",n.node.isActive)("tree-node-focused",n.node.isFocused),o.xp6(1),o.Q6J("ngIf",0===n.index),o.xp6(1),o.Q6J("node",n.node)("index",n.index)("templates",n.templates),o.xp6(1),o.Q6J("node",n.node)("templates",n.templates),o.xp6(1),o.Q6J("dropIndex",n.node.index+1)("node",n.node.parent)}}const Ar=function(t,e,n,r){return{$implicit:t,node:e,index:n,templates:r}};function go(t,e){if(1&t&&(o.ynx(0),o.YNc(1,ho,5,22,"div",1),o.GkF(2,2),o.BQk()),2&t){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",!n.templates.treeNodeFullTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",n.templates.treeNodeFullTemplate)("ngTemplateOutletContext",o.l5B(3,Ar,n.node,n.node,n.index,n.templates))}}function vo(t,e){if(1&t&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&t){const n=o.oxw();o.xp6(1),o.Oqu(n.node.displayField)}}const mo=function(t,e,n){return{$implicit:t,node:e,index:n}};function yo(t,e){if(1&t){const n=o.EpF();o.TgZ(0,"span",3),o.NdJ("click",function(i){o.CHM(n);const s=o.oxw(2);return o.KtG(s.node.mouseAction("expanderClick",i))}),o._UZ(1,"span",4),o.qZA()}if(2&t){const n=o.oxw(2);o.ekj("toggle-children-wrapper-expanded",n.node.isExpanded)("toggle-children-wrapper-collapsed",n.node.isCollapsed)}}function bo(t,e){1&t&&o._UZ(0,"span",5)}function _o(t,e){if(1&t&&(o.ynx(0),o.YNc(1,yo,2,4,"span",1),o.YNc(2,bo,1,0,"span",2),o.BQk()),2&t){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",n.node.hasChildren),o.xp6(1),o.Q6J("ngIf",!n.node.hasChildren)}}function xo(t,e){if(1&t&&o._UZ(0,"tree-node-collection",4),2&t){const n=o.oxw(3);o.Q6J("nodes",n.node.children)("templates",n.templates)("treeModel",n.node.treeModel)}}function Do(t,e){if(1&t&&o._UZ(0,"tree-loading-component",5),2&t){const n=o.oxw(3);o.Udp("padding-left",n.node.getNodePadding()),o.Q6J("template",n.templates.loadingTemplate)("node",n.node)}}function Oo(t,e){if(1&t&&(o.TgZ(0,"div"),o.YNc(1,xo,1,3,"tree-node-collection",2),o.YNc(2,Do,1,4,"tree-loading-component",3),o.qZA()),2&t){const n=o.oxw(2);o.ekj("tree-children",!0)("tree-children-no-padding",n.node.options.levelPadding),o.xp6(1),o.Q6J("ngIf",n.node.children),o.xp6(1),o.Q6J("ngIf",!n.node.children)}}function No(t,e){if(1&t&&(o.ynx(0),o.YNc(1,Oo,3,6,"div",1),o.BQk()),2&t){const n=o.oxw();o.xp6(1),o.Q6J("treeAnimateOpen",n.node.isExpanded)("treeAnimateOpenSpeed",n.node.options.animateSpeed)("treeAnimateOpenAcceleration",n.node.options.animateAcceleration)("treeAnimateOpenEnabled",n.node.options.animateExpand)}}function To(t,e){if(1&t&&o._UZ(0,"tree-node",2),2&t){const n=e.$implicit,r=e.index,i=o.oxw(2);o.Q6J("node",n)("index",r)("templates",i.templates)}}function Eo(t,e){if(1&t&&(o.ynx(0),o.TgZ(1,"div"),o.YNc(2,To,1,3,"tree-node",1),o.qZA(),o.BQk()),2&t){const n=o.oxw();o.xp6(1),o.Udp("margin-top",n.marginTop),o.xp6(1),o.Q6J("ngForOf",n.viewportNodes)("ngForTrackBy",n.trackNode)}}function Co(t,e){if(1&t&&o._UZ(0,"tree-node-checkbox",4),2&t){const n=o.oxw(2);o.Q6J("node",n.node)}}function Ao(t,e){if(1&t){const n=o.EpF();o.TgZ(0,"div",2),o.YNc(1,Co,1,1,"tree-node-checkbox",3),o._UZ(2,"tree-node-expander",4),o.TgZ(3,"div",5),o.NdJ("click",function(i){o.CHM(n);const s=o.oxw();return o.KtG(s.node.mouseAction("click",i))})("dblclick",function(i){o.CHM(n);const s=o.oxw();return o.KtG(s.node.mouseAction("dblClick",i))})("mouseover",function(i){o.CHM(n);const s=o.oxw();return o.KtG(s.node.mouseAction("mouseOver",i))})("mouseout",function(i){o.CHM(n);const s=o.oxw();return o.KtG(s.node.mouseAction("mouseOut",i))})("contextmenu",function(i){o.CHM(n);const s=o.oxw();return o.KtG(s.node.mouseAction("contextMenu",i))})("treeDrop",function(i){o.CHM(n);const s=o.oxw();return o.KtG(s.node.onDrop(i))})("treeDropDragOver",function(i){o.CHM(n);const s=o.oxw();return o.KtG(s.node.mouseAction("dragOver",i))})("treeDropDragLeave",function(i){o.CHM(n);const s=o.oxw();return o.KtG(s.node.mouseAction("dragLeave",i))})("treeDropDragEnter",function(i){o.CHM(n);const s=o.oxw();return o.KtG(s.node.mouseAction("dragEnter",i))}),o._UZ(4,"tree-node-content",6),o.qZA()()}if(2&t){const n=o.oxw();o.Udp("padding-left",n.node.getNodePadding()),o.xp6(1),o.Q6J("ngIf",n.node.options.useCheckbox),o.xp6(1),o.Q6J("node",n.node),o.xp6(1),o.ekj("node-content-wrapper-active",n.node.isActive)("node-content-wrapper-focused",n.node.isFocused),o.Q6J("treeAllowDrop",n.node.allowDrop)("allowDragoverStyling",n.node.allowDragoverStyling())("treeDrag",n.node)("treeDragEnabled",n.node.allowDrag()),o.xp6(1),o.Q6J("node",n.node)("index",n.index)("template",n.templates.treeNodeTemplate)}}function wo(t,e){if(1&t){const n=o.EpF();o.ynx(0),o.TgZ(1,"input",1),o.NdJ("click",function(i){o.CHM(n);const s=o.oxw();return o.KtG(s.node.mouseAction("checkboxClick",i))}),o.qZA(),o.BQk()}if(2&t){const n=o.oxw();o.xp6(1),o.Q6J("checked",n.node.isSelected)("indeterminate",n.node.isPartiallySelected)}}class U{constructor(e,n){this.templateRef=e,this.viewContainer=n,this.templateBindings={}}ngOnInit(){this.view=this.viewContainer.createEmbeddedView(this.templateRef),this.dispose&&this.dispose(),this.shouldDetach()&&this.view.detach(),this.autoDetect(this.view)}shouldDetach(){return this.treeMobxAutorun&&this.treeMobxAutorun.detach}autoDetect(e){this.dispose=Xe(()=>e.detectChanges())}ngOnDestroy(){this.dispose&&this.dispose()}}U.\u0275fac=function(e){return new(e||U)(o.Y36(o.Rgc),o.Y36(o.s_b))},U.\u0275dir=o.lG2({type:U,selectors:[["","treeMobxAutorun",""]],inputs:{treeMobxAutorun:"treeMobxAutorun"}}),U.ctorParameters=()=>[{type:o.Rgc},{type:o.s_b}],U.propDecorators={treeMobxAutorun:[{type:o.IIB}]};const R_LEFT=37,R_UP=38,R_RIGHT=39,R_DOWN=40,R_ENTER=13,R_SPACE=32,E={TOGGLE_ACTIVE:(t,e,n)=>e&&e.toggleActivated(),TOGGLE_ACTIVE_MULTI:(t,e,n)=>e&&e.toggleActivated(!0),TOGGLE_SELECTED:(t,e,n)=>e&&e.toggleSelected(),ACTIVATE:(t,e,n)=>e.setIsActive(!0),DEACTIVATE:(t,e,n)=>e.setIsActive(!1),SELECT:(t,e,n)=>e.setIsSelected(!0),DESELECT:(t,e,n)=>e.setIsSelected(!1),FOCUS:(t,e,n)=>e.focus(),TOGGLE_EXPANDED:(t,e,n)=>e.hasChildren&&e.toggleExpanded(),EXPAND:(t,e,n)=>e.expand(),COLLAPSE:(t,e,n)=>e.collapse(),DRILL_DOWN:(t,e,n)=>t.focusDrillDown(),DRILL_UP:(t,e,n)=>t.focusDrillUp(),NEXT_NODE:(t,e,n)=>t.focusNextNode(),PREVIOUS_NODE:(t,e,n)=>t.focusPreviousNode(),MOVE_NODE:(t,e,n,{from:r,to:i})=>{n.ctrlKey?t.copyNode(r,i):t.moveNode(r,i)}},je={mouse:{click:E.TOGGLE_ACTIVE,dblClick:null,contextMenu:null,expanderClick:E.TOGGLE_EXPANDED,checkboxClick:E.TOGGLE_SELECTED,drop:E.MOVE_NODE},keys:{[R_RIGHT]:E.DRILL_DOWN,[R_LEFT]:E.DRILL_UP,[R_DOWN]:E.NEXT_NODE,[R_UP]:E.PREVIOUS_NODE,[R_SPACE]:E.TOGGLE_ACTIVE,[R_ENTER]:E.TOGGLE_ACTIVE}};class wr{constructor(e={}){var n,r,i,s,a,l,u,g,h,x,S,X,T,w,le,Ce,$t,Jt,Qt,Yt,qt,Wt,zt,Kt,Zt,Xt,en,tn,nn,rn,on,sn,an,ln,dn,cn,un,pn,fn,hn,gn,vn,mn,yn,bn,_n,xn,Dn,On,Nn,Tn,En,Cn,An,wn,In,Sn,Mn,Rn,Bn;this.options=e,this.actionMapping={mouse:{click:null!==(s=null===(i=null===(r=null===(n=this.options)||void 0===n?void 0:n.actionMapping)||void 0===r?void 0:r.mouse)||void 0===i?void 0:i.click)&&void 0!==s?s:je.mouse.click,dblClick:null!==(g=null===(u=null===(l=null===(a=this.options)||void 0===a?void 0:a.actionMapping)||void 0===l?void 0:l.mouse)||void 0===u?void 0:u.dblClick)&&void 0!==g?g:je.mouse.dblClick,contextMenu:null!==(X=null===(S=null===(x=null===(h=this.options)||void 0===h?void 0:h.actionMapping)||void 0===x?void 0:x.mouse)||void 0===S?void 0:S.contextMenu)&&void 0!==X?X:je.mouse.contextMenu,expanderClick:null!==(Ce=null===(le=null===(w=null===(T=this.options)||void 0===T?void 0:T.actionMapping)||void 0===w?void 0:w.mouse)||void 0===le?void 0:le.expanderClick)&&void 0!==Ce?Ce:je.mouse.expanderClick,checkboxClick:null!==(Yt=null===(Qt=null===(Jt=null===($t=this.options)||void 0===$t?void 0:$t.actionMapping)||void 0===Jt?void 0:Jt.mouse)||void 0===Qt?void 0:Qt.checkboxClick)&&void 0!==Yt?Yt:je.mouse.checkboxClick,drop:null!==(Kt=null===(zt=null===(Wt=null===(qt=this.options)||void 0===qt?void 0:qt.actionMapping)||void 0===Wt?void 0:Wt.mouse)||void 0===zt?void 0:zt.drop)&&void 0!==Kt?Kt:je.mouse.drop,dragStart:null!==(tn=null===(en=null===(Xt=null===(Zt=this.options)||void 0===Zt?void 0:Zt.actionMapping)||void 0===Xt?void 0:Xt.mouse)||void 0===en?void 0:en.dragStart)&&void 0!==tn?tn:void 0,drag:null!==(sn=null===(on=null===(rn=null===(nn=this.options)||void 0===nn?void 0:nn.actionMapping)||void 0===rn?void 0:rn.mouse)||void 0===on?void 0:on.drag)&&void 0!==sn?sn:void 0,dragEnd:null!==(cn=null===(dn=null===(ln=null===(an=this.options)||void 0===an?void 0:an.actionMapping)||void 0===ln?void 0:ln.mouse)||void 0===dn?void 0:dn.dragEnd)&&void 0!==cn?cn:void 0,dragOver:null!==(hn=null===(fn=null===(pn=null===(un=this.options)||void 0===un?void 0:un.actionMapping)||void 0===pn?void 0:pn.mouse)||void 0===fn?void 0:fn.dragOver)&&void 0!==hn?hn:void 0,dragLeave:null!==(yn=null===(mn=null===(vn=null===(gn=this.options)||void 0===gn?void 0:gn.actionMapping)||void 0===vn?void 0:vn.mouse)||void 0===mn?void 0:mn.dragLeave)&&void 0!==yn?yn:void 0,dragEnter:null!==(Dn=null===(xn=null===(_n=null===(bn=this.options)||void 0===bn?void 0:bn.actionMapping)||void 0===_n?void 0:_n.mouse)||void 0===xn?void 0:xn.dragEnter)&&void 0!==Dn?Dn:void 0,mouseOver:null!==(En=null===(Tn=null===(Nn=null===(On=this.options)||void 0===On?void 0:On.actionMapping)||void 0===Nn?void 0:Nn.mouse)||void 0===Tn?void 0:Tn.mouseOver)&&void 0!==En?En:void 0,mouseOut:null!==(In=null===(wn=null===(An=null===(Cn=this.options)||void 0===Cn?void 0:Cn.actionMapping)||void 0===An?void 0:An.mouse)||void 0===wn?void 0:wn.mouseOut)&&void 0!==In?In:void 0},keys:{[R_RIGHT]:E.DRILL_DOWN,[R_LEFT]:E.DRILL_UP,[R_DOWN]:E.NEXT_NODE,[R_UP]:E.PREVIOUS_NODE,[R_SPACE]:E.TOGGLE_ACTIVE,[R_ENTER]:E.TOGGLE_ACTIVE}},!(null===(Mn=null===(Sn=this.options)||void 0===Sn?void 0:Sn.actionMapping)||void 0===Mn)&&Mn.keys&&(this.actionMapping.keys=Object.assign(Object.assign({},this.actionMapping.keys),this.options.actionMapping.keys)),e.rtl&&(this.actionMapping.keys[R_RIGHT]=(null===(Rn=e.actionMapping)||void 0===Rn?void 0:Rn.keys[R_RIGHT])||E.DRILL_UP,this.actionMapping.keys[R_LEFT]=(null===(Bn=e.actionMapping)||void 0===Bn?void 0:Bn.keys[R_LEFT])||E.DRILL_DOWN)}get hasChildrenField(){return this.options.hasChildrenField||"hasChildren"}get childrenField(){return this.options.childrenField||"children"}get displayField(){return this.options.displayField||"name"}get idField(){return this.options.idField||"id"}get isExpandedField(){return this.options.isExpandedField||"isExpanded"}get getChildren(){return this.options.getChildren}get levelPadding(){return this.options.levelPadding||0}get useVirtualScroll(){return this.options.useVirtualScroll}get animateExpand(){return this.options.animateExpand}get animateSpeed(){return this.options.animateSpeed||1}get animateAcceleration(){return this.options.animateAcceleration||1.2}get scrollOnActivate(){return void 0===this.options.scrollOnActivate||this.options.scrollOnActivate}get rtl(){return!!this.options.rtl}get rootId(){return this.options.rootId}get useCheckbox(){return this.options.useCheckbox}get useTriState(){return void 0===this.options.useTriState||this.options.useTriState}get scrollContainer(){return this.options.scrollContainer}get allowDragoverStyling(){return void 0===this.options.allowDragoverStyling||this.options.allowDragoverStyling}getNodeClone(e){if(this.options.getNodeClone)return this.options.getNodeClone(e);const n=Object.assign({},e.data);return n.id&&delete n.id,n}allowDrop(e,n,r){return this.options.allowDrop instanceof Function?this.options.allowDrop(e,n,r):void 0===this.options.allowDrop||this.options.allowDrop}allowDrag(e){return this.options.allowDrag instanceof Function?this.options.allowDrag(e):this.options.allowDrag}nodeClass(e){return this.options.nodeClass?this.options.nodeClass(e):""}nodeHeight(e){if(e.data.virtual)return 0;let n=this.options.nodeHeight||22;return"function"==typeof n&&(n=n(e)),n+(0===e.index?2:1)*this.dropSlotHeight}get dropSlotHeight(){return"number"==typeof this.options.dropSlotHeight?this.options.dropSlotHeight:2}}const D={toggleExpanded:"toggleExpanded",activate:"activate",deactivate:"deactivate",nodeActivate:"nodeActivate",nodeDeactivate:"nodeDeactivate",select:"select",deselect:"deselect",focus:"focus",blur:"blur",initialized:"initialized",updateData:"updateData",moveNode:"moveNode",copyNode:"copyNode",event:"event",loadNodeChildren:"loadNodeChildren",changeFilter:"changeFilter",stateChange:"stateChange"};var B=function(t,e,n,r){var a,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},_=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class N{constructor(e,n,r,i){this.data=e,this.parent=n,this.treeModel=r,this.position=0,this.allowDrop=(s,a)=>this.options.allowDrop(s,{parent:this,index:0},a),this.allowDragoverStyling=()=>this.options.allowDragoverStyling,(void 0===this.id||null===this.id)&&(this.id=function Io(){return Math.floor(1e13*Math.random())}()),this.index=i,this.getField("children")&&this._initChildren(),this.autoLoadChildren()}get isHidden(){return this.treeModel.isHidden(this)}get isExpanded(){return this.treeModel.isExpanded(this)}get isActive(){return this.treeModel.isActive(this)}get isFocused(){return this.treeModel.isNodeFocused(this)}get isSelected(){return this.isSelectable()?this.treeModel.isSelected(this):this.children.some(e=>e.isSelected)}get isAllSelected(){return this.isSelectable()?this.treeModel.isSelected(this):this.children.every(e=>e.isAllSelected)}get isPartiallySelected(){return this.isSelected&&!this.isAllSelected}get level(){return this.parent?this.parent.level+1:0}get path(){return this.parent?[...this.parent.path,this.id]:[]}get elementRef(){throw"Element Ref is no longer supported since introducing virtual scroll\n\n      You may use a template to obtain a reference to the element"}get originalNode(){return this._originalNode}get hasChildren(){return!!(this.getField("hasChildren")||this.children&&this.children.length>0)}get isCollapsed(){return!this.isExpanded}get isLeaf(){return!this.hasChildren}get isRoot(){return this.parent.data.virtual}get realParent(){return this.isRoot?null:this.parent}get options(){return this.treeModel.options}fireEvent(e){this.treeModel.fireEvent(e)}get displayField(){return this.getField("display")}get id(){return this.getField("id")}set id(e){this.setField("id",e)}getField(e){return this.data[this.options[`${e}Field`]]}setField(e,n){this.data[this.options[`${e}Field`]]=n}_findAdjacentSibling(e,n=!1){const r=this._getParentsChildren(n),i=r.indexOf(this);return r.length>i+e?r[i+e]:null}findNextSibling(e=!1){return this._findAdjacentSibling(1,e)}findPreviousSibling(e=!1){return this._findAdjacentSibling(-1,e)}getVisibleChildren(){return this.visibleChildren}get visibleChildren(){return(this.children||[]).filter(e=>!e.isHidden)}getFirstChild(e=!1){let n=e?this.visibleChildren:this.children;return null!=n&&n.length?n[0]:null}getLastChild(e=!1){let n=e?this.visibleChildren:this.children;return null!=n&&n.length?n[n.length-1]:null}findNextNode(e=!0,n=!1){return e&&this.isExpanded&&this.getFirstChild(n)||this.findNextSibling(n)||this.parent&&this.parent.findNextNode(!1,n)}findPreviousNode(e=!1){let n=this.findPreviousSibling(e);return n?n._getLastOpenDescendant(e):this.realParent}_getLastOpenDescendant(e=!1){const n=this.getLastChild(e);return this.isCollapsed||!n?this:n._getLastOpenDescendant(e)}_getParentsChildren(e=!1){return this.parent&&(e?this.parent.getVisibleChildren():this.parent.children)||[]}getIndexInParent(e=!1){return this._getParentsChildren(e).indexOf(this)}isDescendantOf(e){return this===e||this.parent&&this.parent.isDescendantOf(e)}getNodePadding(){return this.options.levelPadding*(this.level-1)+"px"}getClass(){return[this.options.nodeClass(this),`tree-node-level-${this.level}`].join(" ")}onDrop(e){this.mouseAction("drop",e.event,{from:e.element,to:{parent:this,index:0,dropOnNode:!0}})}allowDrag(){return this.options.allowDrag(this)}loadNodeChildren(){return this.options.getChildren?Promise.resolve(this.options.getChildren(this)).then(e=>{e&&(this.setField("children",e),this._initChildren(),this.options.useTriState&&this.treeModel.isSelected(this)&&this.setIsSelected(!0),this.children.forEach(n=>{n.getField("isExpanded")&&n.hasChildren&&n.expand()}))}).then(()=>{this.fireEvent({eventName:D.loadNodeChildren,node:this})}):Promise.resolve()}expand(){return this.isExpanded||this.toggleExpanded(),this}collapse(){return this.isExpanded&&this.toggleExpanded(),this}doForAll(e){Promise.resolve(e(this)).then(()=>{this.children&&this.children.forEach(n=>n.doForAll(e))})}expandAll(){this.doForAll(e=>e.expand())}collapseAll(){this.doForAll(e=>e.collapse())}ensureVisible(){return this.realParent&&(this.realParent.expand(),this.realParent.ensureVisible()),this}toggleExpanded(){return this.setIsExpanded(!this.isExpanded),this}setIsExpanded(e){return this.hasChildren&&this.treeModel.setExpandedNode(this,e),this}autoLoadChildren(){this.handler=Fe(()=>this.isExpanded,e=>{!this.children&&this.hasChildren&&e&&this.loadNodeChildren()},{fireImmediately:!0})}dispose(){this.children&&this.children.forEach(e=>e.dispose()),this.handler&&this.handler(),this.parent=null,this.children=null}setIsActive(e,n=!1){return this.treeModel.setActiveNode(this,e,n),e&&this.focus(this.options.scrollOnActivate),this}isSelectable(){return this.isLeaf||!this.children||!this.options.useTriState}setIsSelected(e){return this.isSelectable()?this.treeModel.setSelectedNode(this,e):this.visibleChildren.forEach(n=>n.setIsSelected(e)),this}toggleSelected(){return this.setIsSelected(!this.isSelected),this}toggleActivated(e=!1){return this.setIsActive(!this.isActive,e),this}setActiveAndVisible(e=!1){return this.setIsActive(!0,e).ensureVisible(),setTimeout(this.scrollIntoView.bind(this)),this}scrollIntoView(e=!1){this.treeModel.virtualScroll.scrollIntoView(this,e)}focus(e=!0){let n=this.treeModel.getFocusedNode();return this.treeModel.setFocusedNode(this),e&&this.scrollIntoView(),n&&this.fireEvent({eventName:D.blur,node:n}),this.fireEvent({eventName:D.focus,node:this}),this}blur(){let e=this.treeModel.getFocusedNode();return this.treeModel.setFocusedNode(null),e&&this.fireEvent({eventName:D.blur,node:this}),this}setIsHidden(e){this.treeModel.setIsHidden(this,e)}hide(){this.setIsHidden(!0)}show(){this.setIsHidden(!1)}mouseAction(e,n,r=null){this.treeModel.setFocus(!0);const s=this.options.actionMapping.mouse[e];s&&s(this.treeModel,this,n,r)}getSelfHeight(){return this.options.nodeHeight(this)}_initChildren(){this.children=this.getField("children").map((e,n)=>new N(e,this,this.treeModel,n))}}B([O,_("design:type",Object),_("design:paramtypes",[])],N.prototype,"isHidden",null),B([O,_("design:type",Object),_("design:paramtypes",[])],N.prototype,"isExpanded",null),B([O,_("design:type",Object),_("design:paramtypes",[])],N.prototype,"isActive",null),B([O,_("design:type",Object),_("design:paramtypes",[])],N.prototype,"isFocused",null),B([O,_("design:type",Object),_("design:paramtypes",[])],N.prototype,"isSelected",null),B([O,_("design:type",Object),_("design:paramtypes",[])],N.prototype,"isAllSelected",null),B([O,_("design:type",Object),_("design:paramtypes",[])],N.prototype,"isPartiallySelected",null),B([m,_("design:type",Array)],N.prototype,"children",void 0),B([m,_("design:type",Number)],N.prototype,"index",void 0),B([m,_("design:type",Object)],N.prototype,"position",void 0),B([m,_("design:type",Number)],N.prototype,"height",void 0),B([O,_("design:type",Number),_("design:paramtypes",[])],N.prototype,"level",null),B([O,_("design:type",Array),_("design:paramtypes",[])],N.prototype,"path",null),B([O,_("design:type",Object),_("design:paramtypes",[])],N.prototype,"visibleChildren",null),B([v,_("design:type",Function),_("design:paramtypes",[Object]),_("design:returntype",void 0)],N.prototype,"setIsSelected",null),B([v,_("design:type",Function),_("design:paramtypes",[]),_("design:returntype",void 0)],N.prototype,"_initChildren",null);var y=function(t,e,n,r){var a,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},c=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class p{constructor(){this.options=new wr,this.eventNames=Object.keys(D),this.expandedNodeIds={},this.selectedLeafNodeIds={},this.activeNodeIds={},this.hiddenNodeIds={},this.focusedNodeId=null,this.firstUpdate=!0,this.subscriptions=[]}fireEvent(e){e.treeModel=this,this.events[e.eventName].emit(e),this.events.event.emit(e)}subscribe(e,n){const r=this.events[e].subscribe(n);this.subscriptions.push(r)}getFocusedNode(){return this.focusedNode}getActiveNode(){return this.activeNodes[0]}getActiveNodes(){return this.activeNodes}getVisibleRoots(){return this.virtualRoot.visibleChildren}getFirstRoot(e=!1){const n=e?this.getVisibleRoots():this.roots;return null!=n&&n.length?n[0]:null}getLastRoot(e=!1){const n=e?this.getVisibleRoots():this.roots;return null!=n&&n.length?n[n.length-1]:null}get isFocused(){return p.focusedTree===this}isNodeFocused(e){return this.focusedNode===e}isEmptyTree(){return this.roots&&0===this.roots.length}get focusedNode(){return this.focusedNodeId?this.getNodeById(this.focusedNodeId):null}get expandedNodes(){return Object.keys(this.expandedNodeIds).filter(n=>this.expandedNodeIds[n]).map(n=>this.getNodeById(n)).filter(Boolean)}get activeNodes(){return Object.keys(this.activeNodeIds).filter(n=>this.activeNodeIds[n]).map(n=>this.getNodeById(n)).filter(Boolean)}get hiddenNodes(){return Object.keys(this.hiddenNodeIds).filter(n=>this.hiddenNodeIds[n]).map(n=>this.getNodeById(n)).filter(Boolean)}get selectedLeafNodes(){return Object.keys(this.selectedLeafNodeIds).filter(n=>this.selectedLeafNodeIds[n]).map(n=>this.getNodeById(n)).filter(Boolean)}getNodeByPath(e,n=null){if(!e)return null;if(n=n||this.virtualRoot,0===e.length)return n;if(!n.children)return null;const r=e.shift(),i=n.children.find(s=>s.id===r);return i?this.getNodeByPath(e,i):null}getNodeById(e){const n=e.toString();return this.getNodeBy(r=>r.id.toString()===n)}getNodeBy(e,n=null){if(!(n=n||this.virtualRoot).children)return null;const r=n.children.find(e);if(r)return r;for(let i of n.children){const s=this.getNodeBy(e,i);if(s)return s}}isExpanded(e){return this.expandedNodeIds[e.id]}isHidden(e){return this.hiddenNodeIds[e.id]}isActive(e){return this.activeNodeIds[e.id]}isSelected(e){return this.selectedLeafNodeIds[e.id]}ngOnDestroy(){this.dispose(),this.unsubscribeAll()}dispose(){this.virtualRoot&&this.virtualRoot.dispose()}unsubscribeAll(){this.subscriptions.forEach(e=>e.unsubscribe()),this.subscriptions=[]}setData({nodes:e,options:n=null,events:r=null}){n&&(this.options=new wr(n)),r&&(this.events=r),e&&(this.nodes=e),this.update()}update(){let e={id:this.options.rootId,virtual:!0,[this.options.childrenField]:this.nodes};this.dispose(),this.virtualRoot=new N(e,null,this,0),this.roots=this.virtualRoot.children,this.firstUpdate?this.roots&&(this.firstUpdate=!1,this._calculateExpandedNodes()):this.fireEvent({eventName:D.updateData})}setFocusedNode(e){this.focusedNodeId=e?e.id:null}setFocus(e){p.focusedTree=e?this:null}doForAll(e){this.roots.forEach(n=>n.doForAll(e))}focusNextNode(){let e=this.getFocusedNode(),n=e?e.findNextNode(!0,!0):this.getFirstRoot(!0);n&&n.focus()}focusPreviousNode(){let e=this.getFocusedNode(),n=e?e.findPreviousNode(!0):this.getLastRoot(!0);n&&n.focus()}focusDrillDown(){let e=this.getFocusedNode();if(e&&e.isCollapsed&&e.hasChildren)e.toggleExpanded();else{let n=e?e.getFirstChild(!0):this.getFirstRoot(!0);n&&n.focus()}}focusDrillUp(){let e=this.getFocusedNode();if(e)if(e.isExpanded)e.toggleExpanded();else{let n=e.realParent;n&&n.focus()}}setActiveNode(e,n,r=!1){r?this._setActiveNodeMulti(e,n):this._setActiveNodeSingle(e,n),n?(e.focus(this.options.scrollOnActivate),this.fireEvent({eventName:D.activate,node:e}),this.fireEvent({eventName:D.nodeActivate,node:e})):(this.fireEvent({eventName:D.deactivate,node:e}),this.fireEvent({eventName:D.nodeDeactivate,node:e}))}setSelectedNode(e,n){this.selectedLeafNodeIds=Object.assign({},this.selectedLeafNodeIds,{[e.id]:n}),n?(e.focus(),this.fireEvent({eventName:D.select,node:e})):this.fireEvent({eventName:D.deselect,node:e})}setExpandedNode(e,n){this.expandedNodeIds=Object.assign({},this.expandedNodeIds,{[e.id]:n}),this.fireEvent({eventName:D.toggleExpanded,node:e,isExpanded:n})}expandAll(){this.roots.forEach(e=>e.expandAll())}collapseAll(){this.roots.forEach(e=>e.collapseAll())}setIsHidden(e,n){this.hiddenNodeIds=Object.assign({},this.hiddenNodeIds,{[e.id]:n})}setHiddenNodeIds(e){this.hiddenNodeIds=e.reduce((n,r)=>Object.assign(n,{[r]:!0}),{})}performKeyAction(e,n){const r=this.options.actionMapping.keys[n.keyCode];return!!r&&(n.preventDefault(),r(this,e,n),!0)}filterNodes(e,n=!0){let r;if(!e)return this.clearFilter();if(e&&"string"==typeof e.valueOf())r=s=>-1!==s.displayField.toLowerCase().indexOf(e.toLowerCase());else{if(!e||"function"!=typeof e)return console.error("Don't know what to do with filter",e),void console.error("Should be either a string or function");r=e}const i={};this.roots.forEach(s=>this._filterNode(i,s,r,n)),this.hiddenNodeIds=i,this.fireEvent({eventName:D.changeFilter})}clearFilter(){this.hiddenNodeIds={},this.fireEvent({eventName:D.changeFilter})}moveNode(e,n){const r=e.getIndexInParent(),i=e.parent;if(!this.canMoveNode(e,n,r))return;const s=i.getField("children");n.parent.getField("children")||n.parent.setField("children",[]);const a=n.parent.getField("children"),l=s.splice(r,1)[0];let u=i===n.parent&&n.index>r?n.index-1:n.index;a.splice(u,0,l),i.treeModel.update(),n.parent.treeModel!==i.treeModel&&n.parent.treeModel.update(),this.fireEvent({eventName:D.moveNode,node:l,to:{parent:n.parent.data,index:u},from:{parent:i.data,index:r}})}copyNode(e,n){const r=e.getIndexInParent();if(!this.canMoveNode(e,n,r))return;n.parent.getField("children")||n.parent.setField("children",[]);const i=n.parent.getField("children"),s=this.options.getNodeClone(e);i.splice(n.index,0,s),e.treeModel.update(),n.parent.treeModel!==e.treeModel&&n.parent.treeModel.update(),this.fireEvent({eventName:D.copyNode,node:s,to:{parent:n.parent.data,index:n.index}})}getState(){return{expandedNodeIds:this.expandedNodeIds,selectedLeafNodeIds:this.selectedLeafNodeIds,activeNodeIds:this.activeNodeIds,hiddenNodeIds:this.hiddenNodeIds,focusedNodeId:this.focusedNodeId}}setState(e){e&&Object.assign(this,{expandedNodeIds:e.expandedNodeIds||{},selectedLeafNodeIds:e.selectedLeafNodeIds||{},activeNodeIds:e.activeNodeIds||{},hiddenNodeIds:e.hiddenNodeIds||{},focusedNodeId:e.focusedNodeId})}subscribeToState(e){Xe(()=>e(this.getState()))}canMoveNode(e,n,r){r||e.getIndexInParent();return(e.parent!==n.parent||r!==n.index)&&!n.parent.isDescendantOf(e)}calculateExpandedNodes(){this._calculateExpandedNodes()}_filterNode(e,n,r,i){let s=r(n);return n.children&&n.children.forEach(a=>{this._filterNode(e,a,r,i)&&(s=!0)}),s||(e[n.id]=!0),i&&s&&n.ensureVisible(),s}_calculateExpandedNodes(e=null){(e=e||this.virtualRoot).data[this.options.isExpandedField]&&(this.expandedNodeIds=Object.assign({},this.expandedNodeIds,{[e.id]:!0})),e.children&&e.children.forEach(n=>this._calculateExpandedNodes(n))}_setActiveNodeSingle(e,n){this.activeNodes.filter(r=>r!==e).forEach(r=>{this.fireEvent({eventName:D.deactivate,node:r}),this.fireEvent({eventName:D.nodeDeactivate,node:r})}),this.activeNodeIds=n?{[e.id]:!0}:{}}_setActiveNodeMulti(e,n){this.activeNodeIds=Object.assign({},this.activeNodeIds,{[e.id]:n})}}p.\u0275fac=function(e){return new(e||p)},p.\u0275prov=o.Yz7({token:p,factory:p.\u0275fac}),p.focusedTree=null,y([m,c("design:type",Array)],p.prototype,"roots",void 0),y([m,c("design:type",Object)],p.prototype,"expandedNodeIds",void 0),y([m,c("design:type",Object)],p.prototype,"selectedLeafNodeIds",void 0),y([m,c("design:type",Object)],p.prototype,"activeNodeIds",void 0),y([m,c("design:type",Object)],p.prototype,"hiddenNodeIds",void 0),y([m,c("design:type",Object)],p.prototype,"focusedNodeId",void 0),y([m,c("design:type",N)],p.prototype,"virtualRoot",void 0),y([O,c("design:type",Object),c("design:paramtypes",[])],p.prototype,"focusedNode",null),y([O,c("design:type",Object),c("design:paramtypes",[])],p.prototype,"expandedNodes",null),y([O,c("design:type",Object),c("design:paramtypes",[])],p.prototype,"activeNodes",null),y([O,c("design:type",Object),c("design:paramtypes",[])],p.prototype,"hiddenNodes",null),y([O,c("design:type",Object),c("design:paramtypes",[])],p.prototype,"selectedLeafNodes",null),y([v,c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",void 0)],p.prototype,"setData",null),y([v,c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],p.prototype,"update",null),y([v,c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",void 0)],p.prototype,"setFocusedNode",null),y([v,c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",void 0)],p.prototype,"setFocus",null),y([v,c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",void 0)],p.prototype,"doForAll",null),y([v,c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],p.prototype,"focusNextNode",null),y([v,c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],p.prototype,"focusPreviousNode",null),y([v,c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],p.prototype,"focusDrillDown",null),y([v,c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],p.prototype,"focusDrillUp",null),y([v,c("design:type",Function),c("design:paramtypes",[Object,Object,Object]),c("design:returntype",void 0)],p.prototype,"setActiveNode",null),y([v,c("design:type",Function),c("design:paramtypes",[Object,Object]),c("design:returntype",void 0)],p.prototype,"setSelectedNode",null),y([v,c("design:type",Function),c("design:paramtypes",[Object,Object]),c("design:returntype",void 0)],p.prototype,"setExpandedNode",null),y([v,c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],p.prototype,"expandAll",null),y([v,c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],p.prototype,"collapseAll",null),y([v,c("design:type",Function),c("design:paramtypes",[Object,Object]),c("design:returntype",void 0)],p.prototype,"setIsHidden",null),y([v,c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",void 0)],p.prototype,"setHiddenNodeIds",null),y([v,c("design:type",Function),c("design:paramtypes",[Object,Object]),c("design:returntype",void 0)],p.prototype,"filterNodes",null),y([v,c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],p.prototype,"clearFilter",null),y([v,c("design:type",Function),c("design:paramtypes",[Object,Object]),c("design:returntype",void 0)],p.prototype,"moveNode",null),y([v,c("design:type",Function),c("design:paramtypes",[Object,Object]),c("design:returntype",void 0)],p.prototype,"copyNode",null),y([v,c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",void 0)],p.prototype,"setState",null);class K{constructor(){this._draggedElement=null}set(e){this._draggedElement=e}get(){return this._draggedElement}isDragging(){return!!this.get()}}K.\u0275fac=function(e){return new(e||K)},K.\u0275prov=(0,o.Yz7)({factory:function(){return new K},token:K,providedIn:"root"});var ae=function(t,e,n,r){var a,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},C=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class A{constructor(e){this.treeModel=e,this.yBlocks=0,this.x=0,this.viewportHeight=null,this.viewport=null,e.virtualScroll=this,this._dispose=[Xe(()=>this.fixScroll())]}get y(){return 150*this.yBlocks}get totalHeight(){return this.treeModel.virtualRoot?this.treeModel.virtualRoot.height:0}fireEvent(e){this.treeModel.fireEvent(e)}init(){const e=this.recalcPositions.bind(this);e(),this._dispose=[...this._dispose,Fe(()=>this.treeModel.roots,e),Fe(()=>this.treeModel.expandedNodeIds,e),Fe(()=>this.treeModel.hiddenNodeIds,e)],this.treeModel.subscribe(D.loadNodeChildren,e)}isEnabled(){return this.treeModel.options.useVirtualScroll}_setYBlocks(e){this.yBlocks=e}recalcPositions(){this.treeModel.virtualRoot.height=this._getPositionAfter(this.treeModel.getVisibleRoots(),0)}_getPositionAfter(e,n){let r=n;return e.forEach(i=>{i.position=r,r=this._getPositionAfterNode(i,r)}),r}_getPositionAfterNode(e,n){let r=e.getSelfHeight()+n;return e.children&&e.isExpanded&&(r=this._getPositionAfter(e.visibleChildren,r)),e.height=r-n,r}clear(){this._dispose.forEach(e=>e())}setViewport(e){Object.assign(this,{viewport:e,x:e.scrollLeft,yBlocks:Math.round(e.scrollTop/150),viewportHeight:e.getBoundingClientRect?e.getBoundingClientRect().height:0})}scrollIntoView(e,n,r=!0){if(e.options.scrollContainer){const i=e.options.scrollContainer,s=i.getBoundingClientRect().height,a=i.getBoundingClientRect().top,l=this.viewport.getBoundingClientRect().top+e.position-a;(n||l<i.scrollTop||l+e.getSelfHeight()>i.scrollTop+s)&&(i.scrollTop=r?l-s/2:l)}else(n||e.position<this.y||e.position+e.getSelfHeight()>this.y+this.viewportHeight)&&this.viewport&&(this.viewport.scrollTop=r?e.position-this.viewportHeight/2:e.position,this._setYBlocks(Math.floor(this.viewport.scrollTop/150)))}getViewportNodes(e){if(!e)return[];const n=e.filter(l=>!l.isHidden);if(!this.isEnabled())return n;if(!this.viewportHeight||!n.length)return[];const r=n.slice(-1)[0];if(!r.height&&0===r.position)return[];const i=Sr(n,l=>l.position+500>this.y||l.position+l.height>this.y),s=Sr(n,l=>l.position-500>this.y+this.viewportHeight,i),a=[];for(let l=i;l<=s;l++)a.push(n[l]);return a}fixScroll(){const e=Math.max(0,this.totalHeight-this.viewportHeight);this.y<0&&this._setYBlocks(0),this.y>e&&this._setYBlocks(e/150)}}function Sr(t,e,n=0){let r=n,i=t.length-1;for(;r!==i;){let s=Math.floor((r+i)/2);e(t[s])?i=s:r=r===s?i:s}return r}A.\u0275fac=function(e){return new(e||A)(o.LFG(p))},A.\u0275prov=o.Yz7({token:A,factory:A.\u0275fac}),A.ctorParameters=()=>[{type:p}],ae([m,C("design:type",Object)],A.prototype,"yBlocks",void 0),ae([m,C("design:type",Object)],A.prototype,"x",void 0),ae([m,C("design:type",Object)],A.prototype,"viewportHeight",void 0),ae([O,C("design:type",Object),C("design:paramtypes",[])],A.prototype,"y",null),ae([O,C("design:type",Object),C("design:paramtypes",[])],A.prototype,"totalHeight",null),ae([v,C("design:type",Function),C("design:paramtypes",[Object]),C("design:returntype",void 0)],A.prototype,"_setYBlocks",null),ae([v,C("design:type",Function),C("design:paramtypes",[]),C("design:returntype",void 0)],A.prototype,"recalcPositions",null),ae([v,C("design:type",Function),C("design:paramtypes",[Object]),C("design:returntype",void 0)],A.prototype,"setViewport",null),ae([v,C("design:type",Function),C("design:paramtypes",[Object,Object,Object]),C("design:returntype",void 0)],A.prototype,"scrollIntoView",null);class ke{}ke.\u0275fac=function(e){return new(e||ke)},ke.\u0275cmp=o.Xpm({type:ke,selectors:[["tree-loading-component"]],inputs:{template:"template",node:"node"},decls:2,vars:5,consts:[[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(o.YNc(0,eo,2,0,"span",0),o.GkF(1,1)),2&e&&(o.Q6J("ngIf",!n.template),o.xp6(1),o.Q6J("ngTemplateOutlet",n.template)("ngTemplateOutletContext",o.VKq(3,to,n.node)))},dependencies:[V.O5,V.tP],encapsulation:2}),ke.propDecorators={template:[{type:o.IIB}],node:[{type:o.IIB}]};class Ve{constructor(e,n){this.elementRef=e,this.virtualScroll=n,this.setViewport=this.throttle(()=>{this.virtualScroll.setViewport(this.elementRef.nativeElement)},17),this.scrollEventHandler=this.setViewport.bind(this)}ngOnInit(){this.virtualScroll.init()}ngAfterViewInit(){setTimeout(()=>{this.setViewport(),this.virtualScroll.fireEvent({eventName:D.initialized})}),this.elementRef.nativeElement.addEventListener("scroll",this.scrollEventHandler)}ngOnDestroy(){this.virtualScroll.clear(),this.elementRef.nativeElement.removeEventListener("scroll",this.scrollEventHandler)}getTotalHeight(){return this.virtualScroll.isEnabled()&&this.virtualScroll.totalHeight+"px"||"auto"}throttle(e,n){let r=0;return function(){let i=Date.now();i-r>=n&&(e(),r=i)}}}Ve.\u0275fac=function(e){return new(e||Ve)(o.Y36(o.SBq),o.Y36(A))},Ve.\u0275cmp=o.Xpm({type:Ve,selectors:[["tree-viewport"]],features:[o._Bn([A])],ngContentSelectors:["*"],decls:1,vars:2,consts:[[4,"treeMobxAutorun"]],template:function(e,n){1&e&&(o.F$t(),o.YNc(0,no,3,2,"ng-container",0)),2&e&&o.Q6J("treeMobxAutorun",o.DdM(1,Pe))},dependencies:[U],encapsulation:2}),Ve.ctorParameters=()=>[{type:o.SBq},{type:A}];class _e{constructor(e,n){this.treeModel=e,this.treeDraggedElement=n,e.eventNames.forEach(r=>this[r]=new o.vpe),e.subscribeToState(r=>this.stateChange.emit(r))}set nodes(e){}set options(e){}set focused(e){this.treeModel.setFocus(e)}set state(e){this.treeModel.setState(e)}onKeydown(e){if(!this.treeModel.isFocused||["input","textarea"].includes(document.activeElement.tagName.toLowerCase()))return;const n=this.treeModel.getFocusedNode();this.treeModel.performKeyAction(n,e)}onMousedown(e){(function n(r,i){return!r||r.localName!==i&&n(r.parentElement,i)})(e.target,"tree-root")&&this.treeModel.setFocus(!1)}ngOnChanges(e){(e.options||e.nodes)&&this.treeModel.setData({options:e.options&&e.options.currentValue,nodes:e.nodes&&e.nodes.currentValue,events:this.pick(this,this.treeModel.eventNames)})}sizeChanged(){this.viewportComponent.setViewport()}pick(e,n){return n.reduce((r,i)=>(e&&e.hasOwnProperty(i)&&(r[i]=e[i]),r),{})}}_e.\u0275fac=function(e){return new(e||_e)(o.Y36(p),o.Y36(K))},_e.\u0275cmp=o.Xpm({type:_e,selectors:[["Tree"],["tree-root"]],contentQueries:function(e,n,r){if(1&e&&(o.Suo(r,io,5),o.Suo(r,oo,5),o.Suo(r,so,5),o.Suo(r,ao,5)),2&e){let i;o.iGM(i=o.CRH())&&(n.loadingTemplate=i.first),o.iGM(i=o.CRH())&&(n.treeNodeTemplate=i.first),o.iGM(i=o.CRH())&&(n.treeNodeWrapperTemplate=i.first),o.iGM(i=o.CRH())&&(n.treeNodeFullTemplate=i.first)}},viewQuery:function(e,n){if(1&e&&o.Gf(lo,5),2&e){let r;o.iGM(r=o.CRH())&&(n.viewportComponent=r.first)}},hostBindings:function(e,n){1&e&&o.NdJ("keydown",function(i){return n.onKeydown(i)},!1,o.pYS)("mousedown",function(i){return n.onMousedown(i)},!1,o.pYS)},inputs:{nodes:"nodes",options:"options",focused:"focused",state:"state"},outputs:{toggleExpanded:"toggleExpanded",activate:"activate",deactivate:"deactivate",nodeActivate:"nodeActivate",nodeDeactivate:"nodeDeactivate",select:"select",deselect:"deselect",focus:"focus",blur:"blur",updateData:"updateData",initialized:"initialized",moveNode:"moveNode",copyNode:"copyNode",loadNodeChildren:"loadNodeChildren",changeFilter:"changeFilter",event:"event",stateChange:"stateChange"},features:[o._Bn([p]),o.TTD],decls:5,vars:6,consts:[["viewport",""],[1,"angular-tree-component"],[3,"nodes","treeModel","templates",4,"ngIf"],["class","empty-tree-drop-slot",3,"dropIndex","node",4,"ngIf"],[3,"nodes","treeModel","templates"],[1,"empty-tree-drop-slot",3,"dropIndex","node"]],template:function(e,n){1&e&&(o.TgZ(0,"tree-viewport",null,0)(2,"div",1),o.YNc(3,uo,1,8,"tree-node-collection",2),o.YNc(4,po,1,2,"tree-node-drop-slot",3),o.qZA()()),2&e&&(o.xp6(2),o.ekj("node-dragging",n.treeDraggedElement.isDragging())("angular-tree-component-rtl",n.treeModel.options.rtl),o.xp6(1),o.Q6J("ngIf",n.treeModel.roots),o.xp6(1),o.Q6J("ngIf",n.treeModel.isEmptyTree()))},dependencies:function(){return[V.O5,De,Z,Ve]},encapsulation:2}),_e.ctorParameters=()=>[{type:p},{type:K}],_e.propDecorators={loadingTemplate:[{type:o.aQ5,args:["loadingTemplate",{static:!1}]}],treeNodeTemplate:[{type:o.aQ5,args:["treeNodeTemplate",{static:!1}]}],treeNodeWrapperTemplate:[{type:o.aQ5,args:["treeNodeWrapperTemplate",{static:!1}]}],treeNodeFullTemplate:[{type:o.aQ5,args:["treeNodeFullTemplate",{static:!1}]}],viewportComponent:[{type:o.i9L,args:["viewport",{static:!1}]}],nodes:[{type:o.IIB}],options:[{type:o.IIB}],focused:[{type:o.IIB}],state:[{type:o.IIB}],toggleExpanded:[{type:o.r_U}],activate:[{type:o.r_U}],deactivate:[{type:o.r_U}],nodeActivate:[{type:o.r_U}],nodeDeactivate:[{type:o.r_U}],select:[{type:o.r_U}],deselect:[{type:o.r_U}],focus:[{type:o.r_U}],blur:[{type:o.r_U}],updateData:[{type:o.r_U}],initialized:[{type:o.r_U}],moveNode:[{type:o.r_U}],copyNode:[{type:o.r_U}],loadNodeChildren:[{type:o.r_U}],changeFilter:[{type:o.r_U}],event:[{type:o.r_U}],stateChange:[{type:o.r_U}],onKeydown:[{type:o.L6J,args:["body: keydown",["$event"]]}],onMousedown:[{type:o.L6J,args:["body: mousedown",["$event"]]}]};class Ue{}Ue.\u0275fac=function(e){return new(e||Ue)},Ue.\u0275cmp=o.Xpm({type:Ue,selectors:[["TreeNode"],["tree-node"]],inputs:{node:"node",index:"index",templates:"templates"},decls:1,vars:2,consts:[[4,"treeMobxAutorun"],[3,"class","tree-node","tree-node-expanded","tree-node-collapsed","tree-node-leaf","tree-node-active","tree-node-focused",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"dropIndex","node",4,"ngIf"],[3,"node","index","templates"],[3,"node","templates"],[3,"dropIndex","node"]],template:function(e,n){1&e&&o.YNc(0,go,3,8,"ng-container",0),2&e&&o.Q6J("treeMobxAutorun",o.DdM(1,Pe))},dependencies:function(){return[V.O5,V.tP,He,De,Ge,U]},encapsulation:2}),Ue.propDecorators={node:[{type:o.IIB}],index:[{type:o.IIB}],templates:[{type:o.IIB}]};class xe{}xe.\u0275fac=function(e){return new(e||xe)},xe.\u0275cmp=o.Xpm({type:xe,selectors:[["tree-node-content"]],inputs:{node:"node",index:"index",template:"template"},decls:2,vars:7,consts:[[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(o.YNc(0,vo,2,1,"span",0),o.GkF(1,1)),2&e&&(o.Q6J("ngIf",!n.template),o.xp6(1),o.Q6J("ngTemplateOutlet",n.template)("ngTemplateOutletContext",o.kEZ(3,mo,n.node,n.node,n.index)))},dependencies:[V.O5,V.tP],encapsulation:2}),xe.propDecorators={node:[{type:o.IIB}],index:[{type:o.IIB}],template:[{type:o.IIB}]};class De{onDrop(e){this.node.mouseAction("drop",e.event,{from:e.element,to:{parent:this.node,index:this.dropIndex}})}allowDrop(e,n){return this.node.options.allowDrop(e,{parent:this.node,index:this.dropIndex},n)}}De.\u0275fac=function(e){return new(e||De)},De.\u0275cmp=o.Xpm({type:De,selectors:[["TreeNodeDropSlot"],["tree-node-drop-slot"]],inputs:{node:"node",dropIndex:"dropIndex"},decls:1,vars:2,consts:[[1,"node-drop-slot",3,"treeAllowDrop","allowDragoverStyling","treeDrop"]],template:function(e,n){1&e&&(o.TgZ(0,"div",0),o.NdJ("treeDrop",function(i){return n.onDrop(i)}),o.qZA()),2&e&&o.Q6J("treeAllowDrop",n.allowDrop.bind(n))("allowDragoverStyling",!0)},dependencies:function(){return[ge]},encapsulation:2}),De.propDecorators={node:[{type:o.IIB}],dropIndex:[{type:o.IIB}]};class Oe{}Oe.\u0275fac=function(e){return new(e||Oe)},Oe.\u0275cmp=o.Xpm({type:Oe,selectors:[["tree-node-expander"]],inputs:{node:"node"},decls:1,vars:2,consts:[[4,"treeMobxAutorun"],["class","toggle-children-wrapper",3,"toggle-children-wrapper-expanded","toggle-children-wrapper-collapsed","click",4,"ngIf"],["class","toggle-children-placeholder",4,"ngIf"],[1,"toggle-children-wrapper",3,"click"],[1,"toggle-children"],[1,"toggle-children-placeholder"]],template:function(e,n){1&e&&o.YNc(0,_o,3,2,"ng-container",0),2&e&&o.Q6J("treeMobxAutorun",o.DdM(1,Pe))},dependencies:[V.O5,U],encapsulation:2}),Oe.propDecorators={node:[{type:o.IIB}]};class He{}He.\u0275fac=function(e){return new(e||He)},He.\u0275cmp=o.Xpm({type:He,selectors:[["tree-node-children"]],inputs:{node:"node",templates:"templates"},decls:1,vars:2,consts:[[4,"treeMobxAutorun"],[3,"tree-children","tree-children-no-padding",4,"treeAnimateOpen","treeAnimateOpenSpeed","treeAnimateOpenAcceleration","treeAnimateOpenEnabled"],[3,"nodes","templates","treeModel",4,"ngIf"],["class","tree-node-loading",3,"padding-left","template","node",4,"ngIf"],[3,"nodes","templates","treeModel"],[1,"tree-node-loading",3,"template","node"]],template:function(e,n){1&e&&o.YNc(0,No,2,4,"ng-container",0),2&e&&o.Q6J("treeMobxAutorun",o.DdM(1,Pe))},dependencies:function(){return[V.O5,ke,Z,Ee,U]},encapsulation:2}),He.propDecorators={node:[{type:o.IIB}],templates:[{type:o.IIB}]};const Mo=Object.assign(function So(...t){return v(...t)},v);const Bo=Object.assign(function Ro(...t){return O(...t)},O);const Mr=Object.assign(function Fo(...t){return m(...t)},m);var _t=function(t,e,n,r){var a,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},Ne=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class Z{constructor(){this._dispose=[]}get nodes(){return this._nodes}set nodes(e){this.setNodes(e)}get marginTop(){const e=this.viewportNodes&&this.viewportNodes.length&&this.viewportNodes[0];return(e&&e.parent?e.position-e.parent.position-e.parent.getSelfHeight():0)+"px"}setNodes(e){this._nodes=e}ngOnInit(){this.virtualScroll=this.treeModel.virtualScroll,this._dispose=[Fe(()=>this.virtualScroll.getViewportNodes(this.nodes).map(e=>e.index),e=>{this.viewportNodes=e.map(n=>this.nodes[n])},{compareStructural:!0,fireImmediately:!0}),Fe(()=>this.nodes,e=>{this.viewportNodes=this.virtualScroll.getViewportNodes(e)})]}ngOnDestroy(){this._dispose.forEach(e=>e())}trackNode(e,n){return n.id}}Z.\u0275fac=function(e){return new(e||Z)},Z.\u0275cmp=o.Xpm({type:Z,selectors:[["tree-node-collection"]],inputs:{nodes:"nodes",treeModel:"treeModel",templates:"templates"},decls:1,vars:2,consts:[[4,"treeMobxAutorun"],[3,"node","index","templates",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","index","templates"]],template:function(e,n){1&e&&o.YNc(0,Eo,3,4,"ng-container",0),2&e&&o.Q6J("treeMobxAutorun",o.DdM(1,Pe))},dependencies:[V.sg,Ue,U],encapsulation:2}),Z.propDecorators={nodes:[{type:o.IIB}],treeModel:[{type:o.IIB}],templates:[{type:o.IIB}]},_t([Mr,Ne("design:type",Object)],Z.prototype,"_nodes",void 0),_t([Mr,Ne("design:type",Array)],Z.prototype,"viewportNodes",void 0),_t([Bo,Ne("design:type",String),Ne("design:paramtypes",[])],Z.prototype,"marginTop",null),_t([Mo,Ne("design:type",Function),Ne("design:paramtypes",[Object]),Ne("design:returntype",void 0)],Z.prototype,"setNodes",null);class Ge{}Ge.\u0275fac=function(e){return new(e||Ge)},Ge.\u0275cmp=o.Xpm({type:Ge,selectors:[["tree-node-wrapper"]],inputs:{node:"node",index:"index",templates:"templates"},decls:2,vars:8,consts:[["class","node-wrapper",3,"padding-left",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"node-wrapper"],[3,"node",4,"ngIf"],[3,"node"],[1,"node-content-wrapper",3,"treeAllowDrop","allowDragoverStyling","treeDrag","treeDragEnabled","click","dblclick","mouseover","mouseout","contextmenu","treeDrop","treeDropDragOver","treeDropDragLeave","treeDropDragEnter"],[3,"node","index","template"]],template:function(e,n){1&e&&(o.YNc(0,Ao,5,15,"div",0),o.GkF(1,1)),2&e&&(o.Q6J("ngIf",!n.templates.treeNodeWrapperTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",n.templates.treeNodeWrapperTemplate)("ngTemplateOutletContext",o.l5B(3,Ar,n.node,n.node,n.index,n.templates)))},dependencies:function(){return[V.O5,V.tP,xe,ge,Te,Oe,$e]},encapsulation:2}),Ge.propDecorators={node:[{type:o.IIB}],index:[{type:o.IIB}],templates:[{type:o.IIB}]};class $e{}$e.\u0275fac=function(e){return new(e||$e)},$e.\u0275cmp=o.Xpm({type:$e,selectors:[["tree-node-checkbox"]],inputs:{node:"node"},decls:1,vars:2,consts:[[4,"treeMobxAutorun"],["type","checkbox",1,"tree-node-checkbox",3,"checked","indeterminate","click"]],template:function(e,n){1&e&&o.YNc(0,wo,2,2,"ng-container",0),2&e&&o.Q6J("treeMobxAutorun",o.DdM(1,Pe))},dependencies:[U],encapsulation:2}),$e.propDecorators={node:[{type:o.IIB}]};const Rr="is-dragging-over",Br="is-dragging-over-disabled";class ge{constructor(e,n,r,i){this.el=e,this.renderer=n,this.treeDraggedElement=r,this.ngZone=i,this.allowDragoverStyling=!0,this.onDropCallback=new o.vpe,this.onDragOverCallback=new o.vpe,this.onDragLeaveCallback=new o.vpe,this.onDragEnterCallback=new o.vpe,this._allowDrop=(s,a)=>!0,this.dragOverEventHandler=this.onDragOver.bind(this),this.dragEnterEventHandler=this.onDragEnter.bind(this),this.dragLeaveEventHandler=this.onDragLeave.bind(this)}set treeAllowDrop(e){this._allowDrop=e instanceof Function?e:(n,r)=>e}allowDrop(e){return this._allowDrop(this.treeDraggedElement.get(),e)}ngAfterViewInit(){let e=this.el.nativeElement;this.ngZone.runOutsideAngular(()=>{e.addEventListener("dragover",this.dragOverEventHandler),e.addEventListener("dragenter",this.dragEnterEventHandler),e.addEventListener("dragleave",this.dragLeaveEventHandler)})}ngOnDestroy(){let e=this.el.nativeElement;e.removeEventListener("dragover",this.dragOverEventHandler),e.removeEventListener("dragenter",this.dragEnterEventHandler),e.removeEventListener("dragleave",this.dragLeaveEventHandler)}onDragOver(e){if(!this.allowDrop(e))return this.allowDragoverStyling?this.addDisabledClass():void 0;this.onDragOverCallback.emit({event:e,element:this.treeDraggedElement.get()}),e.preventDefault(),this.allowDragoverStyling&&this.addClass()}onDragEnter(e){this.allowDrop(e)&&(e.preventDefault(),this.onDragEnterCallback.emit({event:e,element:this.treeDraggedElement.get()}))}onDragLeave(e){if(!this.allowDrop(e))return this.allowDragoverStyling?this.removeDisabledClass():void 0;this.onDragLeaveCallback.emit({event:e,element:this.treeDraggedElement.get()}),this.allowDragoverStyling&&this.removeClass()}onDrop(e){this.allowDrop(e)&&(e.preventDefault(),this.onDropCallback.emit({event:e,element:this.treeDraggedElement.get()}),this.allowDragoverStyling&&this.removeClass(),this.treeDraggedElement.set(null))}addClass(){this.renderer.addClass(this.el.nativeElement,Rr)}removeClass(){this.renderer.removeClass(this.el.nativeElement,Rr)}addDisabledClass(){this.renderer.addClass(this.el.nativeElement,Br)}removeDisabledClass(){this.renderer.removeClass(this.el.nativeElement,Br)}}ge.\u0275fac=function(e){return new(e||ge)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(K),o.Y36(o.R0b))},ge.\u0275dir=o.lG2({type:ge,selectors:[["","treeDrop",""]],hostBindings:function(e,n){1&e&&o.NdJ("drop",function(i){return n.onDrop(i)})},inputs:{allowDragoverStyling:"allowDragoverStyling",treeAllowDrop:"treeAllowDrop"},outputs:{onDropCallback:"treeDrop",onDragOverCallback:"treeDropDragOver",onDragLeaveCallback:"treeDropDragLeave",onDragEnterCallback:"treeDropDragEnter"}}),ge.ctorParameters=()=>[{type:o.SBq},{type:o.Qsj},{type:K},{type:o.R0b}],ge.propDecorators={allowDragoverStyling:[{type:o.IIB}],onDropCallback:[{type:o.r_U,args:["treeDrop"]}],onDragOverCallback:[{type:o.r_U,args:["treeDropDragOver"]}],onDragLeaveCallback:[{type:o.r_U,args:["treeDropDragLeave"]}],onDragEnterCallback:[{type:o.r_U,args:["treeDropDragEnter"]}],treeAllowDrop:[{type:o.IIB}],onDrop:[{type:o.L6J,args:["drop",["$event"]]}]};class Te{constructor(e,n,r,i){this.el=e,this.renderer=n,this.treeDraggedElement=r,this.ngZone=i,this.dragEventHandler=this.onDrag.bind(this)}ngAfterViewInit(){let e=this.el.nativeElement;this.ngZone.runOutsideAngular(()=>{e.addEventListener("drag",this.dragEventHandler)})}ngDoCheck(){this.renderer.setAttribute(this.el.nativeElement,"draggable",this.treeDragEnabled?"true":"false")}ngOnDestroy(){this.el.nativeElement.removeEventListener("drag",this.dragEventHandler)}onDragStart(e){e.dataTransfer.setData("text",e.target.id),this.treeDraggedElement.set(this.draggedElement),this.draggedElement.mouseAction&&this.draggedElement.mouseAction("dragStart",e)}onDrag(e){this.draggedElement.mouseAction&&this.draggedElement.mouseAction("drag",e)}onDragEnd(){this.draggedElement.mouseAction&&this.draggedElement.mouseAction("dragEnd"),this.treeDraggedElement.set(null)}}Te.\u0275fac=function(e){return new(e||Te)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(K),o.Y36(o.R0b))},Te.\u0275dir=o.lG2({type:Te,selectors:[["","treeDrag",""]],hostBindings:function(e,n){1&e&&o.NdJ("dragstart",function(i){return n.onDragStart(i)})("dragend",function(){return n.onDragEnd()})},inputs:{draggedElement:["treeDrag","draggedElement"],treeDragEnabled:"treeDragEnabled"}}),Te.ctorParameters=()=>[{type:o.SBq},{type:o.Qsj},{type:K},{type:o.R0b}],Te.propDecorators={draggedElement:[{type:o.IIB,args:["treeDrag"]}],treeDragEnabled:[{type:o.IIB}],onDragStart:[{type:o.L6J,args:["dragstart",["$event"]]}],onDragEnd:[{type:o.L6J,args:["dragend"]}]};class Ee{constructor(e,n,r){this.renderer=e,this.templateRef=n,this.viewContainerRef=r}set isOpen(e){e?(this._show(),this.isEnabled&&!1===this._isOpen&&this._animateOpen()):this.isEnabled?this._animateClose():this._hide(),this._isOpen=!!e}_show(){this.innerElement||(this.innerElement=this.viewContainerRef.createEmbeddedView(this.templateRef).rootNodes[0])}_hide(){this.viewContainerRef.clear(),this.innerElement=null}_animateOpen(){let e=this.animateSpeed,n=this.animateAcceleration,r=0;this.renderer.setStyle(this.innerElement,"max-height","0"),setTimeout(()=>{const i=setInterval(()=>{if(!this._isOpen||!this.innerElement)return clearInterval(i);r+=e;const s=Math.round(r);this.renderer.setStyle(this.innerElement,"max-height",`${s}px`);const a=this.innerElement.getBoundingClientRect?this.innerElement.getBoundingClientRect().height:0;e*=n,n*=1.005,a<s&&(this.renderer.setStyle(this.innerElement,"max-height",null),clearInterval(i))},17)})}_animateClose(){if(!this.innerElement)return;let e=this.animateSpeed,n=this.animateAcceleration,r=this.innerElement.getBoundingClientRect().height;const i=setInterval(()=>{if(this._isOpen||!this.innerElement)return clearInterval(i);r-=e,this.renderer.setStyle(this.innerElement,"max-height",`${r}px`),e*=n,n*=1.005,r<=0&&(this.viewContainerRef.clear(),this.innerElement=null,clearInterval(i))},17)}}Ee.\u0275fac=function(e){return new(e||Ee)(o.Y36(o.Qsj),o.Y36(o.Rgc),o.Y36(o.s_b))},Ee.\u0275dir=o.lG2({type:Ee,selectors:[["","treeAnimateOpen",""]],inputs:{isOpen:["treeAnimateOpen","isOpen"],animateSpeed:["treeAnimateOpenSpeed","animateSpeed"],animateAcceleration:["treeAnimateOpenAcceleration","animateAcceleration"],isEnabled:["treeAnimateOpenEnabled","isEnabled"]}}),Ee.ctorParameters=()=>[{type:o.Qsj},{type:o.Rgc},{type:o.s_b}],Ee.propDecorators={animateSpeed:[{type:o.IIB,args:["treeAnimateOpenSpeed"]}],animateAcceleration:[{type:o.IIB,args:["treeAnimateOpenAcceleration"]}],isEnabled:[{type:o.IIB,args:["treeAnimateOpenEnabled"]}],isOpen:[{type:o.IIB,args:["treeAnimateOpen"]}]};class Je{}Je.\u0275fac=function(e){return new(e||Je)},Je.\u0275mod=o.oAB({type:Je}),Je.\u0275inj=o.cJS({imports:[V.ez]})}}]);