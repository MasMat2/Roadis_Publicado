"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[3228],{3338:(le,Z,r)=>{r.d(Z,{b:()=>m});class m{constructor(){}}},13228:(le,Z,r)=>{r.r(Z),r.d(Z,{UsuarioModule:()=>H});var m=r(83083),d=r(36441),L=r(51757),O=r(46101),I=r(73523),C=r(62868),_=r(88796),F=r(54567),c=r(8816),h=r(20388),v=r(59241),R=r(41283),ue=r(63405),de=r(33369),V=r(79231),J=r(7513),j=r(50496),W=r(70254),w=r(16902),K=r(79160),k=r(47074),z=r(79810),e=r(94650),X=r(80529);class N{constructor(i){this.http=i,this.dataUrl="satFormaPago/"}consultarParaSelector(){return this.http.get(this.dataUrl+"consultarParaSelector")}static#e=this.\u0275fac=function(a){return new(a||N)(e.LFG(X.eN))};static#i=this.\u0275prov=e.Yz7({token:N,factory:N.\u0275fac})}class S{constructor(i){this.http=i,this.dataUrl="metodoPago/"}consultarTodos(){return this.http.get(this.dataUrl+"consultarTodos")}consultarPorClave(i){return this.http.get(this.dataUrl+`consultarPorClave/${i}`)}static#e=this.\u0275fac=function(a){return new(a||S)(e.LFG(X.eN))};static#i=this.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac})}var $=r(62861),x=r(80780),q=r(8690),ee=r(54388),ie=r(38601),G=r(46558),ce=r(90061),ge=r(61191),_e=r(71436);class Y{static#e=this.\u0275fac=function(a){return new(a||Y)};static#i=this.\u0275mod=e.oAB({type:Y});static#o=this.\u0275inj=e.cJS({providers:[$.Q,de.R,V.T,m.c,J.y,d.s,j.a,w.b,S,L.G,O.$,C.F,K.n,I.F,x.m,q.V,z.y,ee.I,ie.U,G.i,N,W.l,k.f],imports:[ue.m,R.Z,ce.kn,c.f,v.P4,h.zk.forChild(),_.A0,ge.H3.forRoot(),_e.a]})}var f=r(15861),oe=r(3338),ae=r(79034);class te{constructor(){}}var M=r(85087),u=r(50986),y=r(90429),fe=r(69751),me=r(39646),Ce=r(63900),ve=r(54004),Me=r(70262),Ue=r(99809);class D{constructor(i){this.http=i,this.dataUrl="concepto/"}consultarTodosParaSelector(){return this.http.get(this.dataUrl+"consultarTodosParaSelector")}consultarSelectorParaPresentacion(){return this.http.get(this.dataUrl+"consultarSelectorParaPresentacion")}consultarTodosParaGrid(){return this.http.get(this.dataUrl+"consultarTodosParaGrid")}consultarParaDesgloseSelector(){return this.http.get(this.dataUrl+"consultarParaDesgloseSelector")}consultarOperativosParaSelector(){return this.http.get(this.dataUrl+"consultarOperativosParaSelector")}consultarPorTipo(i){return this.http.get(this.dataUrl+`consultarPorTipo/${i}`)}consultar(i){return this.http.get(this.dataUrl+`consultar/${i}`)}agregar(i){return this.http.post(this.dataUrl+"agregar",i)}editar(i){return this.http.put(this.dataUrl+"editar",i)}eliminar(i){return this.http.delete(this.dataUrl+`eliminar/${i}`)}static#e=this.\u0275fac=function(a){return new(a||D)(e.LFG(X.eN))};static#i=this.\u0275prov=e.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}var he=r(2060),Te=r(11481),Ae=r(64163),be=r(52627),p=r(24006),pe=r(36895),Ee=r(58390),Pe=r(31250),Ze=r(36678),Le=r(77250),Re=r(27742),Ne=r(61901);const Se=["formulario"],Oe=["codigoPostal"];function Ie(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," El nombre es requerido "),e.qZA())}function Fe(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," El nombre tiene un formato inv\xe1lido "),e.qZA())}function ye(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," El apellido paterno tiene un formato inv\xe1lido "),e.qZA())}function De(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," El apellido materno tiene un formato inv\xe1lido "),e.qZA())}function Je(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," El perfil es requerido "),e.qZA())}function xe(s,i){if(1&s){const a=e.EpF();e.TgZ(0,"div",25)(1,"div",13)(2,"label",14),e._uU(3,"Perfil"),e.qZA(),e.TgZ(4,"div")(5,"ng-select",78,79),e.NdJ("ngModelChange",function(n){e.CHM(a);const t=e.oxw();return e.KtG(t.usuario.idPerfil=n)}),e.qZA()(),e.YNc(7,Je,2,0,"div",17),e.qZA()()}if(2&s){const a=e.MAs(6),o=e.oxw();e.xp6(5),e.Q6J("items",o.perfilList)("required",!0)("ngModel",o.usuario.idPerfil)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions),e.xp6(2),e.Q6J("ngIf",(null==a.errors?null:a.errors.required)&&a.touched)}}function qe(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," El tipo de usuario es requerido "),e.qZA())}function Ge(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," El rol es requerido "),e.qZA())}function Ye(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," El username es requerido "),e.qZA())}function Qe(s,i){if(1&s){const a=e.EpF();e.TgZ(0,"i",86),e.NdJ("click",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.verContra=!n.verContra)}),e.qZA()}}function Be(s,i){if(1&s){const a=e.EpF();e.TgZ(0,"i",87),e.NdJ("click",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.verContra=!n.verContra)}),e.qZA()}}function He(s,i){if(1&s&&(e.TgZ(0,"div",77),e._uU(1),e.qZA()),2&s){e.oxw();const a=e.MAs(6);e.xp6(1),e.hij(" La longitud m\xednima son ",null==a.errors?null:a.errors.formatoContrasena.longitud.size," caracteres ")}}function Ve(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," La contrase\xf1a debe tener al menos un n\xfamero "),e.qZA())}function je(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," La contrase\xf1a debe tener al menos una may\xfascula "),e.qZA())}function We(s,i){if(1&s){const a=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"label",14),e._uU(3,"Contrase\xf1a"),e.qZA(),e.TgZ(4,"div",80)(5,"input",81,82),e.NdJ("ngModelChange",function(n){e.CHM(a);const t=e.oxw();return e.KtG(t.usuario.contrasena=n)}),e.qZA(),e.TgZ(7,"span",83),e.YNc(8,Qe,1,0,"i",84),e.YNc(9,Be,1,0,"i",85),e.qZA()(),e.YNc(10,He,2,1,"div",17),e.YNc(11,Ve,2,0,"div",17),e.YNc(12,je,2,0,"div",17),e.qZA()()}if(2&s){const a=e.MAs(6),o=e.oxw();e.xp6(5),e.Q6J("ngModel",o.usuario.contrasena)("type",o.verContra?"text":"password"),e.xp6(3),e.Q6J("ngIf",!o.verContra),e.xp6(1),e.Q6J("ngIf",o.verContra),e.xp6(1),e.Q6J("ngIf",(null==a.errors||null==a.errors.formatoContrasena?null:a.errors.formatoContrasena.longitud)&&a.touched),e.xp6(1),e.Q6J("ngIf",(null==a.errors||null==a.errors.formatoContrasena?null:a.errors.formatoContrasena.numeros)&&a.touched),e.xp6(1),e.Q6J("ngIf",(null==a.errors||null==a.errors.formatoContrasena?null:a.errors.formatoContrasena.mayuscula)&&a.touched)}}function we(s,i){if(1&s){const a=e.EpF();e.TgZ(0,"i",86),e.NdJ("click",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.verConfirma=!n.verConfirma)}),e.qZA()}}function Ke(s,i){if(1&s){const a=e.EpF();e.TgZ(0,"i",87),e.NdJ("click",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.verConfirma=!n.verConfirma)}),e.qZA()}}function ke(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," La confirmaci\xf3n de contrase\xf1a es requerida "),e.qZA())}function ze(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," Las contrase\xf1as no coinciden "),e.qZA())}function Xe(s,i){if(1&s){const a=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"label",14),e._uU(3,"Confirmar Contrase\xf1a"),e.qZA(),e.TgZ(4,"div",80)(5,"input",88,89),e.NdJ("ngModelChange",function(n){e.CHM(a);const t=e.oxw();return e.KtG(t.confirmarContrasena=n)}),e.qZA(),e.TgZ(7,"span",83),e.YNc(8,we,1,0,"i",84),e.YNc(9,Ke,1,0,"i",85),e.qZA()(),e.YNc(10,ke,2,0,"div",17),e.YNc(11,ze,2,0,"div",17),e.qZA()()}if(2&s){const a=e.MAs(6),o=e.oxw();e.xp6(5),e.Q6J("ngModel",o.confirmarContrasena)("type",o.verConfirma?"text":"password")("required",""!=o.usuario.contrasena&&null!=o.usuario.contrasena),e.xp6(3),e.Q6J("ngIf",!o.verConfirma),e.xp6(1),e.Q6J("ngIf",o.verConfirma),e.xp6(1),e.Q6J("ngIf",(null==a.errors?null:a.errors.required)&&a.touched),e.xp6(1),e.Q6J("ngIf",(null==a.errors?null:a.errors.confirmacionContrasena)&&a.touched)}}function $e(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," El RFC no es v\xe1lido "),e.qZA())}function ei(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," El tel\xe9fono tiene un formato inv\xe1lido "),e.qZA())}function ii(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," El correo tiene un formato inv\xe1lido "),e.qZA())}function oi(s,i){1&s&&(e.TgZ(0,"div",77),e._uU(1," El correo es requerido "),e.qZA())}function ai(s,i){if(1&s&&e._UZ(0,"img",90),2&s){const a=e.oxw();e.Q6J("src",a.url,e.LSH)}}class U{constructor(i,a,o,n,t,l,T,A,b,E,P,g,se,hi,pi,gi,_i,fi,Ci,vi,Mi,Ui,Ti,Ai,bi,Ei,Pi,Zi,Li){this.accesoService=i,this.areaService=a,this.coloniaService=o,this.companiaService=n,this.conceptoService=t,this.cuentaContableService=l,this.estadoService=T,this.hospitalService=A,this.localidadService=b,this.metodoPagoService=E,this.modalMensajeService=P,this.municipioService=g,this.paisService=se,this.perfilService=hi,this.puntoVentaService=pi,this.regimenFiscalService=gi,this.rolService=_i,this.sanitizer=fi,this.tipoUsuarioService=Ci,this.tituloAcademicoService=vi,this.usuarioLocacionService=Mi,this.usuarioRolService=Ui,this.usuarioService=Ti,this.listaPrecioService=Ai,this.tipoClienteService=bi,this.satFormaPagoService=Ei,this.codigoPostalService=Pi,this.archivoService=Zi,this.usuarioImagenService=Li,this.verConfirma=!1,this.verContra=!1,this.titulo="Alta",this.accion="Agregar",this.desdeExpediente=!1,this.placeHolderSelect=u.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=u.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.configDate=u.g.CONFIG_DATEPICKER,this.MENSAJE_AGREGAR="El usuario ha sido agregado",this.MENSAJE_EDITAR="El usuario ha sido modificado",this.MENSAJE_PASSWORD="Las contrase\xf1as no coinciden",this.usuario=new oe.b,this.confirmarContrasena="",this.rolSeleccionados=[],this.tieneRolVendedor=!1,this.tieneRolMedico=!1,this.tieneRolCliente=!1,this.esExterno=!1,this.rfcValido=!1,this.accesoContrasena=!1,this.paisList=[],this.estadoList=[],this.municipioList=[],this.localidadList=[],this.coloniaList=[],this.esPaisExtranjero=!1,this.metodoPagoList=[],this.formaPagoList=[],this.urlImagenDefault="./assets/img/svg/ico-36x36-header-usuario.svg",this.btnSubmit=!1,this.esEdicion=!1,this.usuarioLocacion=new ae.j,this.columns=[{headerName:"Compa\xf1\xeda",field:"compania",minWidth:100},{headerName:"Locaci\xf3n",field:"locacion",minWidth:100},{headerName:"Perfil",field:"perfil",minWidth:100}],this.usuarioRol=new te,this.usuarioRolList=[],this.conceptoList=[],this.cuentaContableList=[],this.columnsUsuarioRol=[{headerName:"Rol",field:"nombreRol",minWidth:100},{headerName:"Concepto",field:"concepto",minWidth:100},{headerName:"Cuenta Contable",field:"cuentaContable",minWidth:100}],this.configIdRol=Object.assign({labelField:"nombre",valueField:"idRol",searchField:["nombre"],plugins:["dropdown_direction","remove_button"],maxItems:null,dropdownDirection:"down"}),this.configModal={animated:!0,keyboard:!1,backdrop:"static",ignoreBackdropClick:!0,size:"sm",class:"modal-md modal-size-md modal-position-center"}}ngOnInit(){this.usuario.idUsuario>0?(this.titulo="Modificar",this.accion=u.g.MODAL_ACCION_EDITAR,this.esEdicion=!0,this.consultarPermisos(this.usuario.idUsuario),this.consultarUsuarioRolParaGrid(this.usuario.idUsuario),this.rfcValido=""!=this.usuario.rfc&&null!=this.usuario.rfc):(this.accion=u.g.MODAL_ACCION_AGREGAR,this.usuario.sueldoDiario=0,this.usuario.habilitado=!0),this.usuario.contrasena="",this.consultarAccesoContrasena(),this.consultarTipoUsuario(),this.consultarCompania(),this.consultarPerfiles(),this.consultarTitulos(),this.consultarRoles(),this.consultarPaises(),this.consultarEstados(this.usuario.idPais),this.consultarMunicipios(this.usuario.idEstado),this.consultarLocalidades(this.usuario.idEstado),this.consultarColonias(this.usuario.codigoPostal),this.consultarDepartamentos(),this.consultarPuntosVenta(),this.consultarTiposDeUsuario(),this.consultarConceptos(),this.consultarRegimenFiscal(),this.consultarColonias(this.usuario.codigoPostal),this.consultarCuentas(),this.consultarListasPrecio(),this.consultarTiposCliente(),this.consultarMetodosPago(),this.consultarFormasPago(),this.cargarSugerenciasCodigoPostal()}consultarAccesoContrasena(){this.accesoService.tieneAcceso(M.v.EDITAR_CONTRASENA_USUARIO).subscribe(i=>{this.accesoContrasena=i})}consultarTipoUsuario(){this.usuario.idTipoUsuario>0||this.tipoUsuarioService.consultarTipoAdministrador().subscribe(i=>{this.usuario.idTipoUsuario=i.idTipoUsuario})}consultarPerfiles(){this.perfilService.consultarPorCompania().subscribe(i=>{this.perfilList=i})}consultarPerfilesPorCompania(i){i>0&&this.perfilService.consultarPorCompaniaParaSelector(i).subscribe(a=>{this.perfilList=a})}consultarTitulos(){this.tituloAcademicoService.consultarTodosParaSelector().subscribe(i=>{this.tituloList=i})}consultarHospitales(i){i>0&&this.hospitalService.consultarPorCompania(i).subscribe(a=>{this.hospitalList=a})}consultarDepartamentos(){this.areaService.consultarParaSelector().subscribe(i=>{this.areaList=i})}consultarPaises(){var i=this;return(0,f.Z)(function*(){const a=yield i.paisService.consultarTodosParaSelector().toPromise();i.paisList=a??[]})()}consultarEstados(i){var a=this;return(0,f.Z)(function*(){const o=i>0?yield a.estadoService.consultarPorPaisParaSelector(i).toPromise():[];a.estadoList=o??[]})()}consultarMunicipios(i){var a=this;return(0,f.Z)(function*(){const o=i>0?yield a.municipioService.consultarPorEstadoParaSelector(i).toPromise():[];a.municipioList=o??[]})()}consultarLocalidades(i){var a=this;return(0,f.Z)(function*(){const o=i>0?yield a.localidadService.consultarPorEstado(i).toPromise():[];a.localidadList=o??[]})()}consultarColonias(i){var a=this;return(0,f.Z)(function*(){const o=i&&5===i.length?yield a.coloniaService.consultarPorCodigoParaSelector(i).toPromise():[];a.coloniaList=o??[]})()}consultarRoles(){this.rolService.consultarTodosParaSelector().subscribe(i=>{this.rolList=i})}consultarPuntosVenta(){this.puntoVentaService.consultarTodosParaSelector().subscribe(i=>{this.puntoVentaList=i})}consultarRegimenFiscal(){this.regimenFiscalService.consultarTodosParaSelector().subscribe(i=>{this.regimenFiscalList=i})}consultarCuentas(){this.cuentaContableService.consultarTodosParaSelector().subscribe(i=>{i.forEach(a=>{a.nombre=a.nombre+" - "+a.numero}),this.cuentaContableList=i})}consultarTiposCliente(){this.tipoClienteService.consultarGeneral().subscribe(i=>{this.tipoClienteList=i})}consultarListasPrecio(){this.listaPrecioService.consultarTodosPorHospitalParaSelector().subscribe(i=>{this.listaPrecioList=i})}consultarMetodosPago(){this.metodoPagoService.consultarTodos().subscribe(i=>{this.metodoPagoList=i,this.metodoPagoCredito=i.find(a=>a.clave===u.g.CLAVE_METODO_PAGO_CREDITO)})}consultarFormasPago(){this.satFormaPagoService.consultarParaSelector().subscribe(i=>{this.formaPagoList=i})}consultarPaisMexico(){this.paisService.consultarPorClave(u.g.CLAVE_PAIS_MEXICO).subscribe(i=>{this.idPaisMexico=i.idPais})}cargarSugerenciasCodigoPostal(){this.sugerenciasCodigoPostal$=new fe.y(i=>{i.next(this.usuario.codigoPostal)}).pipe((0,Ce.w)(i=>i&&this.usuario.idPais?this.codigoPostalService.consultarPorPaisBusqueda(i,this.usuario.idPais).pipe((0,ve.U)(a=>a||[]),(0,Me.K)(()=>(0,me.of)([]))):(0,me.of)([])))}onCompaniaChange(i,a){this.hospitalList=[],this.perfilList=[],a||(this.usuarioLocacion.idPerfil=0,this.usuarioLocacion.idLocacion=0),i>0&&(this.consultarHospitales(i),this.consultarPerfilesPorCompania(i))}tieneRol(i){return this.rolList.filter(o=>this.rolSeleccionados.includes(o.idRol)).some(o=>o.clave===i)}onRfcChange(i){const a=i.control.errors;null==this.usuario.rfc||""==this.usuario.rfc||null!=a&&a.formatoRfc?this.rfcValido=!1:this.rfcValido=!0}onRolChange(i){this.tieneRolVendedor=this.tieneRol(u.g.CLAVE_ROL_VENDEDOR),this.tieneRolMedico=this.tieneRol(u.g.CLAVE_ROL_MEDICO),this.tieneRolCliente=this.tieneRol(u.g.CLAVE_ROL_CLIENTE)}onChangePais(){var i=this;return(0,f.Z)(function*(){i.esPaisExtranjero=i.usuario.idPais!==i.idPaisMexico,i.usuario.idEstado=0,yield i.consultarEstados(i.usuario.idPais),i.onChangeEstado()})()}onChangeEstado(){var i=this;return(0,f.Z)(function*(){yield Promise.all([i.consultarMunicipios(i.usuario.idEstado),i.consultarLocalidades(i.usuario.idEstado)])})()}onChangeCodigoPostal(){var i=this;return(0,f.Z)(function*(){i.usuario.idColonia=0;const a=i.usuario.codigoPostal;5===a.length&&(yield i.asignarValoresDeCodigoPostal(a))})()}asignarValoresDeCodigoPostal(i){var a=this;return(0,f.Z)(function*(){const o=yield a.codigoPostalService.consultarPorCodigoPostal(i).toPromise().then(t=>t&&t.length>0?t[0]:null);if(!o)return;a.usuario.idEstado=o.idEstado,yield Promise.all([a.consultarMunicipios(o.idEstado),a.consultarLocalidades(o.idEstado)]),a.usuario.idMunicipio=o.idMunicipio,yield a.consultarColonias(i);const n=a.coloniaList.find(t=>y.q1(t.nombre,o.colonia));n&&(a.usuario.idColonia=n.idColonia)})()}onConceptoChange(i){if(i){let a=this.conceptoList.find(o=>o.idConcepto==i);this.usuarioRol.idCuentaContable=a?.idCuentaContable??0}}correoChange(i){y.Vg(i)&&(this.usuario.correoPersonal=i)}consultarUsuario(){this.usuario.idUsuario>0?this.usuarioService.consultar(this.usuario.idUsuario).subscribe(i=>{this.usuario=i,this.usuario.idUsuario>0&&this.consultarHospitales(this.usuario.idCompania),this.consultarUsuarioRol(),this.archivoService.obtenerUsuarioImagen(i.idUsuario).subscribe(a=>{if(a&&this.usuario.imagenTipoMime)this.crearImagenUrl(a);else{let o=URL.createObjectURL(a);this.url=this.sanitizer.bypassSecurityTrustUrl(o)}})}):this.toDataURL(this.urlImagenDefault,i=>{this.url=this.sanitize(i)})}crearImagenUrl(i){const a=new FileReader;a.readAsDataURL(i),a.onload=()=>{this.url=a.result,this.usuario.imagenBase64=this.url}}consultarUsuarioRol(){this.usuarioRolService.consultarPorUsuario(this.usuario.idUsuario).subscribe(i=>{this.rolSeleccionados=i.map(a=>a.idRol)})}consultarCompania(){this.companiaService.consultarGeneral().subscribe(i=>{this.companiaList=i,this.usuario.idCompania=i[0].idCompania,this.consultarUsuario()})}toDataURL(i,a){const o=new XMLHttpRequest;o.onload=()=>{const n=new FileReader;n.onloadend=()=>{a(n.result)},n.readAsDataURL(o.response)},o.open("GET",i),o.responseType="blob",o.send()}fileChange(i){if(i.target.files&&i.target.files[0]){const a=new FileReader;a.readAsDataURL(i.target.files[0]),a.onload=()=>{this.url=a.result,this.usuario.imagenBase64=this.url,this.usuario.imagenTipoMime=i.target.files[0].type}}}agregar(){var i=this;return(0,f.Z)(function*(){let a=!1;return yield i.usuarioService.agregar(i.usuario).toPromise().then(o=>{i.usuario.idUsuario=o??0,i.modalMensajeService.modalExito(i.MENSAJE_AGREGAR),a=!0}).catch(()=>{a=!1}).finally(()=>{i.btnSubmit=!1}),a})()}editar(){var i=this;return(0,f.Z)(function*(){i.usuario.contrasenaActualizada=i.usuario.contrasena;let a=!1;return yield i.usuarioService.editarAdministrador(i.usuario).toPromise().then(o=>{i.modalMensajeService.modalExito(i.MENSAJE_EDITAR),a=!0}).catch(()=>{a=!1}).finally(()=>{i.btnSubmit=!1}),a})()}limpiarFormulario(i){this.toDataURL(this.urlImagenDefault,a=>{this.url=this.sanitize(a)}),i.reset()}cancelar(){this.onClose(!1)}enviarFormulario(i){var a=this;return(0,f.Z)(function*(){if(a.btnSubmit=!0,!a.usuario.idCompania&&!a.esExterno&&(a.usuario.idCompania=a.companiaList[0].idCompania),(null==a.usuario.sueldoDiario||void 0===a.usuario.sueldoDiario)&&(a.usuario.sueldoDiario=0),a.usuario.diasPago||(a.usuario.diasPago=0),!i.valid)return y.CW(i),void(a.btnSubmit=!1);a.usuario.idsRol=a.rolSeleccionados;let o=!1;a.accion===u.g.MODAL_ACCION_AGREGAR?o=yield a.agregar():a.accion===u.g.MODAL_ACCION_EDITAR&&(o=yield a.editar()),o&&(a.desdeExpediente?a.onClose(a.usuario.idUsuario):(a.onClose(!0),a.actualizarImagen()))})()}actualizarImagen(){this.usuarioService.consultarMiPerfil().subscribe(i=>{i.idUsuario===this.usuario.idUsuario&&this.usuarioImagenService.actualizarImagen(this.url)})}sanitize(i){return this.sanitizer.bypassSecurityTrustUrl(i)}consultarTiposDeUsuario(){this.tipoUsuarioService.consultarTiposUsuarioSelector().subscribe(i=>{this.tipoUsuarioList=i,this.onTipoUsuarioChange(this.usuario.idTipoUsuario)})}onTipoUsuarioChange(i){const a=this.tipoUsuarioList.find(o=>o.idTipoUsuario==i);void 0!==a&&this.tipoUsuarioList.length>0&&i>0&&(a.clave===u.g.CLAVE_TIPO_USUARIO_EXTERNO?this.esExterno=!0:this.esExterno=!1)}consultarPermisos(i){this.usuarioLocacionService.consultarPorUsuario(i).subscribe(a=>{this.permisosList=a})}guardarPermiso(){this.usuarioLocacion.idUsuario=this.usuario.idUsuario,this.usuarioLocacion.idCompania>0?this.usuarioLocacion.idLocacion>0?this.usuarioLocacion.idPerfil>0?this.usuarioLocacion.idUsuarioLocacion>0?this.usuarioLocacionService.editar(this.usuarioLocacion).subscribe(i=>{this.modalMensajeService.modalExito("Permiso modificado exitosamente"),this.usuarioLocacion=new ae.j,this.consultarPermisos(this.usuario.idUsuario)}):this.usuarioLocacionService.agregar(this.usuarioLocacion).subscribe(i=>{this.modalMensajeService.modalExito("Permiso agregado exitosamente"),this.usuarioLocacion=new ae.j,this.consultarPermisos(this.usuario.idUsuario)}):this.modalMensajeService.modalError("El perfil es requerido"):this.modalMensajeService.modalError("La locaci\xf3n es requerida"):this.modalMensajeService.modalError("La compa\xf1\xeda es requerida")}onGridClick(i){i.accion===u.g.GRID_ACCION_EDITAR?this.editarPermiso(i.data):i.accion===u.g.GRID_ACCION_ELIMINAR&&this.eliminarPermiso(i.data.idUsuarioLocacion)}editarPermiso(i){this.usuarioLocacion=i,this.onCompaniaChange(this.usuarioLocacion.idCompania,!0)}eliminarPermiso(i){this.usuarioLocacionService.eliminar(i).subscribe(a=>{this.modalMensajeService.modalExito("Permiso eliminado exitosamente"),this.consultarPermisos(this.usuario.idUsuario)})}onGridClickUsuarioRol(i){i.accion===u.g.GRID_ACCION_EDITAR?this.editarUsuarioRol(i.data):i.accion===u.g.GRID_ACCION_ELIMINAR&&this.eliminarUsuarioRol(i.data.idUsuarioRol)}consultarConceptos(){this.conceptoService.consultarTodosParaSelector().subscribe(i=>{this.conceptoList=i})}consultarUsuarioRolParaGrid(i){this.usuarioRolService.consultarPorUsuarioParaGrid(i).subscribe(a=>{this.usuarioRolList=a})}editarUsuarioRol(i){this.usuarioRol=i}eliminarUsuarioRol(i){this.usuarioRolService.eliminar(i).subscribe(a=>{this.modalMensajeService.modalExito("Usuario Rol eliminado exitosamente"),this.consultarUsuarioRolParaGrid(this.usuario.idUsuario),this.consultarUsuarioRol()})}guardarAfectacionContable(i){i.valid?(this.usuarioRol.idUsuario=this.usuario.idUsuario,null!==this.usuarioRol.idRol&&null!=this.usuarioRol.idRol&&this.usuarioRol.idRol>0?(this.usuarioRol.idUsuarioRol>0?this.usuarioRolService.editar(this.usuarioRol).subscribe(a=>{this.modalMensajeService.modalExito("Usuario Rol editado exitosamente"),this.usuarioRol=new te,this.consultarUsuarioRolParaGrid(this.usuario.idUsuario),this.consultarUsuarioRol()}):this.usuarioRolService.agregar(this.usuarioRol).subscribe(a=>{this.modalMensajeService.modalExito("Usuario Rol agregado exitosamente"),this.usuarioRol=new te,this.consultarUsuarioRolParaGrid(this.usuario.idUsuario),this.consultarUsuarioRol()}),i.reset()):this.modalMensajeService.modalError("El rol es requerido")):y.CW(i)}static#e=this.\u0275fac=function(a){return new(a||U)(e.Y36($.Q),e.Y36(Ue.T),e.Y36(V.T),e.Y36(m.c),e.Y36(D),e.Y36(J.y),e.Y36(d.s),e.Y36(j.a),e.Y36(w.b),e.Y36(S),e.Y36(he.V),e.Y36(L.G),e.Y36(O.$),e.Y36(C.F),e.Y36(K.n),e.Y36(I.F),e.Y36(x.m),e.Y36(Te.H7),e.Y36(q.V),e.Y36(z.y),e.Y36(ee.I),e.Y36(ie.U),e.Y36(G.i),e.Y36(W.l),e.Y36(k.f),e.Y36(N),e.Y36(de.R),e.Y36(Ae.g),e.Y36(be.s))};static#i=this.\u0275cmp=e.Xpm({type:U,selectors:[["app-usuario-formulario"]],viewQuery:function(a,o){if(1&a&&(e.Gf(Se,5),e.Gf(Oe,5)),2&a){let n;e.iGM(n=e.CRH())&&(o.formulario=n.first),e.iGM(n=e.CRH())&&(o.codigoPostal=n.first)}},decls:200,vars:86,consts:[[1,"d-flex"],[1,"barra-lateral-modal"],[1,"fa","fa-plus"],[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],[1,"far","fa-times-circle"],[1,"modal-body"],["customClass","tab","heading","Informaci\xf3n General"],["novalidate","novalidate",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"label-input","required-label"],["name","nombre","type","text","maxlength","50","appFormatoNombre","",1,"form-control",3,"ngModel","required","ngModelChange"],["nombre","ngModel"],["class","error",4,"ngIf"],["name","apellidoP","type","text","maxlength","50","appFormatoNombre","",1,"form-control",3,"ngModel","ngModelChange"],["apellidoP","ngModel"],["name","apellidoM","type","text","maxlength","50","appFormatoNombre","",1,"form-control",3,"ngModel","ngModelChange"],["apellidoM","ngModel"],["name","tituloName","bindLabel","nombre","bindValue","idTituloAcademico",3,"items","ngModel","placeholder","notFoundText","ngModelChange"],["tituloLst","ngModel"],["class","col-md-2",4,"ngIf"],[1,"col-md-2"],["name","tipoUsuarioName","bindLabel","nombre","bindValue","idTipoUsuario",3,"items","required","ngModel","placeholder","notFoundText","ngModelChange"],["tipoUsuario","ngModel"],[2,"display","flex","flex-direction","column"],["for","estatus",1,"switch"],["name","estatusName","type","checkbox","id","estatus","disabled","true",1,"accent",3,"ngModel","ngModelChange"],["estatus","ngModel"],[1,"slider","round"],[1,"on"],[1,"off"],["name","rol","bindLabel","nombre","bindValue","idRol",3,"items","multiple","placeholder","notFoundText","ngModel","required","ngModelChange"],["rol","ngModel"],["name","correo","type","text","maxlength","50",1,"form-control",3,"ngModel","required","ngModelChange"],["correo","ngModel"],["class","col-md-4",4,"ngIf"],["name","departamentoName","bindLabel","nombre","bindValue","idArea",3,"items","ngModel","placeholder","notFoundText","ngModelChange"],["departamentoLst","ngModel"],["name","rfc","type","text","maxlength","100","appFormatoRfc","",1,"form-control",3,"ngModel","ngModelChange"],["rfc","ngModel"],[1,"subseccion"],["name","paisName","bindLabel","nombre","bindValue","idPais",1,"select-custom",3,"items","ngModel","placeholder","notFoundText","ngModelChange"],["paisLst","ngModel"],["name","estadoName","bindLabel","nombre","bindValue","idEstado",1,"select-custom",3,"items","ngModel","placeholder","notFoundText","disabled","ngModelChange"],["estadoLst","ngModel"],["name","municipioName","bindLabel","nombre","bindValue","idMunicipio",1,"select-custom",3,"items","ngModel","placeholder","notFoundText","disabled","ngModelChange"],["municipio","ngModel"],["name","telefonoM","type","text","maxlength","10","appFormatoTelefono","",1,"form-control",3,"ngModel","ngModelChange"],["telefonoM","ngModel"],["name","correoPersonalName","type","text","maxlength","100","appFormatoCorreo","",1,"form-control",3,"ngModel","required","ngModelChange"],["correoPersonal","ngModel"],[1,"col-md-12"],[2,"text-align","center","margin-top","15px"],["id","logo","height","200",3,"src",4,"ngIf"],[1,"col-md-12","text-center"],["id","imagen","name","imagen","type","file","autocomplete","off","accept","image/*",1,"form-control",2,"display","none",3,"ngModel","ngModelChange","change"],["file","ngModel"],["onclick","document.getElementById('imagen').click()","type","button",1,"btn-terceario"],[1,"modal-footer"],[1,"text-right"],["type","button",1,"btn-secundario","mr-3",3,"click"],["type","submit",1,"btn-primario","ml-3",3,"disabled"],["customClass","tab","heading","Permisos",3,"disabled"],[1,"cuerpo-contenedor"],["name","companiaName","bindLabel","nombre","bindValue","idCompania",1,"select-custom",3,"items","required","ngModel","placeholder","notFoundText","ngModelChange"],["companiaLst","ngModel"],["name","hotelName","bindLabel","nombre","bindValue","idHospital",1,"select-custom",3,"items","required","ngModel","placeholder","notFoundText","disabled","ngModelChange"],["hotelLst","ngModel"],["name","perfilName","bindLabel","nombre","bindValue","idPerfil",1,"select-custom",3,"items","required","ngModel","placeholder","notFoundText","ngModelChange"],["perfilLst","ngModel"],[3,"headerName","data","children","event"],["gridPermisos",""],["type","button",1,"btn-primario","ml-3",3,"click"],[1,"error"],["name","perfilDefaultName","bindLabel","nombre","bindValue","idPerfil",3,"items","required","ngModel","placeholder","notFoundText","ngModelChange"],["perfilDefaultLst","ngModel"],[1,"relativo"],["name","contrasenaName","maxlength","50","appFormatoContrasena","","appConfirmacionContrasena","confirmacionContrasenaName","reversa","true","autocomplete","off",1,"form-control",3,"ngModel","type","ngModelChange"],["contrasena","ngModel"],[1,"verContra"],["class","fa-regular fa-eye",3,"click",4,"ngIf"],["class","fa-regular fa-eye-slash",3,"click",4,"ngIf"],[1,"fa-regular","fa-eye",3,"click"],[1,"fa-regular","fa-eye-slash",3,"click"],["name","confirmacionContrasenaName","maxlength","50","appConfirmacionContrasena","contrasenaName","reversa","true","autocomplete","off",1,"form-control",3,"ngModel","type","required","ngModelChange"],["confirmacionContrasena","ngModel"],["id","logo","height","200",3,"src"]],template:function(a,o){if(1&a){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"div"),e._uU(6),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return o.cancelar()}),e._UZ(8,"i",6),e.qZA()(),e.TgZ(9,"div",7)(10,"tabset")(11,"tab",8)(12,"form",9,10),e.NdJ("keydown.enter",function(l){return l.preventDefault()})("ngSubmit",function(){e.CHM(n);const l=e.MAs(13);return e.KtG(o.enviarFormulario(l))}),e.TgZ(14,"div",11)(15,"div",12)(16,"div",13)(17,"label",14),e._uU(18,"Nombre"),e.qZA(),e.TgZ(19,"div")(20,"input",15,16),e.NdJ("ngModelChange",function(l){return o.usuario.nombre=l}),e.qZA()(),e.YNc(22,Ie,2,0,"div",17),e.YNc(23,Fe,2,0,"div",17),e.qZA()(),e.TgZ(24,"div",12)(25,"div",13)(26,"label",14),e._uU(27,"Apellido Paterno"),e.qZA(),e.TgZ(28,"div")(29,"input",18,19),e.NdJ("ngModelChange",function(l){return o.usuario.apellidoPaterno=l}),e.qZA()(),e.YNc(31,ye,2,0,"div",17),e.qZA()(),e.TgZ(32,"div",12)(33,"div",13)(34,"label",14),e._uU(35,"Apellido Materno"),e.qZA(),e.TgZ(36,"div")(37,"input",20,21),e.NdJ("ngModelChange",function(l){return o.usuario.apellidoMaterno=l}),e.qZA()(),e.YNc(39,De,2,0,"div",17),e.qZA()()(),e.TgZ(40,"div",11)(41,"div")(42,"div",13)(43,"label",14),e._uU(44,"T\xedtulo"),e.qZA(),e.TgZ(45,"div")(46,"ng-select",22,23),e.NdJ("ngModelChange",function(l){return o.usuario.idTituloAcademico=l}),e.qZA()()()(),e.YNc(48,xe,8,6,"div",24),e.TgZ(49,"div",25)(50,"div",13)(51,"label",14),e._uU(52,"Tipo de Usuario"),e.qZA(),e.TgZ(53,"div")(54,"ng-select",26,27),e.NdJ("ngModelChange",function(l){return o.usuario.idTipoUsuario=l})("ngModelChange",function(l){return o.onTipoUsuarioChange(l)}),e.qZA()(),e.YNc(56,qe,2,0,"div",17),e.qZA()(),e.TgZ(57,"div",25)(58,"div",13)(59,"div",28)(60,"label",14),e._uU(61,"Estatus"),e.qZA(),e.TgZ(62,"label",29)(63,"input",30,31),e.NdJ("ngModelChange",function(l){return o.usuario.habilitado=l}),e.qZA(),e.TgZ(65,"div",32)(66,"span",33),e._uU(67,"Activo"),e.qZA(),e.TgZ(68,"span",34),e._uU(69,"Inactivo"),e.qZA()()()()()(),e.TgZ(70,"div",12)(71,"div",13)(72,"label",14),e._uU(73,"Rol"),e.qZA(),e.TgZ(74,"div")(75,"ng-select",35,36),e.NdJ("ngModelChange",function(l){return o.rolSeleccionados=l})("ngModelChange",function(l){return o.onRolChange(l)}),e.qZA(),e.YNc(77,Ge,2,0,"div",17),e.qZA()()(),e.TgZ(78,"div",12)(79,"div",13)(80,"label",14),e._uU(81,"Usuario del Sistema (username)"),e.qZA(),e.TgZ(82,"div")(83,"input",37,38),e.NdJ("ngModelChange",function(l){return o.usuario.correo=l})("ngModelChange",function(l){return o.correoChange(l)}),e.qZA()(),e.YNc(85,Ye,2,0,"div",17),e.qZA()(),e.YNc(86,We,13,7,"div",39),e.YNc(87,Xe,12,7,"div",39),e.TgZ(88,"div",12)(89,"div",13)(90,"label",14),e._uU(91,"\xc1rea"),e.qZA(),e.TgZ(92,"div")(93,"ng-select",40,41),e.NdJ("ngModelChange",function(l){return o.usuario.idArea=l}),e.qZA()()()(),e.TgZ(95,"div",12)(96,"div",13)(97,"label",14),e._uU(98,"RFC"),e.qZA(),e.TgZ(99,"div")(100,"input",42,43),e.NdJ("ngModelChange",function(l){return o.usuario.rfc=l})("ngModelChange",function(){e.CHM(n);const l=e.MAs(101);return e.KtG(o.onRfcChange(l))}),e.qZA()(),e.YNc(102,$e,2,0,"div",17),e.qZA()()(),e.TgZ(103,"div",44),e._uU(104," Datos de Contacto "),e.qZA(),e.TgZ(105,"div",11)(106,"div",12)(107,"div",13)(108,"label",14),e._uU(109,"Pa\xeds"),e.qZA(),e.TgZ(110,"div")(111,"ng-select",45,46),e.NdJ("ngModelChange",function(l){return o.usuario.idPais=l})("ngModelChange",function(){return o.onChangePais()}),e.qZA()()()(),e.TgZ(113,"div",12)(114,"div",13)(115,"label",14),e._uU(116,"Estado"),e.qZA(),e.TgZ(117,"div")(118,"ng-select",47,48),e.NdJ("ngModelChange",function(l){return o.usuario.idEstado=l})("ngModelChange",function(){return o.onChangeEstado()}),e.qZA()()()(),e.TgZ(120,"div",12)(121,"div",13)(122,"label",14),e._uU(123,"Municipio"),e.qZA(),e.TgZ(124,"div")(125,"ng-select",49,50),e.NdJ("ngModelChange",function(l){return o.usuario.idMunicipio=l}),e.qZA()()()(),e.TgZ(127,"div",12)(128,"div",13)(129,"label",14),e._uU(130,"Tel\xe9fono M\xf3vil"),e.qZA(),e.TgZ(131,"div")(132,"input",51,52),e.NdJ("ngModelChange",function(l){return o.usuario.telefonoMovil=l}),e.qZA()(),e.YNc(134,ei,2,0,"div",17),e.qZA()(),e.TgZ(135,"div",12)(136,"div",13)(137,"label",14),e._uU(138,"Correo Corporativo"),e.qZA(),e.TgZ(139,"div")(140,"input",53,54),e.NdJ("ngModelChange",function(l){return o.usuario.correoPersonal=l}),e.qZA()(),e.YNc(142,ii,2,0,"div",17),e.YNc(143,oi,2,0,"div",17),e.qZA()()(),e.TgZ(144,"div",44),e._uU(145," Imagen "),e.qZA(),e.TgZ(146,"div",11)(147,"div",55)(148,"div",56),e.YNc(149,ai,1,1,"img",57),e.qZA()()(),e.TgZ(150,"div",11)(151,"div",58)(152,"div",13)(153,"div")(154,"input",59,60),e.NdJ("ngModelChange",function(l){return o.imagenBase64=l})("change",function(l){return o.fileChange(l)}),e.qZA(),e.TgZ(156,"button",61),e._uU(157," Buscar "),e.qZA()()()()(),e.TgZ(158,"div",62)(159,"div",63)(160,"button",64),e.NdJ("click",function(){return o.cancelar()}),e._uU(161,"Cancelar"),e.qZA()(),e.TgZ(162,"div",63)(163,"button",65),e._uU(164,"Guardar"),e.qZA()()()()(),e.TgZ(165,"tab",66)(166,"div",67)(167,"div",11)(168,"div",12)(169,"div",13)(170,"label",14),e._uU(171,"Compa\xf1\xeda"),e.qZA(),e.TgZ(172,"div")(173,"ng-select",68,69),e.NdJ("ngModelChange",function(l){return o.usuarioLocacion.idCompania=l})("ngModelChange",function(l){return o.onCompaniaChange(l,!1)}),e.qZA()()()(),e.TgZ(175,"div",12)(176,"div",13)(177,"label",14),e._uU(178,"Locaci\xf3n"),e.qZA(),e.TgZ(179,"div")(180,"ng-select",70,71),e.NdJ("ngModelChange",function(l){return o.usuarioLocacion.idLocacion=l}),e.qZA()()()(),e.TgZ(182,"div",12)(183,"div",13)(184,"label",14),e._uU(185,"Perfil"),e.qZA(),e.TgZ(186,"div")(187,"ng-select",72,73),e.NdJ("ngModelChange",function(l){return o.usuarioLocacion.idPerfil=l}),e.qZA()()()()(),e.TgZ(189,"div",11)(190,"div",55)(191,"app-grid-general",74,75),e.NdJ("event",function(l){return o.onGridClick(l)}),e.qZA()()()(),e.TgZ(193,"div",62)(194,"div",63)(195,"button",64),e.NdJ("click",function(){return o.cancelar()}),e._uU(196,"Cancelar"),e.qZA()(),e.TgZ(197,"div",63)(198,"button",76),e.NdJ("click",function(){return o.guardarPermiso()}),e._uU(199,"Guardar"),e.qZA()()()()()()()()}if(2&a){const n=e.MAs(21),t=e.MAs(30),l=e.MAs(38),T=e.MAs(55),A=e.MAs(76),b=e.MAs(84),E=e.MAs(101),P=e.MAs(133),g=e.MAs(141);e.xp6(6),e.hij("Usuario - ",o.accion," "),e.xp6(14),e.Q6J("ngModel",o.usuario.nombre)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==n.errors?null:n.errors.required)&&n.touched),e.xp6(1),e.Q6J("ngIf",(null==n.errors?null:n.errors.formatoNombre)&&n.touched),e.xp6(6),e.Q6J("ngModel",o.usuario.apellidoPaterno),e.xp6(2),e.Q6J("ngIf",null==t.errors?null:t.errors.formatoNombre),e.xp6(6),e.Q6J("ngModel",o.usuario.apellidoMaterno),e.xp6(2),e.Q6J("ngIf",null==l.errors?null:l.errors.formatoNombre),e.xp6(2),e.ekj("col-md-4",o.usuario.idUsuario>0)("col-md-2",!(o.usuario.idUsuario>0)),e.xp6(5),e.Q6J("items",o.tituloList)("ngModel",o.usuario.idTituloAcademico)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions),e.xp6(2),e.Q6J("ngIf",!(o.usuario.idUsuario>0)),e.xp6(6),e.Q6J("items",o.tipoUsuarioList)("required",!0)("ngModel",o.usuario.idTipoUsuario)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions),e.xp6(2),e.Q6J("ngIf",(null==T.errors?null:T.errors.required)&&T.touched),e.xp6(7),e.Q6J("ngModel",o.usuario.habilitado),e.xp6(12),e.Q6J("items",o.rolList)("multiple",!0)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions)("ngModel",o.rolSeleccionados)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==A.errors?null:A.errors.required)&&A.touched),e.xp6(6),e.Q6J("ngModel",o.usuario.correo)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==b.errors?null:b.errors.required)&&b.touched),e.xp6(1),e.Q6J("ngIf",o.accesoContrasena),e.xp6(1),e.Q6J("ngIf",o.accesoContrasena),e.xp6(6),e.Q6J("items",o.areaList)("ngModel",o.usuario.idArea)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions),e.xp6(7),e.Q6J("ngModel",o.usuario.rfc),e.xp6(2),e.Q6J("ngIf",(null==E.errors?null:E.errors.formatoRfc)&&E.touched),e.xp6(9),e.Q6J("items",o.paisList)("ngModel",o.usuario.idPais)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions),e.xp6(7),e.Q6J("items",o.estadoList)("ngModel",o.usuario.idEstado)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions)("disabled",!o.usuario.idPais),e.xp6(7),e.Q6J("items",o.municipioList)("ngModel",o.usuario.idMunicipio)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions)("disabled",!o.usuario.idEstado),e.xp6(7),e.Q6J("ngModel",o.usuario.telefonoMovil),e.xp6(2),e.Q6J("ngIf",(null==P.errors?null:P.errors.formatoTelefono)&&P.touched),e.xp6(6),e.Q6J("ngModel",o.usuario.correoPersonal)("required",!0),e.xp6(2),e.Q6J("ngIf",null==g.errors?null:g.errors.formatoCorreo),e.xp6(1),e.Q6J("ngIf",(null==g.errors?null:g.errors.required)&&g.touched),e.xp6(6),e.Q6J("ngIf",void 0!==o.url),e.xp6(5),e.Q6J("ngModel",o.imagenBase64),e.xp6(9),e.Q6J("disabled",o.btnSubmit),e.xp6(2),e.Q6J("disabled",!(o.usuario.idUsuario>0)),e.xp6(8),e.Q6J("items",o.companiaList)("required",!o.esExterno)("ngModel",o.usuarioLocacion.idCompania)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions),e.xp6(7),e.Q6J("items",o.hospitalList)("required",!o.esExterno)("ngModel",o.usuarioLocacion.idLocacion)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions)("disabled",o.esExterno),e.xp6(7),e.Q6J("items",o.perfilList)("required",!o.esExterno)("ngModel",o.usuarioLocacion.idPerfil)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions),e.xp6(4),e.Q6J("headerName","Permisos")("data",o.permisosList)("children",o.columns)}},dependencies:[p._Y,p.Fj,p.Wl,p.JJ,p.JL,p.Q7,p.nD,p.On,p.F,pe.O5,Ee.$,_.w9,Pe.v,Ze.p,Le.E,Re.Z,Ne.q,v.wW,v.AH],styles:[".modal-content[_ngcontent-%COMP%]{border:none}.modal-header[_ngcontent-%COMP%]{background-color:#fff}.switch[_ngcontent-%COMP%]{top:4px;height:calc(1.5em + .75rem + 7px);width:100px}.slider[_ngcontent-%COMP%]{background-color:#fff;border:none}.slider[_ngcontent-%COMP%]:before{background-color:#ed7d31;bottom:7px}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#f7ccaf}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{background-color:#fff;transform:translate(70px)}.on[_ngcontent-%COMP%], .off[_ngcontent-%COMP%]{font-family:Roboto}.off[_ngcontent-%COMP%]{color:gray;padding-left:20px}input[disabled][_ngcontent-%COMP%] + .slider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}  .tabs>a{padding:0;background-color:#ed7d31!important}.verContra[_ngcontent-%COMP%]{position:absolute;display:block;cursor:pointer;top:50%;right:10px;transform:translateY(-50%)}.relativo[_ngcontent-%COMP%]{position:relative}"]})}var re=r(9116),ti=r(21006),ri=r(92140);const ni=["gridUsuario"],si=["gridFiltro"];function li(s,i){1&s&&(e.TgZ(0,"div",38),e._uU(1," El nombre es requerido "),e.qZA())}function ui(s,i){1&s&&e._UZ(0,"i",39)}function di(s,i){1&s&&e._UZ(0,"i",40)}function ci(s,i){if(1&s){const a=e.EpF();e.TgZ(0,"div",41),e.NdJ("click",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.agregar())}),e.TgZ(1,"button",42),e._uU(2,"Agregar Usuario"),e.qZA()()}}class Q{constructor(i,a,o,n,t,l,T,A,b,E,P){this.modalMensajeService=i,this.router=a,this.usuarioService=o,this.companiaService=n,this.perfilService=t,this.encryptionService=l,this.accesoService=T,this.modalService=A,this.bsModalRef=b,this.tipoUsuarioService=E,this.rolService=P,this.placeHolderSelect=u.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=u.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.isCollapsed=!0,this.HEADER_GRID="Usuario",this.MENSAJE_EXITO_ELIMINAR="Usuario eliminado exitosamente.",this.TITULO_MODAL_ELIMINAR="Eliminar Usuario",this.optionsFecha=u.g.CONFIG_DATEPICKER,this.tieneAccesoAgregar=!1,this.EDITAR_USUARIO=M.v.EDITAR_USUARIO,this.ELIMINAR_USUARIO=M.v.ELIMINAR_USUARIO,this.buscando=!1,this.filtro=new oe.b,this.MENSAJE_EXITO_BUSCAR="B\xfasqueda realizada correctamente",this.rolList=[],this.companiaList=[],this.esUsuarioCompaniaBase=!1,this.configTipoUsuario=Object.assign({labelField:"nombre",valueField:"idTipoUsuario",searchField:["nombre"]},u.g.CONFIG_DROPDOWN_DEFAULT),this.configPerfil=Object.assign({labelField:"nombre",valueField:"idPerfil",searchField:["nombre"]},u.g.CONFIG_DROPDOWN_DEFAULT),this.configRol=Object.assign({...u.g.CONFIG_DROPDOWN_DEFAULT},{labelField:"nombre",valueField:"idRol",searchField:["nombre"],dropdownParent:"body",maxItems:null,plugins:["dropdown_direction","remove_button"]}),this.configCompania=Object.assign({...u.g.CONFIG_DROPDOWN_DEFAULT},{labelField:"nombre",valueField:"idCompania",searchField:["nombre"],dropdownParent:"body",maxItems:null,plugins:["dropdown_direction","remove_button"]}),this.columnaEditar=Object.assign({action:u.g.GRID_ACCION_EDITAR,title:"Editar",acceso:this.EDITAR_USUARIO,cellRendererSelector:g=>({component:"actionButton",params:{disabled:!1}})},u.g.CONFIG_COLUMN_ACTION),this.columnaEliminar=Object.assign({action:u.g.GRID_ACCION_ELIMINAR,title:"Eliminar",acceso:this.ELIMINAR_USUARIO,cellRendererSelector:g=>({component:"actionButton",params:{disabled:!g.data.habilitado}})},u.g.CONFIG_COLUMN_ACTION),this.columns=[{headerName:"Nombre",field:"nombre",minWidth:150,width:200,valueGetter:g=>y.j8(g.data)},{headerName:"Tipo de Usuario",field:"nombreTipoUsuario",minWidth:100,width:110},{headerName:"Username",field:"correo",minWidth:70,width:100},{headerName:"Perfil",field:"nombrePerfil",minWidth:80,width:100},{headerName:"Rol",field:"roles",minWidth:80,width:100},{headerName:"Tel\xe9fono M\xf3vil",field:"telefonoMovil",minWidth:100,width:110},{headerName:"Estatus",field:"habilitado",minWidth:70,width:100,valueGetter:g=>g.data.habilitado?"Activo":"Inactivo"},{headerName:"Compa\xf1\xeda",field:"nombreCompania",minWidth:80,width:100,hide:!0},this.columnaEditar,this.columnaEliminar],this.configModal={animated:!0,keyboard:!1,backdrop:"static",ignoreBackdropClick:!0,size:"sm",class:"modal-md modal-size-md modal-position-center"},this.gridConfig={disableDelete:!1,disableEdit:!1,headerName:"Usuarios",children:this.columns,accesoEditar:this.EDITAR_USUARIO,accesoEliminar:this.ELIMINAR_USUARIO},this.gridTabs=[]}ngOnInit(){this.accesoService.tieneAcceso(M.v.AGREGAR_USUARIO).subscribe(i=>{this.tieneAccesoAgregar=i}),this.consultarGrid(),this.consultarCompanias(),this.consultarTiposDeUsuario(),this.consultarPerfiles(),this.consultarRoles()}consultarEsUsuarioCompaniaBase(){this.companiaService.consultarClaveCompaniaUsuarioSesion().subscribe(i=>{this.esUsuarioCompaniaBase=i===u.g.CLAVE_COMPANIA_BASE;const a=this.companiaList.find(o=>o.clave==i)?.idCompania;this.filtro.idCompania=Number(a),this.filtro.idsCompania.push(Number(a)),this.gridFiltro.modificarVisibilidadColumna("nombreCompania",this.esUsuarioCompaniaBase)})}consultarGrid(){this.usuarioService.consultarGeneral().subscribe(i=>{this.usuarioList=i})}onGridClick(i){i.accion===u.g.GRID_ACCION_EDITAR?this.editar(i.data.idUsuario):i.accion===u.g.GRID_ACCION_ELIMINAR&&this.eliminar(i.data)}editar(i){this.usuarioService.consultar(i).subscribe(a=>{const o={accion:u.g.COMPONENT_ACCION_EDITAR,usuario:a};this.bsModalRef=this.modalService.show(U,{initialState:o,...u.g.CONFIG_MODAL_LARGE}),this.bsModalRef.content.onClose=n=>{n&&this.consultarGrid(),this.bsModalRef.hide()}})}eliminar(i){this.modalMensajeService.modalConfirmacion("\xbfDesea eliminar el usuario <strong>"+i.nombreCompleto+"</strong>?",this.TITULO_MODAL_ELIMINAR,u.g.ICONO_CRUZ).then(a=>{this.usuarioService.eliminar(i.idUsuario).subscribe(o=>{this.modalMensajeService.modalExito(this.MENSAJE_EXITO_ELIMINAR),this.consultarGrid()})})}agregar(){this.bsModalRef=this.modalService.show(U,u.g.CONFIG_MODAL_LARGE),this.bsModalRef.content.accion=u.g.MODAL_ACCION_AGREGAR,this.bsModalRef.content.onClose=i=>{i&&this.consultarGrid(),this.bsModalRef.hide()}}buscar(){this.buscando=!0,Boolean(this.filtro.idTipoUsuario)||(this.filtro.idTipoUsuario=0),this.usuarioService.consultarBusquedaGridFiltro(this.filtro).subscribe(i=>{this.buscando=!1,this.usuarioList=i,this.modalMensajeService.modalExito(this.MENSAJE_EXITO_BUSCAR)})}limpiar(){this.filtro=new oe.b,this.consultarGrid()}consultarPerfiles(){this.perfilService.consultarPorCompania().subscribe(i=>{this.perfilList=i})}consultarRoles(){this.rolService.consultarTodosParaSelector().subscribe(i=>{this.generarGridTabs(i),this.rolList=i})}consultarTiposDeUsuario(){this.tipoUsuarioService.consultarTiposUsuarioSelector().subscribe(i=>{this.tipoUsuarioList=i})}consultarCompanias(){var i=this;return(0,f.Z)(function*(){i.companiaService.consultarTodosParaSelector().subscribe(a=>{i.companiaList=a,i.consultarEsUsuarioCompaniaBase()})})()}generarGridTabs(i){const a=[];i.filter(o=>o.filtrado).forEach(o=>{if([u.g.CLAVE_USUARIO_EVALUADOR,u.g.CLAVE_USUARIO_CONTRATISTA,u.g.CLAVE_USUARIO_CONTACTO].includes(o.clave)){const n={title:o.nombre,filter:{field:"roles",criteria:t=>t.split(", ").includes(o.nombre)}};a.push(n)}}),this.gridTabs=a}static#e=this.\u0275fac=function(a){return new(a||Q)(e.Y36(he.V),e.Y36(re.F0),e.Y36(G.i),e.Y36(m.c),e.Y36(C.F),e.Y36(ti.C),e.Y36($.Q),e.Y36(h.tT),e.Y36(h.UZ),e.Y36(q.V),e.Y36(x.m))};static#i=this.\u0275cmp=e.Xpm({type:Q,selectors:[["app-usuario"]],viewQuery:function(a,o){if(1&a&&(e.Gf(ni,5),e.Gf(si,5)),2&a){let n;e.iGM(n=e.CRH())&&(o.gridUsuario=n.first),e.iGM(n=e.CRH())&&(o.gridFiltro=n.first)}},decls:80,vars:39,consts:[[1,"contenedor"],[1,"cuerpo-contenedor"],[3,"collapse","isAnimated"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"label-input","required-label"],["name","nombre","type","text","maxlength","50",1,"form-control",3,"ngModel","required","ngModelChange"],["nombreFiltro","ngModel"],["class","error",4,"ngIf"],["name","tipoUsuarioName","bindLabel","nombre","bindValue","idTipoUsuario",3,"items","required","ngModel","placeholder","notFoundText","ngModelChange"],["tipoUsuario","ngModel"],["name","correo","type","text","maxlength","100",1,"form-control",3,"ngModel","required","ngModelChange"],["correo","ngModel"],["name","companiaName","bindLabel","nombre","bindValue","idCompania",3,"required","disabled","items","ngModel","placeholder","notFoundText","ngModelChange"],["rolLst","ngModel"],["name","perfilName","bindLabel","nombre","bindValue","idPerfil",3,"required","items","ngModel","placeholder","notFoundText","ngModelChange"],["perfilLst","ngModel"],["name","rolName","bindLabel","nombre","bindValue","idRol",3,"required","multiple","items","ngModel","placeholder","notFoundText","ngModelChange"],["name","telefonoM","type","text","maxlength","10",1,"form-control",3,"ngModel","required","ngModelChange"],["telefonoM","ngModel"],[1,"subtitulo-contenedor"],[1,"col-md-12","d-flex","justify-content-center"],[1,"form-group",2,"max-width","100%"],[1,"label-input","required-label",2,"visibility","hidden"],["type","button",1,"btn-secundario","limpiar","mr-3",3,"click"],["type","button",1,"btn-primario","ml-3",3,"disabled","click"],[1,"form-row","panel-busqueda","mb-4"],[1,"panel-carga-elementos","center-element-vertically",3,"click"],[1,"titulo-panel"],[1,"arow-down-up"],["class","fa fa-chevron-down",4,"ngIf"],["class","fa fa-chevron-up",4,"ngIf"],[1,"titulo-contenedor"],[1,"col-md-12"],["class","contenedor-agregar mb-4",3,"click",4,"ngIf"],[3,"gridConfig","gridTabs","gridData","gridClick"],["gridFiltro",""],[1,"error"],[1,"fa","fa-chevron-down"],[1,"fa","fa-chevron-up"],[1,"contenedor-agregar","mb-4",3,"click"],[1,"btn-agregar"]],template:function(a,o){if(1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"div")(9,"input",7,8),e.NdJ("ngModelChange",function(t){return o.filtro.nombre=t}),e.qZA()(),e.YNc(11,li,2,0,"div",9),e.qZA()(),e.TgZ(12,"div",4)(13,"div",5)(14,"label",6),e._uU(15,"Tipo de Usuario"),e.qZA(),e.TgZ(16,"div")(17,"ng-select",10,11),e.NdJ("ngModelChange",function(t){return o.filtro.idTipoUsuario=t}),e.qZA()()()(),e.TgZ(19,"div",4)(20,"div",5)(21,"label",6),e._uU(22,"Username"),e.qZA(),e.TgZ(23,"div")(24,"input",12,13),e.NdJ("ngModelChange",function(t){return o.filtro.correo=t}),e.qZA()()()()(),e.TgZ(26,"div",3)(27,"div",4)(28,"div",5)(29,"label",6),e._uU(30,"Compa\xf1\xeda"),e.qZA(),e.TgZ(31,"div")(32,"ng-select",14,15),e.NdJ("ngModelChange",function(t){return o.filtro.idCompania=t}),e.qZA()()()(),e.TgZ(34,"div",4)(35,"div",5)(36,"label",6),e._uU(37,"Perfil"),e.qZA(),e.TgZ(38,"div")(39,"ng-select",16,17),e.NdJ("ngModelChange",function(t){return o.filtro.idPerfil=t}),e.qZA()()()(),e.TgZ(41,"div",4)(42,"div",5)(43,"label",6),e._uU(44,"Rol"),e.qZA(),e.TgZ(45,"div")(46,"ng-select",18,15),e.NdJ("ngModelChange",function(t){return o.filtro.idsRol=t}),e.qZA()()()()(),e.TgZ(48,"div",3)(49,"div",4)(50,"div",5)(51,"label",6),e._uU(52,"Tel\xe9fono"),e.qZA(),e.TgZ(53,"div")(54,"input",19,20),e.NdJ("ngModelChange",function(t){return o.filtro.telefonoMovil=t}),e.qZA()()()()(),e.TgZ(56,"div",21)(57,"div",3)(58,"div",22)(59,"div",23)(60,"label",24),e._uU(61,"Buscar"),e.qZA(),e.TgZ(62,"button",25),e.NdJ("click",function(){return o.limpiar()}),e._uU(63," Limpiar "),e.qZA(),e.TgZ(64,"button",26),e.NdJ("click",function(){return o.buscar()}),e._uU(65),e.qZA()()()()()(),e.TgZ(66,"div",27)(67,"div",28),e.NdJ("click",function(){return o.isCollapsed=!o.isCollapsed}),e.TgZ(68,"span",29),e._uU(69,"Panel de B\xfasqueda"),e.qZA(),e.TgZ(70,"span",30),e.YNc(71,ui,1,0,"i",31),e.YNc(72,di,1,0,"i",32),e.qZA()()(),e.TgZ(73,"div",3)(74,"div",33),e._uU(75,"Usuarios"),e.qZA(),e.TgZ(76,"div",34),e.YNc(77,ci,3,0,"div",35),e.TgZ(78,"app-grid-filtro",36,37),e.NdJ("gridClick",function(t){return o.onGridClick(t)}),e.qZA()()()()()),2&a){const n=e.MAs(10);e.xp6(2),e.Q6J("collapse",o.isCollapsed)("isAnimated",!0),e.xp6(7),e.Q6J("ngModel",o.filtro.nombre)("required",!1),e.xp6(2),e.Q6J("ngIf",(null==n.errors?null:n.errors.required)&&n.touched),e.xp6(6),e.Q6J("items",o.tipoUsuarioList)("required",!1)("ngModel",o.filtro.idTipoUsuario)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions),e.xp6(7),e.Q6J("ngModel",o.filtro.correo)("required",!1),e.xp6(8),e.Q6J("required",!1)("disabled",!o.esUsuarioCompaniaBase)("items",o.companiaList)("ngModel",o.filtro.idCompania)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions),e.xp6(7),e.Q6J("required",!1)("items",o.perfilList)("ngModel",o.filtro.idPerfil)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions),e.xp6(7),e.Q6J("required",!1)("multiple",!0)("items",o.rolList)("ngModel",o.filtro.idsRol)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions),e.xp6(8),e.Q6J("ngModel",o.filtro.telefonoMovil)("required",!1),e.xp6(10),e.Q6J("disabled",o.buscando),e.xp6(1),e.hij(" ",o.buscando?"Buscando...":"Buscar"," "),e.xp6(6),e.Q6J("ngIf",o.isCollapsed),e.xp6(1),e.Q6J("ngIf",!o.isCollapsed),e.xp6(5),e.Q6J("ngIf",o.tieneAccesoAgregar),e.xp6(1),e.Q6J("gridConfig",o.gridConfig)("gridTabs",o.gridTabs)("gridData",o.usuarioList)}},dependencies:[p.Fj,p.JJ,p.Q7,p.nD,p.On,pe.O5,_.w9,c.Y,ri.x],styles:[".panel-carga-elementos[_ngcontent-%COMP%]{background-color:#fbe5d6}.panel-carga-elementos[_ngcontent-%COMP%]   .titulo-panel[_ngcontent-%COMP%]{color:#ed7d31}[_nghost-%COMP%]     .mat-mdc-tab{background-color:#fff!important}"]})}var ne=r(13050);const mi=[{path:"",redirectTo:"consultar",pathMatch:"full"},{path:"",data:{title:"Usuarios"},children:[{path:"",component:Q,canActivate:[ne.m],data:{title:"Consulta",acceso:M.v.CONSULTAR_USUARIO}},{path:"agregar",component:U,canActivate:[ne.m],data:{title:"Alta",acceso:M.v.AGREGAR_USUARIO}},{path:"editar",component:U,canActivate:[ne.m],data:{title:"Modificar",acceso:M.v.EDITAR_USUARIO}}]}];class B{static#e=this.\u0275fac=function(a){return new(a||B)};static#i=this.\u0275mod=e.oAB({type:B});static#o=this.\u0275inj=e.cJS({imports:[re.Bz.forChild(mi),re.Bz]})}class H{static#e=this.\u0275fac=function(a){return new(a||H)};static#i=this.\u0275mod=e.oAB({type:H});static#o=this.\u0275inj=e.cJS({providers:[G.i,m.c,j.a,C.F,z.y,O.$,d.s,L.G,w.b,V.T,x.m,ie.U,K.n,q.V,ee.I,J.y,I.F,J.y,k.f,W.l],imports:[ue.m,B,R.Z,ce.kn,c.f,v.P4,h.zk.forChild(),_.A0,Y,F.Z]})}},8816:(le,Z,r)=>{r.d(Z,{Y:()=>C,f:()=>_});var m=r(37340),d=r(94650);const L="400ms cubic-bezier(0.4,0.0,0.2,1)",O=[(0,m.oB)({height:0,visibility:"hidden"}),(0,m.jt)(L,(0,m.oB)({height:"*",visibility:"visible"}))],I=[(0,m.oB)({height:"*",visibility:"visible"}),(0,m.jt)(L,(0,m.oB)({height:0,visibility:"hidden"}))];class C{constructor(c,h,v){this._el=c,this._renderer=h,this.collapsed=new d.vpe,this.collapses=new d.vpe,this.expanded=new d.vpe,this.expands=new d.vpe,this.isExpanded=!0,this.collapseNewValue=!0,this.isCollapsed=!1,this.isCollapse=!0,this.isCollapsing=!1,this.isAnimated=!1,this._display="block",this._stylesLoaded=!1,this._COLLAPSE_ACTION_NAME="collapse",this._EXPAND_ACTION_NAME="expand",this._factoryCollapseAnimation=v.build(I),this._factoryExpandAnimation=v.build(O)}set display(c){this._display=c,"none"!==c?this.isAnimated?this.toggle():this.show():this.hide()}set collapse(c){this.collapseNewValue=c,(!this._player||this._isAnimationDone)&&(this.isExpanded=c,this.toggle())}get collapse(){return this.isExpanded}ngAfterViewChecked(){this._stylesLoaded=!0,this._player&&this._isAnimationDone&&(this._player.reset(),this._renderer.setStyle(this._el.nativeElement,"height","*"))}toggle(){this.isExpanded?this.hide():this.show()}hide(){this.isCollapsing=!0,this.isExpanded=!1,this.isCollapsed=!0,this.isCollapsing=!1,this.collapses.emit(this),this._isAnimationDone=!1,this.animationRun(this.isAnimated,this._COLLAPSE_ACTION_NAME)(()=>{this._isAnimationDone=!0,this.collapseNewValue!==this.isCollapsed&&this.isAnimated?this.show():(this.collapsed.emit(this),this._renderer.setStyle(this._el.nativeElement,"display","none"))})}show(){this._renderer.setStyle(this._el.nativeElement,"display",this._display),this.isCollapsing=!0,this.isExpanded=!0,this.isCollapsed=!1,this.isCollapsing=!1,this.expands.emit(this),this._isAnimationDone=!1,this.animationRun(this.isAnimated,this._EXPAND_ACTION_NAME)(()=>{this._isAnimationDone=!0,this.collapseNewValue!==this.isCollapsed&&this.isAnimated?this.hide():(this.expanded.emit(this),this._renderer.removeStyle(this._el.nativeElement,"overflow"))})}animationRun(c,h){if(!c||!this._stylesLoaded)return R=>R();this._renderer.setStyle(this._el.nativeElement,"overflow","hidden"),this._renderer.addClass(this._el.nativeElement,"collapse");const v=h===this._EXPAND_ACTION_NAME?this._factoryExpandAnimation:this._factoryCollapseAnimation;return this._player&&this._player.reset(),this._player=v.create(this._el.nativeElement),this._player.play(),R=>this._player?.onDone(R)}}C.\u0275fac=function(c){return new(c||C)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(m._j))},C.\u0275dir=d.lG2({type:C,selectors:[["","collapse",""]],hostVars:9,hostBindings:function(c,h){2&c&&(d.uIk("aria-hidden",h.isCollapsed),d.ekj("collapse",h.isCollapse)("in",h.isExpanded)("show",h.isExpanded)("collapsing",h.isCollapsing))},inputs:{display:"display",isAnimated:"isAnimated",collapse:"collapse"},outputs:{collapsed:"collapsed",collapses:"collapses",expanded:"expanded",expands:"expands"},exportAs:["bs-collapse"]});class _{static forRoot(){return{ngModule:_,providers:[]}}}_.\u0275fac=function(c){return new(c||_)},_.\u0275mod=d.oAB({type:_}),_.\u0275inj=d.cJS({})}}]);