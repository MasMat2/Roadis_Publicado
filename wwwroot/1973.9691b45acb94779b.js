"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[1973],{4837:(P,T,s)=>{s.d(T,{x:()=>u});var n=s(94650),g=s(19904),c=s(93416),M=s(44826),l=s(50986),h=s(20388),f=s(24006);const C=["inputArchivo"];class u{constructor(b,p){this.modalService=b,this.bsModalRef=p,this.label="Etiqueta",this.habilitado=!1,this.contieneAyuda=!0,this.archivoDto=new n.vpe,this.idArchivoDescarga=new n.vpe,this.idArchivoAyuda=new n.vpe}ngOnInit(){0==this.nombreArchivo.length&&(this.nombreArchivo="Archivo - Fecha - Hora")}previsualizar(){this.tipoMime.startsWith("image/")?this.previsualizarImagen():(this.bsModalRef=this.modalService.show(M.O,l.g.CONFIG_MODAL_DEFAULT),this.bsModalRef.content.archivo=this.archivo,this.bsModalRef.content.nombre=this.nombreArchivo,this.bsModalRef.content.archivoNombre=this.nombreArchivo,this.bsModalRef.content.onClose=b=>{this.bsModalRef.hide()})}previsualizarImagen(){const b={initialState:{archivo:this.archivo,nombreImagen:this.nombreArchivo,archivoTipoMime:this.tipoMime,onCloseCallback:p=>{this.bsModalRef.hide()}},...l.g.CONFIG_MODAL_DEFAULT};this.bsModalRef=this.modalService.show(c.U,b)}previsualizarAyuda(){this.idArchivoAyuda.emit(this.idRegistroArchivoAyuda)}fileChange(b){if(b.target.files&&b.target.files[0]){this.inputArchivo.control.markAsTouched();const p=new FileReader,m=b.target.files[0];p.readAsDataURL(m),p.onload=()=>{this.archivo=p.result.toString().split(",")[1],this.tipoMime=m.type,this.nombreArchivo=m.name;let _=new g.q;_.idArchivo=this.idRegistroArchivo,_.archivo=this.archivo,_.nombreArchivo=this.nombreArchivo,_.tipoMime=this.tipoMime,this.archivoDto.emit(_)}}}getElement(){document.getElementById(this.id).click()}descargarArchivo(){this.downl_endpoint(this.idRegistroArchivo).subscribe(p=>{if("vacio"!=p.tipoMime){let _,Z=((p,m="",_=512)=>{const Z=atob(p),G=[];for(let j=0;j<Z.length;j+=_){const O=Z.slice(j,j+_),F=new Array(O.length);for(let I=0;I<O.length;I++)F[I]=O.charCodeAt(I);const E=new Uint8Array(F);G.push(E)}return new Blob(G,{type:m})})(p.archivo,p.tipoMime);_=URL.createObjectURL(Z);var m=document.createElement("a");m.href=_,m.download=p.nombreArchivo,m.click()}})}static#e=this.\u0275fac=function(p){return new(p||u)(n.Y36(h.tT),n.Y36(h.UZ))};static#i=this.\u0275cmp=n.Xpm({type:u,selectors:[["app-input-archivo"]],viewQuery:function(p,m){if(1&p&&n.Gf(C,5),2&p){let _;n.iGM(_=n.CRH())&&(m.inputArchivo=_.first)}},inputs:{label:"label",nombreArchivo:"nombreArchivo",archivo:"archivo",tipoMime:"tipoMime",fechaEvidencia:"fechaEvidencia",categoria:"categoria",habilitado:"habilitado",contieneAyuda:"contieneAyuda",id:"id",indice1:"indice1",indice2:"indice2",idRegistroArchivo:"idRegistroArchivo",idRegistroArchivoAyuda:"idRegistroArchivoAyuda",downl_endpoint:"downl_endpoint"},outputs:{archivoDto:"archivoDto",idArchivoDescarga:"idArchivoDescarga",idArchivoAyuda:"idArchivoAyuda"},decls:16,vars:8,consts:[[1,"form-group",2,"margin-top","40px"],[1,"label-input","required-label",2,"margin-left","30px","margin-top","-5px","font-size","12px"],[1,"d-flex","justify-content-around"],["type","button",1,"btn-subir",3,"disabled","click"],["src","assets/img/svg/ico-15x15-Boton-Circular-Naranja-Subir_Archivo-Cargar.svg",1,"icono"],["ngModel","","type","file","autocomplete","off",1,"col-md-7",3,"id","name","hidden","change"],["inputArchivo","ngModel"],["name","nombre","type","text","maxlength","100","readonly","","disabled","",1,"form-control",2,"height","calc(1.5em + 0.75rem + 7px)  !important",3,"ngModel","ngModelChange"],["nombre","ngModel"],["src","assets/img/svg/ico-15x15-Boton-Circular-Naranja-Ver_Archivo.svg",1,"icono"],["type","button",1,"btn-subir",3,"click"],["src","assets/img/svg/ico-15x15-Boton-Circular-Naranja-Descargar.svg",1,"icono"],["type","button",1,"btn-subir","btn-ayuda",3,"disabled","click"],["src","assets/img/svg/ico-15x15-Boton-Circular-Amarillo-Ayuda.svg",1,"icono"]],template:function(p,m){1&p&&(n.TgZ(0,"div",0)(1,"label",1),n._uU(2),n.qZA(),n.TgZ(3,"div",2)(4,"button",3),n.NdJ("click",function(){return m.getElement()}),n._UZ(5,"img",4),n.qZA(),n.TgZ(6,"input",5,6),n.NdJ("change",function(Z){return m.fileChange(Z)}),n.qZA(),n.TgZ(8,"input",7,8),n.NdJ("ngModelChange",function(Z){return m.nombreArchivo=Z}),n.qZA(),n.TgZ(10,"button",3),n.NdJ("click",function(){return m.previsualizar()}),n._UZ(11,"img",9),n.qZA(),n.TgZ(12,"button",10),n.NdJ("click",function(){return m.descargarArchivo()}),n._UZ(13,"img",11),n.qZA(),n.TgZ(14,"button",12),n.NdJ("click",function(){return m.previsualizarAyuda()}),n._UZ(15,"img",13),n.qZA()()()),2&p&&(n.xp6(2),n.Oqu(m.label),n.xp6(2),n.Q6J("disabled",m.habilitado),n.xp6(2),n.Q6J("id",m.id)("name",m.label)("hidden",!0),n.xp6(2),n.Q6J("ngModel",m.nombreArchivo),n.xp6(2),n.Q6J("disabled",m.habilitado),n.xp6(4),n.Q6J("disabled",!m.contieneAyuda))},dependencies:[f.Fj,f.JJ,f.nD,f.On],styles:["[_ngcontent-%COMP%]:root{--color-primario: #3f75d2;--color-primario-hover: #F9EFFB;--color-menu: #3f75d2}.btn-subir[_ngcontent-%COMP%]{font-size:small;color:#fbe5d6;padding:0;margin:1px 5px;height:calc(1.3em + .7rem + 6px);background-color:transparent;transition:.2s;border:none;color:#fff;font-size:14px;text-align:center;border-radius:20px;text-wrap:true;max-width:100%;max-height:100%;align-content:center}.form-control[_ngcontent-%COMP%]{color:gray}.icono[_ngcontent-%COMP%]{height:80%;background-color:transparent;border-radius:50%}.icono[_ngcontent-%COMP%]:hover{background-color:#f3f3f3}.btn-ayuda[_ngcontent-%COMP%]:disabled{opacity:0}"]})}},44826:(P,T,s)=>{s.d(T,{O:()=>c});var n=s(94650),g=s(3930);class c{constructor(){this.height="80vh"}ngOnInit(){}cancelar(){this.onClose(!0)}static#e=this.\u0275fac=function(h){return new(h||c)};static#i=this.\u0275cmp=n.Xpm({type:c,selectors:[["app-pdf-visor"]],inputs:{archivo:"archivo",nombre:"nombre",archivoNombre:"archivoNombre",height:"height"},decls:7,vars:6,consts:[[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],[1,"far","fa-times-circle"],[3,"base64Src","filenameForDownload","useBrowserLocale","zoom","height"]],template:function(h,f){1&h&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div"),n._uU(3),n.qZA(),n.TgZ(4,"button",2),n.NdJ("click",function(){return f.cancelar()}),n._UZ(5,"i",3),n.qZA()(),n._UZ(6,"ngx-extended-pdf-viewer",4),n.qZA()),2&h&&(n.xp6(3),n.hij("",f.nombre," "),n.xp6(3),n.Q6J("base64Src",f.archivo)("filenameForDownload",f.archivoNombre)("useBrowserLocale",!0)("zoom","page-actual")("height",f.height))},dependencies:[g.S3]})}},19904:(P,T,s)=>{s.d(T,{q:()=>n});class n{}},33369:(P,T,s)=>{s.d(T,{R:()=>c});var n=s(94650),g=s(80529);class c{constructor(l){this.http=l,this.dataUrl="codigoPostal/"}consultar(l){return this.http.get(this.dataUrl+`consultar/${l}`)}consultarTodosParaGrid(){return this.http.get(this.dataUrl+"consultarTodosParaGrid")}consultarTodosParaSelector(){return this.http.get(this.dataUrl+"consultarTodosParaSelector")}consultarPorCodigoPostal(l){return this.http.get(this.dataUrl+`consultarPorCodigoPostal/${l}`)}consultarPorMunicipio(l){return this.http.get(this.dataUrl+`consultarPorMunicipio/${l}`)}consultarPorPaisBusqueda(l,h){return this.http.get(this.dataUrl+`consultarPorPaisBusqueda/${l}/${h}`)}agregar(l){return this.http.post(this.dataUrl+"agregar",l)}editar(l){return this.http.put(this.dataUrl+"editar",l)}eliminar(l){return this.http.delete(this.dataUrl+`eliminar/${l}`)}static#e=this.\u0275fac=function(h){return new(h||c)(n.LFG(g.eN))};static#i=this.\u0275prov=n.Yz7({token:c,factory:c.\u0275fac})}},83083:(P,T,s)=>{s.d(T,{c:()=>c});var n=s(94650),g=s(80529);class c{constructor(l){this.http=l,this.dataUrl="compania/"}consultar(l){return this.http.get(this.dataUrl+`consultar/${l}`)}consultarGeneral(){return this.http.get(this.dataUrl+"consultarGeneral")}consultarTodosParaSelector(){return this.http.get(this.dataUrl+"consultarTodosParaSelector")}consultarPorUsuarioPermiso(){return this.http.get(this.dataUrl+"consultarPorUsuarioPermiso")}consultarTodosParaGrid(l){return this.http.post(this.dataUrl+"consultarTodosParaGrid",l)}agregar(l){return this.http.post(this.dataUrl+"agregar",l)}editar(l){return this.http.put(this.dataUrl+"editar",l)}eliminar(l){return this.http.delete(this.dataUrl+`eliminar/${l}`)}consultarPorUsuario(){return this.http.get(this.dataUrl+"consultarPorUsuario")}consultarClaveCompaniaUsuarioSesion(){return this.http.get(this.dataUrl+"consultarClaveCompaniaUsuarioSesion/",{responseType:"text"})}static#e=this.\u0275fac=function(h){return new(h||c)(n.LFG(g.eN))};static#i=this.\u0275prov=n.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}},36441:(P,T,s)=>{s.d(T,{s:()=>c});var n=s(94650),g=s(80529);class c{constructor(l){this.http=l,this.dataUrl="estado/"}consultar(l){return this.http.get(this.dataUrl+`${l}`)}consultarParaFormulario(l){return this.http.get(this.dataUrl+`formulario/${l}`)}consultarParaGrid(){return this.http.get(this.dataUrl+"grid")}consultarPorPaisParaSelector(l){return this.http.get(this.dataUrl+`selector/pais/${l}`)}agregar(l){return this.http.post(this.dataUrl,l)}editar(l){return this.http.put(this.dataUrl,l)}eliminar(l){return this.http.delete(this.dataUrl+`${l}`)}static#e=this.\u0275fac=function(h){return new(h||c)(n.LFG(g.eN))};static#i=this.\u0275prov=n.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}},51757:(P,T,s)=>{s.d(T,{G:()=>c});var n=s(94650),g=s(80529);class c{constructor(l){this.http=l,this.dataUrl="municipio/"}consultarParaFormulario(l){return this.http.get(this.dataUrl+`formulario/${l}`)}consultarParaGrid(){return this.http.get(this.dataUrl+"grid")}consultarParaSelector(){return this.http.get(this.dataUrl+"selector")}consultarPorEstadoParaSelector(l){return this.http.get(this.dataUrl+`selector/estado/${l}`)}agregar(l){return this.http.post(this.dataUrl,l)}editar(l){return this.http.put(this.dataUrl,l)}eliminar(l){return this.http.delete(this.dataUrl+`${l}`)}static#e=this.\u0275fac=function(h){return new(h||c)(n.LFG(g.eN))};static#i=this.\u0275prov=n.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}},46101:(P,T,s)=>{s.d(T,{$:()=>c});var n=s(94650),g=s(80529);class c{constructor(l){this.http=l,this.dataUrl="pais/"}consultarTodosParaSelector(){return this.http.get(this.dataUrl+"consultarTodosParaSelector")}consultar(l){return this.http.get(this.dataUrl+`consultar/${l}`)}consultarPorClave(l){return this.http.get(this.dataUrl+`consultarPorClave/${l}`)}consultarGeneral(){return this.http.get(this.dataUrl+"consultarGeneral")}agregar(l){return this.http.post(this.dataUrl+"agregar",l)}editar(l){return this.http.put(this.dataUrl+"editar",l)}eliminar(l){return this.http.delete(this.dataUrl+`eliminar/${l}`)}static#e=this.\u0275fac=function(h){return new(h||c)(n.LFG(g.eN))};static#i=this.\u0275prov=n.Yz7({token:c,factory:c.\u0275fac})}},12846:(P,T,s)=>{s.d(T,{Y:()=>M});var n=s(50986),g=s(94650),c=s(2060);class M{constructor(h){this.modalMensajeService=h}validarCamposRequeridos(h){Object.keys(h.controls).forEach(f=>{const C=h.controls[f];C.markAsTouched({onlySelf:!0}),C.markAsDirty({onlySelf:!0})})}validarCamposRequeridosConMensaje(h){Object.keys(h.controls).forEach(f=>{const C=h.controls[f];C.markAsTouched({onlySelf:!0}),C.markAsDirty({onlySelf:!0})}),Object.keys(h.controls).some(f=>{const C=h.controls[f];return!!(C.errors&&C.errors.required&&C.invalid)&&(this.modalMensajeService.modalError(n.g.MENSAJE_REQUERIDOS),!0)})}markAsUntouched(h){Object.keys(h.controls).forEach(f=>{h.controls[f].markAsUntouched({onlySelf:!0})})}static#e=this.\u0275fac=function(f){return new(f||M)(g.LFG(c.V))};static#i=this.\u0275prov=g.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"})}},25497:(P,T,s)=>{s.r(T),s.d(T,{AnalisisRiesgoTrabajoModule:()=>ae});var n=s(36895),g=s(9116),c=s(27974),M=s(77579),l=s(18505),h=s(15861),f=s(70615),C=s(40675),u=s(50986),e=s(94650),b=s(80529);class p{constructor(i){this.http=i,this.dataUrl="analisisRiesgoTrabajo/"}consultar(i){return this.http.get(this.dataUrl+`${i}`)}consultarParaGrid(i){return this.http.post(this.dataUrl+"grid",i)}agregar(i){return this.http.post(this.dataUrl+"agregar",i)}editar(i){return this.http.put(this.dataUrl+"editar",i)}eliminar(i){return this.http.delete(this.dataUrl+`${i}`)}static#e=this.\u0275fac=function(t){return new(t||p)(e.LFG(b.eN))};static#i=this.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}var m=s(2060),_=s(20388);const Z=["informacionGeneral"],G=["tabset"];function de(d,i){if(1&d&&(e.TgZ(0,"tabset",3,4)(2,"tab",5),e._UZ(3,"app-analisis-riesgo-trabajo-informacion-general",6,7),e.qZA(),e.TgZ(5,"tab",8),e._UZ(6,"app-analisis-riesgo-tareas",9),e.qZA(),e.TgZ(7,"tab",10),e._UZ(8,"app-personal-involucrado",11,12),e.qZA(),e.TgZ(10,"tab",13),e._UZ(11,"app-analisis-riesgo-equipo",14),e.qZA(),e.TgZ(12,"tab",15),e._UZ(13,"app-analisis-riesgo-vehiculos",16),e.qZA()()),2&d){const t=e.oxw();e.xp6(3),e.Q6J("entidad",t.entidad),e.xp6(3),e.Q6J("idAnalisisRiesgoTrabajo",t.idEntidad),e.xp6(2),e.Q6J("idAnalisisRiesgoTrabajo",t.idEntidad),e.xp6(3),e.Q6J("idAnalisisRiesgoTrabajo",t.idEntidad),e.xp6(2),e.Q6J("idAnalisisRiesgoTrabajo",t.idEntidad)}}function j(d,i){if(1&d){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancelar(!0))}),e._uU(1," Cancelar "),e.qZA(),e.TgZ(2,"button",18),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit())}),e._uU(3," Guardar "),e.qZA()}if(2&d){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.submiting)}}class O extends f.P{constructor(i,t,a,o,r){super(t),this.analisisRiesgoTrabajoService=i,this.modalService=a,this.bsModalRef=o,this.router=r,this.tabSeleccionado=0,this.deshabilitarAgregar=!1,this.destroy$=new M.x,this.esAgregar=!1,this.placeHolderSelect=u.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=u.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.submiting=!1}ngOnInit(){var i=()=>super.onInit,t=this;return(0,h.Z)(function*(){yield i().call(t),t.accion===C.V_.Agregar&&!t.idEntidad&&(t.esAgregar=!0,t.fecha=new Date),t.esConfig?t.titulo="Configurar":t.titulo=t.accion,t.idAnalisisRiesgoTrabajo=t.entidad.idAnalisisRiesgoTrabajo})()}ngOnDestroy(){this.destroy$.next()}consultar(i){return this.analisisRiesgoTrabajoService.consultar(i).pipe((0,l.b)(t=>{this.fecha=new Date(t.fechaAlta)}))}agregar(i){return this.analisisRiesgoTrabajoService.agregar(i)}editar(i){return this.analisisRiesgoTrabajoService.editar(i)}onSubmit(){this.seleccionado=this.tabset.tabs.find(t=>1==t.active)?.heading;let i=this.consultarFormulario(this.seleccionado);i?super.onSubmit(i):super.cancelar(!0)}consultarFormulario(i){return i===this.informacionGeneral?.heading?this.informacionGeneral.formulario:null}static#e=this.\u0275fac=function(t){return new(t||O)(e.Y36(p),e.Y36(m.V),e.Y36(_.tT),e.Y36(_.UZ),e.Y36(g.F0))};static#i=this.\u0275cmp=e.Xpm({type:O,selectors:[["app-analisis-riesgo-trabajo-formulario"]],viewQuery:function(t,a){if(1&t&&(e.Gf(Z,5),e.Gf(G,5)),2&t){let o;e.iGM(o=e.CRH())&&(a.informacionGeneral=o.first),e.iGM(o=e.CRH())&&(a.tabset=o.first)}},inputs:{idAnalisisRiesgoTrabajo:"idAnalisisRiesgoTrabajo"},features:[e.qOj],decls:5,vars:1,consts:[[3,"titulo"],["modalBody",""],["modalFooter",""],[1,"justify-content-center"],["tabset",""],["customClass","customClass","heading","Informaci\xf3n General",2,"padding","0"],["heading","Informaci\xf3n General",3,"entidad"],["informacionGeneral",""],["customClass","customClass","heading","Tareas"],["heading","Tareas",3,"idAnalisisRiesgoTrabajo"],["customClass","customClass","heading","Personal Involucrado"],[3,"idAnalisisRiesgoTrabajo"],["personalInvolucrado",""],["customClass","customClass","heading","Equipo / Herramientas"],["heading","Equipo / Herramientas",3,"idAnalisisRiesgoTrabajo"],["customClass","customClass","heading","Veh\xedculos"],["heading","Veh\xedculos",3,"idAnalisisRiesgoTrabajo"],["type","button",1,"btn-secundario","mr-3",3,"click"],["type","submit","form","form",1,"btn-primario","btn-margin-left",3,"disabled","click"]],template:function(t,a){1&t&&(e.TgZ(0,"app-modal-base",0),e.YNc(1,de,14,5,"ng-template",null,1,e.W1O),e.YNc(3,j,4,1,"ng-template",null,2,e.W1O),e.qZA()),2&t&&e.Q6J("titulo",a.nombreEntidad+" - "+a.titulo)}})}var E,d,F=s(52522);(d=E||(E={})).Consultar="APRIES0000",d.Agregar="APRIES1000",d.Editar="APRIES2000",d.Eliminar="APRIES3000";var I=s(15439);class Me{}var ce=s(96884),Re=s(83083),ue=s(74654),he=s(51763),ge=s(94654),B=s(62861),Ee=s(12846),pe=s(85246),A=s(24006),Y=s(88796),me=s(8816);function Pe(d,i){1&d&&e._UZ(0,"i",22)}function Ze(d,i){1&d&&e._UZ(0,"i",23)}class k extends c.v{constructor(i,t,a,o,r,v,R,x,U,y,D){super(R,x,U),this.analisisRiesgoTrabajoService=i,this.turnoService=t,this.companiaService=a,this.departamentoService=o,this.contratistaService=r,this.contratoService=v,this.bsModalRef=y,this.formularioService=D,this.placeHolderSelect=u.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=u.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.idsEstatusList=[{idEstatus:0,nombre:"Inactivo"},{idEstatus:1,nombre:"Activo"}],this.idsEstatusSeleccionados=[],this.MENSAJE_EXITO_BUSQUEDA="La b\xfasqueda ha sido realizada",this.isCollapsed=!0,this.buscando=!1,this.HEADER_GRID="Cat\xe1logo de Riesgos",this.destroy$=new M.x,this.NOMBRE_ENTIDAD="An\xe1lisis de Riesgos del Trabajo (ART)",this.riesgoList=[],this.filtro=new Me,this.fechaAlta=new Date,this.crudConfig={nombreEntidad:"An\xe1lisis de Riesgos del Trabajo (ART)",generoGramatical:"masc",nombrePropiedadId:"idAnalisisRiesgoTrabajo",formConfig:{ComponenteFormulario:O,modalConfig:F.OS.Large,configAgregar:{acceso:E.Agregar},configEditar:{acceso:E.Editar}},configEliminar:{acceso:E.Eliminar,elementToString:N=>`${N.idAnalisisRiesgoTrabajo}`}},this.columns=[{headerName:"Clave",field:"idAnalisisRiesgoTrabajo",minWidth:50,width:80},{headerName:"Estatus",field:"estatus",minWidth:50,width:80,valueGetter:N=>N.data.estatus?"Activo":"Inactivo"},{headerName:"Fecha-Hora",field:"fechaAlta",minWidth:70,width:130,cellRenderer:N=>I(N.data.fechaAlta).format("DD/MM/YYYY HH:mm:ss"),valueGetter:N=>I(N.data.fechaAlta).format("DD/MM/YYYY  HH:mm:ss")},{headerName:"Turno",field:"turno",minWidth:50,width:80},{headerName:"Trabajo / Actividad",field:"trabajoActividad",minWidth:50,width:130},{headerName:"Compa\xf1\xeda",field:"compania",minWidth:50,width:150},{headerName:"Departamento",field:"departamento",minWidth:50,width:100},{headerName:"Contratista",field:"contratista",minWidth:50,width:150}]}ngOnInit(){this.fechaAlta=new Date,this.selectorContratista(),super.onInit()}selectorContratista(){this.contratoService.selectorContratista().subscribe(i=>{this.contratistas=i})}consultarGrid(){return this.idsEstatusSeleccionados.includes(0)?this.filtro.inactivo=!0:this.filtro.inactivo=!1,this.idsEstatusSeleccionados.includes(1)?this.filtro.activo=!0:this.filtro.activo=!1,this.analisisRiesgoTrabajoService.consultarParaGrid(this.filtro)}eliminar(i){return this.analisisRiesgoTrabajoService.eliminar(i)}isCollapsedFunction(){this.isCollapsed=!this.isCollapsed,this.isCollapsed?this.height="calc(80vh - 55px)":this.height="calc(64vh - 55px)"}enviarFormulario(i){i.valid?(this.idsEstatusSeleccionados.includes(0)?this.filtro.inactivo=!0:this.filtro.inactivo=!1,this.idsEstatusSeleccionados.includes(1)?this.filtro.activo=!0:this.filtro.activo=!1,this.registros$=this.analisisRiesgoTrabajoService.consultarParaGrid(this.filtro).pipe((0,l.b)(t=>{this.riesgoList=t}))):this.formularioService.validarCamposRequeridos(i)}static#e=this.\u0275fac=function(t){return new(t||k)(e.Y36(p),e.Y36(ce.D),e.Y36(Re.c),e.Y36(ue._),e.Y36(he.m),e.Y36(ge.d),e.Y36(B.Q),e.Y36(_.tT),e.Y36(m.V),e.Y36(_.UZ),e.Y36(Ee.Y))};static#i=this.\u0275cmp=e.Xpm({type:k,selectors:[["app-analisis-riesgo-trabajo"]],features:[e.qOj],decls:26,vars:14,consts:[[1,"cuerpo-contenedor"],["novalidate","novalidate",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],[3,"collapse","isAnimated"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"label-input"],["name","idEstatusName","bindLabel","nombre","bindValue","idEstatus",3,"items","placeholder","notFoundText","ngModel","multiple","closeOnSelect","ngModelChange"],["idEstatusLst","ngModel"],[1,"col-md-2"],[1,"row","mb-4"],[1,"col-md-12","text-center"],["type","submit",1,"btn-primario",3,"click"],[1,"form-row","panel-busqueda","mb-4"],[1,"panel-carga-elementos","center-element-vertically",3,"click"],[1,"titulo-panel"],[1,"arow-down-up"],["class","fa fa-chevron-down",4,"ngIf"],["class","fa fa-chevron-up",4,"ngIf"],[1,"col-md-12"],["titulo","An\xe1lisis de Riesgos del Trabajo (ART)","tituloBoton","An\xe1lisis de Riesgos Trabajo",3,"columns","crudConfig","elementos$","tieneAccesoAgregar$","agregarClick","gridClick"],[1,"fa","fa-chevron-down"],[1,"fa","fa-chevron-up"]],template:function(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"form",1,2),e.NdJ("keydown.enter",function(v){return v.preventDefault()})("ngSubmit",function(){e.CHM(o);const v=e.MAs(2);return e.KtG(a.enviarFormulario(v))}),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),e._uU(8,"Estatus"),e.qZA(),e.TgZ(9,"ng-select",8,9),e.NdJ("ngModelChange",function(v){return a.idsEstatusSeleccionados=v}),e.qZA()()()(),e._UZ(11,"div",10),e.TgZ(12,"div",11)(13,"div",12)(14,"button",13),e.NdJ("click",function(){e.CHM(o);const v=e.MAs(2);return e.KtG(a.enviarFormulario(v))}),e._uU(15,"Buscar"),e.qZA()()()()(),e.TgZ(16,"div",14)(17,"div",15),e.NdJ("click",function(){return a.isCollapsedFunction()}),e.TgZ(18,"span",16),e._uU(19,"Panel de B\xfasqueda"),e.qZA(),e.TgZ(20,"span",17),e.YNc(21,Pe,1,0,"i",18),e.YNc(22,Ze,1,0,"i",19),e.qZA()()(),e.TgZ(23,"div",4)(24,"div",20)(25,"app-catalogo-base",21),e.NdJ("agregarClick",function(){return a.agregar()})("gridClick",function(v){return a.onGridClick(v)}),e.qZA()()()()}2&t&&(e.xp6(3),e.Q6J("collapse",a.isCollapsed)("isAnimated",!0),e.xp6(6),e.Q6J("items",a.idsEstatusList)("placeholder",a.placeHolderSelect)("notFoundText",a.placeHolderNoOptions)("ngModel",a.idsEstatusSeleccionados)("multiple",!0)("closeOnSelect",!1),e.xp6(12),e.Q6J("ngIf",a.isCollapsed),e.xp6(1),e.Q6J("ngIf",!a.isCollapsed),e.xp6(3),e.Q6J("columns",a.columns)("crudConfig",a.crudConfig)("elementos$",a.registros$)("tieneAccesoAgregar$",a.tieneAccesoAgregar$))},dependencies:[n.O5,pe.B,A._Y,A.JJ,A.JL,A.On,A.F,Y.w9,me.Y],styles:[".estatus[_ngcontent-%COMP%]{background-repeat:no-repeat;aspect-ratio:1/1;width:15px}"]})}var Oe=s(13050);const Ue=[{path:"",component:k,canActivate:[Oe.m],data:{title:"Consulta",acceso:E.Consultar}}];class W{static#e=this.\u0275fac=function(t){return new(t||W)};static#i=this.\u0275mod=e.oAB({type:W});static#t=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(Ue),g.Bz]})}var _e=s(13024),Q=s(43876),ye=s(46558),H=s(90061);const De=["formulario"];function Ne(d,i){1&d&&(e.TgZ(0,"div",35),e._uU(1," La fecha alta es requerida "),e.qZA())}function Ie(d,i){1&d&&(e.TgZ(0,"div",35),e._uU(1," El turno es requerido "),e.qZA())}function xe(d,i){1&d&&(e.TgZ(0,"div",35),e._uU(1," El trabajo / actividad es requerido "),e.qZA())}function je(d,i){1&d&&(e.TgZ(0,"div",35),e._uU(1," La ubicaci\xf3n es requerida "),e.qZA())}function qe(d,i){1&d&&(e.TgZ(0,"div",35),e._uU(1," El departamento es requerido "),e.qZA())}function Fe(d,i){1&d&&(e.TgZ(0,"div",35),e._uU(1," El contratista es requerido "),e.qZA())}function Se(d,i){1&d&&(e.TgZ(0,"div",35),e._uU(1," El supervisor de operaciones es requerido "),e.qZA())}function we(d,i){1&d&&(e.TgZ(0,"div",35),e._uU(1," La locaci\xf3n es requerida "),e.qZA())}class z{constructor(i,t,a,o,r){this.usuarioService=i,this.turnoService=t,this.departamentoService=a,this.contratistaService=o,this.contratoService=r,this.placeHolderSelect=u.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=u.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS}ngOnInit(){this.consultarContratistas(),this.consultarTurnos(),this.consultarDepartamentos(),this.consultarLocaciones(),this.entidad.fechaAlta=new Date}consultarTurnos(){this.turnos$=this.turnoService.consultarParaSelector()}consultarDepartamentos(){this.departamentos$=this.departamentoService.consultarTodosParaSelector()}consultarContratistas(){this.contratistas$=this.contratistaService.consultarParaSelector()}consultarLocaciones(){this.locaciones$=this.contratoService.selectorLocaciones()}static#e=this.\u0275fac=function(t){return new(t||z)(e.Y36(ye.i),e.Y36(ce.D),e.Y36(ue._),e.Y36(he.m),e.Y36(ge.d))};static#i=this.\u0275cmp=e.Xpm({type:z,selectors:[["app-analisis-riesgo-trabajo-informacion-general"]],viewQuery:function(t,a){if(1&t&&e.Gf(De,5),2&t){let o;e.iGM(o=e.CRH())&&(a.formulario=o.first)}},inputs:{entidad:"entidad",heading:"heading"},decls:96,vars:51,consts:[["id","form","novalidate","novalidate",3,"keydown.enter"],["formulario","ngForm"],[1,"container-fluid"],[1,"subseccion"],[1,"row"],[1,"col-md-2"],[1,"form-group"],[1,"label-input","required-label"],["type","text","name","nombre","autocomplete","off",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["type","text","name","estatus",1,"form-control",3,"value","required","disabled"],[1,"col-md-1"],[1,"date-input-container"],["type","text","autocomplete","off","placeholder","dd/mm/aaaa","name","fechaAltaName","bsDatepicker","","disabled","disabled",1,"form-control",3,"ngModel","required","ngModelChange"],["fechaAltaName","ngModel"],[1,"fa-regular","fa-calendar-days"],["class","error",4,"ngIf"],["type","text","disabled","disabled",1,"form-control",3,"value"],[1,"col-md-3"],[1,"label-input"],["name","turnoName","bindLabel","nombre","bindValue","idTurno","appendTo","body","required","",3,"ngModel","items","placeholder","notFoundText","ngModelChange"],["turno","ngModel"],[1,"col-md-9"],["type","text","name","trabajoActividad","autocomplete","off",1,"form-control",3,"ngModel","required","ngModelChange"],["trabajoActividad","ngModel"],["type","text","autocomplete","off","name","ubicacion",1,"form-control",3,"ngModel","required","ngModelChange"],["ubicacion","ngModel"],[1,"col-md-4"],["name","departamentoName","bindLabel","nombre","bindValue","idDepartamento","appendTo","body","required","",3,"ngModel","items","placeholder","notFoundText","ngModelChange"],["departamento","ngModel"],["name","contratistaName","bindLabel","nombreComercial","bindValue","idUsuario","appendTo","body",3,"ngModel","items","placeholder","required","notFoundText","ngModelChange"],["contratista","ngModel"],["type","text","autocomplete","off","name","supervisor",1,"form-control",3,"ngModel","required","ngModelChange"],["supervisor","ngModel"],["name","locacionName","bindLabel","nombre","bindValue","id","appendTo","body","required","",3,"ngModel","items","placeholder","notFoundText","ngModelChange"],["locacion","ngModel"],[1,"error"]],template:function(t,a){if(1&t&&(e.TgZ(0,"form",0,1),e.NdJ("keydown.enter",function(r){return r.preventDefault()}),e.TgZ(2,"div",2)(3,"div",3),e._uU(4," General "),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),e._uU(9,"Clave"),e.qZA(),e.TgZ(10,"input",8),e.NdJ("ngModelChange",function(r){return a.entidad.idAnalisisRiesgoTrabajo=r}),e.qZA()()(),e.TgZ(11,"div",5)(12,"div",6)(13,"label",7),e._uU(14,"Estatus"),e.qZA(),e._UZ(15,"input",9),e.qZA()(),e._UZ(16,"div",10),e.TgZ(17,"div",5)(18,"div",6)(19,"label",7),e._uU(20,"Fecha Alta"),e.qZA(),e.TgZ(21,"div",11)(22,"input",12,13),e.NdJ("ngModelChange",function(r){return a.entidad.fechaAlta=r}),e.qZA(),e._UZ(24,"i",14),e.YNc(25,Ne,2,0,"div",15),e.qZA()()(),e.TgZ(26,"div",5)(27,"div",6)(28,"label",7),e._uU(29,"Hora"),e.qZA(),e.TgZ(30,"div"),e._UZ(31,"input",16),e.ALo(32,"date"),e.qZA()()(),e.TgZ(33,"div",17)(34,"div",6)(35,"label",18),e._uU(36,"Turno"),e.qZA(),e.TgZ(37,"div")(38,"ng-select",19,20),e.NdJ("ngModelChange",function(r){return a.entidad.idTurno=r}),e.ALo(40,"async"),e.qZA(),e.YNc(41,Ie,2,0,"div",15),e.qZA()()()(),e.TgZ(42,"div",3),e._uU(43,"Tipo de Trabajo / Actividad"),e.qZA(),e.TgZ(44,"div",4)(45,"div",21)(46,"div",6)(47,"label",7),e._uU(48,"Trabajo / Actividad"),e.qZA(),e.TgZ(49,"input",22,23),e.NdJ("ngModelChange",function(r){return a.entidad.trabajoActividad=r}),e.qZA(),e.YNc(51,xe,2,0,"div",15),e.qZA()(),e.TgZ(52,"div",17)(53,"div",6)(54,"label",7),e._uU(55,"Ubicaci\xf3n"),e.qZA(),e.TgZ(56,"input",24,25),e.NdJ("ngModelChange",function(r){return a.entidad.ubicacion=r}),e.qZA(),e.YNc(58,je,2,0,"div",15),e.qZA()()(),e.TgZ(59,"div",4)(60,"div",26)(61,"div",6)(62,"label",18),e._uU(63,"Departamento"),e.qZA(),e.TgZ(64,"div")(65,"ng-select",27,28),e.NdJ("ngModelChange",function(r){return a.entidad.idDepartamento=r}),e.ALo(67,"async"),e.qZA(),e.YNc(68,qe,2,0,"div",15),e.qZA()()(),e._UZ(69,"div",10),e.TgZ(70,"div",26)(71,"div",6)(72,"label",18),e._uU(73,"Contratista"),e.qZA(),e.TgZ(74,"div")(75,"ng-select",29,30),e.NdJ("ngModelChange",function(r){return a.entidad.idUsuarioContratista=r}),e.ALo(77,"async"),e.qZA(),e.YNc(78,Fe,2,0,"div",15),e.qZA()()(),e.TgZ(79,"div",17)(80,"div",6)(81,"label",7),e._uU(82,"Supervisor de Operaciones"),e.qZA(),e.TgZ(83,"input",31,32),e.NdJ("ngModelChange",function(r){return a.entidad.supervisorOperaciones=r}),e.qZA(),e.YNc(85,Se,2,0,"div",15),e.qZA()()(),e.TgZ(86,"div",4)(87,"div",26)(88,"div",6)(89,"label",18),e._uU(90,"Locaci\xf3n"),e.qZA(),e.TgZ(91,"div")(92,"ng-select",33,34),e.NdJ("ngModelChange",function(r){return a.entidad.idLocacion=r}),e.ALo(94,"async"),e.qZA(),e.YNc(95,we,2,0,"div",15),e.qZA()()()()()()),2&t){const o=e.MAs(23),r=e.MAs(39),v=e.MAs(50),R=e.MAs(57),x=e.MAs(66),U=e.MAs(76),y=e.MAs(84),D=e.MAs(93);e.xp6(10),e.Q6J("ngModel",a.entidad.idAnalisisRiesgoTrabajo)("required",!0)("disabled",!0),e.xp6(5),e.Q6J("value",!0===a.entidad.estatus?"Activo":!1===a.entidad.estatus?"Inactivo":"Activo")("required",!0)("disabled",!0),e.xp6(7),e.Q6J("ngModel",a.entidad.fechaAlta)("required",!0),e.xp6(3),e.Q6J("ngIf",(null==o.errors?null:o.errors.required)&&o.touched),e.xp6(6),e.Q6J("value",e.xi3(32,40,a.entidad.fechaAlta,"HH:mm")),e.xp6(7),e.Q6J("ngModel",a.entidad.idTurno)("items",e.lcZ(40,43,a.turnos$))("placeholder",a.placeHolderSelect)("notFoundText",a.placeHolderNoOptions),e.xp6(3),e.Q6J("ngIf",(null==r.errors?null:r.errors.required)&&r.touched),e.xp6(8),e.Q6J("ngModel",a.entidad.trabajoActividad)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==v.errors?null:v.errors.required)&&v.touched),e.xp6(5),e.Q6J("ngModel",a.entidad.ubicacion)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==R.errors?null:R.errors.required)&&R.touched),e.xp6(7),e.Q6J("ngModel",a.entidad.idDepartamento)("items",e.lcZ(67,45,a.departamentos$))("placeholder",a.placeHolderSelect)("notFoundText",a.placeHolderNoOptions),e.xp6(3),e.Q6J("ngIf",(null==x.errors?null:x.errors.required)&&x.touched),e.xp6(7),e.Q6J("ngModel",a.entidad.idUsuarioContratista)("items",e.lcZ(77,47,a.contratistas$))("placeholder",a.placeHolderSelect)("required",!0)("notFoundText",a.placeHolderNoOptions),e.xp6(3),e.Q6J("ngIf",(null==U.errors?null:U.errors.required)&&U.touched),e.xp6(5),e.Q6J("ngModel",a.entidad.supervisorOperaciones)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==y.errors?null:y.errors.required)&&y.touched),e.xp6(7),e.Q6J("ngModel",a.entidad.idLocacion)("items",e.lcZ(94,49,a.locaciones$))("placeholder",a.placeHolderSelect)("notFoundText",a.placeHolderNoOptions),e.xp6(3),e.Q6J("ngIf",(null==D.errors?null:D.errors.required)&&D.touched)}},dependencies:[H.Np,H.Y5,Y.w9,A._Y,A.Fj,A.JJ,A.JL,A.Q7,A.On,A.F,n.O5,n.Ov,n.uU],styles:[".date-input-container[_ngcontent-%COMP%]{position:relative;width:100%}.date-input-container[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{width:100%;padding-right:30px}.date-input-container[_ngcontent-%COMP%]   .fa-calendar-days[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);pointer-events:none}"]})}var se=s(59241);class Le{constructor(){}}class S{constructor(i){this.http=i,this.dataUrl="analisisRiesgoEquipo/"}consultarParaGrid(i){return this.http.get(this.dataUrl+`${i}`)}agregar(i){return this.http.post(this.dataUrl+"agregar",i)}editar(i){return this.http.put(this.dataUrl+"editar",i)}eliminar(i){return this.http.delete(this.dataUrl+`${i}`)}static#e=this.\u0275fac=function(t){return new(t||S)(e.LFG(b.eN))};static#i=this.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}var Je=s(11481),Ge=s(64163),re=s(58390);class K{constructor(i,t,a,o,r){this.analisisRiesgoEquipoService=i,this.accesoService=t,this.modalMensajeService=a,this.sanitizer=o,this.archivoService=r,this.equipo=new Le,this.equipoList=[],this.equipoColumns=[{headerName:"N\xfam",field:"numeroConsecutivo",minWidth:100},{headerName:"Equipo/Herramienta",field:"herramientaEquipo",minWidth:100},{headerName:"",field:"idAnalisisRiesgoEquipo",minWidth:100,hide:!0}],this.configIdRol=Object.assign({labelField:"nombre",valueField:"idAnalisisRiesgoTrabajo",searchField:["nombre"],plugins:["dropdown_direction","remove_button"],maxItems:null,dropdownDirection:"down"}),this.configModal={animated:!0,keyboard:!1,backdrop:"static",ignoreBackdropClick:!0,size:"sm",class:"modal-md modal-size-md modal-position-center"}}ngOnInit(){this.llenarGrids(),this.limpiarEquipo()}llenarGrids(){this.analisisRiesgoEquipoService.consultarParaGrid(this.idAnalisisRiesgoTrabajo).subscribe(i=>{this.equipoList=i})}agregar(){null==this.equipo.idAnalisisRiesgoEquipo||0==this.equipo.idAnalisisRiesgoEquipo||null==this.equipo.idAnalisisRiesgoEquipo?(this.equipo.idAnalisisRiesgoTrabajo=this.idAnalisisRiesgoTrabajo,this.analisisRiesgoEquipoService.agregar(this.equipo).subscribe(i=>{this.llenarGrids(),this.limpiarEquipo()})):this.analisisRiesgoEquipoService.editar(this.equipo).subscribe(i=>{this.llenarGrids(),this.limpiarEquipo()})}limpiarEquipo(){this.equipo.idAnalisisRiesgoEquipo=0,this.equipo.idAnalisisRiesgoTrabajo=0,this.equipo.herramientaEquipo="",this.equipo.numeroConsecutivo=0}cancelar(){this.onClose(!1)}sanitize(i){return this.sanitizer.bypassSecurityTrustUrl(i)}onGridClick(i){i.accion===u.g.GRID_ACCION_EDITAR?this.equipo=i.data:i.accion===u.g.GRID_ACCION_ELIMINAR&&this.modalMensajeService.modalConfirmacion("\xbfDesea eliminar la selecci\xf3n?","Eliminar",u.g.ICONO_CRUZ).then(t=>{this.analisisRiesgoEquipoService.eliminar(i.data.idAnalisisRiesgoEquipo).subscribe(a=>{this.modalMensajeService.modalExito("Eliminado con Exito"),this.llenarGrids()})})}static#e=this.\u0275fac=function(t){return new(t||K)(e.Y36(S),e.Y36(B.Q),e.Y36(m.V),e.Y36(Je.H7),e.Y36(Ge.g))};static#i=this.\u0275cmp=e.Xpm({type:K,selectors:[["app-analisis-riesgo-equipo"]],inputs:{idAnalisisRiesgoTrabajo:"idAnalisisRiesgoTrabajo"},decls:18,vars:4,consts:[[1,"cuerpo-contenedor"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"label-input","required-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn-imagen",3,"click"],["src","assets/img/svg/svg-ico-25x25-Boton-Circular-Naranja-Agregar.svg",1,"icono"],[1,"col-md-12"],[3,"headerName","data","children","event"],["gridEquipo",""],[1,"modal-footer"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Equipo / Herramientas"),e.qZA(),e.TgZ(6,"div")(7,"input",5),e.NdJ("ngModelChange",function(r){return a.equipo.herramientaEquipo=r}),e.qZA()()()(),e.TgZ(8,"div",2)(9,"div",3)(10,"div")(11,"button",6),e.NdJ("click",function(){return a.agregar()}),e._UZ(12,"img",7),e.qZA()()()()(),e.TgZ(13,"div",1)(14,"div",8)(15,"app-grid-general",9,10),e.NdJ("event",function(r){return a.onGridClick(r)}),e.qZA()()()(),e._UZ(17,"div",11)),2&t&&(e.xp6(7),e.Q6J("ngModel",a.equipo.herramientaEquipo),e.xp6(8),e.Q6J("headerName","Equipo")("data",a.equipoList)("children",a.equipoColumns))},dependencies:[re.$,A.Fj,A.JJ,A.On],styles:[".modal-content[_ngcontent-%COMP%]{border:none}.modal-header[_ngcontent-%COMP%]{background-color:#fff}.switch[_ngcontent-%COMP%]{top:4px;height:calc(1.5em + .75rem + 7px);width:100px}.slider[_ngcontent-%COMP%]{background-color:#fff;border:none}.slider[_ngcontent-%COMP%]:before{background-color:#ed7d31;bottom:7px}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#f7ccaf}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{background-color:#fff;transform:translate(70px)}.on[_ngcontent-%COMP%], .off[_ngcontent-%COMP%]{font-family:Roboto}.off[_ngcontent-%COMP%]{color:gray;padding-left:20px}input[disabled][_ngcontent-%COMP%] + .slider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}  .tabs>a{padding:0;background-color:#ed7d31!important}.btn-subir[_ngcontent-%COMP%]{font-size:small;color:#fbe5d6;padding:1px 10px;background-color:#ed7d31;transition:.2s;border:1px #f2f2f2 solid;color:#fff;font-size:14px;text-align:center;border-radius:20px;text-wrap:true;max-width:100%;max-height:100%;align-content:center}.btn-subir[_ngcontent-%COMP%]:hover{background-color:#c56b30}.btn-imagen[_ngcontent-%COMP%]{border-radius:100px;border:none;max-width:100%;max-height:100%;background-color:#fff;margin-top:8px}"]})}var Be=s(37084),ve=s(41283),fe=s(71436),Ye=s(56776),ke=s(61191);class We{}class w{constructor(i){this.http=i,this.dataUrl="analisisRiesgoVehiculos/"}consultarParaGrid(i){return this.http.get(this.dataUrl+`${i}`)}agregar(i){return this.http.post(this.dataUrl+"agregar",i)}editar(i){return this.http.put(this.dataUrl+"editar",i)}eliminar(i){return this.http.delete(this.dataUrl+`${i}`)}static#e=this.\u0275fac=function(t){return new(t||w)(e.LFG(b.eN))};static#i=this.\u0275prov=e.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}class L{constructor(i,t,a,o){this.analisisRiesgoVehiculosService=i,this.modalMensajeService=t,this.bsModalRef=a,this.modalService=o,this.vehiculos=new We,this.vehiculosList=[],this.placeHolderSelect=u.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=u.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.columns=[{headerName:"N\xfam",field:"numero",minWidth:100,hide:!0},{headerName:"Veh\xedculo",field:"vehiculo",minWidth:100},{headerName:"Plazas",field:"plazas",minWidth:100},{headerName:"Sujeci\xf3n Personas",field:"sujecionPersonal",minWidth:100},{headerName:"Sujeci\xf3n Equipo",field:"sujecionEquipo",minWidth:100},{headerName:"",field:"idAnalisisRiesgoVehiculos",minWidth:100,hide:!0}]}ngOnInit(){this.vehiculos.idAnalisisRiesgoTrabajo=this.idAnalisisRiesgoTrabajo,this.inicializar(this.vehiculos),this.consultarVehiculo()}consultarVehiculo(){this.analisisRiesgoVehiculosService.consultarParaGrid(this.idAnalisisRiesgoTrabajo).subscribe(i=>this.vehiculosList=i)}inicializar(i){i.numeroConsecutivo=0,i.vehiculo="",i.plazas=0,i.sujecionPersonal="",i.sujecionEquipo=""}onGridClick(i){i.accion===u.g.GRID_ACCION_EDITAR?this.vehiculos=i.data:i.accion===u.g.GRID_ACCION_ELIMINAR&&this.modalMensajeService.modalConfirmacion("\xbfDesea eliminar la selecci\xf3n?","Eliminar",u.g.ICONO_CRUZ).then(t=>{this.analisisRiesgoVehiculosService.eliminar(i.data.idAnalisisRiesgoVehiculos).subscribe(a=>{this.modalMensajeService.modalExito("Eliminado con Exito"),this.consultarVehiculo()})})}agregar(){this.vehiculos.idAnalisisRiesgoVehiculos?this.analisisRiesgoVehiculosService.editar(this.vehiculos).subscribe(i=>{this.inicializar(this.vehiculos),this.consultarVehiculo()}):this.analisisRiesgoVehiculosService.agregar(this.vehiculos).subscribe(i=>{this.inicializar(this.vehiculos),this.consultarVehiculo()})}static#e=this.\u0275fac=function(t){return new(t||L)(e.Y36(w),e.Y36(m.V),e.Y36(_.UZ),e.Y36(_.tT))};static#i=this.\u0275cmp=e.Xpm({type:L,selectors:[["app-analisis-riesgo-vehiculos"]],inputs:{idAnalisisRiesgoTrabajo:"idAnalisisRiesgoTrabajo"},decls:37,vars:7,consts:[[1,"cuerpo-contenedor"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"label-input","required-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn-imagen",3,"click"],["src","assets/img/svg/svg-ico-25x25-Boton-Circular-Naranja-Agregar.svg"],[1,"col-md-12"],[3,"headerName","data","children","event"],["gridVehiculos",""],[1,"modal-footer"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Veh\xedculo"),e.qZA(),e.TgZ(6,"div")(7,"input",5),e.NdJ("ngModelChange",function(r){return a.vehiculos.vehiculo=r}),e.qZA()()()(),e.TgZ(8,"div",2)(9,"div",3)(10,"label",4),e._uU(11,"Plazas"),e.qZA(),e.TgZ(12,"div")(13,"input",6),e.NdJ("ngModelChange",function(r){return a.vehiculos.plazas=r}),e.qZA()()()(),e.TgZ(14,"div",2)(15,"div",3)(16,"label",4),e._uU(17,"Sujeci\xf3n Personas"),e.qZA(),e.TgZ(18,"div")(19,"input",5),e.NdJ("ngModelChange",function(r){return a.vehiculos.sujecionPersonal=r}),e.qZA()()()()(),e.TgZ(20,"div",1)(21,"div",2)(22,"div",3)(23,"label",4),e._uU(24,"Sujeci\xf3n Equipo"),e.qZA(),e.TgZ(25,"div")(26,"input",5),e.NdJ("ngModelChange",function(r){return a.vehiculos.sujecionEquipo=r}),e.qZA()()()(),e.TgZ(27,"div",2)(28,"div",3)(29,"div")(30,"button",7),e.NdJ("click",function(){return a.agregar()}),e._UZ(31,"img",8),e.qZA()()()()(),e.TgZ(32,"div",1)(33,"div",9)(34,"app-grid-general",10,11),e.NdJ("event",function(r){return a.onGridClick(r)}),e.qZA()()()(),e._UZ(36,"div",12)),2&t&&(e.xp6(7),e.Q6J("ngModel",a.vehiculos.vehiculo),e.xp6(6),e.Q6J("ngModel",a.vehiculos.plazas),e.xp6(6),e.Q6J("ngModel",a.vehiculos.sujecionPersonal),e.xp6(7),e.Q6J("ngModel",a.vehiculos.sujecionEquipo),e.xp6(8),e.Q6J("headerName","Vehiculo")("data",a.vehiculosList)("children",a.columns))},dependencies:[re.$,A.Fj,A.wV,A.JJ,A.On],styles:[".modal-content[_ngcontent-%COMP%]{border:none}.modal-header[_ngcontent-%COMP%]{background-color:#fff}.switch[_ngcontent-%COMP%]{top:4px;height:calc(1.5em + .75rem + 7px);width:100px}.slider[_ngcontent-%COMP%]{background-color:#fff;border:none}.slider[_ngcontent-%COMP%]:before{background-color:#ed7d31;bottom:7px}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#f7ccaf}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{background-color:#fff;transform:translate(70px)}.on[_ngcontent-%COMP%], .off[_ngcontent-%COMP%]{font-family:Roboto}.off[_ngcontent-%COMP%]{color:gray;padding-left:20px}input[disabled][_ngcontent-%COMP%] + .slider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}  .tabs>a{padding:0;background-color:#ed7d31!important}.btn-subir[_ngcontent-%COMP%]{font-size:small;color:#fbe5d6;padding:1px 10px;background-color:#ed7d31;transition:.2s;border:1px #f2f2f2 solid;color:#fff;font-size:14px;text-align:center;border-radius:20px;text-wrap:true;max-width:100%;max-height:100%;align-content:center}.btn-subir[_ngcontent-%COMP%]:hover{background-color:#c56b30}.btn-imagen[_ngcontent-%COMP%]{border-radius:100px;border:none;max-width:100%;max-height:100%;background-color:#fff;margin-top:8px}"]})}class ${static#e=this.\u0275fac=function(t){return new(t||$)};static#i=this.\u0275mod=e.oAB({type:$});static#t=this.\u0275inj=e.cJS({imports:[n.ez]})}var Qe=s(11288),Ae=s(92020);class V{static#e=this.\u0275fac=function(t){return new(t||V)};static#i=this.\u0275mod=e.oAB({type:V});static#t=this.\u0275inj=e.cJS({imports:[n.ez,Ae.A]})}class be{constructor(){}}var He=s(93416),ze=s(5596);class J{constructor(i){this.http=i,this.dataUrl="analisisRiesgoPersonal/"}consultarParaGrid(i){return this.http.get(this.dataUrl+`${i}`)}agregar(i){return this.http.post(this.dataUrl+"agregar",i)}editar(i){return this.http.put(this.dataUrl+"editar",i)}eliminar(i){return this.http.delete(this.dataUrl+`${i}`)}consultarFirma(i){return this.http.get(this.dataUrl+`consultarFirma/${i}`)}actualizarFirma(i){return this.http.post(this.dataUrl+"actualizarFirma",i)}static#e=this.\u0275fac=function(t){return new(t||J)(e.LFG(b.eN))};static#i=this.\u0275prov=e.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"})}class X{constructor(i,t,a,o){this.bsModalRef=i,this.modalService=t,this.modalMensajeService=a,this.analisisRiesgosPersonalService=o,this.personalList=[],this.editarPersonal=new be,this.esEditar=!1,this.firmaButton={headerName:"",field:"",cellRenderer:"actionButton",minWidth:44,maxWidth:44,resizable:!1,sortable:!1,filter:!1,suppressMovable:!0,lockPosition:!0,action:u.g.GRID_ACCION_FIRMAR,pinned:"right"},this.verButton={headerName:"",fiel:"",cellRenderer:"actionButton",minWidth:44,maxWidth:44,resizable:!1,sortable:!1,filter:!1,suppressMovable:!1,lockPosition:!0,action:u.g.GRID_ACCION_VER_FIRMA,pinned:"right"},this.personalColumns=[{headerName:"N\xfam",field:"numeroConsecutivo",minWidth:100},{headerName:"Nombre",field:"nombre",minWidth:100},{headerName:"Puesto",field:"puesto",minWidth:100},{headerName:"Firma",field:"",minWidth:100},this.firmaButton,this.verButton]}ngOnInit(){this.consultarPersonal(this.idAnalisisRiesgoTrabajo)}agregar(i){i?(this.analisisRiesgosPersonalService.editar(this.editarPersonal).subscribe({error:t=>{this.modalMensajeService.modalError(t)},complete:()=>{this.modalMensajeService.modalExito("El personal ha sido editado"),this.limpiarCampos()}}),this.esEditar=!1):(this.editarPersonal.idAnalisisRiesgoTrabajo=this.idAnalisisRiesgoTrabajo,this.analisisRiesgosPersonalService.agregar(this.editarPersonal).subscribe({error:t=>{this.modalMensajeService.modalError(t)},complete:()=>{this.modalMensajeService.modalExito("El personal ha sido agregado"),this.limpiarCampos()}}))}limpiarCampos(){this.editarPersonal=new be,this.consultarPersonal(this.idAnalisisRiesgoTrabajo)}onGridClick(i){i.accion===u.g.GRID_ACCION_FIRMAR&&this.abrirFirma(i.data),i.accion===u.g.GRID_ACCION_EDITAR&&(this.editarPersonal=i.data,this.esEditar=!0),i.accion===u.g.GRID_ACCION_ELIMINAR&&this.eliminar(i.data.idAnalisisRiesgoPersonal),i.accion===u.g.GRID_ACCION_VER_FIRMA&&this.analisisRiesgosPersonalService.consultarFirma(i.data.idAnalisisRiesgoPersonal).subscribe(t=>{this.verFirma(t.firma)})}abrirFirma(i){this.bsModalRef=this.modalService.show(ze.V,u.g.CONFIG_MODAL_DEFAULT),this.bsModalRef.content.esModal=!0,this.bsModalRef.content.onClose=t=>{const a=this.bsModalRef.content.firma;if(a.firma){let o=a.firma.split(",");i.firma=o[1],i.tipeMime="image/png",i.latitud=a.latitud.toString(),i.longitud=a.longitud.toString(),this.analisisRiesgosPersonalService.actualizarFirma(i).subscribe({error:r=>{this.modalMensajeService.modalError(r)},complete:()=>{this.modalMensajeService.modalExito("Firma agregada con exito")}})}this.bsModalRef.hide()}}eliminar(i){this.modalMensajeService.modalConfirmacion("\xbfDesea eliminar la selecci\xf3n?","Eliminar",u.g.ICONO_CRUZ).then(t=>{this.analisisRiesgosPersonalService.eliminar(i).subscribe(a=>{this.modalMensajeService.modalExito("Eliminado con Exito"),this.consultarPersonal(this.idAnalisisRiesgoTrabajo)})})}verFirma(i){let t={archivo:i,nombreImagen:"Firma",archivoTipoMime:"image/png",onCloseCallback:o=>{this.bsModalRef.hide()}};const a={...u.g.CONFIG_MODAL_DEFAULT,initialState:t};this.bsModalRef=this.modalService.show(He.U,a)}consultarPersonal(i){this.analisisRiesgosPersonalService.consultarParaGrid(i).subscribe(t=>{this.personalList=t})}static#e=this.\u0275fac=function(t){return new(t||X)(e.Y36(_.UZ),e.Y36(_.tT),e.Y36(m.V),e.Y36(J))};static#i=this.\u0275cmp=e.Xpm({type:X,selectors:[["app-personal-involucrado"]],inputs:{idAnalisisRiesgoTrabajo:"idAnalisisRiesgoTrabajo"},decls:26,vars:4,consts:[[1,"cuerpo-contenedor"],[1,"subseccion"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"label-input","required-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn-imagen",3,"click"],["src","assets/img/svg/svg-ico-25x25-Boton-Circular-Naranja-Agregar.svg"],[1,"col-md-12"],[3,"data","children","event"],["gridPersonalInvolucrado",""],[1,"modal-footer"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," Personal Involucrado"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"div")(9,"input",6),e.NdJ("ngModelChange",function(r){return a.editarPersonal.nombre=r}),e.qZA()()()(),e.TgZ(10,"div",3)(11,"div",4)(12,"label",5),e._uU(13,"Puesto"),e.qZA(),e.TgZ(14,"div")(15,"input",6),e.NdJ("ngModelChange",function(r){return a.editarPersonal.puesto=r}),e.qZA()()()(),e.TgZ(16,"div",3)(17,"div",4)(18,"div")(19,"button",7),e.NdJ("click",function(){return a.agregar(a.esEditar)}),e._UZ(20,"img",8),e.qZA()()()()(),e.TgZ(21,"div",2)(22,"div",9)(23,"app-grid-general",10,11),e.NdJ("event",function(r){return a.onGridClick(r)}),e.qZA()()()(),e._UZ(25,"div",12)),2&t&&(e.xp6(9),e.Q6J("ngModel",a.editarPersonal.nombre),e.xp6(6),e.Q6J("ngModel",a.editarPersonal.puesto),e.xp6(8),e.Q6J("data",a.personalList)("children",a.personalColumns))},dependencies:[re.$,A.Fj,A.JJ,A.On],styles:[".btn-imagen[_ngcontent-%COMP%]{border:none;background-color:#fff}"]})}var Te=s(383);class Ke{}var $e=s(19904);class q{constructor(i){this.http=i,this.dataUrl="analisisRiesgoTareas/"}consultarParaGrid(i){return this.http.get(this.dataUrl+`grid/${i}`)}consultar(i){return this.http.get(this.dataUrl+i)}consultarArchivo(i){return this.http.get(this.dataUrl+`archivo/${i}`)}agregar(i){return this.http.post(this.dataUrl+"agregar",i)}editar(i){return this.http.put(this.dataUrl+"editar",i)}almacenar(i){return this.http.post(this.dataUrl+"almacenar",i)}eliminarArchivo(i){return this.http.delete(this.dataUrl+"eliminarArchivo/"+i)}static#e=this.\u0275fac=function(t){return new(t||q)(e.LFG(b.eN))};static#i=this.\u0275prov=e.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"})}var Ve=s(4837);const Xe=["formulario"];function ei(d,i){1&d&&(e.TgZ(0,"div",29),e._uU(1," La descripci\xf3n es requerida "),e.qZA())}function ii(d,i){1&d&&(e.TgZ(0,"div",29),e._uU(1," El Peligro es requerido "),e.qZA())}function ti(d,i){1&d&&(e.TgZ(0,"div",29),e._uU(1," El Riesgo es requerido "),e.qZA())}function ai(d,i){1&d&&(e.TgZ(0,"div",29),e._uU(1," El Riesgo es requerido "),e.qZA())}function oi(d,i){if(1&d){const t=e.EpF();e.TgZ(0,"div")(1,"button",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,r=e.oxw(2);return e.KtG(r.duplicarItem(o))}),e._UZ(2,"img",37),e.qZA()()}}function ni(d,i){if(1&d){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",30)(2,"app-input-archivo",31),e.NdJ("archivoDto",function(o){const v=e.CHM(t).index,R=e.oxw(2);return e.KtG(R.modoEditar?R.editarArchivo(o,v):R.agregarArchivo(o,v))})("idArchivoDescarga",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.descargarArchivo(o))}),e.qZA()(),e.TgZ(3,"div",32)(4,"div",33),e.YNc(5,oi,3,0,"div",34),e.TgZ(6,"div")(7,"button",35),e.NdJ("click",function(){const r=e.CHM(t).index,v=e.oxw(2);return e.KtG(v.eliminarItem(r))}),e._UZ(8,"img",36),e.qZA()()()()()}if(2&d){const t=i.index,a=e.oxw(2);let o;e.xp6(2),e.Q6J("label","Cargar Documento")("nombreArchivo",a.entidad.analisisRiesgoTareasArchivo[t].archivoNombre?a.entidad.analisisRiesgoTareasArchivo[t].archivoNombre:"Examinar..")("archivo",a.entidad.analisisRiesgoTareasArchivo[t].archivo)("tipoMime",a.entidad.analisisRiesgoTareasArchivo[t].archivoTipoMime)("id",t.toString())("contieneAyuda",!1)("downl_endpoint",a.downl_endpoint.bind(a))("idRegistroArchivo",null!==(o=a.entidad.analisisRiesgoTareasArchivo[t].idAnalisisRiesgoTareasArchivo)&&void 0!==o?o:0),e.xp6(3),e.Q6J("ngIf",t==a.entidad.analisisRiesgoTareasArchivo.length-1)}}function si(d,i){if(1&d){const t=e.EpF();e.TgZ(0,"form",4,5),e.NdJ("keydown.enter",function(o){return o.preventDefault()}),e.TgZ(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"label",10),e._uU(7,"Descripci\xf3n de la Tarea (Pasos Significativos)"),e.qZA(),e.TgZ(8,"div")(9,"textarea",11,12),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.entidad.descripcionTarea=o)}),e.qZA()(),e.YNc(11,ei,2,0,"div",13),e.qZA()(),e._UZ(12,"div",14),e.TgZ(13,"div",15)(14,"label",16),e._UZ(15,"i",17),e.qZA(),e.TgZ(16,"div",18)(17,"p"),e._uU(18,"Peligro: Equipo, actividad, situaci\xf3n o agente que puede generar da\xf1o a las personas."),e.qZA()()()(),e.TgZ(19,"div",7)(20,"div",8)(21,"div",9)(22,"label",10),e._uU(23,"Peligros"),e.qZA(),e.TgZ(24,"div")(25,"textarea",19,20),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.entidad.peligros=o)}),e.qZA()(),e.YNc(27,ii,2,0,"div",13),e.qZA()(),e._UZ(28,"div",14),e.TgZ(29,"div",15)(30,"label",16),e._UZ(31,"i",17),e.qZA(),e.TgZ(32,"div",18)(33,"p"),e._uU(34,"Riesgo: Consecuencia de exponerse a peligro"),e.qZA()()()(),e.TgZ(35,"div",7)(36,"div",8)(37,"div",9)(38,"label",10),e._uU(39,"Riesgos"),e.qZA(),e.TgZ(40,"div")(41,"textarea",21,22),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.entidad.riesgos=o)}),e.qZA()(),e.YNc(43,ti,2,0,"div",13),e.qZA()(),e._UZ(44,"div",14),e.TgZ(45,"div",15)(46,"label",16),e._UZ(47,"i",17),e.qZA(),e.TgZ(48,"div",18)(49,"p"),e._uU(50,"Controles: Formas en las que evitamos que los peligros nos hagan da\xf1o."),e.qZA(),e.TgZ(51,"p"),e._uU(52,"1.-\xbfSe puede eliminar el peligro?,"),e.qZA(),e.TgZ(53,"p"),e._uU(54,"2.-\xbfSe puede sustituir por equipos o actividades menos peligrosas?,"),e.qZA(),e.TgZ(55,"p"),e._uU(56,"3.-Utiliza o dispositivos de ingenier\xeda, barreras, guardas, etc."),e.qZA(),e.TgZ(57,"p"),e._uU(58,"4.-Aplica procedimiento,formaci\xf3n,se\xf1ales u otros controles administrativos,"),e.qZA(),e.TgZ(59,"p"),e._uU(60,"5.-Utiliza EPP"),e.qZA()()()(),e.TgZ(61,"div",8)(62,"div",9)(63,"label",10),e._uU(64,"Controles"),e.qZA(),e.TgZ(65,"div")(66,"textarea",23,24),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.entidad.controles=o)}),e.qZA()(),e.YNc(68,ai,2,0,"div",13),e.qZA()(),e.TgZ(69,"div",7)(70,"div",25)(71,"div",9)(72,"label",10),e._uU(73,"Responsable de la Actividad"),e.qZA(),e.TgZ(74,"div")(75,"input",26,27),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.entidad.responsableActividad=o)}),e.qZA()()()()(),e.YNc(77,ni,9,9,"div",28),e.qZA()()}if(2&d){const t=e.MAs(10),a=e.MAs(26),o=e.MAs(42),r=e.MAs(67),v=e.oxw();e.xp6(9),e.Q6J("ngModel",v.entidad.descripcionTarea),e.xp6(2),e.Q6J("ngIf",(null==t.errors?null:t.errors.required)&&t.touched),e.xp6(14),e.Q6J("ngModel",v.entidad.peligros),e.xp6(2),e.Q6J("ngIf",(null==a.errors?null:a.errors.required)&&a.touched),e.xp6(14),e.Q6J("ngModel",v.entidad.riesgos),e.xp6(2),e.Q6J("ngIf",(null==o.errors?null:o.errors.required)&&o.touched),e.xp6(23),e.Q6J("ngModel",v.entidad.controles),e.xp6(2),e.Q6J("ngIf",(null==r.errors?null:r.errors.required)&&r.touched),e.xp6(7),e.Q6J("ngModel",v.entidad.responsableActividad),e.xp6(2),e.Q6J("ngForOf",v.entidad.analisisRiesgoTareasArchivo)}}function ri(d,i){if(1&d){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancelar())}),e._uU(1," Cancelar "),e.qZA(),e.TgZ(2,"button",39),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit(o.formulario))}),e._uU(3," Guardar "),e.qZA()}if(2&d){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.submitting)}}class ee extends f.P{constructor(i,t,a,o,r){super(t),this.analisisRiesgoTareasService=i,this.modalService=a,this.bsModalRef=o,this.router=r,this.DROPDOWN_PLACEHOLDER=C.vf,this.modoEditar=!1,this.DROPDOWN_NO_OPTIONS=C.aQ,(!this.entidad.analisisRiesgoTareasArchivo||0===this.entidad.analisisRiesgoTareasArchivo.length)&&(this.entidad.analisisRiesgoTareasArchivo=[{archivo:null,archivoNombre:"",archivoTipoMime:""}])}ngOnInit(){super.onInit(),this.entidad.idAnalisisRiesgoTrabajo=this.idAnalisisRiesgoTrabajo,this.esEditar()}esEditar(){this.accion==C.V_.Editar&&(this.modoEditar=!0)}consultar(i){return this.analisisRiesgoTareasService.consultar(i)}agregar(i){return this.analisisRiesgoTareasService.agregar(i)}editar(i){return this.analisisRiesgoTareasService.editar(i)}duplicarItem(i){let t=new Ke;t.archivo=null,t.archivoNombre="",t.archivoTipoMime="",this.entidad.analisisRiesgoTareasArchivo.splice(i+1,0,t)}editarArchivo(i,t){this.entidad.analisisRiesgoTareasArchivo[t].archivo=i.archivo,this.entidad.analisisRiesgoTareasArchivo[t].archivoNombre=i.nombreArchivo,this.entidad.analisisRiesgoTareasArchivo[t].archivoTipoMime=i.tipoMime,this.entidad.analisisRiesgoTareasArchivo[t].idAnalisisRiesgoTareas=this.entidad.idAnalisisRiesgoTareas,this.analisisRiesgoTareasService.almacenar(this.entidad.analisisRiesgoTareasArchivo[t]).subscribe(()=>{this.mensajeService.modalExito(`Se ha cargado el archivo <b>${i.nombreArchivo}</b> correctamente`)})}actualizarFecha(i){this.modoEditar&&null!=this.entidad.analisisRiesgoTareasArchivo[i].idAnalisisRiesgoTareasArchivo&&(this.entidad.analisisRiesgoTareasArchivo[i].idAnalisisRiesgoTareas=this.entidad.idAnalisisRiesgoTareas,this.analisisRiesgoTareasService.almacenar(this.entidad.analisisRiesgoTareasArchivo[i]).subscribe(()=>{this.mensajeService.modalExito("Se ha actualizado la fecha correctamente")}))}agregarArchivo(i,t){this.entidad.analisisRiesgoTareasArchivo[t].archivo=i.archivo,this.entidad.analisisRiesgoTareasArchivo[t].archivoNombre=i.nombreArchivo,this.entidad.analisisRiesgoTareasArchivo[t].archivoTipoMime=i.tipoMime}downl_endpoint(i){return this.analisisRiesgoTareasService.consultarArchivo(i)}descargarArchivo(i){let t=new $e.q;this.analisisRiesgoTareasService.consultarArchivo(i).pipe((0,l.b)(R=>{t=R}));let a,r=((R,x="",U=512)=>{const y=atob(R),D=[];for(let oe=0;oe<y.length;oe+=U){const le=y.slice(oe,oe+U),Ce=new Array(le.length);for(let ne=0;ne<le.length;ne++)Ce[ne]=le.charCodeAt(ne);const li=new Uint8Array(Ce);D.push(li)}return new Blob(D,{type:x})})(t.archivo,t.tipoMime);a=URL.createObjectURL(r);var v=document.createElement("a");v.href=a,v.download=t.nombreArchivo,v.click()}eliminarItem(i){if(this.entidad.analisisRiesgoTareasArchivo.length>1){const t=this.entidad.analisisRiesgoTareasArchivo[i].idAnalisisRiesgoTareasArchivo;void 0!==t?this.analisisRiesgoTareasService.eliminarArchivo(t).subscribe(()=>{this.entidad.analisisRiesgoTareasArchivo.splice(i,1),this.mensajeService.modalExito("El archivo ha sido eliminado correctamente.")},a=>{this.mensajeService.modalError("Hubo un error al eliminar el archivo.")}):this.entidad.analisisRiesgoTareasArchivo.splice(i,1)}}static#e=this.\u0275fac=function(t){return new(t||ee)(e.Y36(q),e.Y36(m.V),e.Y36(_.tT),e.Y36(_.UZ),e.Y36(g.F0))};static#i=this.\u0275cmp=e.Xpm({type:ee,selectors:[["app-analisis-riesgo-tareas-formulario"]],viewQuery:function(t,a){if(1&t&&e.Gf(Xe,5),2&t){let o;e.iGM(o=e.CRH())&&(a.formulario=o.first)}},inputs:{idAnalisisRiesgoTrabajo:"idAnalisisRiesgoTrabajo"},features:[e.qOj],decls:6,vars:1,consts:[[3,"titulo"],["modal",""],["modalBody",""],["modalFooter",""],["novalidate","novalidate","id","form",3,"keydown.enter"],["formulario","ngForm"],[1,"modal-content"],[1,"row"],[1,"col-md-12"],[1,"form-group"],[1,"label-input","required-label"],["name","descripcionTarea","rows","3","required","",1,"form-control-g",2,"width","100%",3,"ngModel","ngModelChange"],["descripcionTarea","ngModel"],["class","error",4,"ngIf"],[1,"warning-wrapper","col-md-13",2,"width","86.7%"],[1,"warning-wrapper","col-md-2",2,"width","13.3%"],[1,"warning-button"],[1,"fa-solid","fa-triangle-exclamation","warning-button",2,"color","#f0bc00"],[1,"info-panel"],["name","peligros","rows","3","required","",1,"form-control-g",2,"width","100%",3,"ngModel","ngModelChange"],["peligros","ngModel"],["name","riesgos","rows","3","required","",1,"form-control-g",2,"width","100%",3,"ngModel","ngModelChange"],["riesgos","ngModel"],["name","controles","rows","3","required","",1,"form-control-g",2,"width","100%",3,"ngModel","ngModelChange"],["controles","ngModel"],[1,"col-2",2,"width","25%"],["name","responsableActividad","type","text","maxlength","50",1,"form-control",3,"ngModel","ngModelChange"],["responsableActividad","ngModel"],["class","row",4,"ngFor","ngForOf"],[1,"error"],[1,"col-md-4"],[3,"label","nombreArchivo","archivo","tipoMime","id","contieneAyuda","downl_endpoint","idRegistroArchivo","archivoDto","idArchivoDescarga"],[1,"col-md-3"],[1,"contenedor-flex","contenedor-btn","d-flex","align-items-center"],[4,"ngIf"],[1,"circle-button",3,"click"],["src","assets/img/svg/svg-ico-18x18-Boton-Circular-Gris-Eliminar.svg",1,"icono","ml-1",2,"margin-top","2.6rem !important"],["src","assets/img/svg/svg-ico-18x18-Boton-Circular-Naranja-Agregar.svg",1,"icono","mr-1",2,"margin-top","2.6rem !important"],["type","button",1,"btn-secundario","flex-shrink-1",3,"click"],["type","button","form","form",1,"btn-primario",3,"disabled","click"]],template:function(t,a){1&t&&(e.TgZ(0,"app-modal-base",0,1),e.YNc(2,si,78,10,"ng-template",null,2,e.W1O),e.YNc(4,ri,4,1,"ng-template",null,3,e.W1O),e.qZA()),2&t&&e.Q6J("titulo",a.nombreEntidad+" - "+a.accion)},dependencies:[Ve.x,Te.B,n.sg,n.O5,A._Y,A.Fj,A.JJ,A.JL,A.Q7,A.nD,A.On,A.F],styles:['@charset "UTF-8";.warning-wrapper[_ngcontent-%COMP%]{position:relative;font-weight:400;display:flex;justify-content:flex-end;align-items:flex-end}.info-panel[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;width:350px;background:#ffffff;box-shadow:2px 2px 5px 2px #0003;border-radius:5%;padding:20px;z-index:-100;border:2px solid #f0bc00}.warning-button[_ngcontent-%COMP%]:hover + .info-panel[_ngcontent-%COMP%]{z-index:1003}.info-panel[_ngcontent-%COMP%]{position:absolute;z-index:-100}.circle-button[_ngcontent-%COMP%]{background-color:transparent;border:0;align-items:center;justify-content:center;margin-top:5px}textarea[_ngcontent-%COMP%]{padding-top:10px;padding-left:10px;width:100%}']})}class ie extends c.v{constructor(i,t,a,o,r){super(a,o,t),this.analisisRiesgoTareasService=i,this.modalService=o,this.bsModalRef=r,this.HEADER_GRID="Descripci\xf3n de Tarea",this.isCollapsed=!0,this.destroy$=new M.x,this.NOMBRE_ENTIDAD="Descripci\xf3n de Tarea",this.columns=[{headerName:"N\xfam.",field:"numeroTarea",minWidth:100},{headerName:"Descripci\xf3n de Tarea (Pasos Significativos)",field:"descripcionTarea",minWidth:150},{headerName:"Peligros",field:"peligros",minWidth:150},{headerName:"Riesgos",field:"riesgos",minWidth:150},{headerName:"Controles",field:"controles",minWidth:150},{headerName:"Responsable de la Actividad",field:"responsableActividad",minWidth:150},{headerName:"",field:"idAnalisisRiesgoTareas",minWidth:100,hide:!0}],this.crudConfig={nombreEntidad:this.NOMBRE_ENTIDAD,generoGramatical:"masc",nombrePropiedadId:"idAnalisisRiesgoTareas",formConfig:{ComponenteFormulario:ee,modalConfig:F.OS.Large,configAgregar:{acceso:E.Agregar,params:{idAnalisisRiesgoTrabajo:0}},configEditar:{acceso:E.Editar}},configEliminar:{acceso:E.Eliminar,elementToString:v=>`${v.idAnalisisRiesgoTareas}`}}}ngOnInit(){super.onInit(),this.cargarDatos(this.idAnalisisRiesgoTrabajo)}consultarGrid(){return this.analisisRiesgoTareasService.consultarParaGrid(this.idAnalisisRiesgoTrabajo)}eliminar(i){throw new Error("Method not implemented.")}cargarDatos(i){this.idAnalisisRiesgoTrabajo=i,this.crudConfig?.formConfig?.configAgregar?.params&&(this.crudConfig.formConfig.configAgregar.params.idAnalisisRiesgoTrabajo=this.idAnalisisRiesgoTrabajo),super.onInit()}static#e=this.\u0275fac=function(t){return new(t||ie)(e.Y36(q),e.Y36(m.V),e.Y36(B.Q),e.Y36(_.tT),e.Y36(_.UZ))};static#i=this.\u0275cmp=e.Xpm({type:ie,selectors:[["app-analisis-riesgo-tareas"]],inputs:{idAnalisisRiesgoTrabajo:"idAnalisisRiesgoTrabajo"},features:[e.qOj],decls:1,vars:4,consts:[["titulo","Descripci\xf3n de Tarea","tituloBoton","Descripci\xf3n de Tarea",3,"columns","crudConfig","elementos$","tieneAccesoAgregar$","agregarClick","gridClick"]],template:function(t,a){1&t&&(e.TgZ(0,"app-catalogo-base",0),e.NdJ("agregarClick",function(){return a.agregar()})("gridClick",function(r){return a.onGridClick(r)}),e.qZA()),2&t&&e.Q6J("columns",a.columns)("crudConfig",a.crudConfig)("elementos$",a.registros$)("tieneAccesoAgregar$",a.tieneAccesoAgregar$)},dependencies:[pe.B]})}class te{static#e=this.\u0275fac=function(t){return new(t||te)};static#i=this.\u0275mod=e.oAB({type:te});static#t=this.\u0275inj=e.cJS({providers:[B.Q,p,L],imports:[Q.m81,ve.Z,H.kn,_e.u,Q.fwJ,se.P4,Q.zkK,Y.A0,ke.H3.forRoot(),fe.a,Ye.Db.forRoot(),Be.To,A.u5,n.ez,Qe.o,$,V]})}e.B6R(O,function(){return[Te.B,se.wW,se.AH,ie,K,z,L,X]},[]);class ae{static#e=this.\u0275fac=function(t){return new(t||ae)};static#i=this.\u0275mod=e.oAB({type:ae});static#t=this.\u0275inj=e.cJS({imports:[n.ez,W,Ae.A,ve.Z,Q.zkK,fe.a,A.u5,H.kn,Y.A0,_e.u,te,me.f]})}},8816:(P,T,s)=>{s.d(T,{Y:()=>h,f:()=>f});var n=s(37340),g=s(94650);const c="400ms cubic-bezier(0.4,0.0,0.2,1)",M=[(0,n.oB)({height:0,visibility:"hidden"}),(0,n.jt)(c,(0,n.oB)({height:"*",visibility:"visible"}))],l=[(0,n.oB)({height:"*",visibility:"visible"}),(0,n.jt)(c,(0,n.oB)({height:0,visibility:"hidden"}))];class h{constructor(u,e,b){this._el=u,this._renderer=e,this.collapsed=new g.vpe,this.collapses=new g.vpe,this.expanded=new g.vpe,this.expands=new g.vpe,this.isExpanded=!0,this.collapseNewValue=!0,this.isCollapsed=!1,this.isCollapse=!0,this.isCollapsing=!1,this.isAnimated=!1,this._display="block",this._stylesLoaded=!1,this._COLLAPSE_ACTION_NAME="collapse",this._EXPAND_ACTION_NAME="expand",this._factoryCollapseAnimation=b.build(l),this._factoryExpandAnimation=b.build(M)}set display(u){this._display=u,"none"!==u?this.isAnimated?this.toggle():this.show():this.hide()}set collapse(u){this.collapseNewValue=u,(!this._player||this._isAnimationDone)&&(this.isExpanded=u,this.toggle())}get collapse(){return this.isExpanded}ngAfterViewChecked(){this._stylesLoaded=!0,this._player&&this._isAnimationDone&&(this._player.reset(),this._renderer.setStyle(this._el.nativeElement,"height","*"))}toggle(){this.isExpanded?this.hide():this.show()}hide(){this.isCollapsing=!0,this.isExpanded=!1,this.isCollapsed=!0,this.isCollapsing=!1,this.collapses.emit(this),this._isAnimationDone=!1,this.animationRun(this.isAnimated,this._COLLAPSE_ACTION_NAME)(()=>{this._isAnimationDone=!0,this.collapseNewValue!==this.isCollapsed&&this.isAnimated?this.show():(this.collapsed.emit(this),this._renderer.setStyle(this._el.nativeElement,"display","none"))})}show(){this._renderer.setStyle(this._el.nativeElement,"display",this._display),this.isCollapsing=!0,this.isExpanded=!0,this.isCollapsed=!1,this.isCollapsing=!1,this.expands.emit(this),this._isAnimationDone=!1,this.animationRun(this.isAnimated,this._EXPAND_ACTION_NAME)(()=>{this._isAnimationDone=!0,this.collapseNewValue!==this.isCollapsed&&this.isAnimated?this.hide():(this.expanded.emit(this),this._renderer.removeStyle(this._el.nativeElement,"overflow"))})}animationRun(u,e){if(!u||!this._stylesLoaded)return p=>p();this._renderer.setStyle(this._el.nativeElement,"overflow","hidden"),this._renderer.addClass(this._el.nativeElement,"collapse");const b=e===this._EXPAND_ACTION_NAME?this._factoryExpandAnimation:this._factoryCollapseAnimation;return this._player&&this._player.reset(),this._player=b.create(this._el.nativeElement),this._player.play(),p=>this._player?.onDone(p)}}h.\u0275fac=function(u){return new(u||h)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(n._j))},h.\u0275dir=g.lG2({type:h,selectors:[["","collapse",""]],hostVars:9,hostBindings:function(u,e){2&u&&(g.uIk("aria-hidden",e.isCollapsed),g.ekj("collapse",e.isCollapse)("in",e.isExpanded)("show",e.isExpanded)("collapsing",e.isCollapsing))},inputs:{display:"display",isAnimated:"isAnimated",collapse:"collapse"},outputs:{collapsed:"collapsed",collapses:"collapses",expanded:"expanded",expands:"expands"},exportAs:["bs-collapse"]});class f{static forRoot(){return{ngModule:f,providers:[]}}}f.\u0275fac=function(u){return new(u||f)},f.\u0275mod=g.oAB({type:f}),f.\u0275inj=g.cJS({})}}]);