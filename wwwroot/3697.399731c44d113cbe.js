"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[3697],{63697:(L,v,s)=>{s.r(v),s.d(v,{ReporteTrimestralModule:()=>T});var _=s(36895),e=s(94650),C=s(80529);class u{constructor(i){this.http=i,this.dataUrl="reportetrimestral/"}descargarPdfPorFiltro(i){return this.http.post(this.dataUrl+"pdf",i,{responseType:"arrayBuffer",observe:"response"})}descargarXlsPorFiltro(i){return this.http.post(this.dataUrl+"xls",i)}static#e=this.\u0275fac=function(o){return new(o||u)(e.LFG(C.eN))};static#t=this.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}var E=s(51763),h=s(90061),c=s(3930),f=s(37084),n=s(71436),d=s(88796),a=s(24006),m=s(8816),B=s(63405),b=s(9116),N=s(13050),U=s(86936);class w{}var A=s(50986);function x(g,i){1&g&&(e.TgZ(0,"div",31),e._uU(1," La fecha es requerida "),e.qZA())}function F(g,i){1&g&&(e.TgZ(0,"div",31),e._uU(1," El estatus es requerido "),e.qZA())}function Z(g,i){1&g&&e._UZ(0,"i",32)}function S(g,i){1&g&&e._UZ(0,"i",33)}const K=function(){return{minMode:"year",adaptivePosition:!0,dateInputFormat:"YYYY"}};class M{constructor(i,o){this.reporteTrimestralService=i,this.contratistaService=o,this.nombreArchivo="Reporte Trimestral.pdf",this.configDate=A.g.CONFIG_DATEPICKER,this.configDateAnio=A.g.CONFIG_DATEPICKER_YEAR,this.placeHolderSelect=A.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=A.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.isCollapsed=!0,this.fecha=new Date((new Date).getFullYear(),0),this.estatusList=[{nombre:"Activo",idEstatus:!0},{nombre:"Inactivo",idEstatus:!1}],this.contratistaList=new Array,this.b64toBlob=(t,p="",l=512)=>{const r=atob(t),I=[];for(let D=0;D<r.length;D+=l){const P=r.slice(D,D+l),R=new Array(P.length);for(let O=0;O<P.length;O++)R[O]=P.charCodeAt(O);const Y=new Uint8Array(R);I.push(Y)}return new Blob(I,{type:p})}}ngOnInit(){this.filtro=new w,this.consultarContratistas(),this.filtro.estatus=!0}consultarContratistas(){this.contratistaService.consultarParaSelector().subscribe(i=>{this.contratistaList=i})}consultarPDF(){this.filtro.anio=this.fecha.getFullYear(),this.reporteTrimestralService.descargarPdfPorFiltro(this.filtro).subscribe(i=>{this.archivo=i.body})}enviarFormulario(i){this.consultarPDF()}isCollapsedFunction(){this.isCollapsed=!this.isCollapsed,this.isCollapsed?this.height="calc(80vh - 55px)":this.height="calc(64vh - 55px)"}consultarXLS(){this.filtro.anio=this.fecha.getFullYear(),this.reporteTrimestralService.descargarXlsPorFiltro(this.filtro).subscribe(i=>{let o,t=this.b64toBlob(i.archivo,i.tipoMime);o=URL.createObjectURL(t);var p=document.createElement("a");p.href=o,p.download=i.nombreArchivo,p.click()})}static#e=this.\u0275fac=function(o){return new(o||M)(e.Y36(u),e.Y36(E.m))};static#t=this.\u0275cmp=e.Xpm({type:M,selectors:[["app-reporte-trimestral"]],decls:50,vars:23,consts:[[1,"contenedor"],[1,"cuerpo-contenedor"],["novalidate","novalidate",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],[3,"collapse","isAnimated"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"label-input"],[1,"date-input-container"],["name","fecha","required","","type","number","autocomplete","off","placeholder","aaaa","bsDatepicker","",1,"form-control",3,"ngModel","bsConfig","ngModelChange"],["fechaModel","ngModel"],[1,"fa-regular","fa-calendar-days"],["class","error",4,"ngIf"],[1,"label-input","required-label"],["name","estatus","required","","bindLabel","nombre","bindValue","idEstatus",3,"ngModel","items","placeholder","notFoundText","ngModelChange"],["estatusRevSeg","ngModel"],["name","contratistaRevSegName","bindLabel","nombreComercial","bindValue","idUsuario",3,"ngModel","items","placeholder","multiple","notFoundText","ngModelChange"],["contratistaRevSeg","ngModel"],["type","button",1,"btn-primario",3,"click"],[1,"form-row","panel-busqueda","mb-4"],[1,"panel-carga-elementos","center-element-vertically",3,"click"],[1,"titulo-panel"],[1,"arow-down-up"],["class","fa fa-chevron-down",4,"ngIf"],["class","fa fa-chevron-up",4,"ngIf"],[1,"titulo-contenedor"],[1,"contenedor-excel"],[1,"excel",3,"click"],[1,"col-md-12"],[3,"src","height","useBrowserLocale","zoom","filenameForDownload"],[1,"error"],[1,"fa","fa-chevron-down"],[1,"fa","fa-chevron-up"]],template:function(o,t){if(1&o){const p=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"form",2,3),e.NdJ("keydown.enter",function(r){return r.preventDefault()})("ngSubmit",function(){e.CHM(p);const r=e.MAs(3);return e.KtG(t.enviarFormulario(r))}),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"label",8),e._uU(9,"A\xf1o"),e.qZA(),e.TgZ(10,"div",9)(11,"input",10,11),e.NdJ("ngModelChange",function(r){return t.fecha=r}),e.qZA(),e._UZ(13,"i",12),e.YNc(14,x,2,0,"div",13),e.qZA()()(),e.TgZ(15,"div",6)(16,"div",7)(17,"label",14),e._uU(18,"Estatus"),e.qZA(),e.TgZ(19,"div")(20,"ng-select",15,16),e.NdJ("ngModelChange",function(r){return t.filtro.estatus=r}),e.qZA(),e.YNc(22,F,2,0,"div",13),e.qZA()()(),e.TgZ(23,"div",6)(24,"div",7)(25,"label",8),e._uU(26,"Contratista"),e.qZA(),e.TgZ(27,"div")(28,"ng-select",17,18),e.NdJ("ngModelChange",function(r){return t.filtro.idContratistas=r}),e.qZA()()()()(),e.TgZ(30,"div",5)(31,"div",6)(32,"div",7)(33,"button",19),e.NdJ("click",function(){e.CHM(p);const r=e.MAs(3);return e.KtG(t.enviarFormulario(r))}),e._uU(34," Generar Reporte "),e.qZA()()()()()(),e.TgZ(35,"div",20)(36,"div",21),e.NdJ("click",function(){return t.isCollapsedFunction()}),e.TgZ(37,"span",22),e._uU(38,"Panel de B\xfasqueda"),e.qZA(),e.TgZ(39,"span",23),e.YNc(40,Z,1,0,"i",24),e.YNc(41,S,1,0,"i",25),e.qZA()()(),e.TgZ(42,"div",5)(43,"div",26),e._uU(44,"Reporte Trimestral"),e.qZA(),e.TgZ(45,"div",27)(46,"button",28),e.NdJ("click",function(){return t.consultarXLS()}),e.qZA()()(),e.TgZ(47,"div",5)(48,"div",29),e._UZ(49,"ngx-extended-pdf-viewer",30),e.qZA()()()()}if(2&o){const p=e.MAs(12),l=e.MAs(21);e.xp6(4),e.Q6J("collapse",t.isCollapsed)("isAnimated",!0),e.xp6(7),e.Q6J("ngModel",t.fecha)("bsConfig",e.DdM(22,K)),e.xp6(3),e.Q6J("ngIf",p.invalid&&p.touched),e.xp6(6),e.Q6J("ngModel",t.filtro.estatus)("items",t.estatusList)("placeholder",t.placeHolderSelect)("notFoundText",t.placeHolderNoOptions),e.xp6(2),e.Q6J("ngIf",l.invalid&&l.touched),e.xp6(6),e.Q6J("ngModel",t.filtro.idContratistas)("items",t.contratistaList)("placeholder",t.placeHolderSelect)("multiple",!0)("notFoundText",t.placeHolderNoOptions),e.xp6(12),e.Q6J("ngIf",t.isCollapsed),e.xp6(1),e.Q6J("ngIf",!t.isCollapsed),e.xp6(8),e.Q6J("src",t.archivo)("height",t.height)("useBrowserLocale",!0)("zoom","page-width")("filenameForDownload",t.nombreArchivo)}},dependencies:[_.O5,m.Y,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.On,a.F,d.w9,h.Np,h.Y5,c.S3],styles:["input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{background-color:#fff;transform:translate(70px)}.date-input-container[_ngcontent-%COMP%]{position:relative;width:100%}.date-input-container[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{width:100%;padding-right:30px}.date-input-container[_ngcontent-%COMP%]   .fa-calendar-days[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);pointer-events:none}.excel[_ngcontent-%COMP%]{border:none;width:20px;height:38px;background-image:url(svg-ico-18x18-Exportar_Excel.69142fbcdf367676.svg);background-size:100%;background-color:#fff;background-repeat:no-repeat}.contenedor-excel[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}"]})}const W=[{path:"",component:M,canActivate:[N.m],data:{title:"Consulta",acceso:U.FC.Consultar}}];class y{static#e=this.\u0275fac=function(o){return new(o||y)};static#t=this.\u0275mod=e.oAB({type:y});static#i=this.\u0275inj=e.cJS({imports:[b.Bz.forChild(W),b.Bz]})}class T{static#e=this.\u0275fac=function(o){return new(o||T)};static#t=this.\u0275mod=e.oAB({type:T});static#i=this.\u0275inj=e.cJS({providers:[u,E.m],imports:[_.ez,m.f,B.m,h.kn,c.g3,d.A0,f.To,n.a,a.u5,y]})}},8816:(L,v,s)=>{s.d(v,{Y:()=>h,f:()=>c});var _=s(37340),e=s(94650);const C="400ms cubic-bezier(0.4,0.0,0.2,1)",u=[(0,_.oB)({height:0,visibility:"hidden"}),(0,_.jt)(C,(0,_.oB)({height:"*",visibility:"visible"}))],E=[(0,_.oB)({height:"*",visibility:"visible"}),(0,_.jt)(C,(0,_.oB)({height:0,visibility:"hidden"}))];class h{constructor(n,d,a){this._el=n,this._renderer=d,this.collapsed=new e.vpe,this.collapses=new e.vpe,this.expanded=new e.vpe,this.expands=new e.vpe,this.isExpanded=!0,this.collapseNewValue=!0,this.isCollapsed=!1,this.isCollapse=!0,this.isCollapsing=!1,this.isAnimated=!1,this._display="block",this._stylesLoaded=!1,this._COLLAPSE_ACTION_NAME="collapse",this._EXPAND_ACTION_NAME="expand",this._factoryCollapseAnimation=a.build(E),this._factoryExpandAnimation=a.build(u)}set display(n){this._display=n,"none"!==n?this.isAnimated?this.toggle():this.show():this.hide()}set collapse(n){this.collapseNewValue=n,(!this._player||this._isAnimationDone)&&(this.isExpanded=n,this.toggle())}get collapse(){return this.isExpanded}ngAfterViewChecked(){this._stylesLoaded=!0,this._player&&this._isAnimationDone&&(this._player.reset(),this._renderer.setStyle(this._el.nativeElement,"height","*"))}toggle(){this.isExpanded?this.hide():this.show()}hide(){this.isCollapsing=!0,this.isExpanded=!1,this.isCollapsed=!0,this.isCollapsing=!1,this.collapses.emit(this),this._isAnimationDone=!1,this.animationRun(this.isAnimated,this._COLLAPSE_ACTION_NAME)(()=>{this._isAnimationDone=!0,this.collapseNewValue!==this.isCollapsed&&this.isAnimated?this.show():(this.collapsed.emit(this),this._renderer.setStyle(this._el.nativeElement,"display","none"))})}show(){this._renderer.setStyle(this._el.nativeElement,"display",this._display),this.isCollapsing=!0,this.isExpanded=!0,this.isCollapsed=!1,this.isCollapsing=!1,this.expands.emit(this),this._isAnimationDone=!1,this.animationRun(this.isAnimated,this._EXPAND_ACTION_NAME)(()=>{this._isAnimationDone=!0,this.collapseNewValue!==this.isCollapsed&&this.isAnimated?this.hide():(this.expanded.emit(this),this._renderer.removeStyle(this._el.nativeElement,"overflow"))})}animationRun(n,d){if(!n||!this._stylesLoaded)return m=>m();this._renderer.setStyle(this._el.nativeElement,"overflow","hidden"),this._renderer.addClass(this._el.nativeElement,"collapse");const a=d===this._EXPAND_ACTION_NAME?this._factoryExpandAnimation:this._factoryCollapseAnimation;return this._player&&this._player.reset(),this._player=a.create(this._el.nativeElement),this._player.play(),m=>this._player?.onDone(m)}}h.\u0275fac=function(n){return new(n||h)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(_._j))},h.\u0275dir=e.lG2({type:h,selectors:[["","collapse",""]],hostVars:9,hostBindings:function(n,d){2&n&&(e.uIk("aria-hidden",d.isCollapsed),e.ekj("collapse",d.isCollapse)("in",d.isExpanded)("show",d.isExpanded)("collapsing",d.isCollapsing))},inputs:{display:"display",isAnimated:"isAnimated",collapse:"collapse"},outputs:{collapsed:"collapsed",collapses:"collapses",expanded:"expanded",expands:"expands"},exportAs:["bs-collapse"]});class c{static forRoot(){return{ngModule:c,providers:[]}}}c.\u0275fac=function(n){return new(n||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({})}}]);