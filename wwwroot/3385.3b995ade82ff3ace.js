"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[3385],{86990:(S,p,a)=>{a.d(p,{q:()=>h});var m=a(94650),c=a(80529);class h{constructor(u){this.http=u,this.dataUrl="TipoExamen/"}consultarTodosParaSelector(){return this.http.get(this.dataUrl+"consultarTodosParaSelector")}consultar(u){return this.http.get(this.dataUrl+`consultar/${u}`)}consultarGeneral(){return this.http.get(this.dataUrl+"consultarGeneral")}agregar(u){return this.http.post(this.dataUrl+"agregar",u)}editar(u){return this.http.put(this.dataUrl+"editar",u)}eliminar(u){return this.http.delete(this.dataUrl+`eliminar/${u}`)}static#e=this.\u0275fac=function(A){return new(A||h)(m.LFG(c.eN))};static#n=this.\u0275prov=m.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}},40675:(S,p,a)=>{a.d(p,{V_:()=>c,aQ:()=>d,vf:()=>h});var c,u;a(40675);(u=c||(c={})).Agregar="Agregar",u.Editar="Editar",u.Ver="Consultar";const h="Seleccione una opci\xf3n",d="No hay opciones disponibles"},14815:(S,p,a)=>{var m,c;a.d(p,{m:()=>m}),(c=m||(m={})).Cruz="fa fa-times",c.Pesos="fa fa-dollar-sign",c.Cambio="fas fa-exchange-alt",c.CheckOut="fas fa-door-open",c.Exito="fas fa-check"},94540:(S,p,a)=>{a.d(p,{gy:()=>c,sO:()=>h});var c,d;a(94540);(d=c||(c={})).Editar="edit",d.Eliminar="delete",d.Ver="see",d.DescargarPdf="DescargarPdf",d.Revisar="Revisar",d.Presentar="presentar";const h={headerName:"",field:"",cellClass:"center-ag",minWidth:44,maxWidth:44,suppressMovable:!0,resizable:!1,filter:!1,lockPinned:!0,pinned:"right",lockPosition:!0}},43385:(S,p,a)=>{a.r(p),a.d(p,{TipoExamenModule:()=>I});var m=a(36895),c=a(20388),h=a(71436),d=a(24006),u=a(63405),A=a(88796),e=a(94650);class C{static#e=this.\u0275fac=function(t){return new(t||C)};static#n=this.\u0275mod=e.oAB({type:C});static#t=this.\u0275inj=e.cJS({imports:[m.ez,A.A0,d.u5]})}var _=a(9116),G=a(13050),H=a(15861);class O{constructor(){}}var E=a(31321),v=a(94540),W=a(49808),k=a(50590);class z{}var g=a(40675),Y=a(12846),N=a(2060),B=a(80529);class f{constructor(n){this.http=n,this.dataUrl="contenidoExamen/"}consultarTodosParaSelector(){return this.http.get(this.dataUrl+"consultarTodosParaSelector")}consultar(n){return this.http.get(this.dataUrl+`consultar/${n}`)}consultarGeneral(n){return this.http.get(this.dataUrl+`consultarGeneral/${n}`)}agregar(n){return this.http.post(this.dataUrl+"agregar",n)}editar(n){return this.http.put(this.dataUrl+"editar",n)}eliminar(n){return this.http.delete(this.dataUrl+`eliminar/${n}`)}static#e=this.\u0275fac=function(t){return new(t||f)(e.LFG(B.eN))};static#n=this.\u0275prov=e.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}var K=a(21722),X=a(66606);function $(l,n){1&l&&(e.TgZ(0,"div",30),e._uU(1," La clave es requerida "),e.qZA())}function ee(l,n){1&l&&(e.TgZ(0,"div",30),e._uU(1," La Evaluaci\xf3n es requerida "),e.qZA())}function ne(l,n){1&l&&(e.TgZ(0,"div",30),e._uU(1," La Asignatura es requerida "),e.qZA())}function te(l,n){1&l&&(e.TgZ(0,"div",30),e._uU(1," El Nivel de la Evaluaci\xf3n es requerido "),e.qZA())}function ie(l,n){1&l&&(e.TgZ(0,"div",30),e._uU(1," La Cantidad de Reactivos es requerida "),e.qZA())}function ae(l,n){1&l&&(e.TgZ(0,"div",30),e._uU(1," La Duraci\xf3n Total es requerida "),e.qZA())}class M{constructor(n,t,i,o,r){this.formularioService=n,this.mensajeService=t,this.contenidoExamenService=i,this.asignaturaService=o,this.nivelExamenService=r,this.MENSAJE_AGREGAR="El contenido del Evaluaci\xf3n ha sido agregado",this.MENSAJE_EDITAR="El contenido del Evaluaci\xf3n ha sido modificado",this.esEdicion=!1,this.tipoExamen=new O,this.submitting=!1,this.contenidoExamen=new z,this.placeHolderSelect=g.vf,this.placeHolderNoOptions=g.aQ,this.asignaturaList=[],this.nivelExamenList=[]}ngOnInit(){this.accion===g.V_.Agregar?(this.contenidoExamen.idTipoExamen=this.tipoExamen.idTipoExamen,this.contenidoExamen.fechaAlta=new Date,this.contenidoExamen.estatus=!0):this.accion===g.V_.Editar&&this.consultarContenidoExamen(this.idContenidoExamen),this.consultarAsignaturas(),this.consultarNivelesExamen()}consultarContenidoExamen(n){this.contenidoExamenService.consultar(n).subscribe(t=>{t.fechaAlta=new Date(t.fechaAlta),t.idTipoExamen=this.tipoExamen.idTipoExamen,this.contenidoExamen=t})}consultarAsignaturas(){this.asignaturaService.consultarTodosParaSelector().subscribe(n=>{this.asignaturaList=n})}consultarNivelesExamen(){this.nivelExamenService.consultarTodosParaSelector().subscribe(n=>{this.nivelExamenList=n})}enviarFormulario(n){if(this.submitting=!0,!n.valid)return this.formularioService.validarCamposRequeridos(n),void(this.submitting=!1);this.accion===g.V_.Agregar?this.agregar():this.accion===g.V_.Editar&&this.editar()}agregar(){this.contenidoExamenService.agregar(this.contenidoExamen).subscribe({next:()=>{this.mensajeService.modalExito(this.MENSAJE_AGREGAR),this.onClose(!0)},error:n=>{this.submitting=!1}})}editar(){this.contenidoExamenService.editar(this.contenidoExamen).subscribe({next:()=>{this.mensajeService.modalExito(this.MENSAJE_EDITAR),this.onClose(!0)},error:n=>{this.submitting=!1}})}cancelar(){this.onClose(!0)}numberOnly(n){const t=n.which?n.which:n.keyCode;return!(t>31&&(t<48||t>57))}static#e=this.\u0275fac=function(t){return new(t||M)(e.Y36(Y.Y),e.Y36(N.V),e.Y36(f),e.Y36(K.x),e.Y36(X.y))};static#n=this.\u0275cmp=e.Xpm({type:M,selectors:[["app-contenido-examen-formulario"]],decls:66,vars:26,consts:[[1,"d-flex"],[1,"barra-lateral-modal"],[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],[1,"far","fa-times-circle"],["novalidate","novalidate",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],["id","modal",1,"modal-body",2,"overflow","visible"],[1,"row"],[1,"col-1",2,"width","30%"],[1,"form-group"],[1,"label-input","required-label"],["name","clave","type","text","maxlength","30",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["clave","ngModel"],["class","error",4,"ngIf"],["name","nombre","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["nombre","ngModel"],["name","asignaturaLstName","bindLabel","descripcion","bindValue","idAsignatura",3,"items","required","ngModel","placeholder","notFoundText","ngModelChange"],["asignaturaLst","ngModel"],["name","nivelLstName","bindLabel","descripcion","bindValue","idNivelExamen",3,"items","required","ngModel","placeholder","notFoundText","ngModelChange"],["nivelLst","ngModel"],[1,"col-1",2,"width","15%"],["name","totalPreguntas","type","text","maxlength","3",1,"form-control",3,"ngModel","required","ngModelChange","keypress"],["totalPreguntas","ngModel"],["name","duracion","type","text","maxlength","3",1,"form-control",3,"ngModel","required","ngModelChange","keypress"],["duracion","ngModel"],[1,"modal-footer"],["type","button",1,"btn-secundario","btn-margin-right",3,"click"],["type","submit",1,"btn-primario","btn-margin-left",3,"disabled"],[1,"error"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div"),e._uU(5),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return i.cancelar()}),e._UZ(7,"i",5),e.qZA()(),e.TgZ(8,"form",6,7),e.NdJ("keydown.enter",function(s){return s.preventDefault()})("ngSubmit",function(){e.CHM(o);const s=e.MAs(9);return e.KtG(i.enviarFormulario(s))}),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"label",12),e._uU(15,"Clave"),e.qZA(),e.TgZ(16,"div")(17,"input",13,14),e.NdJ("ngModelChange",function(s){return i.contenidoExamen.clave=s}),e.qZA()(),e.YNc(19,$,2,0,"div",15),e.qZA()(),e.TgZ(20,"div",10)(21,"div",11)(22,"label",12),e._uU(23,"Evaluaci\xf3n"),e.qZA(),e.TgZ(24,"div")(25,"input",16,17),e.NdJ("ngModelChange",function(s){return i.tipoExamen.nombre=s}),e.qZA()(),e.YNc(27,ee,2,0,"div",15),e.qZA()(),e.TgZ(28,"div",10)(29,"div",11)(30,"label",12),e._uU(31,"Asignatura"),e.qZA(),e.TgZ(32,"div")(33,"ng-select",18,19),e.NdJ("ngModelChange",function(s){return i.contenidoExamen.idAsignatura=s}),e.qZA()(),e.YNc(35,ne,2,0,"div",15),e.qZA()()(),e.TgZ(36,"div",9)(37,"div",10)(38,"div",11)(39,"label",12),e._uU(40,"Nivel de Evaluaci\xf3n"),e.qZA(),e.TgZ(41,"div")(42,"ng-select",20,21),e.NdJ("ngModelChange",function(s){return i.contenidoExamen.idNivelExamen=s}),e.qZA()(),e.YNc(44,te,2,0,"div",15),e.qZA()(),e.TgZ(45,"div",22)(46,"div",11)(47,"label",12),e._uU(48,"Cantidad Reactivos"),e.qZA(),e.TgZ(49,"div")(50,"input",23,24),e.NdJ("ngModelChange",function(s){return i.contenidoExamen.totalPreguntas=s})("keypress",function(s){return i.numberOnly(s)}),e.qZA()(),e.YNc(52,ie,2,0,"div",15),e.qZA()(),e.TgZ(53,"div",22)(54,"div",11)(55,"label",12),e._uU(56,"Duraci\xf3n Total(min)"),e.qZA(),e.TgZ(57,"div")(58,"input",25,26),e.NdJ("ngModelChange",function(s){return i.contenidoExamen.duracion=s})("keypress",function(s){return i.numberOnly(s)}),e.qZA()(),e.YNc(60,ae,2,0,"div",15),e.qZA()()()(),e.TgZ(61,"div",27)(62,"button",28),e.NdJ("click",function(){return i.cancelar()}),e._uU(63,"Cancelar"),e.qZA(),e.TgZ(64,"button",29),e._uU(65,"Guardar Contenido de Asignatura"),e.qZA()()()()()}if(2&t){const o=e.MAs(18),r=e.MAs(26),s=e.MAs(34),x=e.MAs(43),T=e.MAs(51),R=e.MAs(59);e.xp6(5),e.hij("Asignaturas de Contenido de Evaluaci\xf3n - ",i.accion," "),e.xp6(12),e.Q6J("ngModel",i.contenidoExamen.clave)("required",!0)("disabled",i.esEdicion),e.xp6(2),e.Q6J("ngIf",(null==o.errors?null:o.errors.required)&&o.touched),e.xp6(6),e.Q6J("ngModel",i.tipoExamen.nombre),e.xp6(2),e.Q6J("ngIf",(null==r.errors?null:r.errors.required)&&r.touched),e.xp6(6),e.Q6J("items",i.asignaturaList)("required",!0)("ngModel",i.contenidoExamen.idAsignatura)("placeholder",i.placeHolderSelect)("notFoundText",i.placeHolderNoOptions),e.xp6(2),e.Q6J("ngIf",(null==s.errors?null:s.errors.required)&&s.touched),e.xp6(7),e.Q6J("items",i.nivelExamenList)("required",!0)("ngModel",i.contenidoExamen.idNivelExamen)("placeholder",i.placeHolderSelect)("notFoundText",i.placeHolderNoOptions),e.xp6(2),e.Q6J("ngIf",(null==x.errors?null:x.errors.required)&&x.touched),e.xp6(6),e.Q6J("ngModel",i.contenidoExamen.totalPreguntas)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==T.errors?null:T.errors.required)&&T.touched),e.xp6(6),e.Q6J("ngModel",i.contenidoExamen.duracion)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==R.errors?null:R.errors.required)&&R.touched),e.xp6(4),e.Q6J("disabled",i.submitting)}},dependencies:[m.O5,A.w9,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.nD,d.On,d.F],encapsulation:2})}var F=a(52522),D=a(14815),Q=a(62861),V=a(21006),P=a(86990),j=a(58390);function oe(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"div",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.agregar())}),e.TgZ(1,"button",8),e._uU(2,"Agregar Asignatura de Contenido de Evaluaci\xf3n"),e.qZA()()}}class b{agregarTipoExamen(n){this.tipoExamen=n}constructor(n,t,i,o,r,s,x,T){this.accesoService=n,this.contenidoExamenService=t,this.encryptionService=i,this.mensajeService=o,this.modalService=r,this.route=s,this.router=x,this.tipoExamenService=T,this.HEADER_GRID="Contenido de Evaluaci\xf3n",this.contenidoExamenList=[],this.tipoExamen=new O,this.tieneAccesoAgregar=!1,this.EDITAR_TIPO_EXAMEN=E.r_.Editar,this.ELIMINAR_TIPO_EXAMEN=E.r_.Eliminar,this.columns=[{headerName:"Clave",field:"clave",minWidth:150},{headerName:"Asignatura",field:"asignatura",minWidth:150},{headerName:"Nivel de Evaluaci\xf3n",field:"nivelExamen",minWidth:150},{headerName:"Cantidad de Reactivos",field:"totalPreguntas",minWidth:150},{headerName:"Duraci\xf3n Total (min)",field:"duracion",minWidth:150}]}ngOnInit(){this.consultarTipoExamen(this.idTipoExamen),this.consultarAccesoAgregar(),this.consultarGrid()}consultarAccesoAgregar(){this.accesoService.tieneAcceso(E.r_.Agregar).subscribe(n=>{this.tieneAccesoAgregar=n})}consultarQueryParams(){var n=this;return(0,H.Z)(function*(){const t=yield(0,W.n)(n.route.queryParams.pipe((0,k.P)())),i=n.encryptionService.readUrlParams(t);n.idTipoExamen=i.idTipoExamen})()}consultarTipoExamen(n){this.tipoExamenService.consultar(n).subscribe(t=>{this.tipoExamen=t})}consultarGrid(){this.contenidoExamenService.consultarGeneral(this.idTipoExamen).subscribe(n=>{this.contenidoExamenList=n})}onGridClick(n){n.accion===v.gy.Editar?this.editar(n.data.idContenidoExamen):n.accion===v.gy.Eliminar?this.eliminar(n.data):(n.accion,v.gy.Ver)}agregar(){const n={accion:g.V_.Agregar,esEdicion:!1,tipoExamen:this.tipoExamen,onClose:i=>{i&&this.consultarGrid(),t.hide()}},t=this.modalService.show(M,{initialState:n,...F.OS.Large})}editar(n){const t={accion:g.V_.Editar,esEdicion:!0,idContenidoExamen:n,tipoExamen:this.tipoExamen,onClose:o=>{o&&this.consultarGrid(),i.hide()}},i=this.modalService.show(M,{initialState:t,...F.OS.Large})}eliminar(n){const o=`\xbfDesea eliminar el contenido de la evaluaci\xf3n: <strong>${n.clave}</strong>?`;this.mensajeService.modalConfirmacion(o,"Eliminar Contenido de la Evaluaci\xf3n",D.m.Cruz).then(()=>{this.contenidoExamenService.eliminar(n.idContenidoExamen).subscribe(()=>{this.mensajeService.modalExito("El contenido de la Evaluaci\xf3n ha sido eliminado"),this.consultarGrid()})})}backTo(){this.router.navigate(["administrador/encuesta/tipo-examen"])}static#e=this.\u0275fac=function(t){return new(t||b)(e.Y36(Q.Q),e.Y36(f),e.Y36(V.C),e.Y36(N.V),e.Y36(c.tT),e.Y36(_.gz),e.Y36(_.F0),e.Y36(P.q))};static#n=this.\u0275cmp=e.Xpm({type:b,selectors:[["app-contenido-examen"]],inputs:{contenidoExamenList:"contenidoExamenList",idTipoExamen:"idTipoExamen",entidad:"entidad"},decls:7,vars:6,consts:[[1,"contenedor"],[1,"cuerpo-contenedor"],[1,"row","justify-content-center"],[1,"col-md-12"],["class","contenedor-agregar",3,"click",4,"ngIf"],[3,"headerName","data","children","accesoEditar","accesoEliminar","event"],["gridNecesidad",""],[1,"contenedor-agregar",3,"click"],[1,"btn-agregar"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,oe,3,0,"div",4),e.TgZ(5,"app-grid-general",5,6),e.NdJ("event",function(r){return i.onGridClick(r)}),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("ngIf",i.tieneAccesoAgregar),e.xp6(1),e.Q6J("headerName",i.HEADER_GRID)("data",i.contenidoExamenList)("children",i.columns)("accesoEditar",i.EDITAR_TIPO_EXAMEN)("accesoEliminar",i.ELIMINAR_TIPO_EXAMEN))},dependencies:[m.O5,j.$],encapsulation:2})}const re=[{path:"",component:b,canActivate:[G.m],data:{title:"Contenido de Cuestionario",acceso:E.r_.Consultar}}];class y{static#e=this.\u0275fac=function(t){return new(t||y)};static#n=this.\u0275mod=e.oAB({type:y});static#t=this.\u0275inj=e.cJS({imports:[_.Bz.forChild(re),_.Bz]})}class J{static#e=this.\u0275fac=function(t){return new(t||J)};static#n=this.\u0275mod=e.oAB({type:J});static#t=this.\u0275inj=e.cJS({imports:[u.m,y,h.a,C]})}var w=a(13024);class q{static#e=this.\u0275fac=function(t){return new(t||q)};static#n=this.\u0275mod=e.oAB({type:q});static#t=this.\u0275inj=e.cJS({imports:[m.ez,d.u5,J,C,h.a,w.u]})}var se=a(383);function le(l,n){1&l&&(e.TgZ(0,"div",25),e._uU(1," La clave es requerida "),e.qZA())}function de(l,n){1&l&&(e.TgZ(0,"div",25),e._uU(1," La Evaluaci\xf3n es requerida "),e.qZA())}function ce(l,n){1&l&&(e.TgZ(0,"div",25),e._uU(1," La cantidad de Reactivos es requerida "),e.qZA())}function me(l,n){1&l&&(e.TgZ(0,"div",25),e._uU(1," La Duraci\xf3n Total es requerida "),e.qZA())}function ue(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"form",2,3),e.NdJ("keydown.enter",function(o){return o.preventDefault()})("ngSubmit",function(){e.CHM(t);const o=e.MAs(1),r=e.oxw();return e.KtG(r.enviarFormulario(o))}),e.TgZ(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"label",8),e._uU(7,"Clave"),e.qZA(),e.TgZ(8,"div")(9,"input",9,10),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.tipoExamen.clave=o)}),e.qZA()(),e.YNc(11,le,2,0,"div",11),e.qZA()(),e._UZ(12,"div",12),e.TgZ(13,"div",6)(14,"div",7)(15,"label",8),e._uU(16,"Evaluaci\xf3n"),e.qZA(),e.TgZ(17,"div")(18,"input",13,14),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.tipoExamen.nombre=o)}),e.qZA()(),e.YNc(20,de,2,0,"div",11),e.qZA()(),e._UZ(21,"div",12),e.TgZ(22,"div",15)(23,"div",7)(24,"label",8),e._uU(25,"Cantidad Reactivos"),e.qZA(),e.TgZ(26,"div")(27,"input",16,17),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.tipoExamen.totalPreguntas=o)}),e.qZA()(),e.YNc(29,ce,2,0,"div",11),e.qZA()(),e.TgZ(30,"div",15)(31,"div",7)(32,"label",8),e._uU(33,"Duraci\xf3n Total (min)"),e.qZA(),e.TgZ(34,"div")(35,"input",18,19),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.tipoExamen.duracion=o)})("keypress",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.numberOnly(o))}),e.qZA()(),e.YNc(37,me,2,0,"div",11),e.qZA()()(),e.TgZ(38,"div",20),e._uU(39," Asignatura de Contenido de Evaluaci\xf3n "),e.qZA(),e._UZ(40,"app-contenido-examen",21),e.qZA(),e.TgZ(41,"div",22)(42,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancelar())}),e._uU(43,"Cancelar"),e.qZA(),e.TgZ(44,"button",24),e._uU(45,"Guardar Evaluaci\xf3n"),e.qZA()()()}if(2&l){const t=e.MAs(10),i=e.MAs(19),o=e.MAs(28),r=e.MAs(36),s=e.oxw();e.xp6(9),e.Q6J("ngModel",s.tipoExamen.clave)("required",!0)("disabled",s.esEditar()),e.xp6(2),e.Q6J("ngIf",(null==t.errors?null:t.errors.required)&&t.touched),e.xp6(7),e.Q6J("ngModel",s.tipoExamen.nombre)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==i.errors?null:i.errors.required)&&i.touched),e.xp6(7),e.Q6J("ngModel",s.tipoExamen.totalPreguntas),e.xp6(2),e.Q6J("ngIf",(null==o.errors?null:o.errors.required)&&o.touched),e.xp6(6),e.Q6J("ngModel",s.tipoExamen.duracion)("required",!0)("disabled",s.esEditar()),e.xp6(2),e.Q6J("ngIf",(null==r.errors?null:r.errors.required)&&r.touched),e.xp6(3),e.Q6J("idTipoExamen",s.idTipoExamen)("contenidoExamenList",s.contenidoExamenList),e.xp6(4),e.Q6J("disabled",s.submitting)}}class Z{constructor(n,t,i,o){this.formularioService=n,this.mensajeService=t,this.tipoExamenService=i,this.contenidoExamenService=o,this.MENSAJE_AGREGAR="La evaluaci\xf3n ha sido agregada",this.MENSAJE_EDITAR="La evaluaci\xf3n ha sido modificada",this.esEdicion=!1,this.submitting=!1,this.tipoExamen=new O,this.contenidoExamenList=[]}ngOnInit(){this.accion===g.V_.Agregar?(this.tipoExamen.fechaAlta=new Date,this.tipoExamen.estatus=!0,this.tipoExamen.totalPreguntas=0):this.accion===g.V_.Editar&&(this.consultarTipoExamen(this.idTipoExamen),this.consultarContenidoExamen(this.idTipoExamen))}consultarContenidoExamen(n){this.contenidoExamenService.consultarGeneral(n).subscribe(t=>{this.contenidoExamenList=t})}consultarTipoExamen(n){this.tipoExamenService.consultar(n).subscribe(t=>{t.fechaAlta=new Date(t.fechaAlta),this.tipoExamen=t})}enviarFormulario(n){if(this.submitting=!0,!n.valid)return this.formularioService.validarCamposRequeridos(n),void(this.submitting=!1);this.accion===g.V_.Agregar?this.agregar():this.accion===g.V_.Editar&&this.editar()}agregar(){this.tipoExamenService.agregar(this.tipoExamen).subscribe({next:()=>{this.mensajeService.modalExito(this.MENSAJE_AGREGAR),this.onClose(!0)},error:n=>{this.submitting=!1}})}editar(){this.tipoExamenService.editar(this.tipoExamen).subscribe({next:()=>{this.mensajeService.modalExito(this.MENSAJE_EDITAR),this.onClose(!0)},error:n=>{this.submitting=!1}})}cancelar(){this.onClose(!0)}esEditar(){return this.accion===g.V_.Editar}numberOnly(n){const t=n.which?n.which:n.keyCode;return!(t>31&&(t<48||t>57))}static#e=this.\u0275fac=function(t){return new(t||Z)(e.Y36(Y.Y),e.Y36(N.V),e.Y36(P.q),e.Y36(f))};static#n=this.\u0275cmp=e.Xpm({type:Z,selectors:[["app-tipo-examen-formulario"]],decls:3,vars:1,consts:[[3,"titulo"],["modalBody",""],["novalidate","novalidate",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],["id","modal",1,"modal-body"],[1,"row"],[1,"col-1",2,"width","27%"],[1,"form-group"],[1,"label-input","required-label"],["name","clave","type","text",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["clave","ngModel"],["class","error",4,"ngIf"],[1,"col-1",2,"width","5%"],["name","nombre","type","text",1,"form-control",3,"ngModel","required","ngModelChange"],["nombre","ngModel"],[1,"col-1",2,"width","15%"],["name","totalPreguntas","type","text","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["totalPreguntas","ngModel"],["name","duracion","type","text","maxlength","3",1,"form-control",3,"ngModel","required","disabled","ngModelChange","keypress"],["duracion","ngModel"],[1,"subseccion"],[3,"idTipoExamen","contenidoExamenList"],[1,"modal-footer"],["type","button",1,"btn-secundario","btn-margin-right",3,"click"],["type","submit",1,"btn-primario","btn-margin-left",3,"disabled"],[1,"error"]],template:function(t,i){1&t&&(e.TgZ(0,"app-modal-base",0),e.YNc(1,ue,46,16,"ng-template",null,1,e.W1O),e.qZA()),2&t&&e.Q6J("titulo","Evaluaci\xf3n - "+i.accion)},dependencies:[m.O5,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.nD,d.On,d.F,b,se.B],encapsulation:2})}function ge(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.agregar())}),e.TgZ(1,"button",9),e._uU(2,"Agregar Evaluaci\xf3n"),e.qZA()()}}class L{constructor(n,t,i,o,r,s){this.accesoService=n,this.encryptionService=t,this.mensajeService=i,this.modalService=o,this.router=r,this.tipoExamenService=s,this.HEADER_GRID="Tipos de Examen",this.tieneAccesoAgregar=!1,this.EDITAR_TIPO_EXAMEN=E.r_.Editar,this.ELIMINAR_TIPO_EXAMEN=E.r_.Eliminar,this.tipoExamenList=[],this.columnaDetalle=Object.assign({headerName:"",field:"",action:v.gy.Ver,cellRendererSelector:x=>({component:"actionButton",params:{disabled:!1}}),resizable:!1,sortable:!1,filter:!1,suppressMovable:!0,lockPosition:!0,pinned:"right",minWidth:44,maxWidth:44},v.sO),this.columns=[{headerName:"Clave",field:"clave",minWidth:150},{headerName:"Evaluaci\xf3n",field:"nombre",minWidth:150},{headerName:"Cantidad de Reactivos (\u2211)",field:"totalPreguntas",minWidth:150},{headerName:"Duraci\xf3n Total (min) (\u2211)",field:"duracion",minWidth:150}]}ngOnInit(){this.consultarGrid(),this.consultarAccesoAgregar()}consultarAccesoAgregar(){this.accesoService.tieneAcceso(E.r_.Agregar).subscribe(n=>{this.tieneAccesoAgregar=n})}consultarGrid(){this.tipoExamenService.consultarGeneral().subscribe(n=>{this.tipoExamenList=n})}onGridClick(n){n.accion===v.gy.Editar?this.editar(n.data.idTipoExamen):n.accion===v.gy.Eliminar?this.eliminar(n.data):n.accion===v.gy.Ver&&this.ver(n.data.idTipoExamen)}agregar(){const n={accion:g.V_.Agregar,esEdicion:!1,onClose:i=>{i&&this.consultarGrid(),t.hide()}},t=this.modalService.show(Z,{initialState:n,...F.OS.Large})}editar(n){const t={accion:g.V_.Editar,esEdicion:!0,idTipoExamen:n,onClose:o=>{o&&this.consultarGrid(),i.hide()}},i=this.modalService.show(Z,{initialState:t,...F.OS.Large})}eliminar(n){const o=`\xbfDesea eliminar la Evaluaci\xf3n: <strong>${n.nombre}</strong>?`;this.mensajeService.modalConfirmacion(o,"Eliminar Evaluaci\xf3n",D.m.Cruz).then(()=>{this.tipoExamenService.eliminar(n.idTipoExamen).subscribe(()=>{this.mensajeService.modalExito("La Evaluaci\xf3n ha sido eliminada"),this.consultarGrid()})})}ver(n){this.router.navigate(["/administrador/encuesta/tipo-examen/contenido-examen"],{queryParams:this.encryptionService.generateURL({idTipoExamen:n.toString()})})}static#e=this.\u0275fac=function(t){return new(t||L)(e.Y36(Q.Q),e.Y36(V.C),e.Y36(N.V),e.Y36(c.tT),e.Y36(_.F0),e.Y36(P.q))};static#n=this.\u0275cmp=e.Xpm({type:L,selectors:[["app-tipo-examen"]],decls:9,vars:6,consts:[[1,"contenedor"],[1,"titulo-contenedor"],[1,"cuerpo-contenedor"],[1,"row","justify-content-center"],[1,"col-md-12"],["class","contenedor-agregar",3,"click",4,"ngIf"],[3,"headerName","data","children","accesoEditar","accesoEliminar","event"],["gridNecesidad",""],[1,"contenedor-agregar",3,"click"],[1,"btn-agregar"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Evaluaci\xf3n"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e.YNc(6,ge,3,0,"div",5),e.TgZ(7,"app-grid-general",6,7),e.NdJ("event",function(r){return i.onGridClick(r)}),e.qZA()()()()()),2&t&&(e.xp6(6),e.Q6J("ngIf",i.tieneAccesoAgregar),e.xp6(1),e.Q6J("headerName",i.HEADER_GRID)("data",i.tipoExamenList)("children",i.columns)("accesoEditar",i.EDITAR_TIPO_EXAMEN)("accesoEliminar",i.ELIMINAR_TIPO_EXAMEN))},dependencies:[m.O5,j.$],encapsulation:2})}const he=[{path:"",component:L,canActivate:[G.m],data:{title:"Tipo de Examen",acceso:E.r_.Consultar}}];class U{static#e=this.\u0275fac=function(t){return new(t||U)};static#n=this.\u0275mod=e.oAB({type:U});static#t=this.\u0275inj=e.cJS({imports:[_.Bz.forChild(he),_.Bz]})}var pe=a(63666),Ee=a(43876),ve=a(41283),_e=a(98520),fe=a(65197),xe=a(90061);class I{static#e=this.\u0275fac=function(t){return new(t||I)};static#n=this.\u0275mod=e.oAB({type:I});static#t=this.\u0275inj=e.cJS({imports:[m.ez,U,h.a,c.zk.forChild(),q,Ee.m81,fe.d,h.a,pe.xc,A.A0,ve.Z,c.zk.forChild(),xe.kn,w.u,_e.G]})}}}]);