"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[5644],{70312:(C,g,a)=>{a.d(g,{X:()=>_});class _{constructor(){}}},12846:(C,g,a)=>{a.d(g,{Y:()=>l});var _=a(50986),s=a(94650),p=a(2060);class l{constructor(c){this.modalMensajeService=c}validarCamposRequeridos(c){Object.keys(c.controls).forEach(m=>{const u=c.controls[m];u.markAsTouched({onlySelf:!0}),u.markAsDirty({onlySelf:!0})})}validarCamposRequeridosConMensaje(c){Object.keys(c.controls).forEach(m=>{const u=c.controls[m];u.markAsTouched({onlySelf:!0}),u.markAsDirty({onlySelf:!0})}),Object.keys(c.controls).some(m=>{const u=c.controls[m];return!!(u.errors&&u.errors.required&&u.invalid)&&(this.modalMensajeService.modalError(_.g.MENSAJE_REQUERIDOS),!0)})}markAsUntouched(c){Object.keys(c.controls).forEach(m=>{c.controls[m].markAsUntouched({onlySelf:!0})})}static#e=this.\u0275fac=function(m){return new(m||l)(s.LFG(p.V))};static#t=this.\u0275prov=s.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}},40675:(C,g,a)=>{a.d(g,{V_:()=>s,aQ:()=>l,vf:()=>p});var s,h;a(40675);(h=s||(s={})).Agregar="Agregar",h.Editar="Editar",h.Ver="Consultar";const p="Seleccione una opci\xf3n",l="No hay opciones disponibles"},45644:(C,g,a)=>{a.r(g),a.d(g,{ExamenFormularioModule:()=>b});var _=a(36895),s=a(24006),p=a(88796),l=a(9116),h=a(31321),c=a(13050),m=a(70312),u=a(73562),Z=a(50986),A=a(40675),e=a(94650),O=a(21006),M=a(80529);class v{constructor(n){this.http=n,this.dataUrl="examenReactivo/"}consultarTodosParaSelector(){return this.http.get(this.dataUrl+"consultarTodosParaSelector")}consultar(n){return this.http.get(this.dataUrl+`consultar/${n}`)}consultarGeneral(n){return this.http.get(this.dataUrl+`consultarGeneral/${n}`)}agregar(n){return this.http.post(this.dataUrl+"agregar",n)}editar(n){return this.http.put(this.dataUrl+"editar",n)}eliminar(n){return this.http.delete(this.dataUrl+`eliminar/${n}`)}consultarReactivosExamen(n){return this.http.get(this.dataUrl+`consultarReactivosExamen/${n}`)}revisar(n){return this.http.post(this.dataUrl+"revisar",n)}static#e=this.\u0275fac=function(t){return new(t||v)(e.LFG(M.eN))};static#t=this.\u0275prov=e.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}var U=a(13719),F=a(12846),P=a(2060);class x{transform(n){return this.toTimer(n)}toTimer(n){const o=n%60;return`${Math.floor(n/60)}:${o<10?"0":""}${o}`}static#e=this.\u0275fac=function(t){return new(t||x)};static#t=this.\u0275pipe=e.Yjl({name:"timer",type:x,pure:!0})}function R(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"h1",13),e._uU(4," Bienvenido al Cuestionario en l\xednea "),e.TgZ(5,"i"),e._uU(6),e.qZA()()(),e.TgZ(7,"div",14)(8,"h5",15),e._uU(9),e.qZA(),e.TgZ(10,"h5",15),e._uU(11),e.qZA()(),e.TgZ(12,"div",16)(13,"ul")(14,"li"),e._uU(15," Antes de responder lea con atenci\xf3n los Reactivos y seleccione la respuesta correcta. "),e.qZA(),e.TgZ(16,"li"),e._uU(17," Para pasar al siguiente Reactivo de Clic en el bot\xf3n Siguiente. "),e.qZA(),e.TgZ(18,"li"),e._uU(19," Si desea regresar al Reactivo anterior de Clic en el bot\xf3n Anterior. "),e.qZA(),e.TgZ(20,"li"),e._uU(21," Si desea Terminar el examen antes de finalizarlo presione Finalizar Examen. "),e.qZA()()(),e.TgZ(22,"div",12)(23,"button",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cancelar())}),e._uU(24," Regresar "),e.qZA(),e.TgZ(25,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.consultarReactivos())}),e._uU(26," Iniciar Examen "),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Oqu(t.examen.tipoExamen),e.xp6(3),e.hij("Clave: ",t.examen.clave,""),e.xp6(2),e.hij("Nombre: ",t.examen.nombreUsuario,"")}}function I(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"a",38),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.terminarExamen())}),e._uU(1,"Finalizar Examen"),e.qZA()}}function N(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"a",38),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cancelar())}),e._uU(1,"Regresar"),e.qZA()}}function S(i,n){if(1&i&&e._UZ(0,"img",39),2&i){const t=e.oxw(2);e.Q6J("src",t.reactivoList[t.indice].imagenBase64,e.LSH)}}function L(i,n){1&i&&(e.TgZ(0,"div",45),e._uU(1," La respuesta es requerida "),e.qZA())}function k(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",40)(1,"label",41),e._uU(2,"Respuesta"),e.qZA(),e.TgZ(3,"div")(4,"textarea",42,43),e.NdJ("ngModelChange",function(r){e.CHM(t);const d=e.oxw(2);return e.KtG(d.reactivoList[d.indice].respuestaAlumno=r)}),e.qZA()(),e.YNc(6,L,2,0,"div",44),e.qZA()}if(2&i){const t=e.MAs(5),o=e.oxw(2);e.xp6(4),e.Q6J("ngModel",o.reactivoList[o.indice].respuestaAlumno)("required",!0)("disabled",o.blockQuestions),e.xp6(2),e.Q6J("ngIf",(null==t.errors?null:t.errors.required)&&t.touched)}}function y(i,n){1&i&&(e.TgZ(0,"div",45),e._uU(1," La respuesta correcta es requerida "),e.qZA())}function J(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",46)(1,"label",41),e._uU(2,"Seleccione la Respuesta"),e.qZA(),e.TgZ(3,"div")(4,"ng-select",47,48),e.NdJ("ngModelChange",function(r){e.CHM(t);const d=e.oxw(2);return e.KtG(d.reactivoList[d.indice].respuestaAlumno=r)}),e.qZA()(),e.YNc(6,y,2,0,"div",44),e.qZA()}if(2&i){const t=e.MAs(5),o=e.oxw(2);e.xp6(4),e.Q6J("items",o.respuestas)("ngModel",o.reactivoList[o.indice].respuestaAlumno)("placeholder",o.DROPDOWN_PLACEHOLDER)("notFoundText",o.DROPDOWN_NO_OPTIONS)("disabled",o.blockQuestions),e.xp6(2),e.Q6J("ngIf",(null==t.errors?null:t.errors.required)&&t.touched)}}function q(i,n){1&i&&e._UZ(0,"i",49)}function Q(i,n){1&i&&e._UZ(0,"i",50)}function D(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.anterior())}),e._uU(1," Anterior "),e.qZA()}}function Y(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.siguiente())}),e._uU(1," Siguiente "),e.qZA()}}function j(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.terminarExamen())}),e._uU(1," Finalizar Examen "),e.qZA()}}function B(i,n){if(1&i&&(e.TgZ(0,"div",19)(1,"div",20)(2,"label"),e._uU(3),e.qZA(),e.TgZ(4,"span",21)(5,"label",22),e._uU(6),e.qZA(),e.TgZ(7,"label"),e._uU(8),e.ALo(9,"timer"),e.qZA(),e.YNc(10,I,2,0,"a",23),e.YNc(11,N,2,0,"a",23),e.qZA()(),e.TgZ(12,"div",11)(13,"div",12)(14,"h4"),e._uU(15),e.qZA()()(),e.TgZ(16,"div",11),e._UZ(17,"div",24),e.TgZ(18,"div",25)(19,"div",26),e.YNc(20,S,1,1,"img",27),e.qZA()()(),e.TgZ(21,"div",11)(22,"div",12)(23,"h5",28),e._uU(24),e.qZA()()(),e.TgZ(25,"div",11)(26,"div",29),e.YNc(27,k,7,4,"div",30),e.YNc(28,J,7,6,"div",31),e.qZA(),e.TgZ(29,"div",32),e.YNc(30,q,1,0,"i",33),e.YNc(31,Q,1,0,"i",34),e.qZA()(),e.TgZ(32,"div",11)(33,"div",35),e.YNc(34,D,2,0,"button",36),e.YNc(35,Y,2,0,"button",37),e.YNc(36,j,2,0,"button",37),e.qZA()()()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.reactivoList[t.indice].asignatura),e.xp6(3),e.hij("",t.examen.duracion,":00"),e.xp6(2),e.Oqu(e.lcZ(9,16,t.segundosRestantes)),e.xp6(2),e.Q6J("ngIf",!t.blockQuestions),e.xp6(1),e.Q6J("ngIf",t.blockQuestions),e.xp6(4),e.AsE("",t.indice+1,".- ",t.reactivoList[t.indice].pregunta,""),e.xp6(5),e.Q6J("ngIf",void 0!==t.reactivoList[t.indice].imagenBase64),e.xp6(4),e.Oqu(t.reactivoList[t.indice].respuesta),e.xp6(3),e.Q6J("ngIf",t.reactivoList[t.indice].necesitaRevision),e.xp6(1),e.Q6J("ngIf",!t.reactivoList[t.indice].necesitaRevision),e.xp6(2),e.Q6J("ngIf",t.blockQuestions&&t.reactivoList[t.indice].resultado),e.xp6(1),e.Q6J("ngIf",t.blockQuestions&&!t.reactivoList[t.indice].resultado),e.xp6(3),e.Q6J("ngIf",t.indice+1>1&&t.blockQuestions||!t.blockQuestions),e.xp6(1),e.Q6J("ngIf",t.indice+1!=t.reactivoList.length||t.blockQuestions&&t.indice+1!=t.reactivoList.length),e.xp6(1),e.Q6J("ngIf",t.indice+1==t.reactivoList.length&&!t.blockQuestions)}}function w(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",51)(1,"div",11)(2,"div",12)(3,"h1",13),e._uU(4," Gracias por su participaci\xf3n en el examen "),e.TgZ(5,"i"),e._uU(6),e.qZA()(),e.TgZ(7,"h2",52),e._uU(8," Su calificaci\xf3n es: "),e.TgZ(9,"i",53),e._uU(10),e.qZA()()(),e.TgZ(11,"div",14)(12,"h5",15),e._uU(13),e.qZA(),e.TgZ(14,"h5",15),e._uU(15),e.qZA()(),e.TgZ(16,"div",16)(17,"ul")(18,"li"),e._uU(19," Si hay alg\xfan problema con la calificaci\xf3n o el examen favor de comunicarse con un representante. "),e.qZA()()(),e.TgZ(20,"div",12)(21,"button",54),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cancelar())}),e._uU(22," Regresar "),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Oqu(t.examen.tipoExamen),e.xp6(4),e.Oqu(t.examen.resultado),e.xp6(3),e.hij("Clave: ",t.examen.clave,""),e.xp6(2),e.hij("Nombre: ",t.examen.nombreUsuario,"")}}function G(i,n){1&i&&(e.TgZ(0,"div",55),e._UZ(1,"img",56),e.TgZ(2,"span"),e._uU(3,"Procesando... por favor espere"),e.qZA()())}class E{constructor(n,t,o,r,d,f,K){this.encryptionService=n,this.examenReactivoService=t,this.examenService=o,this.formularioService=r,this.mensajeService=d,this.route=f,this.router=K,this.DROPDOWN_PLACEHOLDER=A.vf,this.DROPDOWN_NO_OPTIONS=A.aQ,this.MENSAJE_ULTIMO_MINUTO="Queda un minuto para finalizar el examen",this.MENSAJE_NO_SUFICIENTES_REACTIVOS="No hay suficientes reactivos para aplicar este examen",this.TITULO_MODAL_TERMINAR="Terminar Examen",this.esEdicion=!1,this.submitting=!1,this.presentando=!1,this.reactivo=new u.s,this.examen=new m.X,this.examenTerminado=!1,this.blockQuestions=!1,this.reactivoList=[],this.respuestas=[{nombre:"a"},{nombre:"b"},{nombre:"c"},{nombre:"d"},{nombre:"e"}],this.indice=0,this.segundosRestantes=0,this.lastMinute=!1}ngOnInit(){this.submitting=!0,this.route.queryParams.subscribe(n=>{this.examen.idExamen=this.encryptionService.readUrlParams(n).i;const t=this.encryptionService.readUrlParams(n).revision;null!=t&&"1"!=t?this.examen.idExamen>0&&this.consultarExamen(this.examen.idExamen):(this.blockQuestions=!0,this.consultarReactivosNoExamen())})}consultarExamen(n){this.examenService.consultarMiExamen(n).subscribe(t=>{this.examen=t,this.segundosRestantes=60*this.examen.duracion,this.submitting=!1})}consultarReactivos(){this.submitting=!0,this.examenReactivoService.consultarReactivosExamen(this.examen.idExamen).subscribe(n=>{n.length!=this.examen.totalPreguntas?(this.mensajeService.modalError(this.MENSAJE_NO_SUFICIENTES_REACTIVOS),this.cancelar()):(this.reactivoList=n,this.submitting=!1,this.interval=setInterval(()=>this.updateTimer(),1e3),setTimeout(()=>this.terminarExamenTiempo(),1e3*this.segundosRestantes),this.presentando=!0)})}consultarReactivosNoExamen(){this.examenReactivoService.consultarReactivosExamen(this.examen.idExamen).subscribe(n=>{this.reactivoList=n,this.submitting=!1})}updateTimer(){this.segundosRestantes--,0==this.segundosRestantes?clearInterval(this.interval):this.segundosRestantes<60&&!this.lastMinute&&(this.lastMinute=!0,this.mensajeService.modalError(this.MENSAJE_ULTIMO_MINUTO))}enviarFormulario(n){if(this.submitting=!0,!n.valid)return this.formularioService.validarCamposRequeridos(n),void(this.submitting=!1);this.accion===Z.g.MODAL_ACCION_AGREGAR||(this.accion,Z.g.MODAL_ACCION_EDITAR)}cancelar(){this.blockQuestions?this.router.navigate(["/administrador/encuesta/programacion-examen"],{}):this.router.navigate(["/administrador/encuesta/examen"],{})}siguiente(){this.indice+1<this.reactivoList.length&&this.indice++}anterior(){this.indice>0&&this.indice--}terminarExamen(){this.mensajeService.modalConfirmacion("\xbfSeguro que deseas terminar el examen?",this.TITULO_MODAL_TERMINAR,Z.g.ICONO_CRUZ).then(n=>{clearInterval(this.interval),this.submitting=!0,this.examenReactivoService.revisar(this.reactivoList).subscribe(t=>{this.examen.resultado=t,this.examenTerminado=!0,this.submitting=!1})})}terminarExamenTiempo(){this.submitting=!0,this.examenReactivoService.revisar(this.reactivoList).subscribe(n=>{this.examen.resultado=n,this.examenTerminado=!0,this.submitting=!1})}static#e=this.\u0275fac=function(t){return new(t||E)(e.Y36(O.C),e.Y36(v),e.Y36(U.X),e.Y36(F.Y),e.Y36(P.V),e.Y36(l.gz),e.Y36(l.F0))};static#t=this.\u0275cmp=e.Xpm({type:E,selectors:[["app-reactivo-formulario"]],decls:11,vars:4,consts:[[1,"d-flex"],[1,"modal-content"],[1,"modal-header"],["novalidate","novalidate",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],[1,"modal-body"],["class","presentacion",4,"ngIf"],["class","pregunta",4,"ngIf"],["class","resultado",4,"ngIf"],["id","loading-cdis",4,"ngIf"],[1,"presentacion"],[1,"row"],[1,"col-md-12"],[1,"titulo"],[1,"col-md-12","informacionContainer"],[1,"informacion"],[1,"col-md-12","reglasContainer"],["type","button",1,"btn-secundario","mr-3","alignButton",3,"click"],["type","button",1,"btn-primario","btn-margin-left","btn-cargar",3,"click"],[1,"pregunta"],[1,"informacionReactivo"],[1,"alginRight"],["id","timer",1,"timer"],["class","finishButton",3,"click",4,"ngIf"],[1,"col-md-1"],[1,"col-md-4"],[2,"text-align","center","margin-top","15px"],["id","logo","class","imagenPregunta","height","200",3,"src",4,"ngIf"],[1,"respuestas"],[1,"col-md-8"],["class","form-group",4,"ngIf"],["class","form-group respuesta",4,"ngIf"],[1,"col-md-1","check"],["class","fas fa-check icon upload respuesta",4,"ngIf"],["class","fas fa-times icon notUpload respuesta",4,"ngIf"],[1,"col-md-12","buttonSection"],["type","button","class","btn-secundario mr-3 alignButton",3,"click",4,"ngIf"],["type","button","class","btn-primario btn-margin-left btn-cargar",3,"click",4,"ngIf"],[1,"finishButton",3,"click"],["id","logo","height","200",1,"imagenPregunta",3,"src"],[1,"form-group"],[1,"label-input","required-label"],["name","respuestaCorrecta","type","text","rows","3",1,"respuesta",2,"width","100%",3,"ngModel","required","disabled","ngModelChange"],["respuestaCorrecta","ngModel"],["class","error",4,"ngIf"],[1,"error"],[1,"form-group","respuesta"],["name","respuestasLst","bindLabel","nombre",",","","bindValue","nombre",3,"items","ngModel","placeholder","notFoundText","disabled","ngModelChange"],["respuestasLst","ngModel"],[1,"fas","fa-check","icon","upload","respuesta"],[1,"fas","fa-times","icon","notUpload","respuesta"],[1,"resultado"],[1,"titulo","calificacion"],[1,"notBold"],["type","button",1,"btn-secundario","mr-3","alignButtonResultado",3,"click"],["id","loading-cdis"],["src","assets/img/spinner.gif","alt","Procesando..."]],template:function(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div"),e.qZA(),e.TgZ(4,"form",3,4),e.NdJ("keydown.enter",function(f){return f.preventDefault()})("ngSubmit",function(){e.CHM(r);const f=e.MAs(5);return e.KtG(o.enviarFormulario(f))}),e.TgZ(6,"div",5),e.YNc(7,R,27,3,"div",6),e.YNc(8,B,37,18,"div",7),e.YNc(9,w,23,4,"div",8),e.qZA()()()(),e.YNc(10,G,4,0,"div",9)}2&t&&(e.xp6(7),e.Q6J("ngIf",!o.presentando&&!o.examenTerminado&&!o.blockQuestions),e.xp6(1),e.Q6J("ngIf",o.presentando&&!o.examenTerminado||o.blockQuestions),e.xp6(1),e.Q6J("ngIf",o.examenTerminado),e.xp6(1),e.Q6J("ngIf",o.submitting))},dependencies:[_.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.On,s.F,p.w9,x],styles:[".modal-body[_ngcontent-%COMP%]{max-height:1000px!important}.presentacion[_ngcontent-%COMP%]{padding-left:20%}.titulo[_ngcontent-%COMP%]{padding-top:2em}.informacionContainer[_ngcontent-%COMP%]{padding-top:1em;padding-bottom:1em}.informacion[_ngcontent-%COMP%], .reglasContainer[_ngcontent-%COMP%]{padding-left:4.5em}.alignButton[_ngcontent-%COMP%]{margin-left:8em;margin-bottom:3em}.informacionReactivo[_ngcontent-%COMP%]{font-size:medium}.alginRight[_ngcontent-%COMP%]{float:right}.timer[_ngcontent-%COMP%]{color:red;margin-right:1em}.finishButton[_ngcontent-%COMP%]{cursor:pointer;margin-right:1em;text-decoration:underline!important}.pregunta[_ngcontent-%COMP%]{padding-left:5em;padding-top:3em}.imagenPregunta[_ngcontent-%COMP%]{margin-top:1em}.respuestas[_ngcontent-%COMP%]{white-space:break-spaces;margin-top:1em;margin-left:2em}.respuesta[_ngcontent-%COMP%]{margin-top:1.5em}.check[_ngcontent-%COMP%]{padding-top:3.5em}.buttonSection[_ngcontent-%COMP%]{text-align:right}.resultado[_ngcontent-%COMP%]{padding-left:15%}.calificacion[_ngcontent-%COMP%]{padding-left:1em}.notBold[_ngcontent-%COMP%]{font-weight:400}.alignButtonResultado[_ngcontent-%COMP%]{margin-left:30%;margin-bottom:3em;margin-top:2em}.icon[_ngcontent-%COMP%]{margin-top:5px;font-size:2em}.upload[_ngcontent-%COMP%]{color:#33b64c}.notUpload[_ngcontent-%COMP%]{color:#e53b3b}.cuerpo-contenedor[_ngcontent-%COMP%]{padding-left:1em;padding-right:1em}.preguntaTextArea[_ngcontent-%COMP%]{height:5em!important}.respuestaTextArea[_ngcontent-%COMP%]{height:9em!important}.btn-cargar[_ngcontent-%COMP%]{background-color:#92d050;border:0px;color:#000;margin-top:4em;font-weight:400;margin-right:2em}"]})}const H=[{path:"",component:E,canActivate:[c.m],data:{title:"Presentar Examen",acceso:h.ZE.Presentar}}];class T{static#e=this.\u0275fac=function(t){return new(t||T)};static#t=this.\u0275mod=e.oAB({type:T});static#n=this.\u0275inj=e.cJS({imports:[l.Bz.forChild(H),l.Bz]})}class b{static#e=this.\u0275fac=function(t){return new(t||b)};static#t=this.\u0275mod=e.oAB({type:b});static#n=this.\u0275inj=e.cJS({imports:[_.ez,s.u5,p.A0,T]})}}}]);