"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[2184],{83083:(xe,z,c)=>{c.d(z,{c:()=>T});var p=c(94650),le=c(80529);class T{constructor(m){this.http=m,this.dataUrl="compania/"}consultar(m){return this.http.get(this.dataUrl+`consultar/${m}`)}consultarGeneral(){return this.http.get(this.dataUrl+"consultarGeneral")}consultarTodosParaSelector(){return this.http.get(this.dataUrl+"consultarTodosParaSelector")}consultarPorUsuarioPermiso(){return this.http.get(this.dataUrl+"consultarPorUsuarioPermiso")}consultarTodosParaGrid(m){return this.http.post(this.dataUrl+"consultarTodosParaGrid",m)}agregar(m){return this.http.post(this.dataUrl+"agregar",m)}editar(m){return this.http.put(this.dataUrl+"editar",m)}eliminar(m){return this.http.delete(this.dataUrl+`eliminar/${m}`)}consultarPorUsuario(){return this.http.get(this.dataUrl+"consultarPorUsuario")}consultarClaveCompaniaUsuarioSesion(){return this.http.get(this.dataUrl+"consultarClaveCompaniaUsuarioSesion/",{responseType:"text"})}static#e=this.\u0275fac=function(s){return new(s||T)(p.LFG(le.eN))};static#t=this.\u0275prov=p.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}},72184:(xe,z,c)=>{c.r(z),c.d(z,{AnalisisRiesgoTrabajoRutinarioModule:()=>re});var p=c(36895),le=c(43876),T=c(41283),de=c(92020),m=c(71436),s=c(24006),P=c(88796),ue=c(13024),A=c(90061),he=c(8816),Q=c(59241),_e=c(33186),Ze=c(98520),e=c(94650);class H{static#e=this.\u0275fac=function(t){return new(t||H)};static#t=this.\u0275mod=e.oAB({type:H});static#i=this.\u0275inj=e.cJS({providers:[_e.Z],imports:[p.ez,m.a,ue.u,P.A0,s.u5,Q.P4,A.kn,de.A,Ze.G]})}class k{static#e=this.\u0275fac=function(t){return new(t||k)};static#t=this.\u0275mod=e.oAB({type:k});static#i=this.\u0275inj=e.cJS({imports:[p.ez,m.a,ue.u,P.A0,s.u5,Q.P4,A.kn,de.A,H]})}var M=c(80529);class x{constructor(i){this.http=i,this.dataUrl="analisisRiesgoTrabajoRutinario/"}consultar(i){return this.http.get(this.dataUrl+`${i}`)}consultarParaGrid(i){return this.http.post(this.dataUrl+"grid",i)}agregar(i){return this.http.post(this.dataUrl+"agregar",i)}editar(i){return this.http.put(this.dataUrl+"editar",i)}eliminar(i){return this.http.delete(this.dataUrl+`${i}`)}static#e=this.\u0275fac=function(t){return new(t||x)(e.LFG(M.eN))};static#t=this.\u0275prov=e.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"})}var O=c(9116),Ee=c(13050),S=c(27974),ge=c(18505),U=c(52522),Z=c(15439),d=c(50986),G=c(70615),pe=c(77579),Pe=c(69751),C=c(40675),v=c(2060),Oe=c(91736),Ne=c(88773),w=c(383),Fe=c(46558),fe=c(96884),ve=c(74654),Ae=c(51763),Ce=c(94654);const ye=["formulario"];function qe(r,i){1&r&&(e.TgZ(0,"div",28),e._uU(1," La fecha alta es requerida "),e.qZA())}function Se(r,i){1&r&&(e.TgZ(0,"div",28),e._uU(1," La fecha alta es requerida "),e.qZA())}function Ue(r,i){1&r&&(e.TgZ(0,"div",28),e._uU(1," El trabajo / actividad es requerido "),e.qZA())}function Ge(r,i){1&r&&(e.TgZ(0,"div",28),e._uU(1," La ubicaci\xf3n es requerida "),e.qZA())}const we=function(){return{dateInputFormat:"DD/MM/YYYY"}};class L{constructor(i,t,o,a,n){this.usuarioService=i,this.turnoService=t,this.departamentoService=o,this.contratistaService=a,this.contratoService=n,this.placeHolderSelect=d.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=d.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS}ngOnInit(){this.consultarContratistas(),this.consultarTurnos(),this.consultarDepartamentos(),this.consultarLocaciones(),this.esAgregarEditar()}consultarTurnos(){this.turnos$=this.turnoService.consultarParaSelector()}consultarDepartamentos(){this.departamentos$=this.departamentoService.consultarTodosParaSelector()}consultarContratistas(){this.contratistas$=this.contratistaService.consultarParaSelector()}consultarLocaciones(){this.locaciones$=this.contratoService.selectorLocaciones()}esAgregarEditar(){this.EsAgregar?this.entidad.fechaHora=new Date:this.entidad.fechaActualizacion=new Date}static#e=this.\u0275fac=function(t){return new(t||L)(e.Y36(Fe.i),e.Y36(fe.D),e.Y36(ve._),e.Y36(Ae.m),e.Y36(Ce.d))};static#t=this.\u0275cmp=e.Xpm({type:L,selectors:[["app-art-rutinario-informacion-general"]],viewQuery:function(t,o){if(1&t&&e.Gf(ye,5),2&t){let a;e.iGM(a=e.CRH())&&(o.formulario=a.first)}},inputs:{entidad:"entidad",heading:"heading",EsAgregar:"EsAgregar"},decls:67,vars:25,consts:[["id","form","novalidate","novalidate",3,"keydown.enter"],["formulario","ngForm"],[1,"container-fluid"],[1,"subseccion"],[1,"row"],[1,"col-md-2"],[1,"form-group"],[1,"label-input","required-label"],["type","text","name","nombre","autocomplete","off",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["type","text","name","estatus",1,"form-control",3,"value","required","disabled"],[1,"col-md-1"],[1,"date-input-container"],["type","text","autocomplete","off","placeholder","dd/mm/aaaa","name","fechaAltaName","bsDatepicker","","disabled","disabled",1,"form-control",3,"ngModel","required","bsConfig","ngModelChange"],["fechaAltaName","ngModel"],[1,"fa-regular","fa-calendar-days"],["class","error",4,"ngIf"],["type","text","disabled","disabled",1,"form-control",3,"value"],[1,"label-input"],["type","text","autocomplete","off","placeholder","dd/mm/aaaa","name","fechaActualizacionName","bsDatepicker","","disabled","disabled",1,"form-control",3,"ngModel","required","ngModelChange"],["fechaActualizacionName","ngModel"],[1,"col-md-9"],["type","text","name","trabajoActividad","autocomplete","off",1,"form-control",3,"ngModel","required","ngModelChange"],["trabajoActividad","ngModel"],["type","text","autocomplete","off","name","ubicacion",1,"form-control",3,"ngModel","required","ngModelChange"],["ubicacion","ngModel"],[1,"col-md-12"],["name","comentariosName","type","text","maxlength","400","autocomplete","off",1,"form-control-textarea","form-control",3,"ngModel","ngModelChange"],["comentarios","ngModel"],[1,"error"]],template:function(t,o){if(1&t&&(e.TgZ(0,"form",0,1),e.NdJ("keydown.enter",function(n){return n.preventDefault()}),e.TgZ(2,"div",2)(3,"div",3),e._uU(4," General "),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),e._uU(9,"Clave"),e.qZA(),e.TgZ(10,"input",8),e.NdJ("ngModelChange",function(n){return o.entidad.idAnalisisRiesgoTrabajoRutinario=n}),e.qZA()()(),e.TgZ(11,"div",5)(12,"div",6)(13,"label",7),e._uU(14,"Estatus"),e.qZA(),e._UZ(15,"input",9),e.qZA()(),e._UZ(16,"div",10),e.TgZ(17,"div",5)(18,"div",6)(19,"label",7),e._uU(20,"Fecha Alta"),e.qZA(),e.TgZ(21,"div",11)(22,"input",12,13),e.NdJ("ngModelChange",function(n){return o.entidad.fechaHora=n}),e.qZA(),e._UZ(24,"i",14),e.YNc(25,qe,2,0,"div",15),e.qZA()()(),e.TgZ(26,"div",5)(27,"div",6)(28,"label",7),e._uU(29,"Hora"),e.qZA(),e.TgZ(30,"div"),e._UZ(31,"input",16),e.ALo(32,"date"),e.qZA()()(),e._UZ(33,"div",10),e.TgZ(34,"div",5)(35,"div",6)(36,"label",17),e._uU(37,"Fecha Actualizaci\xf3n"),e.qZA(),e.TgZ(38,"div",11)(39,"input",18,19),e.NdJ("ngModelChange",function(n){return o.entidad.fechaActualizacion=n}),e.qZA(),e._UZ(41,"i",14),e.YNc(42,Se,2,0,"div",15),e.qZA()()()(),e.TgZ(43,"div",4)(44,"div",20)(45,"div",6)(46,"label",7),e._uU(47,"Procesos"),e.qZA(),e.TgZ(48,"input",21,22),e.NdJ("ngModelChange",function(n){return o.entidad.procesos=n}),e.qZA(),e.YNc(50,Ue,2,0,"div",15),e.qZA()(),e._UZ(51,"div",10),e.TgZ(52,"div",5)(53,"div",6)(54,"label",7),e._uU(55,"Responsable Proceso"),e.qZA(),e.TgZ(56,"input",23,24),e.NdJ("ngModelChange",function(n){return o.entidad.responsable=n}),e.qZA(),e.YNc(58,Ge,2,0,"div",15),e.qZA()()(),e.TgZ(59,"div",4)(60,"div",25)(61,"div",6)(62,"label",17),e._uU(63,"Alcance"),e.qZA(),e.TgZ(64,"div")(65,"textarea",26,27),e.NdJ("ngModelChange",function(n){return o.entidad.alcance=n}),e.qZA()()()()()()()),2&t){const a=e.MAs(23),n=e.MAs(40),l=e.MAs(49),g=e.MAs(57);e.xp6(10),e.Q6J("ngModel",o.entidad.idAnalisisRiesgoTrabajoRutinario)("required",!0)("disabled",!0),e.xp6(5),e.Q6J("value",!0===o.entidad.estatus?"Activo":!1===o.entidad.estatus?"Inactivo":"Activo")("required",!0)("disabled",!0),e.xp6(7),e.Q6J("ngModel",o.entidad.fechaHora)("required",!0)("bsConfig",e.DdM(24,we)),e.xp6(3),e.Q6J("ngIf",(null==a.errors?null:a.errors.required)&&a.touched),e.xp6(6),e.Q6J("value",e.xi3(32,21,o.entidad.fechaHora,"HH:mm")),e.xp6(8),e.Q6J("ngModel",o.entidad.fechaActualizacion)("required",!0),e.xp6(3),e.Q6J("ngIf",(null==n.errors?null:n.errors.required)&&n.touched),e.xp6(6),e.Q6J("ngModel",o.entidad.procesos)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==l.errors?null:l.errors.required)&&l.touched),e.xp6(6),e.Q6J("ngModel",o.entidad.responsable)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==g.errors?null:g.errors.required)&&g.touched),e.xp6(7),e.Q6J("ngModel",o.entidad.alcance)}},dependencies:[p.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.nD,s.On,s.F,A.Np,A.Y5,p.uU],styles:[".date-input-container[_ngcontent-%COMP%]{position:relative;width:100%}.date-input-container[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{width:100%;padding-right:30px}.date-input-container[_ngcontent-%COMP%]   .fa-calendar-days[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);pointer-events:none}.form-control-textarea[_ngcontent-%COMP%]{width:100%;padding:10px;height:100px!important}"]})}var h=c(41720);class N{constructor(i){this.http=i,this.dataUrl="peligrosRiesgos/"}consultar(i){return this.http.get(this.dataUrl+`${i}`)}consultarParaGrid(){return this.http.get(this.dataUrl+"grid")}consultarParaSelectorInteresada(){return this.http.get(this.dataUrl+"selectorInteresada")}consultaParaSelectorActividad(){return this.http.get(this.dataUrl+"selectorActividad")}consultaParaSelectorArea(){return this.http.get(this.dataUrl+"selectorArea")}agregar(i){return this.http.post(this.dataUrl+"agregar",i)}editar(i){return this.http.put(this.dataUrl+"editar",i)}eliminar(i){return this.http.delete(this.dataUrl+`${i}`)}static#e=this.\u0275fac=function(t){return new(t||N)(e.LFG(M.eN))};static#t=this.\u0275prov=e.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"})}var _=c(20388);class F{constructor(i){this.http=i,this.dataUrl="peligrosRiesgoEfecto/"}consultarParaGrid(i){return this.http.get(this.dataUrl+`grid/${i}`)}consultarParaFormulario(i){return this.http.get(this.dataUrl+`${i}`)}agregar(i){return console.log(i),this.http.post(this.dataUrl+"agregar",i)}editar(i){return this.http.put(this.dataUrl+"editar",i)}obtenerNivelRiesgo(i){return this.http.post(this.dataUrl+"ObtenerNivelRiesgo",i)}eliminar(i){return this.http.delete(this.dataUrl+"eliminar/"+i)}static#e=this.\u0275fac=function(t){return new(t||F)(e.LFG(M.eN))};static#t=this.\u0275prov=e.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"})}class J{constructor(i){this.http=i,this.dataUrl="PeligroRiesgoEfectoGuia/"}ConsultarPorPeligroRiesgoEfecto(i){return this.http.get(this.dataUrl+"ConsultarPorPeligroRiesgoEfecto/"+i)}ActualizarPeligroRiesgoEfectoGuia(i){return this.http.put(this.dataUrl+"ActualizarPeligroRiesgoEfectoGuia/",i)}static#e=this.\u0275fac=function(t){return new(t||J)(e.LFG(M.eN))};static#t=this.\u0275prov=e.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"})}var Re=c(90429);class y{constructor(i){this.http=i,this.dataUrl="AccionOportunidad/"}consultarParaGrid(i){return this.http.get(this.dataUrl+"ConsultarParaGrid/"+i)}consultar(i){return this.http.get(this.dataUrl+i)}consultarParaSelectorEstatus(){return this.http.get(this.dataUrl+"selectorEstatus")}agregar(i){return this.http.post(this.dataUrl+"agregar",i)}editar(i){return this.http.put(this.dataUrl+"editar",i)}eliminar(i){return this.http.delete(this.dataUrl+`eliminar/+${i} `)}static#e=this.\u0275fac=function(t){return new(t||y)(e.LFG(M.eN))};static#t=this.\u0275prov=e.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}var Je=c(15861);class Ie{}var De=c(19904);class q{constructor(i){this.http=i,this.dataUrl="accionRealizada/"}consultarParaGrid(i){return this.http.get(this.dataUrl+`grid/${i}`)}consultar(i){return this.http.get(this.dataUrl+i)}consultarArchivo(i){return this.http.get(this.dataUrl+`archivo/${i}`)}agregar(i){return this.http.post(this.dataUrl+"agregar",i)}editar(i){return this.http.put(this.dataUrl+"editar",i)}almacenar(i){return this.http.post(this.dataUrl+"almacenar",i)}eliminarArchivo(i){return this.http.delete(this.dataUrl+"eliminarArchivo/"+i)}static#e=this.\u0275fac=function(t){return new(t||q)(e.LFG(M.eN))};static#t=this.\u0275prov=e.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"})}var Ye=c(4837);const ze=["formulario"];function Qe(r,i){1&r&&(e.TgZ(0,"div",15),e._uU(1," La Accion Realizada es requerida "),e.qZA())}function He(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,n=e.oxw(2);return e.KtG(n.duplicarItem(a))}),e._UZ(2,"img",29),e.qZA()()}}function ke(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",16)(2,"app-input-archivo",17),e.NdJ("archivoDto",function(a){const l=e.CHM(t).index,g=e.oxw(2);return e.KtG(g.modoEditar?g.editarArchivo(a,l):g.agregarArchivo(a,l))})("idArchivoDescarga",function(a){e.CHM(t);const n=e.oxw(2);return e.KtG(n.descargarArchivo(a))}),e.qZA()(),e.TgZ(3,"div",18)(4,"div",9)(5,"label",10),e._uU(6,"Tomar Foto"),e.qZA(),e.TgZ(7,"div")(8,"button",19),e.NdJ("click",function(){const n=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.takePicture(n))}),e._UZ(9,"img",20),e.qZA()()()(),e.TgZ(10,"div",18)(11,"div",9)(12,"label",10),e._uU(13,"Fecha"),e.qZA(),e.TgZ(14,"div",21)(15,"input",22),e.NdJ("ngModelChange",function(a){const l=e.CHM(t).index,g=e.oxw(2);return e.KtG(g.entidad.accionRealizadoArchivo[l].fechaEvidencia=a)})("ngModelChange",function(){const n=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.actualizarFecha(n))}),e.qZA(),e._UZ(16,"i",23),e.qZA()()(),e.TgZ(17,"div",24)(18,"div",25),e.YNc(19,He,3,0,"div",26),e.TgZ(20,"div")(21,"button",27),e.NdJ("click",function(){const n=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.eliminarItem(n))}),e._UZ(22,"img",28),e.qZA()()()()()}if(2&r){const t=i.$implicit,o=i.index,a=e.oxw(2);let n;e.xp6(2),e.Q6J("label","Cargar Evidencia Fotogr\xe1fica")("nombreArchivo",a.entidad.accionRealizadoArchivo[o].archivoNombre?a.entidad.accionRealizadoArchivo[o].archivoNombre:"Examinar..")("archivo",a.entidad.accionRealizadoArchivo[o].archivo)("fechaEvidencia",a.entidad.accionRealizadoArchivo[o].fechaEvidencia)("tipoMime",a.entidad.accionRealizadoArchivo[o].archivoTipoMime)("id",o.toString())("contieneAyuda",!1)("downl_endpoint",a.downl_endpoint.bind(a))("idRegistroArchivo",null!==(n=a.entidad.accionRealizadoArchivo[o].idArtraccionRealizadaArchivo)&&void 0!==n?n:0),e.xp6(13),e.Q6J("ngModel",a.entidad.accionRealizadoArchivo[o].fechaEvidencia)("name",t.archivoNombre+o)("bsConfig",a.configDate),e.xp6(4),e.Q6J("ngIf",o==a.entidad.accionRealizadoArchivo.length-1)}}function Le(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"form",4,5),e.NdJ("keydown.enter",function(a){return a.preventDefault()}),e.TgZ(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"label",10),e._uU(7,"Acci\xf3n Realizada"),e.qZA(),e.TgZ(8,"div")(9,"textarea",11,12),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.accionRealizada=a)}),e.qZA()(),e.YNc(11,Qe,2,0,"div",13),e.qZA()()(),e.YNc(12,ke,23,13,"div",14),e.qZA()()}if(2&r){const t=e.MAs(10),o=e.oxw();e.xp6(9),e.Q6J("ngModel",o.entidad.accionRealizada),e.xp6(2),e.Q6J("ngIf",(null==t.errors?null:t.errors.required)&&t.touched),e.xp6(1),e.Q6J("ngForOf",o.entidad.accionRealizadoArchivo)}}function je(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.cancelar())}),e._uU(1," Cancelar "),e.qZA(),e.TgZ(2,"button",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSubmit(a.formulario))}),e._uU(3," Guardar Acci\xf3n Realizada "),e.qZA()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.submitting)}}class j extends G.P{constructor(i,t,o,a,n,l){super(o),this.accionRealizadaService=i,this.capacitorUtil=t,this.modalService=a,this.bsModalRef=n,this.router=l,this.DROPDOWN_PLACEHOLDER=C.vf,this.modoEditar=!1,this.DROPDOWN_NO_OPTIONS=C.aQ,this.isPictureTaken=!1,this.fecha=new Date,this.fechaActual=new Date,this.configDate=d.g.CONFIG_DATEPICKER,(!this.entidad.accionRealizadoArchivo||0===this.entidad.accionRealizadoArchivo.length)&&(this.entidad.accionRealizadoArchivo=[{archivo:null,archivoNombre:"",archivoTipoMime:"",fechaEvidencia:new Date}]),this.entidad.fechaAlta=(0,Re.ii)()}ngOnInit(){super.onInit(),this.entidad.idArtraccion=this.idArtraccion,this.esEditar()}esEditar(){this.accion==C.V_.Editar&&(this.modoEditar=!0)}consultar(i){return this.accionRealizadaService.consultar(i)}agregar(i){return this.accionRealizadaService.agregar(i)}takePicture(i){var t=this;return(0,Je.Z)(function*(){try{const o=yield t.capacitorUtil.tomarFoto();t.isPictureTaken=!0,o.fechaEvidencia=t.entidad.accionRealizadoArchivo[i].fechaEvidencia,o&&(t.modoEditar?t.editarArchivo(o,i):null==t.entidad.accionRealizadoArchivo[i].archivo?t.agregarArchivo(o,i):t.editarArchivo(o,i))}catch(o){console.error(o)}})()}duplicarItem(i){let t=new Ie;t.fechaEvidencia=new Date,t.archivo=null,t.archivoNombre="",t.archivoTipoMime="",this.entidad.accionRealizadoArchivo.splice(i+1,0,t)}agregarArchivo(i,t){this.entidad.accionRealizadoArchivo[t].archivo=i.archivo,this.entidad.accionRealizadoArchivo[t].archivoNombre=i.nombreArchivo,this.entidad.accionRealizadoArchivo[t].archivoTipoMime=i.tipoMime,this.entidad.accionRealizadoArchivo[t].fechaEvidencia=i.fechaEvidencia}editar(i){return this.accionRealizadaService.editar(i)}editarArchivo(i,t){this.entidad.accionRealizadoArchivo[t].archivo=i.archivo,this.entidad.accionRealizadoArchivo[t].archivoNombre=i.nombreArchivo,this.entidad.accionRealizadoArchivo[t].archivoTipoMime=i.tipoMime,this.entidad.accionRealizadoArchivo[t].idArtraccionRealizada=this.entidad.idArtraccionRealizada,this.accionRealizadaService.almacenar(this.entidad.accionRealizadoArchivo[t]).subscribe(()=>{this.mensajeService.modalExito(`Se ha cargado el archivo <b>${i.nombreArchivo}</b> correctamente`)})}actualizarFecha(i){this.modoEditar&&null!=this.entidad.accionRealizadoArchivo[i].idArtraccionRealizadaArchivo&&(this.entidad.accionRealizadoArchivo[i].idArtraccionRealizada=this.entidad.idArtraccionRealizada,this.accionRealizadaService.almacenar(this.entidad.accionRealizadoArchivo[i]).subscribe(()=>{this.mensajeService.modalExito("Se ha actualizado la fecha correctamente")}))}downl_endpoint(i){return this.accionRealizadaService.consultarArchivo(i)}descargarArchivo(i){let t=new De.q;this.accionRealizadaService.consultarArchivo(i).pipe((0,ge.b)(g=>{t=g}));let o,n=((g,E="",R=512)=>{const b=atob(g),u=[];for(let se=0;se<b.length;se+=R){const me=b.slice(se,se+R),Me=new Array(me.length);for(let ce=0;ce<me.length;ce++)Me[ce]=me.charCodeAt(ce);const Jt=new Uint8Array(Me);u.push(Jt)}return new Blob(u,{type:E})})(t.archivo,t.tipoMime);o=URL.createObjectURL(n);var l=document.createElement("a");l.href=o,l.download=t.nombreArchivo,l.click()}eliminarItem(i){if(this.entidad.accionRealizadoArchivo.length>1){const t=this.entidad.accionRealizadoArchivo[i].idArtraccionRealizadaArchivo;void 0!==t?this.accionRealizadaService.eliminarArchivo(t).subscribe(()=>{this.entidad.accionRealizadoArchivo.splice(i,1),this.mensajeService.modalExito("El archivo ha sido eliminado correctamente.")},o=>{this.mensajeService.modalError("Hubo un error al eliminar el archivo.")}):this.entidad.accionRealizadoArchivo.splice(i,1)}}static#e=this.\u0275fac=function(t){return new(t||j)(e.Y36(q),e.Y36(_e.Z),e.Y36(v.V),e.Y36(_.tT),e.Y36(_.UZ),e.Y36(O.F0))};static#t=this.\u0275cmp=e.Xpm({type:j,selectors:[["app-accion-realizada-formulario"]],viewQuery:function(t,o){if(1&t&&e.Gf(ze,5),2&t){let a;e.iGM(a=e.CRH())&&(o.formulario=a.first)}},inputs:{idArtraccion:"idArtraccion"},features:[e.qOj],decls:6,vars:1,consts:[[3,"titulo"],["modal",""],["modalBody",""],["modalFooter",""],["novalidate","novalidate","id","form",3,"keydown.enter"],["formulario","ngForm"],[1,"modal-content"],[1,"row"],[1,"col-md-12"],[1,"form-group"],[1,"label-input","required-label"],["name","accionRealizada","rows","3","required","",1,"form-control-g",2,"width","100%",3,"ngModel","ngModelChange"],["accionRealizada","ngModel"],["class","error",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],[1,"error"],[1,"col-md-4"],[3,"label","nombreArchivo","archivo","fechaEvidencia","tipoMime","id","contieneAyuda","downl_endpoint","idRegistroArchivo","archivoDto","idArchivoDescarga"],[1,"col-md-2"],[1,"picture-button",3,"click"],["src","assets/img/svg/svg-ico-15x15-adentro_circulo-naranja-Camara.svg",1,"icono"],[1,"date-input-container"],["type","text","autocomplete","off","placeholder","dd/mm/aaaa","bsDatepicker","",1,"form-control",3,"ngModel","name","bsConfig","ngModelChange"],[1,"fa-regular","fa-calendar-days"],[1,"col-md-3"],[1,"contenedor-flex","contenedor-btn","d-flex"],[4,"ngIf"],[1,"circle-button",3,"click"],["src","assets/img/svg/svg-ico-18x18-Boton-Circular-Gris-Eliminar.svg",1,"icono","ml-1","mt-4"],["src","assets/img/svg/svg-ico-18x18-Boton-Circular-Naranja-Agregar.svg",1,"icono","mr-1","mt-4"],["type","button",1,"btn-secundario","flex-shrink-1",3,"click"],["type","button","form","form",1,"btn-primario",3,"disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"app-modal-base",0,1),e.YNc(2,Le,13,3,"ng-template",null,2,e.W1O),e.YNc(4,je,4,1,"ng-template",null,3,e.W1O),e.qZA()),2&t&&e.Q6J("titulo",o.nombreEntidad+" - "+o.accion)},dependencies:[p.sg,p.O5,w.B,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.On,s.F,A.Np,A.Y5,Ye.x],styles:[".switch[_ngcontent-%COMP%]{top:4px;height:calc(1.5em + .75rem + 7px);width:100px}.slider[_ngcontent-%COMP%]{border:none}.slider[_ngcontent-%COMP%]:before{background-color:#fff;bottom:7px}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#ed7031}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(70px)}.on[_ngcontent-%COMP%], .off[_ngcontent-%COMP%]{font-family:Roboto}.off[_ngcontent-%COMP%]{padding-left:20px}.warning-wrapper[_ngcontent-%COMP%]{position:relative;font-weight:400;display:flex;justify-content:flex-start;align-items:flex-end}.warning-panel[_ngcontent-%COMP%]{position:absolute;top:10%;right:0;width:auto;height:auto;background:#fff;box-shadow:2px 2px 5px 2px #0003;border-radius:5%;padding:20px;z-index:-100}.warning-panel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:300px;max-width:100%;height:auto}.warning-button[_ngcontent-%COMP%]:hover + .warning-panel[_ngcontent-%COMP%]{z-index:100}.circle-button[_ngcontent-%COMP%]{background-color:transparent;border:0;align-items:center;justify-content:center;margin-top:5px}.picture-button[_ngcontent-%COMP%]{background-color:transparent;border:0;align-items:center;justify-content:center;margin-top:10px;margin-left:10px}.picture-button[_ngcontent-%COMP%]   img.icono[_ngcontent-%COMP%]{width:30px;height:30px}.date-input-container[_ngcontent-%COMP%]{position:relative;width:100%}.date-input-container[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{width:100%;padding-right:30px}.date-input-container[_ngcontent-%COMP%]   .fa-calendar-days[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);pointer-events:none}"]})}var I=c(62861),D=c(85246);class W extends S.v{constructor(i,t,o,a,n){super(o,a,t),this.accionRealizadaService=i,this.modalService=a,this.bsModalRef=n,this.HEADER_GRID="Acciones Realizadas",this.NOMBRE_ENTIDAD="Acciones Realizadas",this.isCollapsed=!0,this.destroy$=new pe.x,this.columns=[{headerName:"Clave",field:"idArtraccionRealizada"},{headerName:"Acci\xf3n Realizada",field:"accionRealizada",minWidth:150},{headerName:"Fecha Alta",field:"fechaAlta",minWidth:100,cellRenderer:l=>Z(l.data.fechaAlta).format("DD/MM/YYYY"),valueGetter:l=>Z(l.data.fechaAlta).format("DD/MM/YYYY")},{headerName:"Evidencia de la Acci\xf3n",field:"archivo",minWidth:150}],this.crudConfig={nombreEntidad:this.NOMBRE_ENTIDAD,generoGramatical:"masc",nombrePropiedadId:"idArtraccionRealizada",formConfig:{ComponenteFormulario:j,modalConfig:U.OS.Large,configAgregar:{acceso:h.f7.Agregar,params:{idArtraccion:0}},configEditar:{acceso:h.f7.Editar}},configEliminar:{acceso:h.f7.Eliminar,elementToString:l=>`${l.idArtraccionRealizada} `}}}ngOnInit(){this.cargarDatos(this.idArtraccion)}cargarDatos(i){this.idArtraccion=i,this.crudConfig?.formConfig?.configAgregar?.params&&this.crudConfig.formConfig?.configAgregar.params.idArtraccion,super.onInit()}consultarGrid(){return this.accionRealizadaService.consultarParaGrid(this.idArtraccion)}eliminar(i){throw new Error("Method not implemented.")}static#e=this.\u0275fac=function(t){return new(t||W)(e.Y36(q),e.Y36(v.V),e.Y36(I.Q),e.Y36(_.tT),e.Y36(_.UZ))};static#t=this.\u0275cmp=e.Xpm({type:W,selectors:[["app-accion-realizada"]],inputs:{idArtraccion:"idArtraccion"},features:[e.qOj],decls:1,vars:4,consts:[["titulo","","tituloBoton","Acciones Realizadas",3,"columns","crudConfig","elementos$","tieneAccesoAgregar$","agregarClick","gridClick"]],template:function(t,o){1&t&&(e.TgZ(0,"app-catalogo-base",0),e.NdJ("agregarClick",function(){return o.agregar()})("gridClick",function(n){return o.onGridClick(n)}),e.qZA()),2&t&&e.Q6J("columns",o.columns)("crudConfig",o.crudConfig)("elementos$",o.registros$)("tieneAccesoAgregar$",o.tieneAccesoAgregar$)},dependencies:[D.B]})}const We=["formulario"];function $e(r,i){if(1&r&&(e.TgZ(0,"div")(1,"div",6),e._uU(2," Acci\xf3n Realizada "),e.qZA(),e._UZ(3,"app-accion-realizada",23),e.qZA()),2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("idArtraccion",t.idEntidad)}}function Ke(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"form",4,5),e.NdJ("keydown.enter",function(a){return a.preventDefault()}),e.TgZ(2,"div",6),e._uU(3," Acci\xf3n de la Oportunidad "),e.qZA(),e.TgZ(4,"div",7)(5,"div",8)(6,"div",9)(7,"label",10),e._uU(8,"Acci\xf3n"),e.qZA(),e.TgZ(9,"div")(10,"textarea",11,12),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.accion=a)}),e.qZA()()()()(),e.TgZ(12,"div",7)(13,"div",13)(14,"div",9)(15,"label",10),e._uU(16,"Responsable de la Acci\xf3n"),e.qZA(),e.TgZ(17,"div")(18,"textarea",14,15),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.responsableAccion=a)}),e.qZA()()()(),e.TgZ(20,"div",13)(21,"div",9)(22,"label",16),e._uU(23,"Fecha Estimada para llevar a cabo la Acci\xf3n"),e.qZA(),e.TgZ(24,"div",17)(25,"input",18),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.fechaEstimada=a)}),e.qZA(),e._UZ(26,"i",19)(27,"i",19),e.qZA()()(),e.TgZ(28,"div",13)(29,"div",9)(30,"label",16),e._uU(31,"Estatus (Seguimiento)"),e.qZA(),e.TgZ(32,"div")(33,"ng-select",20,21),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.idEstatusSeguimiento=a)}),e.ALo(35,"async"),e.qZA()()()()(),e.YNc(36,$e,4,1,"div",22),e.qZA()}if(2&r){const t=e.oxw();e.xp6(10),e.Q6J("ngModel",t.entidad.accion),e.xp6(8),e.Q6J("ngModel",t.entidad.responsableAccion),e.xp6(7),e.Q6J("ngModel",t.entidad.fechaEstimada)("required",!0)("bsConfig",t.configDate)("disabled",!t.modoEditar),e.xp6(8),e.Q6J("items",e.lcZ(35,11,t.estatu$))("ngModel",t.entidad.idEstatusSeguimiento)("placeholder",t.DROPDOWN_PLACEHOLDER)("notFoundText",t.DROPDOWN_NO_OPTIONS),e.xp6(3),e.Q6J("ngIf",t.modoEditar)}}function Be(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.cancelar(!1))}),e._uU(1," Cancelar "),e.qZA(),e.TgZ(2,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSubmit(a.formulario))}),e._uU(3," Guardar Acci\xf3n "),e.qZA()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.submitting)}}class $ extends G.P{ngOnInit(){super.onInit(),this.esEditar(),this.consultarEstatus(),this.entidad.idArtrpeligroRiesgoEfecto=this.idArtrpeligroRiesgoEfecto}ngOnDestroy(){}constructor(i,t){super(i),this.accionOportunidadService=t,this.modoEditar=!1,this.configDate=d.g.CONFIG_DATEPICKER,this.DROPDOWN_PLACEHOLDER=C.vf,this.DROPDOWN_NO_OPTIONS=C.aQ,this.placeHolderSelect=d.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=d.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.entidad.fechaEstimada=(0,Re.ii)()}onSubmit(i){super.onSubmit(i)}consultarEstatus(){this.estatu$=this.accionOportunidadService.consultarParaSelectorEstatus()}esEditar(){this.accion==C.V_.Editar&&(this.modoEditar=!0)}consultar(i){return this.accionOportunidadService.consultar(i)}agregar(i){return this.accionOportunidadService.agregar(i)}editar(i){return this.accionOportunidadService.editar(i)}static#e=this.\u0275fac=function(t){return new(t||$)(e.Y36(v.V),e.Y36(y))};static#t=this.\u0275cmp=e.Xpm({type:$,selectors:[["app-accion-oportunidad-formulario"]],viewQuery:function(t,o){if(1&t&&e.Gf(We,5),2&t){let a;e.iGM(a=e.CRH())&&(o.formulario=a.first)}},inputs:{idPeligroRiesgoEfecto:"idPeligroRiesgoEfecto"},features:[e.qOj],decls:6,vars:1,consts:[[3,"titulo"],["modal",""],["modalBody",""],["modalFooter",""],["novalidate","novalidate","id","form",3,"keydown.enter"],["formulario","ngForm"],[1,"subseccion"],[1,"row"],[1,"col-md-12"],[1,"form-group"],[1,"label-input"],["name","accionName","type","text","maxlength","400","autocomplete","off",1,"form-control-textarea","form-control",3,"ngModel","ngModelChange"],["accion","ngModel"],[1,"col-md-4"],["name","responsableAccionName","type","text","maxlength","400","autocomplete","off",1,"form-control-textarea","form-control",3,"ngModel","ngModelChange"],["responsableAccion","ngModel"],[1,"label-input","required-label"],[1,"date-input-container"],["type","text","autocomplete","off","placeholder","dd/mm/aaaa","name","fechaEstimada","bsDatepicker","",1,"form-control",3,"ngModel","required","bsConfig","disabled","ngModelChange"],[1,"fa-regular","fa-calendar-days","ml-auto"],["name","estatus","appendTo","body","bindLabel","descripcion","bindValue","idEstatusSeguimiento",1,"select-custom","custom-width",3,"items","ngModel","placeholder","notFoundText","ngModelChange"],["idEstatusSeguimiento","ngModel"],[4,"ngIf"],[3,"idArtraccion"],["type","button",1,"btn-secundario","flex-shrink-1",3,"click"],["type","button","form","form",1,"btn-primario",3,"disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"app-modal-base",0,1),e.YNc(2,Ke,37,13,"ng-template",null,2,e.W1O),e.YNc(4,Be,4,1,"ng-template",null,3,e.W1O),e.qZA()),2&t&&e.Q6J("titulo",o.nombreEntidad+" - "+o.accion)},dependencies:[p.O5,w.B,P.w9,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.nD,s.On,s.F,A.Np,A.Y5,W,p.Ov],styles:[".date-input-container[_ngcontent-%COMP%]{position:relative;width:100%}.date-input-container[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{width:100%;padding-right:30px}.date-input-container[_ngcontent-%COMP%]   .fa-calendar-days[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);pointer-events:none}"]})}class K extends S.v{constructor(i,t,o,a){super(t,o,a),this.accionOportunidadService=i,this.HEADER_GRID="Accion Oportunidad",this.NOMBRE_ENTIDAD="Accion Oportunidad",this.crudConfig={nombreEntidad:this.NOMBRE_ENTIDAD,generoGramatical:"fem",nombrePropiedadId:"idArtraccion",formConfig:{ComponenteFormulario:$,modalConfig:U.OS.Large,configAgregar:{acceso:h.f7.Agregar,params:{idPeligroRiesgoEfecto:0}},configEditar:{acceso:h.f7.Editar}},configEliminar:{acceso:h.f7.Eliminar,elementToString:n=>`${n.idArtrpeligroRiesgoEfecto}`}},this.columns=[{headerName:"N\xfam",field:"idArtraccion",minWidth:50,width:120},{headerName:"Acci\xf3n",field:"accion",autoHeight:!0,minWidth:100,width:200},{headerName:"Responsable de la actividad",field:"responsableAccion",autoHeight:!0,minWidth:100,width:200},{headerName:"Fecha estimada para llevar a cabo la accion",field:"fechaEstimada",minWidth:100,width:200,cellRenderer:n=>Z(n.data.fechaEstimada).format("DD/MM/YYYY")},{headerName:"Estatus (Seguimiento)",field:"estatus",minWidth:250,width:300}]}ngOnInit(){this.cargarDatos(this.idPeligroRiesgoEfecto)}cargarDatos(i){this.idPeligroRiesgoEfecto=i,this.crudConfig?.formConfig?.configAgregar?.params&&(this.crudConfig.formConfig.configAgregar.params.idPeligroRiesgoEfecto=this.idPeligroRiesgoEfecto),super.onInit()}consultarGrid(){return this.accionOportunidadService.consultarParaGrid(this.idPeligroRiesgoEfecto).subscribe(i=>{console.log(i),console.log(this.idPeligroRiesgoEfecto)}),this.accionOportunidadService.consultarParaGrid(this.idPeligroRiesgoEfecto)}eliminar(i){throw new Error("Not implemented")}static#e=this.\u0275fac=function(t){return new(t||K)(e.Y36(y),e.Y36(I.Q),e.Y36(_.tT),e.Y36(v.V))};static#t=this.\u0275cmp=e.Xpm({type:K,selectors:[["app-accion-oportunidad"]],inputs:{idPeligroRiesgoEfecto:"idPeligroRiesgoEfecto"},features:[e.qOj],decls:1,vars:4,consts:[["tituloBoton","Plan de acciones de la oportunidad",3,"columns","crudConfig","elementos$","tieneAccesoAgregar$","agregarClick","gridClick"]],template:function(t,o){1&t&&(e.TgZ(0,"app-catalogo-base",0),e.NdJ("agregarClick",function(){return o.agregar()})("gridClick",function(n){return o.onGridClick(n)}),e.qZA()),2&t&&e.Q6J("columns",o.columns)("crudConfig",o.crudConfig)("elementos$",o.registros$)("tieneAccesoAgregar$",o.tieneAccesoAgregar$)},dependencies:[D.B]})}const Ve=["formulario"];function Xe(r,i){1&r&&(e.TgZ(0,"div",39),e._uU(1," El peligro es requerido "),e.qZA())}function et(r,i){1&r&&(e.TgZ(0,"div",39),e._uU(1," El riesgo es requerido "),e.qZA())}function tt(r,i){1&r&&(e.TgZ(0,"div",39),e._uU(1," El efecto es requerido "),e.qZA())}function it(r,i){1&r&&(e.TgZ(0,"div",39),e._uU(1," La probabilidad es requerida "),e.qZA())}function ot(r,i){1&r&&(e.TgZ(0,"div",39),e._uU(1," La severidad es requerida "),e.qZA())}function at(r,i){1&r&&(e.TgZ(0,"div",39),e._uU(1," La cantidad de personas expuestas es requerida "),e.qZA())}function nt(r,i){1&r&&(e.TgZ(0,"div",39),e._uU(1," El nivel de riesgo es requerido "),e.qZA())}function rt(r,i){1&r&&(e.TgZ(0,"div",39),e._uU(1," El resultado es requerido "),e.qZA())}function st(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"span",42),e._uU(2),e.qZA(),e.TgZ(3,"div",43)(4,"div",44)(5,"input",45),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw().$implicit;return e.KtG(n.descripcion=a)}),e.qZA(),e._UZ(6,"i",46),e.qZA(),e.TgZ(7,"div",44)(8,"input",47),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw().$implicit;return e.KtG(n.descripcion=a)}),e.qZA(),e._UZ(9,"i",48),e.qZA(),e.TgZ(10,"div",49)(11,"input",50),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw().$implicit;return e.KtG(n.descripcion=a)}),e.qZA(),e._uU(12," N/A "),e.qZA()()()}if(2&r){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.guiaCumplimiento.campoGuiaCumplimiento),e.xp6(3),e.Q6J("ngModel",t.descripcion)("name",t.idArtrpeligroRiesgoEfectoGuia.toString()),e.xp6(3),e.Q6J("ngModel",t.descripcion)("name",t.idArtrpeligroRiesgoEfectoGuia.toString()),e.xp6(3),e.Q6J("ngModel",t.descripcion)("name",t.idArtrpeligroRiesgoEfectoGuia.toString())}}function ct(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",13)(2,"label",14),e._uU(3),e.qZA(),e.TgZ(4,"div")(5,"input",51),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw().$implicit;return e.KtG(n.descripcion=a)}),e.qZA()()()()}if(2&r){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.guiaCumplimiento.campoGuiaCumplimiento),e.xp6(2),e.Q6J("ngModel",t.descripcion)("name",t.idArtrpeligroRiesgoEfectoGuia.toString())}}function lt(r,i){if(1&r&&(e.TgZ(0,"div",41),e.YNc(1,st,13,7,"div",38),e.YNc(2,ct,6,3,"div",38),e.qZA()),2&r){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",0==t.guiaCumplimiento.ingresaTexto&&0==t.guiaCumplimiento.ingresaArchivo),e.xp6(1),e.Q6J("ngIf",1==t.guiaCumplimiento.ingresaTexto)}}function dt(r,i){if(1&r&&(e.TgZ(0,"div")(1,"div",22),e._uU(2),e.qZA(),e.TgZ(3,"div",6),e.YNc(4,lt,3,2,"div",40),e.qZA()()),2&r){const t=i.$implicit;e.xp6(2),e.hij(" ",t[0].seccion," "),e.xp6(2),e.Q6J("ngForOf",t)}}function ut(r,i){1&r&&(e.TgZ(0,"div",39),e._uU(1," Las oportunidades son requeridas "),e.qZA())}function gt(r,i){if(1&r&&(e.TgZ(0,"div")(1,"div",22),e._uU(2," Plan de acciones de la oportunidad "),e.qZA(),e._UZ(3,"app-accion-oportunidad",52),e.qZA()),2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("idPeligroRiesgoEfecto",t.idEntidad)}}const be=function(r,i){return{"background-color":r,color:i}};function pt(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"form",4,5),e.NdJ("keydown.enter",function(a){return a.preventDefault()}),e.TgZ(2,"div",6),e._UZ(3,"div",7),e.TgZ(4,"div",8)(5,"label",9),e._UZ(6,"i",10),e.qZA(),e.TgZ(7,"div",11)(8,"b"),e._uU(9,"Peligro:"),e.qZA(),e._uU(10," Fuente con un potencial para causar lesiones y deterioro de la salud. "),e.qZA()()(),e.TgZ(11,"div",6),e._UZ(12,"div",7),e.TgZ(13,"div",8)(14,"label",9),e._UZ(15,"i",10),e.qZA(),e.TgZ(16,"div",11)(17,"b"),e._uU(18,"Riesgo para la SST:"),e.qZA(),e._uU(19," Combinaci\xf3n de la probabilidad de que ocurra eventos o exposiciones peligrosas relacionadas con el trabajo y la severidad de la lesi\xf3n y deterioro de la salud que puede causar los eventos o exposiciones. "),e.qZA()()(),e.TgZ(20,"div",6)(21,"div",12)(22,"div",13)(23,"label",14),e._uU(24,"Peligro"),e.qZA(),e.TgZ(25,"div")(26,"textarea",15,16),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.peligro=a)}),e.qZA()(),e.YNc(28,Xe,2,0,"div",17),e.qZA()()(),e.TgZ(29,"div",6),e._UZ(30,"div",7),e.TgZ(31,"div",8)(32,"label",9),e._UZ(33,"i",10),e.qZA(),e.TgZ(34,"div",11)(35,"b"),e._uU(36,"Efecto: "),e.qZA(),e._uU(37,"Ayuda "),e.qZA()()(),e.TgZ(38,"div",6)(39,"div",12)(40,"div",13)(41,"label",14),e._uU(42,"Riesgo"),e.qZA(),e.TgZ(43,"div")(44,"textarea",18,19),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.riesgo=a)}),e.qZA()(),e.YNc(46,et,2,0,"div",17),e.qZA()()(),e.TgZ(47,"div",6)(48,"div",12)(49,"div",13)(50,"label",14),e._uU(51,"Efecto"),e.qZA(),e.TgZ(52,"div")(53,"textarea",20,21),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.efecto=a)}),e.qZA()(),e.YNc(55,tt,2,0,"div",17),e.qZA()()(),e.TgZ(56,"div",22),e._uU(57," Evaluaci\xf3n de riesgos "),e.qZA(),e.TgZ(58,"div",6)(59,"div",23)(60,"div",13)(61,"label",14),e._uU(62,"Probabilidad (P)"),e.qZA(),e.TgZ(63,"div")(64,"input",24,25),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.probabilidad=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.calularNivelRiesgo())}),e.qZA()()(),e.YNc(66,it,2,0,"div",17),e.qZA(),e._UZ(67,"div",26),e.TgZ(68,"div",23)(69,"div",13)(70,"label",14),e._uU(71,"Severidad (C)"),e.qZA(),e.TgZ(72,"div")(73,"input",27,28),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.severidad=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.calularNivelRiesgo())}),e.qZA()()(),e.YNc(75,ot,2,0,"div",17),e.qZA(),e._UZ(76,"div",26),e.TgZ(77,"div",23)(78,"div",13)(79,"label",14),e._uU(80,"Personas Expuestas (PE)"),e.qZA(),e.TgZ(81,"div")(82,"input",29,30),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.personasExpuestas=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.calularNivelRiesgo())}),e.qZA()()(),e.YNc(84,at,2,0,"div",17),e.qZA()(),e.TgZ(85,"div",6)(86,"div",23)(87,"div",13)(88,"label",14),e._uU(89,"Nivel de Riesgo (NR)"),e.qZA(),e.TgZ(90,"div")(91,"input",31,32),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.nivelRiesgo=a)}),e.qZA()()(),e.YNc(93,nt,2,0,"div",17),e.qZA(),e._UZ(94,"div",26),e.TgZ(95,"div",23)(96,"div",13)(97,"label",14),e._uU(98,"Resultado"),e.qZA(),e.TgZ(99,"div")(100,"input",33,34),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.descripcionResultado=a)}),e.qZA()()(),e.YNc(102,rt,2,0,"div",17),e.qZA()(),e.YNc(103,dt,5,2,"div",35),e.TgZ(104,"div",22),e._uU(105," Oportunidades "),e.qZA(),e.TgZ(106,"div"),e._uU(107,"Para eliminar el riesgo, adaptar o sustituir productos o actividades menos peligrosas para los trabajadores, mejoras en el desempe\xf1o del SGSST, cambios planificados."),e.qZA(),e.TgZ(108,"div",6)(109,"div",12)(110,"div",13)(111,"label",14),e._uU(112,"Oportunidades"),e.qZA(),e.TgZ(113,"div")(114,"textarea",36,37),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.oportunidades=a)}),e.qZA()(),e.YNc(116,ut,2,0,"div",17),e.qZA()()(),e.YNc(117,gt,4,1,"div",38),e.qZA()}if(2&r){const t=e.MAs(27),o=e.MAs(45),a=e.MAs(54),n=e.MAs(65),l=e.MAs(74),g=e.MAs(83),E=e.MAs(92),R=e.MAs(101),b=e.MAs(115),u=e.oxw();e.xp6(26),e.Q6J("ngModel",u.entidad.peligro),e.xp6(2),e.Q6J("ngIf",(null==t.errors?null:t.errors.required)&&t.touched),e.xp6(16),e.Q6J("ngModel",u.entidad.riesgo),e.xp6(2),e.Q6J("ngIf",(null==o.errors?null:o.errors.required)&&o.touched),e.xp6(7),e.Q6J("ngModel",u.entidad.efecto),e.xp6(2),e.Q6J("ngIf",(null==a.errors?null:a.errors.required)&&a.touched),e.xp6(9),e.Q6J("ngModel",u.entidad.probabilidad)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==n.errors?null:n.errors.required)&&n.touched),e.xp6(7),e.Q6J("ngModel",u.entidad.severidad)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==l.errors?null:l.errors.required)&&l.touched),e.xp6(7),e.Q6J("ngModel",u.entidad.personasExpuestas)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==g.errors?null:g.errors.required)&&g.touched),e.xp6(7),e.Q6J("ngModel",u.entidad.nivelRiesgo)("required",!0)("ngStyle",e.WLB(27,be,u.backgroundColor,u.textColor)),e.xp6(2),e.Q6J("ngIf",(null==E.errors?null:E.errors.required)&&E.touched),e.xp6(7),e.Q6J("ngModel",u.descripcionResultado)("required",!0)("ngStyle",e.WLB(30,be,u.backgroundColor,u.textColor)),e.xp6(2),e.Q6J("ngIf",(null==R.errors?null:R.errors.required)&&R.touched),e.xp6(1),e.Q6J("ngForOf",u.secciones),e.xp6(11),e.Q6J("ngModel",u.entidad.oportunidades),e.xp6(2),e.Q6J("ngIf",(null==b.errors?null:b.errors.required)&&b.touched),e.xp6(1),e.Q6J("ngIf","Editar"==u.accion)}}function mt(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.cancelar(!1))}),e._uU(1," Cancelar "),e.qZA(),e.TgZ(2,"button",54),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSubmit(a.formulario))}),e._uU(3," Guardar "),e.qZA()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.submitting)}}class B extends G.P{consultar(i){return this.peligroRiesgoEfectoService.consultarParaFormulario(i)}agregar(i){return this.peligroRiesgoEfectoService.agregar(i)}editar(i){return this.secciones.forEach(t=>{t.forEach(o=>{let a={idArtrpeligroRiesgoEfectoGuia:o.idArtrpeligroRiesgoEfectoGuia,descripcion:o.descripcion};this.guiaForm.guias.push(a)})}),this.peligroRiesgoEfectoGuiaService.ActualizarPeligroRiesgoEfectoGuia(this.guiaForm).subscribe(t=>t,t=>this.mensajeService.modalError("Error al modificar uno de los campos")),this.peligroRiesgoEfectoService.editar(this.entidad)}ngOnInit(){this.entidad.fechaAlta=new Date,this.entidad.idArtridentificacionPeligro=this.idPeligrosRiesgos,this.accion==d.g.MODAL_ACCION_EDITAR&&this.consultarEntidad()}ngOnDestroy(){}constructor(i,t,o,a,n,l){super(t),this.peligroRiesgoEfectoService=i,this.modalService=o,this.bsModalRef=a,this.router=n,this.peligroRiesgoEfectoGuiaService=l,this.backgroundColor="",this.textColor="",this.guiaForm={guias:[]}}calularNivelRiesgo(){let i={personasExpuestas:this.entidad.personasExpuestas,probabilidad:this.entidad.probabilidad,severidad:this.entidad.severidad};this.peligroRiesgoEfectoService.obtenerNivelRiesgo(i).subscribe(t=>{this.entidad.nivelRiesgo=t.resultado,this.entidad.resultado=t.resultado,this.descripcionResultado=t.descripcion,this.backgroundColor=t.colorFondo,this.textColor=t.colorLetra})}onSubmit(i){super.onSubmit(i)}consultarEntidad(){this.peligroRiesgoEfectoService.consultarParaFormulario(this.idEntidad).subscribe(i=>{this.entidad=i,this.calularNivelRiesgo(),this.consultarGuias()})}consultarGuias(){this.peligroRiesgoEfectoGuiaService.ConsultarPorPeligroRiesgoEfecto(this.entidad.idArtrpeligroRiesgoEfecto).subscribe(i=>{this.secciones=this.agruparPorIdSeccion(i)})}agruparPorIdSeccion(i){const t={};return i.forEach(o=>{t[o.idTipoGuiaSeccion]||(t[o.idTipoGuiaSeccion]=[]),t[o.idTipoGuiaSeccion].push(o)}),Object.values(t)}static#e=this.\u0275fac=function(t){return new(t||B)(e.Y36(F),e.Y36(v.V),e.Y36(_.tT),e.Y36(_.UZ),e.Y36(O.F0),e.Y36(J))};static#t=this.\u0275cmp=e.Xpm({type:B,selectors:[["app-peligro-riesgo-efecto-formulario"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ve,5),2&t){let a;e.iGM(a=e.CRH())&&(o.formulario=a.first)}},features:[e.qOj],decls:6,vars:1,consts:[[3,"titulo"],["modal",""],["modalBody",""],["modalFooter",""],["novalidate","novalidate","id","form",3,"keydown.enter"],["formulario","ngForm"],[1,"row"],[1,"col-md-5",2,"width","50%"],[1,"col-md-2","warning-wrapper",2,"width","25%","display","flex","align-items","end","justify-items","right"],[1,"warning-button"],[1,"fa-solid","fa-triangle-exclamation","warning-button",2,"color","#f0bc00"],[1,"warning-panel"],[1,"col-md-12"],[1,"form-group"],[1,"label-input","required-label"],["name","peligroName","type","text","rows","4","autocomplete","off","required","true",1,"form-control-textarea","form-control",3,"ngModel","ngModelChange"],["peligro","ngModel"],["class","error",4,"ngIf"],["name","riesgoName","type","text","rows","4","autocomplete","off","required","true",1,"form-control-textarea","form-control",3,"ngModel","ngModelChange"],["riesgo","ngModel"],["name","efectoName","type","text","rows","4","autocomplete","off","required","true",1,"form-control-textarea","form-control",3,"ngModel","ngModelChange"],["efecto","ngModel"],[1,"subseccion"],[1,"col-2",2,"width","25%"],["name","probabilidadName","type","number","autocomplete","off",1,"form-control",3,"ngModel","required","ngModelChange"],["probabilidad","ngModel"],[1,"col-1",2,"width","12.5%"],["name","severidadName","type","number","autocomplete","off",1,"form-control",3,"ngModel","required","ngModelChange"],["severidad","ngModel"],["name","personasExpuestasName","type","number","autocomplete","off",1,"form-control",3,"ngModel","required","ngModelChange"],["personasExpuestas","ngModel"],["name","nivelRiesgoName","type","number","autocomplete","off","disabled","true",1,"form-control",3,"ngModel","required","ngStyle","ngModelChange"],["nivelRiesgo","ngModel"],["name","resultadoName","type","text","autocomplete","off","disabled","true",1,"form-control",3,"ngModel","required","ngStyle","ngModelChange"],["resultado","ngModel"],[4,"ngFor","ngForOf"],["name","oportunidadesName","type","text","rows","4","autocomplete","off","required","true",1,"form-control-textarea","form-control",3,"ngModel","ngModelChange"],["oportunidades","ngModel"],[4,"ngIf"],[1,"error"],["class","col-4","style","padding-bottom: 2vh;",4,"ngFor","ngForOf"],[1,"col-4",2,"padding-bottom","2vh"],[1,"concepto-descripcion"],[1,"concepto-radiobuttons","row"],[1,"radio-container","col-2"],["type","radio","value","Si",3,"ngModel","name","ngModelChange"],[1,"fa-solid","fa-check"],["type","radio","value","No",3,"ngModel","name","ngModelChange"],[1,"fa-thin","fa-x"],[1,"radio-container","col-3"],["type","radio","value","N/A",3,"ngModel","name","ngModelChange"],["type","text","autocomplete","off",1,"form-control",3,"ngModel","name","ngModelChange"],[3,"idPeligroRiesgoEfecto"],["type","button",1,"btn-secundario","flex-shrink-1",3,"click"],["type","button","form","form",1,"btn-primario",3,"disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"app-modal-base",0,1),e.YNc(2,pt,118,33,"ng-template",null,2,e.W1O),e.YNc(4,mt,4,1,"ng-template",null,3,e.W1O),e.qZA()),2&t&&e.Q6J("titulo",o.nombreEntidad+" - "+o.accion)},dependencies:[p.sg,p.O5,p.PC,w.B,s._Y,s.Fj,s.wV,s._,s.JJ,s.JL,s.Q7,s.On,s.F,K],styles:[".form-control-textarea[_ngcontent-%COMP%]{width:98%;padding:10px;height:80px!important}.concepto-descripcion[_ngcontent-%COMP%]{flex:1;font-size:.8rem;margin-right:5px}"]})}class V extends S.v{constructor(i,t,o,a){super(t,o,a),this.peligroRiesgoEfectoService=i,this.HEADER_GRID="Peligro, Riesgo y Efecto",this.NOMBRE_ENTIDAD="Peligro, Riesgo y Efecto",this.crudConfig={nombreEntidad:this.NOMBRE_ENTIDAD,generoGramatical:"masc",nombrePropiedadId:"idArtrpeligroRiesgoEfecto",formConfig:{ComponenteFormulario:B,modalConfig:U.OS.Large,configAgregar:{acceso:h.f7.Agregar,params:{idPeligrosRiesgos:0}},configEditar:{acceso:h.f7.Editar}},configEliminar:{acceso:h.f7.Eliminar,elementToString:n=>`${n.idArtrpeligroRiesgoEfecto}`}},this.columns=[{headerName:"N\xfam",field:"idArtrpeligroRiesgoEfecto",minWidth:50,width:120},{headerName:"Peligo",field:"peligro",autoHeight:!0,minWidth:250,width:300},{headerName:"Riesgo",field:"riesgo",autoHeight:!0,minWidth:100,width:270},{headerName:"Efecto",field:"efecto",minWidth:100,width:200}]}ngOnInit(){console.log(this.idPeligrosRiesgos),this.cargarDatos(this.idPeligrosRiesgos)}cargarDatos(i){this.idPeligrosRiesgos=i,this.crudConfig?.formConfig?.configAgregar?.params&&(this.crudConfig.formConfig.configAgregar.params.idPeligrosRiesgos=this.idPeligrosRiesgos),super.onInit()}consultarGrid(){return this.peligroRiesgoEfectoService.consultarParaGrid(this.idPeligrosRiesgos)}eliminar(i){return this.peligroRiesgoEfectoService.eliminar(i)}static#e=this.\u0275fac=function(t){return new(t||V)(e.Y36(F),e.Y36(I.Q),e.Y36(_.tT),e.Y36(v.V))};static#t=this.\u0275cmp=e.Xpm({type:V,selectors:[["app-peligro-riesgo-efecto"]],inputs:{idPeligrosRiesgos:"idPeligrosRiesgos"},features:[e.qOj],decls:1,vars:4,consts:[["tituloBoton","Peligro, Riesgo y Efecto",3,"columns","crudConfig","elementos$","tieneAccesoAgregar$","agregarClick","gridClick"]],template:function(t,o){1&t&&(e.TgZ(0,"app-catalogo-base",0),e.NdJ("agregarClick",function(){return o.agregar()})("gridClick",function(n){return o.onGridClick(n)}),e.qZA()),2&t&&e.Q6J("columns",o.columns)("crudConfig",o.crudConfig)("elementos$",o.registros$)("tieneAccesoAgregar$",o.tieneAccesoAgregar$)},dependencies:[D.B]})}const ht=["formulario"];function _t(r,i){1&r&&(e.TgZ(0,"div",24),e._uU(1," El \xc1rea es requerida "),e.qZA())}function ft(r,i){1&r&&(e.TgZ(0,"div",24),e._uU(1," El Puesto de trabajo es requerido "),e.qZA())}function vt(r,i){1&r&&(e.TgZ(0,"div",24),e._uU(1," El responsable de seguridad es requerido "),e.qZA())}function At(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",25),e._uU(2," Peligro, Riesgo y Efecto "),e.qZA(),e._UZ(3,"app-peligro-riesgo-efecto",26),e.TgZ(4,"div",25),e._uU(5,"Revisi\xf3n"),e.qZA(),e.TgZ(6,"div",27)(7,"div",8)(8,"label",9),e._uU(9,"Revis\xf3 - Responsable de Seguridad"),e.qZA(),e.TgZ(10,"div")(11,"input",28,29),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw(2);return e.KtG(n.entidad.responsableSeguridad=a)}),e.qZA()()(),e.YNc(13,vt,2,0,"div",12),e.qZA()()}if(2&r){const t=e.MAs(12),o=e.oxw(2);e.xp6(3),e.Q6J("idPeligrosRiesgos",o.idEntidad),e.xp6(8),e.Q6J("ngModel",o.entidad.responsableSeguridad)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==t.errors?null:t.errors.required)&&t.touched)}}function Ct(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"form",4,5),e.NdJ("keydown.enter",function(a){return a.preventDefault()}),e.TgZ(2,"div",6)(3,"div",7)(4,"div",8)(5,"label",9),e._uU(6,"\xc1rea"),e.qZA(),e.TgZ(7,"div")(8,"ng-select",10,11),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.idArea=a)}),e.ALo(10,"async"),e.qZA()(),e.YNc(11,_t,2,0,"div",12),e.qZA()(),e.TgZ(12,"div",7)(13,"div",8)(14,"label",9),e._uU(15,"Parte Interesada"),e.qZA(),e.TgZ(16,"div")(17,"ng-select",13,14),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.idArtrparteInteresada=a)}),e.ALo(19,"async"),e.qZA()()()(),e.TgZ(20,"div",7)(21,"div",8)(22,"label",9),e._uU(23,"Tipo de Actividad"),e.qZA(),e.TgZ(24,"div")(25,"ng-select",15,16),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.idArtrtipoActividad=a)}),e.ALo(27,"async"),e.qZA()()()()(),e.TgZ(28,"div",6)(29,"div",17)(30,"div",8)(31,"label",18),e._uU(32,"Actividad"),e.qZA(),e.TgZ(33,"div")(34,"textarea",19,20),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.actividad=a)}),e.qZA()()()()(),e.TgZ(36,"div",6)(37,"div",7)(38,"div",8)(39,"label",9),e._uU(40,"Puesto de Trabajo"),e.qZA(),e.TgZ(41,"div")(42,"input",21,22),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.entidad.puestoTrabajo=a)}),e.qZA()()(),e.YNc(44,ft,2,0,"div",12),e.qZA(),e.YNc(45,At,14,4,"div",23),e.qZA()()}if(2&r){const t=e.MAs(9),o=e.MAs(43),a=e.oxw();e.xp6(8),e.Q6J("items",e.lcZ(10,19,a.area$))("required",!0)("ngModel",a.entidad.idArea)("placeholder",a.DROPDOWN_PLACEHOLDER)("notFoundText",a.DROPDOWN_NO_OPTIONS),e.xp6(3),e.Q6J("ngIf",(null==t.errors?null:t.errors.required)&&t.touched),e.xp6(6),e.Q6J("items",e.lcZ(19,21,a.interesada$))("ngModel",a.entidad.idArtrparteInteresada)("placeholder",a.DROPDOWN_PLACEHOLDER)("notFoundText",a.DROPDOWN_NO_OPTIONS),e.xp6(8),e.Q6J("items",e.lcZ(27,23,a.actividade$))("ngModel",a.entidad.idArtrtipoActividad)("placeholder",a.DROPDOWN_PLACEHOLDER)("notFoundText",a.DROPDOWN_NO_OPTIONS),e.xp6(9),e.Q6J("ngModel",a.entidad.actividad),e.xp6(8),e.Q6J("ngModel",a.entidad.puestoTrabajo)("required",!0),e.xp6(2),e.Q6J("ngIf",(null==o.errors?null:o.errors.required)&&o.touched),e.xp6(1),e.Q6J("ngIf",a.modoEditar)}}function Rt(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.cancelar())}),e._uU(1,"Cancelar"),e.qZA(),e.TgZ(2,"button",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSubmit(a.formulario))}),e._uU(3,"Guardar Identificaci\xf3n"),e.qZA()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.submitting)}}class X extends G.P{constructor(i,t,o,a,n){super(t),this.peligrosRiesgosService=i,this.modalService=o,this.bsModalRef=a,this.router=n,this.modoEditar=!1,this.placeHolderSelect=d.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=d.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.destroy$=new pe.x,this.mensajeAgregar="Los datos han sido agregados",this.mensajeEditar="Los datos han sido modificados",this.entidad.estatus=!1}ngOnInit(){super.onInit(),this.consultarArea(),this.consultarInteresada(),this.consultarActividad(),this.esEditar()}consultarArea(){this.area$=this.peligrosRiesgosService.consultaParaSelectorArea()}consultarInteresada(){this.interesada$=this.peligrosRiesgosService.consultarParaSelectorInteresada()}consultarActividad(){this.actividade$=this.peligrosRiesgosService.consultaParaSelectorActividad()}onSubmit(i){super.onSubmit(i)}esEditar(){this.accion==C.V_.Editar&&(this.modoEditar=!0)}consultar(i){return this.peligrosRiesgosService.consultar(i)}agregar(i){return this.peligrosRiesgosService.agregar(i)}editar(i){return this.peligrosRiesgosService.editar(i)}ngOnDestroy(){this.destroy$.next()}static#e=this.\u0275fac=function(t){return new(t||X)(e.Y36(N),e.Y36(v.V),e.Y36(_.tT),e.Y36(_.UZ),e.Y36(O.F0))};static#t=this.\u0275cmp=e.Xpm({type:X,selectors:[["app-peligros-riesgos-formulario"]],viewQuery:function(t,o){if(1&t&&e.Gf(ht,5),2&t){let a;e.iGM(a=e.CRH())&&(o.formulario=a.first)}},features:[e.qOj],decls:6,vars:1,consts:[[3,"titulo"],["modal",""],["modalBody",""],["modalFooter",""],["novalidate","novalidate","id","form",3,"keydown.enter"],["formulario","ngForm"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"label-input","required-label"],["name","area","appendTo","body","bindLabel","nombre","bindValue","idArea",1,"select-custom","custom-width",3,"items","required","ngModel","placeholder","notFoundText","ngModelChange"],["idArea","ngModel"],["class","error",4,"ngIf"],["name","parteInteresada","appendTo","body","bindLabel","descripcion","bindValue","idArtrparteInteresada",1,"select-custom","custom-width",3,"items","ngModel","placeholder","notFoundText","ngModelChange"],["idArtrparteInteresada","ngModel"],["name","tipoActividad","appendTo","body","bindLabel","descripcion","bindValue","idArtrtipoActividad",1,"select-custom","custom-width",3,"items","ngModel","placeholder","notFoundText","ngModelChange"],["idArtrtipoActividad","ngModel"],[1,"col-md-12"],[1,"label-input"],["name","actividadName","type","text","maxlength","400","autocomplete","off",1,"form-control-textarea","form-control",3,"ngModel","ngModelChange"],["actividad","ngModel"],["name","puestoTrabajo","type","text","autocomplete","off",1,"form-control",3,"ngModel","required","ngModelChange"],["puestoTrabajo","ngModel"],[4,"ngIf"],[1,"error"],[1,"subseccion"],[3,"idPeligrosRiesgos"],[1,"col-md-6"],["name","responsableSeguridad","type","text","autocomplete","off",1,"form-control",3,"ngModel","required","ngModelChange"],["responsableSeguridad","ngModel"],["type","button",1,"btn-secundario","flex-shrink-1",3,"click"],["type","button","form","form",1,"btn-primario",3,"disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"app-modal-base",0,1),e.YNc(2,Ct,46,25,"ng-template",null,2,e.W1O),e.YNc(4,Rt,4,1,"ng-template",null,3,e.W1O),e.qZA()),2&t&&e.Q6J("titulo",o.nombreEntidad+" - "+o.accion)},dependencies:[p.O5,w.B,P.w9,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.nD,s.On,s.F,V,p.Ov],styles:['@charset "UTF-8";.subtitulo[_ngcontent-%COMP%]{color:#ff6c00;padding-top:10px;border-top:1px #ff6c00 solid;margin-top:40px;margin-bottom:20px;width:100%}.image-box[_ngcontent-%COMP%]{display:flex;margin-top:25px;padding-left:15px;justify-items:center;align-items:center}.pointer[_ngcontent-%COMP%]{cursor:pointer}.switch[_ngcontent-%COMP%]{top:1px;height:calc(1.5em + .8rem + 10px);width:110px}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{background-color:#fff;transform:translate(70px)}.switch[_ngcontent-%COMP%]   input.accent[_ngcontent-%COMP%]:checked + .slider.round[_ngcontent-%COMP%]{background-color:#ed7d31}.switch[_ngcontent-%COMP%]   input.accent[_ngcontent-%COMP%]:checked + .slider.round[_ngcontent-%COMP%]   .on[_ngcontent-%COMP%]{color:#fff}']})}const bt=["formulario"];class ee extends S.v{constructor(i,t,o,a){super(i,t,o),this.peligrosRiesgosService=a,this.placeHolderSelect=d.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=d.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.columns=[{headerName:"Num",field:"idARTRIdentificacionPeligro",minWidth:50,width:80},{headerName:"\xc1rea",field:"area",minWidth:50,width:80},{headerName:"Parte Interesada",field:"parteInteresada",minWidth:70,width:130},{headerName:"Tipo de Actividad",field:"tipoActividad",minWidth:70,width:130},{headerName:"Actividad",field:"actividad",minWidth:50,width:80},{headerName:"Puesto de Trabajo",field:"puestoTrabajo",minWidth:50,width:130}],this.crudConfig={nombreEntidad:"Identificaci\xf3n Peligros y Evaluaci\xf3n",generoGramatical:"masc",nombrePropiedadId:"idARTRIdentificacionPeligro",formConfig:{ComponenteFormulario:X,modalConfig:U.OS.Large,configAgregar:{acceso:h.f7.Agregar},configEditar:{acceso:h.f7.Editar}},configEliminar:{acceso:h.f7.Eliminar,elementToString:n=>`${n.idARTRIdentificacionPeligro}`}}}ngOnInit(){super.onInit()}consultarGrid(){return this.peligrosRiesgosService.consultarParaGrid()}eliminar(i){return this.peligrosRiesgosService.eliminar(i)}static#e=this.\u0275fac=function(t){return new(t||ee)(e.Y36(I.Q),e.Y36(_.tT),e.Y36(v.V),e.Y36(N))};static#t=this.\u0275cmp=e.Xpm({type:ee,selectors:[["app-peligros-riesgos"]],viewQuery:function(t,o){if(1&t&&e.Gf(bt,5),2&t){let a;e.iGM(a=e.CRH())&&(o.formulario=a.first)}},inputs:{entidad:"entidad",idARTRIdentificacionPeligro:"idARTRIdentificacionPeligro",heading:"heading",EsAgregar:"EsAgregar"},features:[e.qOj],decls:6,vars:4,consts:[[1,"cuerpo-contenedor"],[1,"subseccion"],[1,"row"],[1,"col-md-12"],["tituloBoton","Identificaci\xf3n Peligros y Evaluaci\xf3n",3,"columns","crudConfig","elementos$","tieneAccesoAgregar$","agregarClick","gridClick"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Identificaci\xf3n de Peligros y Evaluaci\xf3n Riegos y Oportunidades"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"app-catalogo-base",4),e.NdJ("agregarClick",function(){return o.agregar()})("gridClick",function(n){return o.onGridClick(n)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("columns",o.columns)("crudConfig",o.crudConfig)("elementos$",o.registros$)("tieneAccesoAgregar$",o.tieneAccesoAgregar$))},dependencies:[D.B],styles:[".date-input-container[_ngcontent-%COMP%]{position:relative;width:100%}.date-input-container[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{width:100%;padding-right:30px}.date-input-container[_ngcontent-%COMP%]   .fa-calendar-days[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);pointer-events:none}.form-control-textarea[_ngcontent-%COMP%]{width:100%;padding:10px;height:100px!important}"]})}class Te{constructor(){}}var Tt=c(93416),Mt=c(5596);class Y{constructor(i){this.http=i,this.dataUrl="artrparticipantes/"}consultarParaGrid(i){return this.http.get(this.dataUrl+`${i}`)}agregar(i){return this.http.post(this.dataUrl+"agregar",i)}editar(i){return this.http.put(this.dataUrl+"editar",i)}eliminar(i){return this.http.delete(this.dataUrl+`${i}`)}consultarFirma(i){return this.http.get(this.dataUrl+`firma/${i}`)}actualizarFirma(i){return this.http.post(this.dataUrl+"actualizarFirma",i)}static#e=this.\u0275fac=function(t){return new(t||Y)(e.LFG(M.eN))};static#t=this.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"})}var xt=c(58390);class te{constructor(i,t,o,a){this.bsModalRef=i,this.modalService=t,this.modalMensajeService=o,this.artrparticipantesService=a,this.participantesList=[],this.editarParticipante=new Te,this.esEditar=!1,this.firmaButton={headerName:"",field:"",cellRenderer:"actionButton",minWidth:44,maxWidth:44,resizable:!1,sortable:!1,filter:!1,suppressMovable:!0,lockPosition:!0,action:d.g.GRID_ACCION_FIRMAR,pinned:"right"},this.verButton={headerName:"",fiel:"",cellRenderer:"actionButton",minWidth:44,maxWidth:44,resizable:!1,sortable:!1,filter:!1,suppressMovable:!1,lockPosition:!0,action:d.g.GRID_ACCION_VER_FIRMA,pinned:"right"},this.participanteColumns=[{headerName:"N\xfam",field:"numeroConsecutivo",minWidth:100},{headerName:"Nombre",field:"nombre",minWidth:100},{headerName:"Puesto",field:"puesto",minWidth:100},{headerName:"Firma",field:"",minWidth:100},{headerName:"Responsable de Seguridad",field:"responsableSeguridad",minWidth:150,valueGetter:n=>n.data.responsableSeguridad?"S\xed":"No"},this.firmaButton,this.verButton]}ngOnInit(){this.consultarParticipante(this.idArtrutinarios)}agregar(i){i?(this.artrparticipantesService.editar(this.editarParticipante).subscribe({error:t=>{this.modalMensajeService.modalError(t)},complete:()=>{this.modalMensajeService.modalExito("El participante ha sido modificado"),this.limpiarCampos()}}),this.esEditar=!1):(this.editarParticipante.idArtrutinarios=this.idArtrutinarios,this.artrparticipantesService.agregar(this.editarParticipante).subscribe({error:t=>{this.modalMensajeService.modalError(t)},complete:()=>{this.modalMensajeService.modalExito("El participante ha sido agregado"),this.limpiarCampos()}}))}limpiarCampos(){this.editarParticipante=new Te,this.consultarParticipante(this.idArtrutinarios)}onGridClick(i){i.accion===d.g.GRID_ACCION_FIRMAR&&this.abrirFirma(i.data),i.accion===d.g.GRID_ACCION_EDITAR&&(this.editarParticipante=i.data,this.esEditar=!0),i.accion===d.g.GRID_ACCION_ELIMINAR&&this.eliminar(i.data.idArtrparticipantes),i.accion===d.g.GRID_ACCION_VER_FIRMA&&this.artrparticipantesService.consultarFirma(i.data.idArtrparticipantes).subscribe(t=>{this.verFirma(t.firma)})}abrirFirma(i){this.bsModalRef=this.modalService.show(Mt.V,d.g.CONFIG_MODAL_DEFAULT),this.bsModalRef.content.esModal=!0,this.bsModalRef.content.onClose=t=>{const o=this.bsModalRef.content.firma;if(o.firma){let a=o.firma.split(",");i.firma=a[1],i.tipeMime="image/png",i.latitud=o.latitud.toString(),i.longitud=o.longitud.toString(),this.artrparticipantesService.actualizarFirma(i).subscribe({error:n=>{this.modalMensajeService.modalError(n)},complete:()=>{this.modalMensajeService.modalExito("Firma agregada con exito")}})}this.bsModalRef.hide()}}eliminar(i){this.modalMensajeService.modalConfirmacion("\xbfDesea eliminar la selecci\xf3n?","Eliminar",d.g.ICONO_CRUZ).then(t=>{this.artrparticipantesService.eliminar(i).subscribe(o=>{this.modalMensajeService.modalExito("Eliminado con Exito"),this.consultarParticipante(this.idArtrutinarios)})})}verFirma(i){let t={archivo:i,nombreImagen:"Firma",archivoTipoMime:"image/png",onCloseCallback:a=>{this.bsModalRef.hide()}};const o={...d.g.CONFIG_MODAL_DEFAULT,initialState:t};this.bsModalRef=this.modalService.show(Tt.U,o)}consultarParticipante(i){this.artrparticipantesService.consultarParaGrid(i).subscribe(t=>{this.participantesList=t})}static#e=this.\u0275fac=function(t){return new(t||te)(e.Y36(_.UZ),e.Y36(_.tT),e.Y36(v.V),e.Y36(Y))};static#t=this.\u0275cmp=e.Xpm({type:te,selectors:[["app-artrparticipantes"]],inputs:{idArtrutinarios:"idArtrutinarios"},decls:37,vars:5,consts:[[1,"cuerpo-contenedor"],[1,"subseccion"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"label-input","required-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-3"],[2,"display","flex","flex-direction","column"],["for","responsableSeguridad",1,"switch"],["name","responsableSeguridadName","type","checkbox","id","responsableSeguridad",3,"ngModel","ngModelChange"],["responsableSeguridad","ngModel"],[1,"slider","round"],[1,"on"],[1,"off"],[1,"btn-agregar",3,"click"],[1,"col-md-12"],[3,"data","children","event"],["gridparticipantes",""]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Participantes"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"div")(9,"input",6),e.NdJ("ngModelChange",function(n){return o.editarParticipante.nombre=n}),e.qZA()()()(),e.TgZ(10,"div",3)(11,"div",4)(12,"label",5),e._uU(13,"Puesto"),e.qZA(),e.TgZ(14,"div")(15,"input",6),e.NdJ("ngModelChange",function(n){return o.editarParticipante.puesto=n}),e.qZA()()()(),e.TgZ(16,"div",7)(17,"div",4)(18,"div",8)(19,"label",5),e._uU(20,"Responsable de Seguridad"),e.qZA(),e.TgZ(21,"label",9)(22,"input",10,11),e.NdJ("ngModelChange",function(n){return o.editarParticipante.responsableSeguridad=n}),e.qZA(),e.TgZ(24,"div",12)(25,"span",13),e._uU(26,"S\xed"),e.qZA(),e.TgZ(27,"span",14),e._uU(28,"No"),e.qZA()()()()()(),e.TgZ(29,"div",3)(30,"div",4)(31,"button",15),e.NdJ("click",function(){return o.agregar(o.esEditar)}),e._uU(32," Agregar "),e.qZA()()()(),e.TgZ(33,"div",2)(34,"div",16)(35,"app-grid-general",17,18),e.NdJ("event",function(n){return o.onGridClick(n)}),e.qZA()()()()),2&t&&(e.xp6(9),e.Q6J("ngModel",o.editarParticipante.nombre),e.xp6(6),e.Q6J("ngModel",o.editarParticipante.puesto),e.xp6(7),e.Q6J("ngModel",o.editarParticipante.responsableSeguridad),e.xp6(13),e.Q6J("data",o.participantesList)("children",o.participanteColumns))},dependencies:[xt.$,s.Fj,s.Wl,s.JJ,s.On],styles:[".btn-imagen[_ngcontent-%COMP%]{border:none;background-color:#fff}"]})}const Zt=["formulario"];class ie{constructor(){this.placeHolderSelect=d.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=d.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS}static#e=this.\u0275fac=function(t){return new(t||ie)};static#t=this.\u0275cmp=e.Xpm({type:ie,selectors:[["app-comentarios"]],viewQuery:function(t,o){if(1&t&&e.Gf(Zt,5),2&t){let a;e.iGM(a=e.CRH())&&(o.formulario=a.first)}},inputs:{entidad:"entidad",heading:"heading",EsAgregar:"EsAgregar"},decls:13,vars:1,consts:[["id","form","novalidate","novalidate",3,"keydown.enter"],["formulario","ngForm"],[1,"container-fluid"],[1,"subseccion"],[1,"row"],[1,"col-md-12"],[1,"form-group"],[1,"label-input"],["name","comentariosName","type","text","maxlength","400","autocomplete","off",1,"form-control-textarea","form-control",3,"ngModel","ngModelChange"],["comentarios","ngModel"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0,1),e.NdJ("keydown.enter",function(n){return n.preventDefault()}),e.TgZ(2,"div",2)(3,"div",3),e._uU(4," Comentarios "),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),e._uU(9,"Comentarios"),e.qZA(),e.TgZ(10,"div")(11,"textarea",8,9),e.NdJ("ngModelChange",function(n){return o.entidad.comentarios=n}),e.qZA()()()()()()()),2&t&&(e.xp6(11),e.Q6J("ngModel",o.entidad.comentarios))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.nD,s.On,s.F],styles:[".form-control-textarea[_ngcontent-%COMP%]{width:100%;padding:10px;height:100px!important}"]})}const Et=["informacionGeneral"],Pt=["comentarios"],Ot=["tabset"];function Nt(r,i){if(1&r&&(e.TgZ(0,"tabset",4,5)(2,"tab",6),e._UZ(3,"app-art-rutinario-informacion-general",7,8),e.qZA(),e.TgZ(5,"tab",9),e._UZ(6,"app-peligros-riesgos",10,11),e.qZA(),e.TgZ(8,"tab",12),e._UZ(9,"app-artrparticipantes",13,14),e.qZA(),e.TgZ(11,"tab",15),e._UZ(12,"app-comentarios",16,17),e.qZA()()),2&r){const t=e.oxw();e.xp6(3),e.Q6J("entidad",t.entidad)("EsAgregar",t.EsAgregar),e.xp6(3),e.Q6J("idARTRIdentificacionPeligro",t.idEntidad),e.xp6(3),e.Q6J("idArtrutinarios",t.idEntidad),e.xp6(3),e.Q6J("entidad",t.entidad)}}function Ft(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.cancelar())}),e._uU(1,"Cancelar"),e.qZA(),e.TgZ(2,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSubmit())}),e._uU(3,"Guardar"),e.qZA()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.submitting)}}class oe extends G.P{constructor(i,t,o,a,n){super(t),this.analisisRiesgoTrabajoRutinarioService=i,this.router=o,this.tipoGuiaSeccionService=a,this.tipoGuiaCumplimientoService=n,this.placeHolderSelect=d.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=d.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.destroy$=new pe.x}ngOnInit(){super.onInit(),this.consultarTipoGuia(),this.consultarTipoGuiaSeccion(),this.esAgregarEditar()}onSubmit(){this.seleccionado=this.tabset.tabs.find(t=>1==t.active)?.heading;let i=this.consultarFormulario(this.seleccionado);i?super.onSubmit(i):super.cancelar(!0)}esEditar(){return this.accion===d.g.MODAL_ACCION_EDITAR}consultar(i){return this.analisisRiesgoTrabajoRutinarioService.consultar(i)}agregar(i){return this.analisisRiesgoTrabajoRutinarioService.agregar(i)}editar(i){return this.analisisRiesgoTrabajoRutinarioService.editar(i)}consultarTipoGuia(){this.tipoGuiaLst$=this.tipoGuiaCumplimientoService.consultarParaSelector()}consultarTipoGuiaSeccion(){}actualizarTipoGuiaSeccion(i){i?this.tipoGuiaSeccionLst$=this.tipoGuiaSeccionService.consultarPorTipoGuia(i).pipe((0,ge.b)(t=>console.log(t))):(this.tipoGuiaSeccionLst$=new Pe.y,this.idTipoGuiaSeccion=void 0)}esAgregarEditar(){this.accion==C.V_.Agregar?this.EsAgregar=!0:this.EsAgregar=!1}ngOnDestroy(){this.destroy$.next()}consultarFormulario(i){switch(i){case this.informacionGeneral?.heading:return this.informacionGeneral.formulario;case this.comentarios?.heading:return this.comentarios.formulario;default:return null}}static#e=this.\u0275fac=function(t){return new(t||oe)(e.Y36(x),e.Y36(v.V),e.Y36(O.F0),e.Y36(Oe.n),e.Y36(Ne.C))};static#t=this.\u0275cmp=e.Xpm({type:oe,selectors:[["app-analisis-riesgo-trabajo-rutinario-formulario"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Et,5),e.Gf(Pt,5),e.Gf(Ot,5)),2&t){let a;e.iGM(a=e.CRH())&&(o.informacionGeneral=a.first),e.iGM(a=e.CRH())&&(o.comentarios=a.first),e.iGM(a=e.CRH())&&(o.tabset=a.first)}},inputs:{idArtrutinarios:"idArtrutinarios",idARTRIdentificacionPeligro:"idARTRIdentificacionPeligro"},features:[e.qOj],decls:6,vars:1,consts:[[3,"titulo"],["modal",""],["modalBody",""],["modalFooter",""],[1,"justify-content-center"],["tabset",""],["customClass","customClass","heading","Informaci\xf3n General",2,"padding","0"],["heading","Informaci\xf3n General",3,"entidad","EsAgregar"],["informacionGeneral",""],["customClass","customClass","heading","Identif. Peligros y Evaluaci\xf3n Riesgos y Oportunidades"],["heading","Identif. Peligros y Evaluacion Riesgos y Oportunidades",3,"idARTRIdentificacionPeligro"],["peligrosRiesgos",""],["customClass","customClass","heading","Participantes"],[3,"idArtrutinarios"],["participantes",""],["customClass","customClass","heading","Comentarios",2,"padding","0"],["heading","Comentarios",3,"entidad"],["comentarios",""],["type","button",1,"btn-secundario","flex-shrink-1",3,"click"],["type","button","form","form",1,"btn-primario",3,"disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"app-modal-base",0,1),e.YNc(2,Nt,14,5,"ng-template",null,2,e.W1O),e.YNc(4,Ft,4,1,"ng-template",null,3,e.W1O),e.qZA()),2&t&&e.Q6J("titulo",o.nombreEntidad+" - "+o.accion)},dependencies:[w.B,Q.wW,Q.AH,L,ee,te,ie],styles:['@charset "UTF-8";.subtitulo[_ngcontent-%COMP%]{color:#ff6c00;padding-top:10px;border-top:1px #ff6c00 solid;margin-top:40px;margin-bottom:20px;width:100%}.image-box[_ngcontent-%COMP%]{display:flex;margin-top:25px;padding-left:15px;justify-items:center;align-items:center}.pointer[_ngcontent-%COMP%]{cursor:pointer}.switch[_ngcontent-%COMP%]{top:1px;height:calc(1.5em + .8rem + 10px);width:110px}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{background-color:#fff;transform:translate(70px)}.switch[_ngcontent-%COMP%]   input.accent[_ngcontent-%COMP%]:checked + .slider.round[_ngcontent-%COMP%]{background-color:#ed7d31}.switch[_ngcontent-%COMP%]   input.accent[_ngcontent-%COMP%]:checked + .slider.round[_ngcontent-%COMP%]   .on[_ngcontent-%COMP%]{color:#fff}']})}class yt{}var qt=c(83083),St=c(12846);function Ut(r,i){1&r&&e._UZ(0,"i",22)}function Gt(r,i){1&r&&e._UZ(0,"i",23)}class ae extends S.v{constructor(i,t,o,a,n,l,g,E,R,b,u){super(g,E,R),this.analisisRiesgoTrabajoRutinarioService=i,this.turnoService=t,this.companiaService=o,this.departamentoService=a,this.contratistaService=n,this.contratoService=l,this.bsModalRef=b,this.formularioService=u,this.placeHolderSelect=d.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=d.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.idsEstatusList=[{idEstatus:0,nombre:"Inactivo"},{idEstatus:1,nombre:"Activo"}],this.idsEstatusSeleccionados=[],this.isCollapsed=!0,this.buscando=!1,this.riesgoList=[],this.filtro=new yt,this.crudConfig={nombreEntidad:"An\xe1lisis de Riesgos del Trabajo Rutinario",generoGramatical:"masc",nombrePropiedadId:"idAnalisisRiesgoTrabajoRutinario",formConfig:{ComponenteFormulario:oe,modalConfig:U.OS.Large,configAgregar:{acceso:h.f7.Agregar},configEditar:{acceso:h.f7.Editar}},configEliminar:{acceso:h.f7.Eliminar,elementToString:f=>`${f.idAnalisisRiesgoTrabajoRutinario}`}},this.columns=[{headerName:"Clave",field:"idAnalisisRiesgoTrabajoRutinario",minWidth:50,maxWidth:150},{headerName:"Estatus",field:"estatus",minWidth:80,maxWidth:200,valueGetter:f=>f.data.estatus?"Activo":"Inactivo"},{headerName:"Fecha-Hora",field:"fechaHora",minWidth:70,maxWidth:250,cellRenderer:f=>Z(f.data.fechaHora).format("DD/MM/YYYY HH:mm:ss"),valueGetter:f=>Z(f.data.fechaHora).format("DD/MM/YYYY  HH:mm:ss")},{headerName:"Fecha Actualizacion",field:"fechaActualizacion",minWidth:70,maxWidth:200,cellRenderer:f=>null==f.data.fechaActualizacion?"":Z(f.data.fechaAtualizacion).format("DD/MM/YYYY"),valueGetter:f=>null==f.data.fechaActualizacion?"":Z(f.data.fechaAtualizacion).format("DD/MM/YYYY")},{headerName:"Responsable",field:"responsable",minWidth:200,maxWidth:350},{headerName:"Proceso",field:"procesos",minWidth:200,maxWidth:350}]}ngOnInit(){super.onInit()}consultarGrid(){return this.idsEstatusSeleccionados.includes(0)?this.filtro.inactivo=!0:this.filtro.inactivo=!1,this.idsEstatusSeleccionados.includes(1)?this.filtro.activo=!0:this.filtro.activo=!1,this.analisisRiesgoTrabajoRutinarioService.consultarParaGrid(this.filtro)}eliminar(i){return this.analisisRiesgoTrabajoRutinarioService.eliminar(i)}isCollapsedFunction(){this.isCollapsed=!this.isCollapsed,this.isCollapsed?this.height="calc(80vh - 55px)":this.height="calc(64vh - 55px)"}enviarFormulario(i){i.valid?(this.idsEstatusSeleccionados.includes(0)?this.filtro.inactivo=!0:this.filtro.inactivo=!1,this.idsEstatusSeleccionados.includes(1)?this.filtro.activo=!0:this.filtro.activo=!1,this.registros$=this.analisisRiesgoTrabajoRutinarioService.consultarParaGrid(this.filtro).pipe((0,ge.b)(t=>{this.riesgoList=t}))):this.formularioService.validarCamposRequeridos(i)}static#e=this.\u0275fac=function(t){return new(t||ae)(e.Y36(x),e.Y36(fe.D),e.Y36(qt.c),e.Y36(ve._),e.Y36(Ae.m),e.Y36(Ce.d),e.Y36(I.Q),e.Y36(_.tT),e.Y36(v.V),e.Y36(_.UZ),e.Y36(St.Y))};static#t=this.\u0275cmp=e.Xpm({type:ae,selectors:[["app-analisis-riesgo-trabajo-rutinario"]],features:[e.qOj],decls:26,vars:14,consts:[[1,"cuerpo-contenedor"],["novalidate","novalidate",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],[3,"collapse","isAnimated"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"label-input"],["name","idEstatusName","bindLabel","nombre","bindValue","idEstatus",3,"items","placeholder","notFoundText","ngModel","multiple","closeOnSelect","ngModelChange"],["idEstatusLst","ngModel"],[1,"col-md-2"],[1,"row","mb-4"],[1,"col-md-12","text-center"],["type","submit",1,"btn-primario",3,"click"],[1,"form-row","panel-busqueda","mb-4"],[1,"panel-carga-elementos","center-element-vertically",3,"click"],[1,"titulo-panel"],[1,"arow-down-up"],["class","fa fa-chevron-down",4,"ngIf"],["class","fa fa-chevron-up",4,"ngIf"],[1,"col-md-12"],["titulo","An\xe1lisis de Riesgos del Trabajo","tituloBoton","An\xe1lisis Riesgos de Trabajo",3,"columns","crudConfig","elementos$","tieneAccesoAgregar$","agregarClick","gridClick"],[1,"fa","fa-chevron-down"],[1,"fa","fa-chevron-up"]],template:function(t,o){if(1&t){const a=e.EpF();e.TgZ(0,"div",0)(1,"form",1,2),e.NdJ("keydown.enter",function(l){return l.preventDefault()})("ngSubmit",function(){e.CHM(a);const l=e.MAs(2);return e.KtG(o.enviarFormulario(l))}),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),e._uU(8,"Estatus"),e.qZA(),e.TgZ(9,"ng-select",8,9),e.NdJ("ngModelChange",function(l){return o.idsEstatusSeleccionados=l}),e.qZA()()()(),e._UZ(11,"div",10),e.TgZ(12,"div",11)(13,"div",12)(14,"button",13),e.NdJ("click",function(){e.CHM(a);const l=e.MAs(2);return e.KtG(o.enviarFormulario(l))}),e._uU(15,"Buscar"),e.qZA()()()()(),e.TgZ(16,"div",14)(17,"div",15),e.NdJ("click",function(){return o.isCollapsedFunction()}),e.TgZ(18,"span",16),e._uU(19,"Panel de B\xfasqueda"),e.qZA(),e.TgZ(20,"span",17),e.YNc(21,Ut,1,0,"i",18),e.YNc(22,Gt,1,0,"i",19),e.qZA()()(),e.TgZ(23,"div",4)(24,"div",20)(25,"app-catalogo-base",21),e.NdJ("agregarClick",function(){return o.agregar()})("gridClick",function(l){return o.onGridClick(l)}),e.qZA()()()()}2&t&&(e.xp6(3),e.Q6J("collapse",o.isCollapsed)("isAnimated",!0),e.xp6(6),e.Q6J("items",o.idsEstatusList)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions)("ngModel",o.idsEstatusSeleccionados)("multiple",!0)("closeOnSelect",!1),e.xp6(12),e.Q6J("ngIf",o.isCollapsed),e.xp6(1),e.Q6J("ngIf",!o.isCollapsed),e.xp6(3),e.Q6J("columns",o.columns)("crudConfig",o.crudConfig)("elementos$",o.registros$)("tieneAccesoAgregar$",o.tieneAccesoAgregar$))},dependencies:[p.O5,D.B,s._Y,s.JJ,s.JL,s.On,s.F,P.w9,he.Y]})}const wt=[{path:"",component:ae,canActivate:[Ee.m],data:{title:"Consulta",acceso:h.f7.Consultar}}];class ne{static#e=this.\u0275fac=function(t){return new(t||ne)};static#t=this.\u0275mod=e.oAB({type:ne});static#i=this.\u0275inj=e.cJS({imports:[O.Bz.forChild(wt),O.Bz]})}class re{static#e=this.\u0275fac=function(t){return new(t||re)};static#t=this.\u0275mod=e.oAB({type:re});static#i=this.\u0275inj=e.cJS({providers:[x],imports:[p.ez,de.A,T.Z,le.zkK,m.a,s.u5,A.kn,P.A0,ue.u,k,he.f,ne]})}}}]);