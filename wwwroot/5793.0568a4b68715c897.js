"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[5793],{12846:(D,f,a)=>{a.d(f,{Y:()=>l});var p=a(50986),g=a(94650),v=a(2060);class l{constructor(s){this.modalMensajeService=s}validarCamposRequeridos(s){Object.keys(s.controls).forEach(d=>{const c=s.controls[d];c.markAsTouched({onlySelf:!0}),c.markAsDirty({onlySelf:!0})})}validarCamposRequeridosConMensaje(s){Object.keys(s.controls).forEach(d=>{const c=s.controls[d];c.markAsTouched({onlySelf:!0}),c.markAsDirty({onlySelf:!0})}),Object.keys(s.controls).some(d=>{const c=s.controls[d];return!!(c.errors&&c.errors.required&&c.invalid)&&(this.modalMensajeService.modalError(p.g.MENSAJE_REQUERIDOS),!0)})}markAsUntouched(s){Object.keys(s.controls).forEach(d=>{s.controls[d].markAsUntouched({onlySelf:!0})})}static#e=this.\u0275fac=function(d){return new(d||l)(g.LFG(v.V))};static#t=this.\u0275prov=g.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}},35793:(D,f,a)=>{a.r(f),a.d(f,{LocalidadModule:()=>M});var p=a(36441),g=a(16902),v=a(51757),l=a(46101),E=a(20388),s=a(41283),d=a(63405),c=a(9116),_=a(85087),N=a(13050);class T{constructor(){}}var u=a(50986),b=a(15861),e=a(94650),I=a(2060),R=a(12846),h=a(24006),S=a(36895),Z=a(88796),y=a(383);function x(m,o){1&m&&(e.TgZ(0,"div",21),e._uU(1," El estado es requerido "),e.qZA())}function G(m,o){1&m&&(e.TgZ(0,"div",21),e._uU(1," El nombre es requerido "),e.qZA())}function F(m,o){if(1&m){const t=e.EpF();e.TgZ(0,"form",2,3),e.NdJ("keydown.enter",function(n){return n.preventDefault()})("ngSubmit",function(){e.CHM(t);const n=e.MAs(1),r=e.oxw();return e.KtG(r.enviarFormulario(n))}),e.TgZ(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"label",8),e._uU(7,"Localidad"),e.qZA(),e.TgZ(8,"div")(9,"input",9,10),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.localidad.idLocalidad=n)}),e.qZA()()()(),e.TgZ(11,"div",11)(12,"label",8),e._uU(13,"Estado"),e.qZA(),e.TgZ(14,"ng-select",12,13),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.localidad.idEstado=n)})("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.consultarMunicipios(n))}),e.qZA(),e.YNc(16,x,2,0,"div",14),e.qZA(),e.TgZ(17,"div",15)(18,"div",7)(19,"label",8),e._uU(20,"Localidad"),e.qZA(),e.TgZ(21,"div")(22,"input",16,10),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.localidad.nombre=n)}),e.qZA(),e.YNc(24,G,2,0,"div",14),e.qZA()()()()(),e.TgZ(25,"div",17)(26,"div",18)(27,"button",19),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cancelar())}),e._uU(28," Cancelar "),e.qZA(),e.TgZ(29,"button",20),e._uU(30," Guardar "),e.qZA()()()()}if(2&m){const t=e.MAs(10),i=e.MAs(15),n=e.oxw();e.xp6(9),e.Q6J("ngModel",n.localidad.idLocalidad),e.xp6(5),e.Q6J("items",n.estadoList)("required",!0)("ngModel",n.localidad.idEstado)("placeholder",n.placeHolderSelect)("notFoundText",n.placeHolderNoOptions),e.xp6(2),e.Q6J("ngIf",(null==i.errors?null:i.errors.required)&&i.touched),e.xp6(6),e.Q6J("ngModel",n.localidad.nombre),e.xp6(2),e.Q6J("ngIf",(null==t.errors?null:t.errors.required)&&t.touched),e.xp6(5),e.Q6J("disabled",n.btnSubmit)}}class A{constructor(o,t,i,n,r,O){this.mensajeService=o,this.formularioService=t,this.estadoService=i,this.paisService=n,this.municipioService=r,this.localidadService=O,this.placeHolderSelect=u.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=u.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.mensajeAgregar="La localidad ha sido agregada",this.mensajeEditar="La localidad ha sido modificada",this.btnSubmit=!1,this.tempLocalidad=new T,this.localidad=new T,this.municipioList=[],this.estadoList=[],this.paisList=[],this.opcion=!1}ngOnInit(){this.consultarPaises()}ngAfterContentChecked(){void 0!==this.localidad.idEstado&&!1===this.opcion&&(this.consultarMunicipios(this.localidad.idEstado+""),this.opcion=!0)}consultarPaises(){this.paisService.consultarGeneral().subscribe(o=>this.paisList=o)}consultarEstados(o){var t=this;return(0,b.Z)(function*(){""!==o?yield t.estadoService.consultarPorPaisParaSelector(+o).subscribe(i=>t.estadoList=i):(t.localidad.idEstado=0,t.estadoList=[],t.municipioList=[])})()}consultarMunicipios(o){var t=this;return(0,b.Z)(function*(){""!==o?yield t.municipioService.consultarPorEstadoParaSelector(+o).subscribe(i=>t.municipioList=i):t.municipioList=[]})()}enviarFormulario(o){if(this.btnSubmit=!0,!o.valid)return this.formularioService.validarCamposRequeridos(o),void(this.btnSubmit=!1);this.accion===u.g.MODAL_ACCION_AGREGAR?this.agregar():(this.accion,u.g.MODAL_ACCION_EDITAR)}agregar(){}editar(){}cancelar(){this.onClose(!0)}static#e=this.\u0275fac=function(t){return new(t||A)(e.Y36(I.V),e.Y36(R.Y),e.Y36(p.s),e.Y36(l.$),e.Y36(v.G),e.Y36(g.b))};static#t=this.\u0275cmp=e.Xpm({type:A,selectors:[["app-localidad-formulario"]],decls:3,vars:1,consts:[[3,"titulo"],["modalBody",""],["novalidate","novalidate",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],["id","modal",1,"cuerpo-contenedor"],[1,"row"],[1,"col-md-2"],[1,"form-group"],[1,"label-input","required-label"],["name","idLocalidad","type","text","maxlength","50","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["nombre","ngModel"],[1,"form-group","col-md-5"],["name","estadoName","bindLabel","nombre","bindValue","idEstado",3,"items","required","ngModel","placeholder","notFoundText","ngModelChange"],["estadoLst","ngModel"],["class","error",4,"ngIf"],[1,"col-md-5"],["name","nombre","type","text","maxlength","50","autocomplete","off","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"text-right"],["type","button",1,"btn-secundario",3,"click"],["type","submit",1,"btn-primario","btn-margin-left",3,"disabled"],[1,"error"]],template:function(t,i){1&t&&(e.TgZ(0,"app-modal-base",0),e.YNc(1,F,31,10,"ng-template",null,1,e.W1O),e.qZA()),2&t&&e.Q6J("titulo","Localidad - "+i.accion)},dependencies:[h._Y,h.Fj,h.JJ,h.JL,h.Q7,h.nD,h.On,h.F,S.O5,Z.w9,y.B],encapsulation:2})}var J=a(62861),Y=a(58390);function U(m,o){if(1&m){const t=e.EpF();e.TgZ(0,"div",7),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.agregar())}),e.TgZ(1,"button",8),e._uU(2,"Agregar Localidad"),e.qZA()()}}class L{constructor(o,t,i,n,r,O,H,Q){this.mensajeService=o,this.localidadService=t,this.municipioService=i,this.paisService=n,this.estadoService=r,this.accesoService=O,this.modalService=H,this.bsModalRef=Q,this.tieneAccesoAgregar=!1,this.accesoEditar=_.v.EDITAR_LOCALIDAD,this.accesoEliminar=_.v.ELIMINAR_LOCALIDAD,this.HEADER_GRID="Localidad",this.MENSAJE_EXITO_ELIMINAR="La localidad ha sido eliminada",this.TITULO_MODAL_ELIMINAR="Eliminar Localidad",this.tempLocalidad=new T,this.columns=[{headerName:"Pais",field:"nombrePais",minWidth:150},{headerName:"Estado",field:"nombreEstado",minWidth:150},{headerName:"Municipio",field:"nombreMunicipio",minWidth:150},{headerName:"Nombre",field:"nombre",minWidth:150}]}ngOnInit(){this.accesoService.tieneAcceso(_.v.AGREGAR_LOCALIDAD).subscribe({next:o=>{this.tieneAccesoAgregar=o}}),this.consultarGrid()}consultarGrid(){}onGridClick(o){o.accion!==u.g.GRID_ACCION_EDITAR?o.accion!==u.g.GRID_ACCION_ELIMINAR||this.eliminar(o.data):this.editar(o.data.idLocalidad)}agregar(){this.bsModalRef=this.modalService.show(A,u.g.CONFIG_MODAL_MEDIUM),this.bsModalRef.content.accion=u.g.MODAL_ACCION_AGREGAR,this.bsModalRef.content.opcion=!0,this.bsModalRef.content.onClose=o=>{o&&this.consultarGrid(),this.bsModalRef.hide()}}editar(o){}eliminar(o){this.mensajeService.modalConfirmacion("\xbfDesea eliminar la localidad <strong>"+o.nombre+"</strong>?",this.TITULO_MODAL_ELIMINAR).then(t=>{})}static#e=this.\u0275fac=function(t){return new(t||L)(e.Y36(I.V),e.Y36(g.b),e.Y36(v.G),e.Y36(l.$),e.Y36(p.s),e.Y36(J.Q),e.Y36(E.tT),e.Y36(E.UZ))};static#t=this.\u0275cmp=e.Xpm({type:L,selectors:[["ng-component"]],decls:8,vars:6,consts:[[1,"contenedor"],[1,"titulo-contenedor"],[1,"cuerpo-contenedor"],[1,"row"],[1,"col-md-12"],["class","contenedor-agregar",3,"click",4,"ngIf"],[3,"headerName","data","children","accesoEditar","accesoEliminar","event"],[1,"contenedor-agregar",3,"click"],[1,"btn-agregar"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Localidades"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e.YNc(6,U,3,0,"div",5),e.TgZ(7,"app-grid-general",6),e.NdJ("event",function(r){return i.onGridClick(r)}),e.qZA()()()()()),2&t&&(e.xp6(6),e.Q6J("ngIf",i.tieneAccesoAgregar),e.xp6(1),e.Q6J("headerName",i.HEADER_GRID)("data",i.localidadList)("children",i.columns)("accesoEditar",i.accesoEditar)("accesoEliminar",i.accesoEliminar))},dependencies:[S.O5,Y.$],encapsulation:2})}const P=[{path:"",component:L,canActivate:[N.m],data:{title:"Consulta",acceso:_.v.CONSULTAR_LOCALIDAD}}];class C{static#e=this.\u0275fac=function(t){return new(t||C)};static#t=this.\u0275mod=e.oAB({type:C});static#o=this.\u0275inj=e.cJS({imports:[c.Bz.forChild(P),c.Bz]})}var j=a(13024);class M{static#e=this.\u0275fac=function(t){return new(t||M)};static#t=this.\u0275mod=e.oAB({type:M});static#o=this.\u0275inj=e.cJS({providers:[g.b,v.G,p.s,l.$],imports:[C,d.m,s.Z,E.zk.forChild(),j.u]})}}}]);