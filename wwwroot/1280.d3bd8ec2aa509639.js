"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[1280],{12846:(L,C,a)=>{a.d(C,{Y:()=>f});var e=a(50986),c=a(94650),g=a(2060);class f{constructor(s){this.modalMensajeService=s}validarCamposRequeridos(s){Object.keys(s.controls).forEach(m=>{const _=s.controls[m];_.markAsTouched({onlySelf:!0}),_.markAsDirty({onlySelf:!0})})}validarCamposRequeridosConMensaje(s){Object.keys(s.controls).forEach(m=>{const _=s.controls[m];_.markAsTouched({onlySelf:!0}),_.markAsDirty({onlySelf:!0})}),Object.keys(s.controls).some(m=>{const _=s.controls[m];return!!(_.errors&&_.errors.required&&_.invalid)&&(this.modalMensajeService.modalError(e.g.MENSAJE_REQUERIDOS),!0)})}markAsUntouched(s){Object.keys(s.controls).forEach(m=>{s.controls[m].markAsUntouched({onlySelf:!0})})}static#e=this.\u0275fac=function(m){return new(m||f)(c.LFG(g.V))};static#i=this.\u0275prov=c.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}},51280:(L,C,a)=>{a.r(C),a.d(C,{DominioModule:()=>y});var e=a(94650),c=a(80529);class g{constructor(i){this.http=i,this.dataUrl="dominioDetalle/"}consultar(i){return this.http.get(this.dataUrl+`consultar/${i}`)}consultarPorDominio(i){return this.http.get(this.dataUrl+`consultarPorDominio/${i}`)}agregar(i){return this.http.post(this.dataUrl+"agregar",i)}editar(i){return this.http.put(this.dataUrl+"editar",i)}eliminar(i){return this.http.delete(this.dataUrl+`eliminar/${i}`)}static#e=this.\u0275fac=function(n){return new(n||g)(e.LFG(c.eN))};static#i=this.\u0275prov=e.Yz7({token:g,factory:g.\u0275fac})}var f=a(62392),Z=a(8816),s=a(90061),m=a(20388),_=a(41283),u=a(63405),p=a(9116),D=a(85087),A=a(13050),d=a(50986),R=a(15439);class q{constructor(){}}class S{constructor(){}}var U=a(90429),x=a(2060),G=a(12846),j=a(73687),M=a(24006),P=a(36895),J=a(58390),B=a(88796);function Y(l,i){1&l&&(e.TgZ(0,"div",58),e._uU(1," El nombre es requerido "),e.qZA())}function Q(l,i){1&l&&(e.TgZ(0,"div",58),e._uU(1," La descripci\xf3n es requerida "),e.qZA())}function W(l,i){1&l&&(e.TgZ(0,"div",58),e._uU(1," El tipo de campo es requerido "),e.qZA())}function w(l,i){1&l&&(e.TgZ(0,"div",58),e._uU(1," La longitud m\xednima es requerida "),e.qZA())}function K(l,i){1&l&&(e.TgZ(0,"div",58),e._uU(1," Caracteres no permitidos, ingresar solo n\xfameros "),e.qZA())}function k(l,i){1&l&&(e.TgZ(0,"div",58),e._uU(1," La longitud m\xe1xima es requerida "),e.qZA())}function V(l,i){1&l&&(e.TgZ(0,"div",58),e._uU(1," Caracteres no permitidos, ingresar solo n\xfameros "),e.qZA())}function H(l,i){1&l&&(e.TgZ(0,"div",58),e._uU(1," El valor m\xednimo es requerido "),e.qZA())}function z(l,i){1&l&&(e.TgZ(0,"div",58),e._uU(1," Caracteres no permitidos, ingresar solo n\xfameros "),e.qZA())}function X(l,i){1&l&&(e.TgZ(0,"div",58),e._uU(1," El valor m\xe1ximo es requerido "),e.qZA())}function $(l,i){1&l&&(e.TgZ(0,"div",58),e._uU(1," Caracteres no permitidos, ingresar solo n\xfameros "),e.qZA())}function ee(l,i){1&l&&(e.TgZ(0,"div",58),e._uU(1," El valor es requerido "),e.qZA())}function ie(l,i){1&l&&e._UZ(0,"i",59)}function oe(l,i){1&l&&e._UZ(0,"i",60)}class E{constructor(i,n,o,h,r){this.mensajeService=i,this.formularioService=n,this.dominioService=o,this.dominioDetalleService=h,this.sessionService=r,this.placeHolderSelect=d.g.PLACEHOLDER_DROPDOWN,this.placeHolderNoOptions=d.g.PLACEHOLDER_DROPDOWN_NO_OPTIONS,this.TITULO_MODAL_ELIMINAR="Eliminar Dominio Detalle",this.mensajeAgregar="El dominio ha sido agregado",this.mensajeEditar="El dominio ha sido modificado",this.mensajeError="Es necesario agregar un dominio",this.mensajeAgregarDetalle="El dominio detalle ha sido agregado",this.mensajeEditarDetalle="El dominio detalle ha sido modificado",this.mensajeEliminarDetalle="El dominio detalle ha sido eliminado",this.btnSubmit=!1,this.isDisable=!1,this.form=!0,this.dominio=new q,this.dominioDetalle=new S,this.configDate=d.g.CONFIG_DATEPICKER,this.minDate=U.ii(),this.minDateMaxima=U.ii(),this.columns=[{headerName:"Dominio",field:"valor",minWidth:150}],this.tipoDatoList=[{label:"1",name:"Decimal"},{label:"2",name:"String"},{label:"3",name:"List"},{label:"4",name:"Boolean"},{label:"5",name:"Date"}],this.tipoCampoList=[{label:"1",name:"Text",display:"Texto"},{label:"2",name:"Number",display:"Num\xe9rico"},{label:"3",name:"Select",display:"Selector"},{label:"3",name:"Select M\xfaltiple",display:"Selector M\xfaltiple"},{label:"4",name:"Switch",display:"Switch"},{label:"5",name:"Date",display:"Fecha"},{label:"6",name:"CheckBox",display:"Checkbox"},{label:"7",name:"TextArea",display:"\xc1rea de Texto"},{label:"8",name:"Radio Button",display:"Bot\xf3n de Radio"},{label:"9",name:"Numerico General",display:"N\xfamerico General"},{label:"10",name:"Decimal General",display:"Decimal General"},{label:"11",name:"Time",display:"Tiempo (Hr./Min.)"}],this.esUsuarioMaestroAtisc=!1}ngOnInit(){this.esUsuarioMaestroAtisc=this.sessionService.obtenerIdUsuarioSesion()===d.g.USUARIO_MAESTRO_ATISC,this.accion===d.g.COMPONENT_ACCION_EDITAR?(this.dominio=this.data,this.onDisable(),this.consultarGrid()):this.dominioDetalle=new S,this.accionDetalle="Agregar"}onMinimaChange(i){"Editar"!==this.accion&&(this.dominio.fechaMinima=i,this.dominio.fechaMinima&&U.qb(i)&&(this.minDateMaxima=R(this.dominio.fechaMinima,"DD-MM-YYYY").toDate()))}onMaximaChange(i){"Editar"!==this.accion&&(this.dominio.fechaMaxima=i)}onDisable(){"Date"===this.dominio.tipoCampo?this.isDisable=!0:this.isDisable=!1,"Select"===this.dominio.tipoCampo||"Checkbox"===this.dominio.tipoCampo||"Select M\xfaltiple"===this.dominio.tipoCampo||"Radio Button"===this.dominio.tipoCampo?this.form=!1:this.form=!0}enviarFormulario(i){if(this.btnSubmit=!0,!i.valid)return this.formularioService.validarCamposRequeridos(i),void(this.btnSubmit=!1);this.dominio.tipoDato="default",this.accion===d.g.MODAL_ACCION_AGREGAR?this.agregar(i):this.accion===d.g.MODAL_ACCION_EDITAR&&this.editar()}enviarFormularioDetalle(i){this.btnSubmit=!0,i.valid?this.accionDetalle===d.g.MODAL_ACCION_AGREGAR?this.agregarDetalle(i):this.accionDetalle===d.g.MODAL_ACCION_EDITAR&&this.editarDetalleFormulario(i):this.formularioService.validarCamposRequeridos(i)}consultarGrid(){this.dominioDetalleService.consultarPorDominio(this.dominio.idDominio).subscribe(i=>{this.dominioDetalleList=i})}onGridClick(i){i.accion!==d.g.GRID_ACCION_EDITAR?i.accion!==d.g.GRID_ACCION_ELIMINAR||this.eliminarDetalle(i.data):this.editarDetalle(i.data.idDominioDetalle)}agregar(i){this.dominioService.agregar(this.dominio).subscribe(n=>{this.dominio.idDominio=n,this.mensajeService.modalExito(this.mensajeAgregar),this.btnSubmit=!1,this.onClose(!0)},n=>{this.btnSubmit=!1})}agregarDetalle(i){void 0!==this.dominio.idDominio?(this.dominioDetalle.idDominio=this.dominio.idDominio,this.dominioDetalleService.agregar(this.dominioDetalle).subscribe(n=>{this.mensajeService.modalExito(this.mensajeAgregarDetalle),this.limpiarFormularioDetalle(),this.consultarGrid(),this.btnSubmit=!1},n=>{this.btnSubmit=!1})):(this.mensajeService.modalError(this.mensajeError),this.btnSubmit=!1)}editar(){this.dominioService.editar(this.dominio).subscribe(i=>{this.mensajeService.modalExito(this.mensajeEditar),this.onClose(!0)},i=>{this.btnSubmit=!1})}editarDetalle(i){this.dominioDetalleService.consultar(i).subscribe(n=>{this.dominioDetalle.idDominioDetalle=i,this.dominioDetalle.idDominio=n.idDominio,this.dominioDetalle.valor=n.valor,this.dominioDetalle.idCompania=n.idCompania}),this.accionDetalle="Editar"}editarDetalleFormulario(i){this.dominioDetalleService.editar(this.dominioDetalle).subscribe(n=>{this.mensajeService.modalExito(this.mensajeEditarDetalle),i.reset(),this.limpiarFormularioDetalle(),this.consultarGrid(),this.btnSubmit=!1},n=>{this.btnSubmit=!1})}eliminarDetalle(i){this.mensajeService.modalConfirmacion("\xbfDesea eliminar el dominio detalle <strong>"+i.valor+"</strong>?",this.TITULO_MODAL_ELIMINAR).then(n=>{this.dominioDetalleService.eliminar(i.idDominioDetalle).subscribe(o=>{this.mensajeService.modalExito(this.mensajeEliminarDetalle),this.consultarGrid()})})}limpiarFormularioDetalle(){this.dominioDetalle=new S,this.accionDetalle=d.g.MODAL_ACCION_AGREGAR}cancelar(){this.onClose(!0)}static#e=this.\u0275fac=function(n){return new(n||E)(e.Y36(x.V),e.Y36(G.Y),e.Y36(f.S),e.Y36(g),e.Y36(j.m))};static#i=this.\u0275cmp=e.Xpm({type:E,selectors:[["app-dominio-formulario"]],inputs:{data:"data",accion:"accion"},decls:126,vars:43,consts:[[1,"d-flex"],[1,"barra-lateral-modal"],[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],[1,"far","fa-times-circle"],["novalidate","novalidate",3,"keydown.enter","ngSubmit"],["formulario","ngForm"],["id","modal",1,"modal-body"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"label-input","required-label"],["name","nombre","type","text","maxlength","50","autocomplete","off","required","",1,"form-control",3,"ngModel","ngModelChange"],["nombre","ngModel"],["class","error",4,"ngIf"],["name","descpName","type","text","maxlength","500","autocomplete","off","required","",1,"form-control",3,"ngModel","ngModelChange"],["descp","ngModel"],[1,"form-group","col-md-4"],["name","tipoCampoName","bindLabel","display","bindValue","name","appendTo","body",3,"items","required","ngModel","placeholder","notFoundText","ngModelChange"],["tipoCampoLst","ngModel"],[1,"col-md-2"],["name","longitudMinimaName","type","text","maxlength","10","autocomplete","off","appFormatoNumerico","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["lonMinima","ngModel"],["name","longitudMaximaName","type","text","autocomplete","off","appFormatoNumerico","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["lonMaxima","ngModel"],["name","valorMinimoName","type","text","autocomplete","off","appFormatoNumerico","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["valMin","ngModel"],["name","valorMaximoName","type","text","autocomplete","off","appFormatoNumerico","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["valMax","ngModel"],[1,"label-input","required-label",2,"font-size","11px"],[1,"switch"],["type","checkbox","id","permiteFueraDeRango","name","permiteFueraDeRango",1,"form-control",3,"ngModel","ngModelChange"],["permiteFueraDeRango","ngModel"],[1,"slider","round"],[1,"on"],[1,"off"],[1,"calendario"],["id","fechaMinima","name","fechaMinima","type","text","autocomplete","off","placement","top","placeholder","dd/mm/aaaa","bsDatepicker","",1,"form-control",3,"ngModel","bsConfig","minDate","ngModelChange","bsValueChange"],["fechaMinima","ngModel"],["id","fechaMaxima","name","fechaMaxima","type","text","autocomplete","off","placement","top","placeholder","dd/mm/aaaa","bsDatepicker","",1,"form-control",3,"ngModel","bsConfig","minDate","ngModelChange","bsValueChange"],["fechaMaxima","ngModel"],["novalidate","novalidate",3,"hidden","keydown.enter","ngSubmit"],["formularioDetalle","ngForm"],[1,"subseccion"],["name","valorName","type","text","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["valor","ngModel"],[1,"col-md-4",2,"display","flex","justify-content","center","align-items","center"],[1,"text-center"],["type","submit",1,"btn-primario"],["class","fa fa-plus",4,"ngIf"],["class","fas fa-edit",4,"ngIf"],[1,"col-md-12"],[3,"data","children","event"],[1,"modal-footer"],[1,"text-right"],["type","button",1,"btn-secundario","mr-3",3,"click"],["type","submit",1,"btn-primario","btn-margin-left",3,"disabled"],[1,"error"],[1,"fa","fa-plus"],[1,"fas","fa-edit"]],template:function(n,o){if(1&n){const h=e.EpF();e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div"),e._uU(5),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return o.cancelar()}),e._UZ(7,"i",5),e.qZA()(),e.TgZ(8,"form",6,7),e.NdJ("keydown.enter",function(t){return t.preventDefault()})("ngSubmit",function(){e.CHM(h);const t=e.MAs(9);return e.KtG(o.enviarFormulario(t))}),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"label",12),e._uU(15,"Dominio"),e.qZA(),e.TgZ(16,"div")(17,"input",13,14),e.NdJ("ngModelChange",function(t){return o.dominio.nombre=t}),e.qZA(),e.YNc(19,Y,2,0,"div",15),e.qZA()()(),e.TgZ(20,"div",10)(21,"div",11)(22,"label",12),e._uU(23,"Descripci\xf3n"),e.qZA(),e.TgZ(24,"div")(25,"input",16,17),e.NdJ("ngModelChange",function(t){return o.dominio.descripcion=t}),e.qZA(),e.YNc(27,Q,2,0,"div",15),e.qZA()()(),e.TgZ(28,"div",18)(29,"label",12),e._uU(30,"Tipo de Campo"),e.qZA(),e.TgZ(31,"ng-select",19,20),e.NdJ("ngModelChange",function(t){return o.dominio.tipoCampo=t})("ngModelChange",function(){return o.onDisable()}),e.qZA(),e.YNc(33,W,2,0,"div",15),e.qZA()(),e.TgZ(34,"div",9)(35,"div",21)(36,"div",11)(37,"label",12),e._uU(38,"Longitud M\xednima"),e.qZA(),e.TgZ(39,"div")(40,"input",22,23),e.NdJ("ngModelChange",function(t){return o.dominio.longitudMinima=t}),e.qZA(),e.YNc(42,w,2,0,"div",15),e.YNc(43,K,2,0,"div",15),e.qZA()()(),e.TgZ(44,"div",21)(45,"div",11)(46,"label",12),e._uU(47,"Longitud M\xe1xima"),e.qZA(),e.TgZ(48,"div")(49,"input",24,25),e.NdJ("ngModelChange",function(t){return o.dominio.longitudMaxima=t}),e.qZA(),e.YNc(51,k,2,0,"div",15),e.YNc(52,V,2,0,"div",15),e.qZA()()(),e.TgZ(53,"div",21)(54,"div",11)(55,"label",12),e._uU(56,"Valor M\xednimo"),e.qZA(),e.TgZ(57,"div")(58,"input",26,27),e.NdJ("ngModelChange",function(t){return o.dominio.valorMinimo=t}),e.qZA(),e.YNc(60,H,2,0,"div",15),e.YNc(61,z,2,0,"div",15),e.qZA()()(),e.TgZ(62,"div",21)(63,"div",11)(64,"label",12),e._uU(65,"Valor M\xe1ximo"),e.qZA(),e.TgZ(66,"div")(67,"input",28,29),e.NdJ("ngModelChange",function(t){return o.dominio.valorMaximo=t}),e.qZA(),e.YNc(69,X,2,0,"div",15),e.YNc(70,$,2,0,"div",15),e.qZA()()(),e.TgZ(71,"div",10)(72,"div",11)(73,"label",30),e._uU(74,"Permite Fuera de Rango"),e.qZA(),e.TgZ(75,"div",21)(76,"label",31)(77,"input",32,33),e.NdJ("ngModelChange",function(t){return o.dominio.permiteFueraDeRango=t}),e.qZA(),e.TgZ(79,"div",34)(80,"span",35),e._uU(81,"S\xed"),e.qZA(),e.TgZ(82,"span",36),e._uU(83,"No"),e.qZA()()()()()()(),e.TgZ(84,"div",9)(85,"div",10)(86,"div",11)(87,"label",12),e._uU(88,"Fecha M\xednima "),e.qZA(),e.TgZ(89,"div",37)(90,"input",38,39),e.NdJ("ngModelChange",function(t){return o.dominio.fechaMinima=t})("bsValueChange",function(t){return o.onMinimaChange(t)}),e.qZA()()()(),e.TgZ(92,"div",10)(93,"div",11)(94,"label",12),e._uU(95,"Fecha M\xe1xima "),e.qZA(),e.TgZ(96,"div",37)(97,"input",40,41),e.NdJ("ngModelChange",function(t){return o.dominio.fechaMaxima=t})("bsValueChange",function(t){return o.onMaximaChange(t)}),e.qZA()()()()(),e.TgZ(99,"form",42,43),e.NdJ("keydown.enter",function(t){return t.preventDefault()})("ngSubmit",function(){e.CHM(h);const t=e.MAs(100);return e.KtG(o.enviarFormularioDetalle(t))}),e._UZ(101,"div",44),e.TgZ(102,"div",9)(103,"div",10)(104,"div",11)(105,"label",12),e._uU(106,"Valor"),e.qZA(),e.TgZ(107,"div")(108,"input",45,46),e.NdJ("ngModelChange",function(t){return o.dominioDetalle.valor=t}),e.qZA(),e.YNc(110,ee,2,0,"div",15),e.qZA()()(),e.TgZ(111,"div",47)(112,"div",48)(113,"button",49),e.YNc(114,ie,1,0,"i",50),e.YNc(115,oe,1,0,"i",51),e._uU(116),e.qZA()()()(),e.TgZ(117,"div",9)(118,"div",52)(119,"app-grid-general",53),e.NdJ("event",function(t){return o.onGridClick(t)}),e.qZA()()()()(),e.TgZ(120,"div",54)(121,"div",55)(122,"button",56),e.NdJ("click",function(){return o.cancelar()}),e._uU(123,"Cancelar"),e.qZA(),e.TgZ(124,"button",57),e._uU(125,"Guardar"),e.qZA()()()()()()}if(2&n){const h=e.MAs(18),r=e.MAs(26),t=e.MAs(32),v=e.MAs(41),b=e.MAs(50),T=e.MAs(59),I=e.MAs(68),F=e.MAs(109);e.xp6(5),e.hij("Dominio - ",o.accion," "),e.xp6(12),e.Q6J("ngModel",o.dominio.nombre),e.xp6(2),e.Q6J("ngIf",(null==h.errors?null:h.errors.required)&&h.touched),e.xp6(6),e.Q6J("ngModel",o.dominio.descripcion),e.xp6(2),e.Q6J("ngIf",(null==r.errors?null:r.errors.required)&&r.touched),e.xp6(4),e.Q6J("items",o.tipoCampoList)("required",!0)("ngModel",o.dominio.tipoCampo)("placeholder",o.placeHolderSelect)("notFoundText",o.placeHolderNoOptions),e.xp6(2),e.Q6J("ngIf",(null==t.errors?null:t.errors.required)&&t.touched),e.xp6(7),e.Q6J("ngModel",o.dominio.longitudMinima)("disabled",o.isDisable),e.xp6(2),e.Q6J("ngIf",(null==v.errors?null:v.errors.required)&&v.touched),e.xp6(1),e.Q6J("ngIf",null==v.errors?null:v.errors.formatoNumerico),e.xp6(6),e.Q6J("ngModel",o.dominio.longitudMaxima)("disabled",o.isDisable),e.xp6(2),e.Q6J("ngIf",(null==b.errors?null:b.errors.required)&&b.touched),e.xp6(1),e.Q6J("ngIf",null==b.errors?null:b.errors.formatoNumerico),e.xp6(6),e.Q6J("ngModel",o.dominio.valorMinimo)("disabled",o.isDisable),e.xp6(2),e.Q6J("ngIf",(null==T.errors?null:T.errors.required)&&T.touched),e.xp6(1),e.Q6J("ngIf",null==T.errors?null:T.errors.formatoNumerico),e.xp6(6),e.Q6J("ngModel",o.dominio.valorMaximo)("disabled",o.isDisable),e.xp6(2),e.Q6J("ngIf",(null==I.errors?null:I.errors.required)&&I.touched),e.xp6(1),e.Q6J("ngIf",null==I.errors?null:I.errors.formatoNumerico),e.xp6(7),e.Q6J("ngModel",o.dominio.permiteFueraDeRango),e.xp6(13),e.Q6J("ngModel",o.dominio.fechaMinima)("bsConfig",o.configDate)("minDate",o.minDate),e.xp6(7),e.Q6J("ngModel",o.dominio.fechaMaxima)("bsConfig",o.configDate)("minDate",o.minDateMaxima),e.xp6(2),e.Q6J("hidden",o.form),e.xp6(9),e.Q6J("ngModel",o.dominioDetalle.valor),e.xp6(2),e.Q6J("ngIf",(null==F.errors?null:F.errors.required)&&F.touched),e.xp6(4),e.Q6J("ngIf",!(o.dominioDetalle.idDominioDetalle>0)),e.xp6(1),e.Q6J("ngIf",o.dominioDetalle.idDominioDetalle>0),e.xp6(1),e.hij(" ",o.dominioDetalle.idDominioDetalle>0?"Editar":"Agregar"," "),e.xp6(3),e.Q6J("data",o.dominioDetalleList)("children",o.columns),e.xp6(5),e.Q6J("disabled",o.btnSubmit)}},dependencies:[M._Y,M.Fj,M.Wl,M.JJ,M.JL,M.Q7,M.nD,M.On,M.F,P.O5,J.$,B.w9,s.Np,s.Y5],encapsulation:2})}var ne=a(62861);function te(l,i){if(1&l){const n=e.EpF();e.TgZ(0,"div",7),e.NdJ("click",function(){e.CHM(n);const h=e.oxw();return e.KtG(h.agregar())}),e.TgZ(1,"button",8),e._uU(2,"Agregar Dominio"),e.qZA()()}}class O{constructor(i,n,o,h,r){this.mensajeService=i,this.dominioService=n,this.accesoService=o,this.modalService=h,this.bsModalRef=r,this.tieneAccesoAgregar=!1,this.accesoEditar=D.v.EDITAR_DOMINIO,this.accesoEliminar=D.v.ELIMINAR_DOMINIO,this.HEADER_GRID="Dominios",this.MENSAJE_EXITO_ELIMINAR="El dominio ha sido eliminado",this.TITULO_MODAL_ELIMINAR="Eliminar Dominio",this.columnaEditar=Object.assign({action:d.g.GRID_ACCION_EDITAR,title:"Editar",acceso:this.accesoEliminar,cellRendererSelector:t=>({component:"actionButton",params:{disabled:!1}})},d.g.CONFIG_COLUMN_ACTION),this.columnaEliminar=Object.assign({action:d.g.GRID_ACCION_ELIMINAR,title:"Eliminar",acceso:this.accesoEliminar,cellRendererSelector:t=>({component:"actionButton",params:{disabled:!1}})},d.g.CONFIG_COLUMN_ACTION),this.columns=[{headerName:"Dominio",field:"nombre",minWidth:150},{headerName:"Descripci\xf3n",field:"descripcion",minWidth:150},this.columnaEditar,this.columnaEliminar]}ngOnInit(){this.accesoService.tieneAcceso(D.v.AGREGAR_DOMINIO).subscribe({next:i=>{this.tieneAccesoAgregar=i}}),this.consultarGrid()}consultarGrid(){this.dominioService.consultarTodosParaGrid().subscribe(i=>{this.dominioList=i})}onGridClick(i){i.accion!==d.g.GRID_ACCION_EDITAR?i.accion!==d.g.GRID_ACCION_ELIMINAR||this.eliminar(i.data):this.editar(i.data.idDominio)}agregar(){const i={accion:d.g.COMPONENT_ACCION_AGREGAR};this.bsModalRef=this.modalService.show(E,{initialState:i,...d.g.CONFIG_MODAL_MEDIUM}),this.bsModalRef.content.onClose=n=>{n&&this.consultarGrid(),this.bsModalRef.hide()}}editar(i){this.dominioService.consultar(i).subscribe(n=>{const o={accion:d.g.COMPONENT_ACCION_EDITAR,data:n};this.bsModalRef=this.modalService.show(E,{initialState:o,...d.g.CONFIG_MODAL_LARGE}),this.bsModalRef.content.dominio=n,n.fechaMinima&&(this.bsModalRef.content.dominio.fechaMinima=new Date(R(n.fechaMinima).format("MM/DD/YYYY"))),n.fechaMaxima&&(this.bsModalRef.content.dominio.fechaMaxima=new Date(R(n.fechaMaxima).format("MM/DD/YYYY"))),this.bsModalRef.content.accion=d.g.MODAL_ACCION_EDITAR,this.bsModalRef.content.onClose=h=>{h&&this.consultarGrid(),this.bsModalRef.hide()}})}eliminar(i){this.mensajeService.modalConfirmacion("\xbfDesea eliminar el dominio <strong>"+i.nombre+"</strong>?",this.TITULO_MODAL_ELIMINAR).then(n=>{this.dominioService.eliminar(i.idDominio).subscribe(o=>{this.mensajeService.modalExito(this.MENSAJE_EXITO_ELIMINAR),this.consultarGrid()})})}static#e=this.\u0275fac=function(n){return new(n||O)(e.Y36(x.V),e.Y36(f.S),e.Y36(ne.Q),e.Y36(m.tT),e.Y36(m.UZ))};static#i=this.\u0275cmp=e.Xpm({type:O,selectors:[["ng-component"]],decls:9,vars:7,consts:[[1,"contenedor"],[1,"titulo-contenedor"],[1,"cuerpo-contenedor"],[1,"row"],[1,"col-md-12"],["class","contenedor-agregar",3,"click",4,"ngIf"],[3,"headerName","data","children","disableDelete","accesoEditar","accesoEliminar","event"],[1,"contenedor-agregar",3,"click"],[1,"btn-agregar"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Dominios"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e.YNc(6,te,3,0,"div",5),e.TgZ(7,"app-grid-general",6),e.NdJ("event",function(r){return o.onGridClick(r)}),e._uU(8," > "),e.qZA()()()()()),2&n&&(e.xp6(6),e.Q6J("ngIf",o.tieneAccesoAgregar),e.xp6(1),e.Q6J("headerName",o.HEADER_GRID)("data",o.dominioList)("children",o.columns)("disableDelete",!0)("accesoEditar",o.accesoEditar)("accesoEliminar",o.accesoEliminar))},dependencies:[P.O5,J.$],encapsulation:2})}const ae=[{path:"",component:O,canActivate:[A.m],data:{title:"Consulta",acceso:D.v.CONSULTAR_DOMINIO}}];class N{static#e=this.\u0275fac=function(n){return new(n||N)};static#i=this.\u0275mod=e.oAB({type:N});static#o=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(ae),p.Bz]})}class y{static#e=this.\u0275fac=function(n){return new(n||y)};static#i=this.\u0275mod=e.oAB({type:y});static#o=this.\u0275inj=e.cJS({providers:[f.S,g],imports:[N,u.m,_.Z,s.kn,Z.f,m.zk.forChild()]})}},8816:(L,C,a)=>{a.d(C,{Y:()=>s,f:()=>m});var e=a(37340),c=a(94650);const g="400ms cubic-bezier(0.4,0.0,0.2,1)",f=[(0,e.oB)({height:0,visibility:"hidden"}),(0,e.jt)(g,(0,e.oB)({height:"*",visibility:"visible"}))],Z=[(0,e.oB)({height:"*",visibility:"visible"}),(0,e.jt)(g,(0,e.oB)({height:0,visibility:"hidden"}))];class s{constructor(u,p,D){this._el=u,this._renderer=p,this.collapsed=new c.vpe,this.collapses=new c.vpe,this.expanded=new c.vpe,this.expands=new c.vpe,this.isExpanded=!0,this.collapseNewValue=!0,this.isCollapsed=!1,this.isCollapse=!0,this.isCollapsing=!1,this.isAnimated=!1,this._display="block",this._stylesLoaded=!1,this._COLLAPSE_ACTION_NAME="collapse",this._EXPAND_ACTION_NAME="expand",this._factoryCollapseAnimation=D.build(Z),this._factoryExpandAnimation=D.build(f)}set display(u){this._display=u,"none"!==u?this.isAnimated?this.toggle():this.show():this.hide()}set collapse(u){this.collapseNewValue=u,(!this._player||this._isAnimationDone)&&(this.isExpanded=u,this.toggle())}get collapse(){return this.isExpanded}ngAfterViewChecked(){this._stylesLoaded=!0,this._player&&this._isAnimationDone&&(this._player.reset(),this._renderer.setStyle(this._el.nativeElement,"height","*"))}toggle(){this.isExpanded?this.hide():this.show()}hide(){this.isCollapsing=!0,this.isExpanded=!1,this.isCollapsed=!0,this.isCollapsing=!1,this.collapses.emit(this),this._isAnimationDone=!1,this.animationRun(this.isAnimated,this._COLLAPSE_ACTION_NAME)(()=>{this._isAnimationDone=!0,this.collapseNewValue!==this.isCollapsed&&this.isAnimated?this.show():(this.collapsed.emit(this),this._renderer.setStyle(this._el.nativeElement,"display","none"))})}show(){this._renderer.setStyle(this._el.nativeElement,"display",this._display),this.isCollapsing=!0,this.isExpanded=!0,this.isCollapsed=!1,this.isCollapsing=!1,this.expands.emit(this),this._isAnimationDone=!1,this.animationRun(this.isAnimated,this._EXPAND_ACTION_NAME)(()=>{this._isAnimationDone=!0,this.collapseNewValue!==this.isCollapsed&&this.isAnimated?this.hide():(this.expanded.emit(this),this._renderer.removeStyle(this._el.nativeElement,"overflow"))})}animationRun(u,p){if(!u||!this._stylesLoaded)return A=>A();this._renderer.setStyle(this._el.nativeElement,"overflow","hidden"),this._renderer.addClass(this._el.nativeElement,"collapse");const D=p===this._EXPAND_ACTION_NAME?this._factoryExpandAnimation:this._factoryCollapseAnimation;return this._player&&this._player.reset(),this._player=D.create(this._el.nativeElement),this._player.play(),A=>this._player?.onDone(A)}}s.\u0275fac=function(u){return new(u||s)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(e._j))},s.\u0275dir=c.lG2({type:s,selectors:[["","collapse",""]],hostVars:9,hostBindings:function(u,p){2&u&&(c.uIk("aria-hidden",p.isCollapsed),c.ekj("collapse",p.isCollapse)("in",p.isExpanded)("show",p.isExpanded)("collapsing",p.isCollapsing))},inputs:{display:"display",isAnimated:"isAnimated",collapse:"collapse"},outputs:{collapsed:"collapsed",collapses:"collapses",expanded:"expanded",expands:"expands"},exportAs:["bs-collapse"]});class m{static forRoot(){return{ngModule:m,providers:[]}}}m.\u0275fac=function(u){return new(u||m)},m.\u0275mod=c.oAB({type:m}),m.\u0275inj=c.cJS({})}}]);