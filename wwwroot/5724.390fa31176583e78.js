"use strict";(self.webpackChunkroadis_app=self.webpackChunkroadis_app||[]).push([[5724],{27742:(p,f,o)=>{o.d(f,{Z:()=>_});var i=o(94650),v=o(24006);class _{constructor(d,s){this.confirmarContrasena=d,this.reversa=s}validate(d){let s=d.value;const e=d.root.get(this.confirmarContrasena);return null===s&&(s=""),e&&null===e.value&&e.setValue(""),e&&s!==e.value&&!this.esReversa()?{confirmacionContrasena:{valido:!1}}:(e&&s===e.value&&this.esReversa()&&(e.errors&&delete e.errors.confirmacionContrasena,e.errors&&0==Object.keys(e.errors).length&&e.setErrors(null)),e&&""!==e.value&&s!==e.value&&this.esReversa()&&e.setErrors({confirmacionContrasena:{valido:!1}}),null)}esReversa(){return!!this.reversa&&"true"===this.reversa}static#e=this.\u0275fac=function(s){return new(s||_)(i.$8M("appConfirmacionContrasena"),i.$8M("reversa"))};static#n=this.\u0275dir=i.lG2({type:_,selectors:[["","appConfirmacionContrasena","","formControlName",""],["","appConfirmacionContrasena","","formControl",""],["","appConfirmacionContrasena","","ngModel",""]],features:[i._Bn([{provide:v.Cf,useExisting:(0,i.Gpc)(()=>_),multi:!0}])]})}},61901:(p,f,o)=>{o.d(f,{q:()=>m});var i=o(24006),v=o(94650);class m{constructor(){this.validator=function _(){const d=/[0-9]+/,s=/[A-Z]+/,e=/[a-z]+/,b=/[^a-zA-Z0-9]+/;return u=>{if(void 0!==u.value&&null!==u.value&&""!==u.value){const c={formatoContrasena:{}};if(u.value.length<8)return c.formatoContrasena.longitud={invalid:!0,size:8},c;if(c.formatoContrasena.longitud=null,!d.test(u.value))return c.formatoContrasena.numeros=!0,c;if(c.formatoContrasena.numeros=!1,!s.test(u.value))return c.formatoContrasena.mayuscula=!0,c;if(!e.test(u.value))return c.formatoContrasena.minuscula=!0,c;if(!b.test(u.value))return c.formatoContrasena.simbolo=!0,c;c.formatoContrasena.simbolo=!1}return null}}()}validate(s){return this.validator(s)}static#e=this.\u0275fac=function(e){return new(e||m)};static#n=this.\u0275dir=v.lG2({type:m,selectors:[["","appFormatoContrasena",""]],features:[v._Bn([{provide:i.Cf,useExisting:m,multi:!0}])]})}},3338:(p,f,o)=>{o.d(f,{b:()=>i});class i{constructor(){}}},5724:(p,f,o)=>{o.r(f),o.d(f,{RestablecerContrasenaComponent:()=>C});var i=o(24006),v=o(90429),_=o(9116),m=o(3338),d=o(36895),s=o(41283),e=o(94650),b=o(14706),u=o(27742),c=o(61901);function x(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"i",30),e.NdJ("click",function(){e.CHM(n);const a=e.oxw(2);return e.KtG(a.verContra=!a.verContra)}),e.qZA()}}function h(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"i",31),e.NdJ("click",function(){e.CHM(n);const a=e.oxw(2);return e.KtG(a.verContra=!a.verContra)}),e.qZA()}}function M(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"La contrase\xf1a es requerida"),e.qZA())}function T(t,r){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&t){e.oxw(3);const n=e.MAs(11);e.xp6(1),e.hij(" La contrase\xf1a debe tener un m\xednimo de ",null==n.errors.formatoContrasena.longitud?null:n.errors.formatoContrasena.longitud.size," caracteres ")}}function Z(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a debe tener al menos un n\xfamero "),e.qZA())}function A(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a debe tener al menos una letra mayuscula "),e.qZA())}function E(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a debe tener al menos una letra minuscula "),e.qZA())}function R(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a debe tener al menos un s\xedmbolo "),e.qZA())}function O(t,r){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,T,2,1,"div",11),e.YNc(2,Z,2,0,"div",11),e.YNc(3,A,2,0,"div",11),e.YNc(4,E,2,0,"div",11),e.YNc(5,R,2,0,"div",11),e.qZA()),2&t){e.oxw(2);const n=e.MAs(11);e.xp6(1),e.Q6J("ngIf",null==n.errors.formatoContrasena.longitud?null:n.errors.formatoContrasena.longitud.invalid),e.xp6(1),e.Q6J("ngIf",n.errors.formatoContrasena.numeros),e.xp6(1),e.Q6J("ngIf",n.errors.formatoContrasena.mayuscula),e.xp6(1),e.Q6J("ngIf",n.errors.formatoContrasena.minuscula),e.xp6(1),e.Q6J("ngIf",n.errors.formatoContrasena.simbolo)}}function P(t,r){if(1&t&&(e.TgZ(0,"div",32),e.YNc(1,M,2,0,"div",11),e.YNc(2,O,6,5,"div",11),e.qZA()),2&t){e.oxw();const n=e.MAs(11);e.xp6(1),e.Q6J("ngIf",n.errors.required),e.xp6(1),e.Q6J("ngIf",n.errors.formatoContrasena)}}function I(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"i",30),e.NdJ("click",function(){e.CHM(n);const a=e.oxw(2);return e.KtG(a.verConfirma=!a.verConfirma)}),e.qZA()}}function F(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"i",31),e.NdJ("click",function(){e.CHM(n);const a=e.oxw(2);return e.KtG(a.verConfirma=!a.verConfirma)}),e.qZA()}}function D(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1," La confirmaci\xf3n de la contrase\xf1a es requerida "),e.qZA())}function J(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a no coincide "),e.qZA())}function U(t,r){if(1&t&&(e.TgZ(0,"div",32),e.YNc(1,D,2,0,"div",11),e.YNc(2,J,2,0,"div",11),e.qZA()),2&t){e.oxw();const n=e.MAs(23);e.xp6(1),e.Q6J("ngIf",n.errors.required),e.xp6(1),e.Q6J("ngIf",n.errors.confirmacionContrasena&&!n.errors.required)}}function q(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",12)(1,"div",5)(2,"div",13),e._uU(3,"Ingresa tu nueva contrase\xf1a:"),e.qZA()(),e.TgZ(4,"div",5)(5,"div",14)(6,"div",15)(7,"label",16),e._uU(8,"Contrase\xf1a"),e.qZA(),e.TgZ(9,"div",17)(10,"input",18,19),e.NdJ("ngModelChange",function(a){e.CHM(n);const g=e.oxw();return e.KtG(g.usuario.contrasenaActualizada=a)}),e.qZA(),e.TgZ(12,"span",20),e.YNc(13,x,1,0,"i",21),e.YNc(14,h,1,0,"i",22),e.qZA(),e.YNc(15,P,3,2,"div",23),e.qZA()()()(),e.TgZ(16,"div",5)(17,"div",14)(18,"div",15)(19,"label",16),e._uU(20,"Confirmar Contrase\xf1a"),e.qZA(),e.TgZ(21,"div",17)(22,"input",24,25),e.NdJ("ngModelChange",function(a){e.CHM(n);const g=e.oxw();return e.KtG(g.confirmacionContrasena=a)}),e.qZA(),e.TgZ(24,"span",20),e.YNc(25,I,1,0,"i",21),e.YNc(26,F,1,0,"i",22),e.qZA(),e.YNc(27,U,3,2,"div",23),e.qZA()()()(),e.TgZ(28,"div",26)(29,"div",27)(30,"button",28),e._uU(31,"Cancelar"),e.qZA()(),e.TgZ(32,"div",27)(33,"button",29),e._uU(34,"Guardar e ir a Login"),e.qZA()()()()}if(2&t){const n=e.MAs(11),l=e.MAs(23),a=e.oxw();e.xp6(10),e.Q6J("ngModel",a.usuario.contrasenaActualizada)("type",a.verContra?"text":"password"),e.xp6(3),e.Q6J("ngIf",!a.verContra),e.xp6(1),e.Q6J("ngIf",a.verContra),e.xp6(1),e.Q6J("ngIf",n.errors&&n.touched),e.xp6(7),e.Q6J("ngModel",a.confirmacionContrasena)("type",a.verConfirma?"text":"password"),e.xp6(3),e.Q6J("ngIf",!a.verConfirma),e.xp6(1),e.Q6J("ngIf",a.verConfirma),e.xp6(1),e.Q6J("ngIf",l.errors&&l.touched),e.xp6(3),e.Q6J("disabled",!1),e.xp6(3),e.Q6J("disabled",!1)}}const y=function(){return["/login"]};function L(t,r){1&t&&(e.TgZ(0,"div")(1,"div",33)(2,"div",5)(3,"div",34),e._uU(4," Tu contrase\xf1a ha sido restablecida correctamente, ahora ya podr\xe1s reiniciar tu acceso para iniciar sesi\xf3n. "),e.qZA()(),e.TgZ(5,"div",35)(6,"span",36),e._uU(7,"Regresar"),e.qZA()()()()),2&t&&(e.xp6(6),e.Q6J("routerLink",e.DdM(1,y)))}class C{constructor(r,n,l){this.restablecerContrasenaService=r,this.router=n,this.route=l,this.btnSubmit=!1,this.contrasenaRestablecida=!1,this.validacionCorrecta=!1,this.verConfirma=!1,this.verContra=!1,this.usuario=new m.b}ngOnInit(){this.route.queryParams.subscribe(r=>{this.validarParametrosNecesarios(r),this.validarActualizarContrasena(r)})}redirigirInicio(){this.router.navigate(["/login"])}validarParametrosNecesarios(r){(!r||!r.id||!r.tkn)&&this.redirigirInicio()}validarActualizarContrasena(r){this.usuario.correo=r.id,this.usuario.clave=r.tkn,this.restablecerContrasenaService.validarActualizarContrasena(this.usuario).subscribe(n=>{n||this.redirigirInicio(),this.validacionCorrecta=n},n=>this.redirigirInicio())}restablecerPassword(r){v.CW(r),r.valid&&(this.btnSubmit=!0,this.restablecerContrasenaService.procesarActualizacionContrasena(this.usuario).subscribe(n=>{this.contrasenaRestablecida=!0},n=>this.btnSubmit=!1))}static#e=this.\u0275fac=function(n){return new(n||C)(e.Y36(b.e),e.Y36(_.F0),e.Y36(_.gz))};static#n=this.\u0275cmp=e.Xpm({type:C,selectors:[["app-restablecer-contrasena"]],standalone:!0,features:[e.jDz],decls:14,vars:2,consts:[[1,"logos","mt-5",2,"width","20%"],["src","assets/img/login/Logo_ROADIS-svg.svg",2,"padding","0 20px","width","50%"],["src","assets/img/login/Logo_SIREapp.svg",2,"padding","0 20px","width","50%"],[1,"divisor-encabezado"],[1,"contenedor-restablecer"],[1,"row"],[1,"titulo","mb-3"],[1,"contenedor-login"],["novalidate","novalidate",3,"ngSubmit"],["contrasenasForm","ngForm"],["class","sub-contenedor-login mb-0",4,"ngIf"],[4,"ngIf"],[1,"sub-contenedor-login","mb-0"],[1,"col-md-12","mt-3","mb-3",2,"font-size","large"],[1,"col-md-12"],[1,"form-group"],[1,"label-input","required-label"],[1,"relativo"],["name","contrasena","maxlength","50","required","required","autocomplete","off","appFormatoContrasena","","appConfirmacionContrasena","confirmacionContrasena","reversa","true",1,"form-control",3,"ngModel","type","ngModelChange"],["contrasenaModel","ngModel"],[1,"verContra"],["class","fa-regular fa-eye",3,"click",4,"ngIf"],["class","fa-regular fa-eye-slash",3,"click",4,"ngIf"],["class","error",4,"ngIf"],["name","confirmacionContrasena","maxlength","50","required","required","autocomplete","off","appConfirmacionContrasena","contrasena","reversa","true",1,"form-control",3,"ngModel","type","ngModelChange"],["contrasenaConfirmacionModel","ngModel"],[1,"row","footer"],[1,"col-md-6","titulo-4","text-center"],["type","submit","routerLink","/login",1,"btn-secundario",3,"disabled"],["type","submit",1,"btn-ingresar",3,"disabled"],[1,"fa-regular","fa-eye",3,"click"],[1,"fa-regular","fa-eye-slash",3,"click"],[1,"error"],[1,"sub-contenedor-login"],[1,"col-md-12","titulo-5","mb-3","mt-3"],[1,"text-center","mt-4"],[2,"cursor","pointer",3,"routerLink"]],template:function(n,l){if(1&n){const a=e.EpF();e.TgZ(0,"div",0),e._UZ(1,"img",1)(2,"img",2)(3,"hr",3),e.qZA(),e.TgZ(4,"div",4)(5,"div")(6,"div",5)(7,"div",6),e._uU(8,"Recuperaci\xf3n de contrase\xf1a"),e.qZA()(),e.TgZ(9,"div",7)(10,"form",8,9),e.NdJ("ngSubmit",function(){e.CHM(a);const N=e.MAs(11);return e.KtG(l.restablecerPassword(N))}),e.YNc(12,q,35,12,"div",10),e.YNc(13,L,8,2,"div",11),e.qZA()()()()}2&n&&(e.xp6(12),e.Q6J("ngIf",!l.contrasenaRestablecida&&l.validacionCorrecta),e.xp6(1),e.Q6J("ngIf",l.contrasenaRestablecida))},dependencies:[d.ez,d.O5,i.u5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.nD,i.On,i.F,_.Bz,_.rH,s.Z,u.Z,c.q],styles:[".contenedor-restablecer[_ngcontent-%COMP%]{position:relative;top:0%;left:10%;max-width:400px;border:0px;border-radius:10px;padding:2rem;background:transparent;color:#000}.titulo[_ngcontent-%COMP%]{font-size:x-large;color:#5079c9}.label-input[_ngcontent-%COMP%]{font-size:inherit}button[_ngcontent-%COMP%]{width:100%!important;margin-top:10px;margin-left:0}.btn-ingresar[_ngcontent-%COMP%]{font-size:small}.divisor-encabezado[_ngcontent-%COMP%]{height:10px;border:0px;background:red;background:linear-gradient(to right,#F7A823 50%,#F2F2F2 0%,#F2F2F2 100%);opacity:100%;z-index:10}.footer[_ngcontent-%COMP%]{display:flex;align-items:center}.guardar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#000;border:4px #60147c solid;background-color:#fff;font-size:small}.cancelar[_ngcontent-%COMP%]{padding:10px 0;display:flex;justify-content:center;text-align:center;align-items:center}.cancelar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#d1d1d1;border:0px}.verContra[_ngcontent-%COMP%]{position:absolute;display:block;cursor:pointer;top:50%;right:10px;transform:translateY(-50%)}.relativo[_ngcontent-%COMP%]{position:relative}"]})}}}]);